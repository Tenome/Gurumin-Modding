//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00000
int main()
{
////NEW GAME

	MapEnable(1);
	Black(0,100,0);
	Scop(0);
	GetItem(4);
	KaguTest(20008,0);
	if (ch[430])
	{
		Soubi(ch[430]);
	}
	if (GetGP() < 100)
	{
		SetGP(100);
	}

	LoadMap(2);
	ch[442] = 1;
	CharPos(0,0,0,50);
	Unlock();
	MapEvent(1);

	Camera(0,650,0,255);
	KaguTest(30059,0);
//	Wait(15);
	Camera(-1,0,0,0);
	KaguTest(20025,0);

//	PlayMMV3("op.mv3",1);
	Black(0,100,0);
//	Black(0,0,30);

	SetSavePos();

	//Wait(30);
	
	Mouse(0);
	PlayMovie("open1_1.txt",0);
	Mouse(1);
//	BGM(5);
	
	LoadMap(2);
	ch[442] = 1;
	CharPos(0,0,0,50);	
	CharPos(20,51,-110,0);
	KaguTest(30059,0);
	Wait(10);
	
	ch[400] = 20;
	ch[420] = 556;
	ch[421] = -15;
	ch[422] = 255;
	ch[423] = 26;
	ch[424] = -50;
	ch[425] = 68;
	KaguTest(30019,1);
	CrossFade()
	Black(0,100,0);
	Black(0,0,30);
	Wait(30);
	
	ch[2078] = rand() % 5;

	//ハイパボリック
	Message(20,"ここがおまえさんの部屋じゃよ","","","");

	//パリン
	Message(0,"まあまあ広いわね","","","");

	//ハイパボリック
	Message(20,"それにしてもおまえさんの","両親にも困ったものだのう","","");

	//パリン
	Message(0,"なんでよ？","","","");

	//ハイパボリック
	Message(20,"遺跡を発掘するために","全国を渡り歩いたかと思えば…","","");
	Message(20,"今度は子供を置いて","さっさと外国へ行ってしまうとは","","");

	//パリン
	Message(0,"仕事なんだから仕方ないわ","","","");

	//ハイパボリック
	Message(20,"さみしくはないのか？","","","");

	//パリン
	Message(0,"もう慣れっこよ","","","");
	Message(0,"そうそう、わたし、","ここで仲良しの友達を見つけるわ","","");

	//ハイパボリック
	Message(20,"ほう？","","","");

	//パリン
	Message(0,"今まで知り合いができても","仲良くなる前にすぐ引越しだったから","","");
	Message(0,"今度は２人が帰ってくるまで","当分ここにいられるはずでしょ","","");

	//ハイパボリック
	Message(20,"なるほど、しかしのう…","","","");

	//パリン
	Message(0,"どうしたの？","","","");

	//ハイパボリック
	Message(20,"いや、実はな…","","","");
	Message(20,"ここは鉱山へ出稼ぎに","来る者ばかりが集まる街でな…","","");
	Message(20,"おまえさんのような","子供は１人もおらんのじゃよ","","");

	//パリン
	Message(0,"………………","","","");
	Message(0,"がーん！！！","","","");

	//ハイパボリック
	Message(20,"まあ、ケーキ屋のファンあたりなら","友達になってくれるかもしれん","","");
	Message(20,"あとで街のなかを","ぶらついてみるといいじゃろう","","");
//	ch[420] = 20;
//	KaguTest(30063,0); // パリンはじいさんをみつめる
	KaguTest(12007,20);	// パリンはじいさんをみつめる
	Look(0,20);
	ch[420] = 300;
	ch[421] = -122;
	ch[423] = 6;
	KaguTest(30065,20);
	ch[420] = 3;
	ch[400] = -1;
	KaguTest(30064,20);
	ch[420] = 300;
	ch[421] = -300;
	KaguTest(30065,20);
	KaguTest(12007,0);
	CharPos(20,-200000,0,0);
	
	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_01.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	

	KaguTest(30019,0);

	KaguTest(30063,-1,);	

//	Message(0,"家の中も退屈よね","","","");
//	Message(0,"今日は何して遊ぼうかな","","","");
	ch[400] = -1;
	
//	PostScr(28);
	
	// 完全クリアしたことあるかチェック
	KaguTest(99993,0);
	if (ch[420] || ch[421])
	{
		ch[3960] = 1;
	}
	else
	{
		ch[3960] = 0;
	}

	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
// お菓子屋：ファン
#Script:00002
int main()
{
	//会話メッセージを出す
	ch[400] = 3;
	ch[203]++;
	ch[3976] = 100;
	
	int qnuke;
	qnuke = 0;
	
	KaguTest(20001,74);
	if (ch[430])
	{
		if(!ch[2058])
		{
			ch[2058] = 1;
			//ファン
			Message(3,"パリンちゃん、聞いてー！","","","");

			//パリン
			Message(0,"どうしたの？","","","");

			//ファン
			Message(3,"さっき、またケーキが","消える現象があったのよー","","");
			Message(3,"すかさず消えた場所でほうきを","振り回したら何かにぶつかったの","","");

			//パリン
			Message(0,"（……まさかね）","","","");

			//ファン
			Message(3,"それ以来、不思議なことに","怪現象がすっかりおさまったわー","","");
			Message(3,"これって、ひょっとすると…","","","");

			//パリン
			Message(0,"ギクッ","","","");

			//ファン
			Message(3,"この店の味を盗むために","某国が派遣したスパイさんの","しわざだったりしてー","");

			//パリン
			Message(0,"んなワケないって","","","");
		}
		else
		{
			//ファン
			Message(3,"さっき、またケーキが","消える現象があったのよー","","");
			Message(3,"すかさず消えた場所でほうきを","振り回したら何かにぶつかったの","","");
			Message(3,"それ以来、不思議なことに","怪現象がすっかりおさまったわー","","");
		}
		Message(3,"それはそうと","何か買ってく？","","");

		// モトロマジック適応
		if (ch[3975] == 0)
		{
			ch[3975] = 100;
		}
		ch[3976] = (ch[3976] * ch[3975]) / 100;
		
		ShopStart();
		ShopItem(4);
		ShopItem(5);
		ShopItem(20);
	//	ShopItem(18);
	//	if (story == 6 && ch[2621] && ch[2639])
	//	{
	//		ShopItem(22);
	//	}
		ShopEnd();
		
		Message(3,"またきてね","","","");
		ch[400] = -1;
		return 0;
	}

	if (ch[2007] && !ch[2018])
	{
		// クエスト中
		ch[400] = 3;
		if (ch[2002])
		{
			// のぞきクエスト
			if (ch[2003] < 3)
			{
				//ファン
				Message(3,"あら、パリンちゃん","","","");
				Message(3,"ごめんね、ケーキが","今、焼きあがったところで","手がはなせないのー","");
				Message(3,"あとでまた来てくれるかな？","","","");
			}
			else
			{
				if (ch[2003] == 4)
				{
					Message(3,"シリンダーさんなら","珍しく朝早くから","鉱山へ出かけていったわ","");
					Message(3,"あの人も真面目に仕事するのねー。","おかげで今日はとても平和よ","","");
					Message(3,"…でも、そろそろ","帰ってくる時間ね","","");
				}
				else
				{
					//パリン
					Message(0,"ファン姉！","シリンダーさん来なかった？","","");

					//ファン
					Message(3,"え、シリンダーさん？","朝にここへ来たわよー","","");
					Message(3,"あいかわらず、しつこく","話しかけられて困っちゃう","","");

					//パリン
					Message(0,"朝じゃなくて、","ついさっきのことなんだけど","","");

					//ファン
					Message(3,"えっと、今は","街にいないと思うわー","","");
					Message(3,"珍しく朝早くから","鉱山へ出かけていったもの","","");

					//パリン
					Message(0,"じゃあ、今は鉱山の中ってこと？","","","");

					//ファン
					Message(3,"そうだと思うわよ。","あの人も真面目に仕事するのねー","","");
					Message(3,"おかげで今日はとても平和よ。","でも、そろそろ帰ってくる時間ね","","");
					ch[2003] = 4;
					ch[2008] = 1;
				}
			}
		}
		if (ch[2010])
		{
			// ビラ貼りクエスト中
			qnuke = 1;
		}
//		if (ch[2018])
//		{
//			else
//			{
//				qnuke = 1;
//			}
//		}
		if (ch[2020])
		{
			// プラチナメダルクエスト中
			qnuke = 1;
		}
		
		if (!qnuke)
		{
			ch[400] = -1;
			return 0;
		}
	}
	
	// わらしべクエストチェック
	KaguTest(20001,27);
	if (ch[430])
	{
		//パリン
		Message(0,"ファン姉！","","","");

		//ファン
		Message(3,"あら、パリンちゃん、","面白そうな本を持ってるじゃない","","");

		//パリン
		Message(0,"この少女マンガのこと？","","","");

		//ファン
		Message(3,"たしか、今、人気急上昇中の","新人作家の作品だわー","","");
		Message(3,"ここじゃ、まだ売ってないのよ","","","");

		//パリン
		Message(0,"へー、そうなんだ","","","");

		//ファン
		Message(3,"いいなぁ、さすが都会から","引越ししてきただけあるわね","","");
		Message(3,"ね、ものは相談なんだけど、","その本ゆずってくれないかな？","","");
		Message(3,"代わりに新作のケーキをあげるわよ","","","");

		//パリン
		Message(0,"え、ケーキ？喜んでゆずるわ！","","","");

		//ファン
		Message(3,"ほんと？ありがとう。","じゃあ、これをどうぞ","","");

		//システム
		Mes("『ガトーショコラ』を手に入れた。");
		KaguTest(20022,30);
		KaguTest(20002,27);
		GetItem(30);
		Wait(60);
		
		ch[400] = -1;
		return 0;
	}

	int game;
	game = 0;
	// バイトクエスト発生チェック
	if (!ch[2007] && ch[1513] && !ch[2016] && ch[2501] == 4)
	{
		string text;
		if (!ch[2017])
		{
			// 初回
			//ファン
			Message(3,"あら、パリンちゃん。","その格好は……","","");
			Message(3,"そっかー、借金を返すために","働きに来たのねー","","");

			//パリン
			Message(0,"だから、ケーキ食べたのは","わたしじゃないってば！","","");

			//ファン
			Message(3,"えー、じゃあ","どうしてそんな格好してるの？","","");

			//パリン
			Message(0,"……………………","","","");
			Message(0,"…何でだろ？","","","");

			//ファン
			Message(3,"ふふ、素直じゃないんだからー","","","");
			Message(3,"でも、その心意気は買ったわ。","さ、こっちにいらっしゃい","","");

			//パリン
			Message(0,"だから、ちがうってば～っ！","","","");
			
			Black(0,100,15);
			Wait(15);
			
			ch[2015] = 1;
			LoadMapB(4);
			CharPos(0,0,395,0);
			CharPos(3,98,455,0);
			CharPos(13,-200000,0,0);
			CharPos(15,-200000,0,0);
			CharPos(58,-200000,0,0);
			CharPos(14,-200000,0,0);
			Look(0,3);
			Look(3,0);
			Camera(0,285,-262,361);
			
			Black(0,0,15);
			Wait(15);

			//パリン
			Message(0,"うう、幼少のみそらで","ヌレギヌを着せられて","でっち奉公なんて…","");

			//ファン
			Message(3,"パリンちゃんには","カウンターをお願いするわねー","","");

			//パリン
			Message(0,"わたしって何て","薄幸の美少女なのかしら","","");

			//ファン
			Message(3,"お客さんの注文を","わたしに正しく伝えてね","","");
			Message(3,"それじゃ、スタートぉ！","","","");
			
			PostScr(1295);
			ch[400] = -1;
			return 0;
		}
		else
		{
			// 失敗済
			game = 1;
		}
	}

	if (ch[1571])// && !ch[1538])
	{
		if (ch[203] < 2)
		{
			//ファン
			//ファン
			Message(3,"あのシリンダーさんが","バースデーケーキ用に","ローソクを作ってくれたのよ","");
			Message(3,"あの人ってヘンだけど","いいところもあるのよねー","","");

			//パリン
			Message(0,"え、そうなの？","","","");

			//ファン
			Message(3,"３年前の爆発事故って","実はシリンダーさんが","犯人みたいなんだけどー……","");
			Message(3,"崖から落ちそうな子犬を","あわてて助けようとして、つい","タバコを火薬に落としちゃったそうよ","");

			//パリン
			Message(0,"本当に？","その子犬って","もしかしてプチのこと？","");

			//ファン
			Message(3,"そうみたいよー。","顔にキズがあるもんね","","");

			//パリン
			Message(0,"そうなんだ……","","","");
			Message(0,"…でも、やっぱり素直に","好きにはなれないわ","","");

			//ファン
			Message(3,"ふふー、そうなのよねー","","","");
		}
		else
		{
			//ファン
			Message(3,"シリンダーさんってヘンだけど","いいところもあるのよねー","","");
			Message(3,"何か買ってく？","","","");
		}
		ch[3976] = 100;
	}
	if (ch[1513] && !ch[1571])
	{
		if (ch[203] < 2)
		{
			if (ch[2016])
			{
				Message(3,"困ったわ、バースデーケーキ用の","ローソクがなくなっちゃったのよねー","","");
				Message(3,"ディスクさんのところでも","売り切れてるみたいだし、","どうしたらいいのかしら……","");
			}
			else
			{
				//ファン
				Message(3,"パリンちゃん、ケーキのツケは","働いて返してくれてもオッケーよ","","");
				Message(3,"それなりのカッコをしてくれば","働かせてあげるわー","","");
				//パリン
				Message(0,"だから、盗んだのは","わたしじゃないってば！","","");
				//ファン
				Message(3,"パリンちゃんのせいで","少し高いけど何か買ってく？","","");
			}
		}
		else
		{
			//ファン
			Message(3,"バースデーケーキ用の","ローソクを切らしちゃったのよね","","");
			Message(3,"どうしたものかしら…","","","");
		}
		ch[3976] = 200;
	}
	if (ch[1505] && !ch[1513])
	{
		int kusai;
		kusai = 0;
		if (ch[2532])
		{
			if (ch[203] < 2)
			{
				//ファン
				Message(3,"くんくん…","","","");
				Message(3,"パリンちゃん、","ちょっと汗くさくない？","","");

				//パリン
				Message(0,"き、気のせいでしょ","","","");

				//ファン
				Message(3,"うーん、そうかな？","","","");
				Message(3,"ま、いっか。","ちょっと高いけど何か買ってく？","","");
			}
			else
			{
				//ファン
				Message(3,"ちょっと高いけど何か買ってく？","","","");
			}
			kusai = 1;
			ch[3976] = 150;
		}
		if (!ch[2529] && !kusai)
		{
			if (ch[203] < 2)
			{
				//ファン
				Message(3,"あ、パリンちゃん。","ひょっとして、わたしが","留守にしている間にお店に来た？","");
				//パリン
				Message(0,"ううん、来てないわよ","","","");
				//ファン
				Message(3,"そっかー…","","","");
				Message(3,"ケーキが消える怪現象のせいで","ちょっと高いけど何か買ってく？","","");
			}
			else
			{
				//ファン
				Message(3,"ケーキが消える怪現象のせいで","ちょっと高いけど何か買ってく？","","");
			}
			ch[3976] = 150;
		}
		if (ch[2527] && !kusai)
		{
			Message(3,"あら、パリンちゃん。","ツケのほうは払えそう？","","");
			Message(3,"ちょっと高いけど何か買ってく？","","","");
			ch[3976] = 200;
		}
		if (ch[2529] && !ch[2527] && !kusai)
		{
			if (ch[203] < 2)
			{
				//ファン
				Message(3,"パリンちゃ～ん、ケーキのお金","ちゃんと払ってくださいね","","");
				Message(3,"食べた分はちゃんと","ツケにしてありますから","","");
				//パリン
				Message(0,"失礼ね、お金なら","いつも払ってるでしょ？","","");
				//ファン
				Message(3,"トボけてもダメですよー","","","");
				Message(3,"わたしの留守中に店の","ケーキ全部食べちゃったでしょ？","","");
				Message(3,"パリンちゃんがお金を払うまで","ケーキはみんな値上げですー","","");
				//パリン
				Message(0,"そんなー！","","","");
				Message(0,"ヌレギヌだわ…","","","");
				//ファン
				Message(3,"パリンちゃんのせいで","値段が高いけど何か買ってく？","","");

				ch[2085] = 1;
			}
			else
			{
				//ファン
				Message(3,"パリンちゃんのせいで","値段が高いけど何か買ってく？","","");
			}
			ch[3976] = 200;
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (ch[203] < 2)
		{
			//ファン
			Message(3,"聞いて、パリンちゃん！","","","");
			//パリン
			Message(0,"どうしたの？","","","");
			//ファン
			Message(3,"ケーキが消える","怪現象がまた始まったのよ！","","");
			Message(3,"だから、値上げよ！","","","");
			//パリン
			Message(0,"えーっ！！","きっと、またポコのしわざね","","");
			//ファン
			Message(3,"え、誰のしわざなの？","","","");
			//パリン
			Message(0,"ううん、何でもないわ","","","");
			//ファン
			Message(3,"ケーキが消える怪現象のせいで","ちょっと高いけど何か買ってく？","","");
			ch[2557] = 1;
		}
		else
		{
			//ファン
			Message(3,"ケーキが消える怪現象のせいで","ちょっと高いけど何か買ってく？","","");
		}
		ch[3976] = 150;
	}
	if (ch[507] && !ch[1542])
	{
		if (ch[203] < 2)
		{
			//ファン
			Message(3,"シリンダーさんって店に来るたび、","しつこく話しかけてくるの","","");
			Message(3,"でも、常連だから","なかなか文句が言えないわー","","");
			Message(3,"ところでパリンちゃん。","何か買ってくー？","","");
		}
		else
		{
			//ファン
			Message(3,"値段も元通りにしたし、","何か買ってくー？","","");
		}
	}
	if (ch[3200] && !ch[507])
	{
//		if (ch[203] < 2)
//		{
//			//ファン
//			Message(3,"パリンちゃん、聞いてー！","","","");
//			//パリン
//			Message(0,"どうしたの？","","","");
//			//ファン
//			Message(3,"さっき、またケーキが","消える現象があったのよー","","");
//			Message(3,"すかさず消えた場所でほうきを","振り回したら何かにぶつかったの","","");
//			Message(3,"それ以来、不思議なことに","怪現象がすっかりおさまったわー","","");
//			Message(3,"これって、まさか…","","","");
//			//パリン
//			Message(0,"ギクッ","","","");
//			//ファン
//			Message(3,"この店の味を盗むために","某国が派遣したスパイさんの","しわざだったりしてー","");
//			//パリン
//			Message(0,"んなワケないって","","","");
//			//ファン
//			Message(3,"さ、値段も元通りにしたし、","何か買ってくー？","","");
//		}
//		else
//		{
			//ファン
			Message(3,"値段も元通りにしたし、","何か買ってくー？","","");
//		}
	}
	if (ch[2330] && !ch[3200])
	{
		//ファン
		Message(3,"あいかわらずケーキが","消える怪奇現象が続いているのよー","","");
		Message(3,"だから、値上げは継続中よ。","ちょっと高いけど何か買ってく？","","");
		if (ch[203] < 2)
		{
			//パリン
			Message(0,"うう、おこづかいに響くわね","","","");
		}
		ch[3976] = 150;
	}
	if (ch[1545] && !ch[2330])
	{
		if (ch[203] < 2)
		{
			//ファン
			Message(3,"パリンちゃん、聞いてー！","","","");
			//パリン
			Message(0,"どうしたの？","","","");
			//ファン
			Message(3,"目の前でケーキが","次々と消えちゃったのよー","","");
			Message(3,"みんなには悪いけど","予定していたサービスは中止ね","","");
			Message(3,"逆にしばらく値上げさせてもらうわ","","","");
			//パリン
			Message(0,"えー、そんなー！","","","");
			Message(0,"一体だれのしわざよ！！","","","");
			//ファン
			Message(3,"さっぱり分からないの。","ちょっと高いけど何か買ってく？","","");
		}
		else
		{
			//ファン
			Message(3,"ケーキが消える怪現象のせいで","ちょっと高いけど何か買ってく？","","");
		}
		ch[3976] = 150;
	}
	if (ch[2552] && !ch[1545])
	{
		if (ch[203] < 2)
		{
			//ファン
			Message(3,"ふう、朝からシリンダーさんが","しつこくって困っちゃいますー","","");
			Message(3,"ところで、パリンちゃんは","ショートケーキが好きだったよね","","");
			//パリン
			Message(0,"ハッキリ言って大好きね","","","");
			//ファン
			Message(3,"今日のはよく出来てるわよー。","あとでサービスしちゃおうかしら","","");
			//パリン
			Message(0,"ほんと？","","","");
			//ファン
			Message(3,"ふふ、楽しみにしててねー","","","");
		}
		else
		{
			//ファン
			Message(3,"朝からシリンダーさんが","しつこくって困っちゃいますー","","");
			Message(3,"私の邪魔してる暇があったら","さっさと仕事に行ってほしいです","","");
		}
	}
	if (!ch[2552])
	{
		//OP前
		ch[400] = 3;
		if (!ch[2550])
		{
			Message(0,"ショートケーキだ！","","","");
			Message(3,"あらー、かわいいお客さんね。","名前は何て言うの？","","");
			Message(0,"パリンよ","","","");
			Message(3,"パリンちゃんかぁ。","わたしはファンよ、よろしくね","","");
			Message(0,"この街って","本当に子供はいないの？","","");
			Message(3,"そうなのよー、","おとなばかりなのよね","","");
			Message(0,"じゃあ、お姉さんが友達になって","","","");
			Message(3,"私がお友達？","ふふ、いいわよー","","");
			Message(3,"よろしくね、パリンちゃん","","","");
			Message(0,"……………………","","","");
			Message(0,"何だかちがう","","","");
		}
		else
		{
			Message(3,"この街ってときどき","不思議なことが起きるのよね","","");
			Message(0,"たとえば、どんなこと？","","","");
			Message(3,"うーん、内緒","","","");
		}
		
		ch[2550] = 1;
		
		if (ch[2547] && ch[2548] && ch[2549] && ch[2551])
		{
			// 全員と会話済み
			ch[2553] = 1;
		}
		
		ch[400] = -1;
		return 0;
	}

	int story;
	int map;
	string str;

	ch[400] = 7;

	// クエストやるかチェック
	if (game && ch[2501] == 4)
	{
		SelStart(50);
		SelText("購入する",1);
		SelText("バイトする",2);
		SelEnd();
		
		if (ch[50] == 2)
		{
			// バイト
			//ファン
			Message(3,"あら、バイトしてくれるの？","","","");
			
			Black(0,100,15);
			Wait(15);
			
			ch[2015] = 1;
			LoadMapB(4);
			CharPos(0,0,395,0);
			CharPos(3,98,455,0);
			CharPos(13,-200000,0,0);
			CharPos(15,-200000,0,0);
			CharPos(58,-200000,0,0);
			Look(0,3);
			Look(3,0);
			Camera(0,285,-262,361);
			
			Black(0,0,15);
			Wait(15);

			//ファン
			Message(3,"それじゃ、前と同じように","カウンターをお願いするわね","","");
			Message(3,"それじゃ、スタートぉ！","","","");
			ch[400] = -1;
			PostScr(1295);
			return 0;
		}
	}
	

	// モトロマジック適応
	if (ch[3975] == 0)
	{
		ch[3975] = 100;
	}
	ch[3976] = (ch[3976] * ch[3975]) / 100;
	
	ShopStart();
	ShopItem(4);
	ShopItem(5);
	ShopItem(20);
//	ShopItem(18);
//	if (story == 6 && ch[2621] && ch[2639])
//	{
//		ShopItem(22);
//	}
	ShopEnd();
	
	Message(3,"またきてね","","","");

//	Wait(30);
	ch[400] = -1;
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00003
int main()
{
	//薬草、ケアルの使用
	Recover(0,-1,1.0,0.0,10.0);

	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00004
int main()
{
	//バリアー効果
	Special(1);

	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00005
int main()
{
	//リバイバ効果
	Special(2);

	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00014
int main()
{
	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"普段寝起きしているベッドがある。");
	KaguTest(10010,10);
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);
	return 0;

	int a;

	SelStart(50);
	SelText("寝る",1);
	SelText("寝ない",2);
	SelEnd();
	if(ch[50]==1)
	{
		Black(0,100,30);
		Wait(30);
		SE(953);
		Kaifuku();
		Black(0,0,30);
		Wait(30);
	}
	return 0;
}
#EndScript

//110 -> ミニマップ もしくはクリア///////////////////////////////////2/6new!
#Script:00019
int main()
{
	if (ch[2497])
	{
		// 裏マップ
		if (ch[2287] < 1)
		{
//			// 初回クリアなので家具持ってるかチェック
//			KaguTest(20001,59);
//			if (!ch[430])
//			{
//				TekiStop(1);
//				MapEvent(0);
//				Message(0,"まだポコに頼まれた家具を","見つけてないわ。","","");
//				KaguTest(30058,0);
//				while(ch[420])
//				{
//					Walk(ch[421],ch[422],ch[423]);
//					Wait(ch[423]);
//					KaguTest(30058,0);
//				}
//				Walk(0,8,20);
//				Wait(20);
//				MapEvent(1);
//				TekiStop(0);
//				return 0;
//			}
			
		}
		
		// クリア
		KaguTest(40002,0);
		TekiStop(1);
		MapEvent(0);
//		Walk(0,-8,15);
//		Black(0,50,15);
//		Wait(15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2287] < 1)
		{
			ch[2287]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
		
		if (!ch[2626])
		{
//			PlayMovie("poko1.txt",0);
			ch[2626] = 1;
		}
		
		KaguTest(10011,1);
		Wait(1);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
//		KaguTest(20025,0);
		PostScr(1192);
	}
	else
	{
		TekiStop(1);
		
		// 初チュートリアル中？
//		if (!ch[2286])
//		{
//			MapEvent(0);
//			Message(0,"まだプクを見つけてないわ。","","","");
//			KaguTest(30058,0);
//			while(ch[420])
//			{
//				Walk(ch[421],ch[422],ch[423]);
//				Wait(ch[423]);
//				KaguTest(30058,0);
//			}
//
//			Walk(0,8,20);
//			Wait(20);
//			MapEvent(1);
//			return 0;
//		}

		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}

	//	MapEvent(0);
	//	Walk(0,-8,11);
	//	Wait(11);
	//	Event(110);
	//	Walk(0,-5,20);
	//	Wait(20);
	//	MapEvent(1);

	}
}

#EndScript	


///////////////////////////////////////////////////////////////////////////////////////////////////////
// 012 -> 大家の部屋
#Script:00020
int main()
{
//	Walk(5,0,10);
//	Wait(10);
//	Event(111);
//	Walk(5,0,10);
	//体験版用					
	MapEvent(0);
	Black(0,100,15);
	Wait(15);
	Event(222);	
	Wait(5);
	Black(0,0,15);

//	Scop(0);
	
	Camera(0,547,-190,403);
	ch[421] = 547;
	ch[422] = -190;
	ch[423] = 403;
	KaguTest(30010,0);
	Camera(-1,0,0,0);					
	Walk(0,-5,20);					
	Wait(20);
	MapEvent(1);					
}

#EndScript

//12宿屋前->13商店通り////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00021
int main()
{
	MapEvent(0);
	Walk(8,0,11);
	Wait(11);
	Event(111);
	Walk(8,0,20);
	Wait(20);
//	SetSavePos();
	MapEvent(1);
	//体験版用					
//	MapEvent(0);					
//	Walk(0,-8,11);					
//	Wait(11);					
//	MapEvent(1);					
}

#EndScript

//13商店通り->12宿屋前////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00022
int main()
{
	MapEvent(0);
	Walk(-8,0,11);
	Wait(11);
	Event(110);
	Walk(-8,0,20);
	Wait(20);
	MapEvent(1);
}

#EndScript

//13商店通り->14オバケアパート////////////////////////////////////////////////////////////////////////////////////////////////////
// 012 -> 鉱山
#Script:00023
int main()
{
	//体験版用					
	MapEvent(0);
	WaitD(0);
	Message(0,"この先は鉱山だから","子供は入っちゃいけないみたい","","");

	KaguTest(30058,0);
	while(ch[420])
	{
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		KaguTest(30058,0);
	}

	Walk(0,-8,11);
	Wait(11);					
	MapEvent(1);					
	
	//オバケアパートへのワープ		
	//MapEvent(0);					
	//Walk(0,8,11);					
	//Wait(11);					
	//Event(111);					
	//Walk(0,8,10);					
	//Wait(10);						
	//MapEvent(1);					
}

#EndScript

//14オバケアパート->13商店通り////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00024
int main()
{
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-8,25);
	Wait(25);
	MapEvent(1);
}

#EndScript

//14オバケアパート->15駅前////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00025
int main()
{
	MapEvent(0);
	Walk(-8,0,11);
	Wait(11);
	Event(111);
	Walk(-5,0,20);
	Wait(20);
	MapEvent(1);
}

#EndScript

//15駅前->14オバケアパート////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00026
int main()
{
	MapEvent(0);
	Walk(8,0,11);
	Wait(11);
	Event(110);
	Walk(5,0,20);
	Wait(20);
	MapEvent(1);
}

#EndScript

//15駅前->12宿屋前////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00027
int main()
{
	MapEvent(0);
	Walk(0,-8,011);
	Wait(011);
	Event(111);
	Walk(0,-8,25);
	Wait(25);

	MapEvent(1);
}

#EndScript

// 012 -> 101あらため、012 -> 401
#Script:00028
int main()
{
	if (ch[2526] && !ch[2085])
	{
		// ファンまだ
		WaitD(0);
		Message(0,"ショートケーキの値上がりって","どういうことかしら。","","");
		Message(0,"ファン姉に直接聞いてみなくちゃ","","","");
		MapEvent(0);

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}

		Walk(0,-8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		ch[400] = -1;
		return 0;
	}
	if (ch[2526] && !ch[2523])
	{
		// チャッキーまだ
		WaitD(0);
		Message(0,"そういえば、チャッキーが","変なポーズしてたような……","","");
		Message(0,"なんだか気になってきたわ","","","");
		MapEvent(0);

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}

		Walk(0,-8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		ch[400] = -1;
		return 0;
	}

	if (ch[508])
	{
		// マップ移動
		ch[3997] = 0;
		White(0,100,11);
		MapEvent(0);
		Walk(0,8,11);
	}

	if (!ch[508])
	{
		Black(0,100,0);
//		Wait(11);
		Event(112);
		//OPムービー見てない
		Lock();
		Mouse(0);
		KaguTest(20065,-5);
		CharPos(0,0,0,0);
		PlayMovie("open2.txt",0);
		Black(0,100,0);
		SetWaku(0);
		Wait(5);
//		Black(0,0,15);
		Walk(0,-5,1);
		KaguTest(30057,0);
		Mouse(1);
//		BGM(5);
		ch[508] = 1;
		LoadMap(401);
		CharPos(18,0,80,50);
		ch[400] = 118;
		Unlock();

		Black(0,0,30);
		Wait(30);
		MapEvent(1);

	}
	else
	{
		if (!ch[2330] && ch[2317] && ch[2328] && ch[2329])
		{
			// オバケホームもどったムービー見る
			White(0,100,11);
			Wait(11);
			Event(112);
			Mouse(0);
			PlayMovie("home_2.txt",0);
			Black(0,100,0);
			Wait(5);
//			Black(0,0,15);
			Walk(0,5,1);
			KaguTest(30057,0);
			Mouse(1);
//			BGM(5);
//			ch[3982] = 0;
			ch[2330] = 1;

			Black(0,0,30);
			Wait(30);
			MapEvent(1);
			return 0;
		}

		if (!ch[2527] && ch[2523] && ch[2085])
		{
			// スポンサーイベント終了
			Mouse(0);
			ch[2745] = 0;
			PlayMovie("home_3.txt",0);
			Black(0,100,0);
			Wait(5);
//			Black(0,0,15);
			Walk(0,5,1);
			KaguTest(30057,0);
			Mouse(1);
//			BGM(5);
			ch[2527] = 1;
//			ch[3982] = 0;
			Walk(0,5,1);
			KaguTest(30057,0);
//			Black(0,100,0);
//			Black(0,0,30);
//			ResetFade();

//			Wait(30);
//			Black(0,100,15);
			Black(0,0,15);
			Wait(15);
	
//			ch[2527] = 1;
//			ch[3979] = 127;
			KaguTest(30019,0);
//			KaguTest(30072,0);
//			KaguTest(99999,0);
//			ch[298] = 1;

//			PostScr(1235);
			MapEvent(1);
			return 0;
		}
		
		Wait(11);			
		Event(112);

		MMV("home.mmv");

		Walk(0,5,20);
		Wait(5);
		White(0,0,15);
		Wait(15);
		MapEvent(1);
	}
	
	//駅前へ移動		
	//MapEvent(0);		
	//Walk(0,8,011);
	//Wait(011);		
	//Event(110);		
	//Walk(0,8,20);		
	//Wait(20);			
	//MapEvent(1);		
}

#EndScript

//101ダンジョン１->12宿屋前///////////////////1/24new
#Script:00029
int main()
{
	MapEvent(0);							
	Walk(0,-8,11);
	Wait(11);
	ch[3997] = 0;
	Event(111);						
	Event(12);
	Event(1000);
	Walk(0,-8,25);							
	Wait(25);								
	MMV("teet.mmv");
	MapEvent(1);							
}										
#EndScript

//101 -> 102 ///////////////////////////////////2/6new!
#Script:00030
int main()
{
	if (ch[1538])
	{
		MapEvent(0);
		Walk(0,-8,30);
		Wait(30);
		Message(0,"こっちに行く必要は無いわ","","","");
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
		return 0;
	}

	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(130);
	Walk(0,5,20);
	Wait(20);
	MMV("pota.mmv");
	MapEvent(1);
	
	if (!ch[2300])
	{
		GAMEOVER(1);
		// ドリル持ってない、閉じ込められる
		TekiStop(1);
		Wait(60);
		SaveCamera();

		Lock();
		Camera( Door2C(4) , -300 , -1300 , 400 );		
		CrossFade();
		Unlock();
		
		Wait(10);
		Event(107);
		Wait(30);

		Lock();
		Camera( Door2C(2) , -300 , -1300 , 400 );
		CrossFade();
		Unlock();

		Wait(10);
		Event(104);
		Wait(30);
		
		Lock();
		RestoreCamera();
		Camera( -1 , 0 , 0 , 0 );
		CrossFade();
		Unlock();
		
		Wait(10);
	
		TekiStop(0);
	}
}

#EndScript		

//102 -> クリア ///////////////////////////////////2/6new!
#Script:00031
int main()
{
	// クリア
	KaguTest(40002,0);
	TekiStop(1);
	MapEvent(0);
		// 評価表示
	KaguTest(10500,120);

	if (ch[2276] < 1)
	{
		ch[2276]=1;
	}
	
	Wait(90);
	
	Message(0,"","","","");
	
	// ミニフィールドへ戻る
//	Black(0,100,30);
//	Wait(30);
	
	if (!ch[2626])
	{
//		PlayMovie("poko1.txt",0);
		ch[2626] = 1;
	}
	
	KaguTest(10011,1);
	Wait(1);
//	KaguTest(20025,0);
	PostScr(1192);
//	KaguTest(10100,0);
//	KaguTest(99999,0);
//	TekiStop(0);
//	MapEvent(1);
}

#EndScript	

//102 -> 103 ///////////////////////////////////2/6new!
#Script:00032
int main()
{
	ch[2500] = 0;

	KaguTest(40002,0);

	MapEvent(0);

	if (ch[2497])
	{
		Walk(-8,0,11);
	}
	else
	{
		Walk(8,0,11);
	}

	Wait(11);
	Event(120);

	if (ch[2497])
	{
		Walk(-5,0,20);
	}
	else
	{
		Walk(5,0,20);
	}
	
	Wait(20);
	
	// 初めてきた時はプレート説明
//	if (!ch[2303])
//	{
//		ch[2303] = 1;
//
//		// カメラ位置設定
//		ch[420] = -1986;
//		ch[421] = -1091;
//		ch[422] = 500;
//		// 注視点設定
//		ch[423] = -1586;
//		ch[424] = -691;
//		ch[425] = 0;
//		
//		SaveCamera();
//		KaguTest(30019,1);
////		CrossFade();
//		
//		Wait(30);
//		
//		KaguTest(10006,2);
//		ch[423] = -46;
//		KaguTest(10007,4);
//		KaguTest2(10008,0,"異次元プレート");
//		KaguTest2(10008,1,"このプレートで、裏の世界と行き来できます。");
//		KaguTest2(10008,2,"裏と表を行き来することで");
//		KaguTest2(10008,3,"先に進めるようになることもあります。");
////		KaguTest2(10008,5,"夜のダンジョンでは黄色いプレートになってるよ。");
//		KaguTest(10010,10);
//		
//		Wait(10);
//		
//		Message(0,"","","","");
//		
//		KaguTest(10011,10);
//		
//		KaguTest(30019,0);
//		RestoreCamera();
//		CrossFade();
////		Wait(20);
//	}
	
	MapEvent(1);
}

#EndScript	

//103 -> 102 ///////////////////////////////////2/6new!
#Script:00033
int main()
{
	ch[2500] = 0;

	KaguTest(40002,0);

	MapEvent(0);
	if (ch[2497])
	{
		Walk(8,0,11);
	}
	else
	{
		Walk(-8,0,11);
	}
	Wait(11);
	Event(110);

	if (ch[2497])
	{
		Walk(5,0,20);
	}
	else
	{
		Walk(-5,0,20);
	}
	Wait(20);
	MapEvent(1);
}

#EndScript	

//103 -> 104 ///////////////////////////////////2/6new!
#Script:00034
int main()
{
	ch[2500] = 1;
	ch[2304] = 1;

	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(120);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript	

//104 -> 103 ///////////////////////////////////2/6new!
#Script:00035
int main()
{
//	ch[2500] = 1;

	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript	

//104 -> 105 もしくは 104 -> ミニマップ ///////////////////////////////////2/6new!
#Script:00036
int main()
{
	KaguTest(40002,0);

	{
		// クリア
		int a;
		a = ch[2260];
		
		TekiStop(1);
		MapEvent(0);
//		Walk(0,8,15);
//		Black(0,50,15);
//		Wait(15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2260] < 1)
		{
			ch[2260]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
		KaguTest(10011,1);
		Wait(1);
//		KaguTest(20025,0);
		PostScr(1192);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
//		TekiStop(0);
//		MapEvent(1);
//		
//		if (!a)
//		{
//			ch[429] = 1;
//			PostScr(1052);
//		}
		
	}


//	if(!ch[507] && !ch[2497])
//	{
//	//CrossFade();
//	//Wait(20);
//	//ch[507]=1;
//	MapEvent(0);
//	Walk(0,8,11);
//	Wait(11);
//	Event(120);
//	Walk(0,5,40);
//	Wait(60);
//	MapEvent(1);
//	PlayMovie("isk_3_2.txt",ch[509]);
//	
////	SetSavePos2( 104 , -1807 , 3049 , -220 );
//	
//	ch[509]=1;
//	}
//	else
//	{
//	MapEvent(0);
//	Walk(0,8,11);
//	Wait(11);
//	Event(120);
//	Walk(0,5,20);
//	Wait(20);
//	MapEvent(1);
//	}
}

#EndScript	

//105 -> 104 ///////////////////////////////////2/6new!
#Script:00037
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript	

//101 -> 401 ///////////////////////////////////2/6new!
#Script:00038
int main()
{
//	if (!ch[300] && !ch[1500] && !ch[1529] && ch[507] && !ch[1536]) 
//	{
//		ch[1536] = 1;
//		ch[400] = 19;
//		ch[300] = 1;
		
//		MapEvent(0);
		
//		SaveCamera();
//		Camera(19,0,1000,700);
//		CrossFade();
//		Message(19,"ちょっと待った。","","","");
//		Walk(-8,0,10);
//		RestoreCamera();
//		Camera(-1,0,0,0);
//		Wait(10);
		
//		MapEvent(1);
		
//		ch[400] = -1;
//		return 0;
//	}
//	if (!ch[300] && !ch[1502] && !ch[1530] && ch[1501] && !ch[1537]) 
//	{
//		ch[1537] = 1;
//		ch[400] = 19;
//		ch[300] = 1;
		
//		MapEvent(0);
		
//		SaveCamera();
//		Camera(19,0,1000,700);
//		CrossFade();
//		Message(19,"ちょっと待った。","","","");
//		Walk(-8,0,10);
//		RestoreCamera();
//		Camera(-1,0,0,0);
//		Wait(10);
		
//		MapEvent(1);
		
//		ch[400] = -1;
//		return 0;
//	}

//	if(!ch[507])
//	{
		MapEvent(0);

		Walk(0,-8,11);
		
		Wait(11);

	if (!ch[1516] && ch[528])
	{
		Event(120);
//		PostScr(407);
	}
	else
	{
		Event(120);

		Walk(0,-5,20);
		
		Wait(20);

		if (ch[1515] || !ch[512])
		{
			MMV("home.mmv");
		}
	}

		MapEvent(1);
//	}
//	else
//	{
//		MapEvent(0);
//		Walk(8,0,11);
//		Wait(11);
//		Event(199);
//		Walk(5,0,20);
//		Wait(20);
//		MapEvent(1);

//	}
	// フラグ設定
	KaguTest(30000,0);

	PostScr(697);

}

#EndScript	

//401 -> 101 あらため 401 -> ミニマップ  ///////////////////////////////////2/6new!
#Script:00039
int main()
{
//	if (ch[1538])
//	{
//		// エンディング時
//		if (ch[1539])
//		{
//		}
//		else
//		{
//			// 全員に話させる
//			MapEvent(0);
//			Walk(8,0,30);
//			Wait(30);
//			Message(0,"帰るにはまだちょっと早いわ。","","","");
//			Walk(5,0,20);
//			Wait(20);
//			MapEvent(1);
//			return 0;
//		}
//	}

	// かぶりものチェック
	int kabu;
	kabu = 0;
	if (ch[3962])
	{
		// アフロかぶってる
		WaitD(0);
		Message(0,"ポコのアフロが気になるわ","","","");
		kabu = 1;
	}
	if (ch[3963])
	{
		// ソンブレロかぶってる
		WaitD(0);
		if (ch[2034])
		{
			//パリン
			Message(0,"ピエールにフランソワを","返してあげなくちゃ","","");
		}
		else
		{
			//パリン
			Message(0,"ピエールのとこの","フランソワを探してあげなくちゃ","","");
		}
		kabu = 1;
	}
	if (ch[3964])
	{
		// ファラオかぶってる
		WaitD(0);
		Message(0,"イワオが気になるわ","","","");
		Message(0,"削ってあげようかな","","","");
		kabu = 1;
	}
	if (ch[3965])
	{
		// 鼻眼鏡つけてる
		WaitD(0);
		Message(0,"チャッキーがあのままだと","ホームが危険よね","","");
		Message(0,"なんとかしなくちゃ","","","");
		kabu = 1;
	}
	if (kabu)
	{
		// 何かかぶってた
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,-8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		return 0;
	}

	if (!ch[2300])
	{
		// ドリルまだ
		// ストッパー
		WaitD(0);
		Message(0,"ピノが何かしようと","してるみたいね","","");
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,-8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		return 0;
	}
	
	KaguTest(20001,74);
	if (ch[430])
	{
		WaitD(0);
		Message(0,"そういえば、","遺跡で拾ったラジカセ……","ポコに返したら喜ぶかな？","");
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,-8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		return 0;
	}

	if (ch[512] && (!ch[2317] || !ch[2328] || !ch[2329]))
	{
		// おばけ達がまだだ
		WaitD(0);
		if (!ch[2317] && !ch[2328] && !ch[2329])
		{
			Message(0,"まだ誰かが","残っているかも知れないわ","","");
		}
		else
		{
			Message(0,"他のオバケも探してみなくちゃ","","","");
		}
		
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,-8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		return 0;
	}

	if (ch[2028] == 1)
	{
		ch[2028] = 2;
	}

	if (ch[1538] && ch[1792] != 522133279)
	{
		// バッドエンド
		MapEvent(0);
		WaitD(0);
		Message(0,"外へ行く用事は特にないわ","","","");
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
	}
	else
	{
		// そのほか
		MapEvent(0);

		Walk(0,8,30);
		Black(0,100,30);
			
		Wait(30);
		KaguTest(10100,0);
		
		if (ch[2330] && !ch[2556])
		{
			ch[2556] = 1;
		}
//		if (!ch[512])
//		{
//			// チュートリアルまだ
//			LoadMapB(999);
//			KaguTest(99985,1);
////			ch[3982] = 4;
//			PostScr(930);
//		}
//		else
		{
			KaguTest(99999,0);
			MapEvent(1);
		}
	}

	ch[435] = 0;
}

#EndScript	

// 105:ボス倒したあと
#Script:00050
int main()
{
	// クリア表示
	MapEvent(0);
	TekiStop(1);

	KaguTest(40002,0);

//	White(0,0,30);
//	Wait(30);

	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		Black(0,100,30);
		Wait(30);
		LoadMapB(505);
		MapEvent(1);
		Event(600);
		Wait(3);
		
//		BGM(7);

		KaguTest(20020,0);
		CharPos(40,-200000,0,0);
		CharPos(ch[425],0,0,300);
		CharPos(0,0,-1600,0);
		
		Black(0,0,15);
		Wait(15);
		
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
		MapEvent(1);
//		BGM(7);
		
		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
//		PlayMovie("isk_3_3.txt",1);
		ch[507] = 1;
		Wait(10);
//		PlayMovie("saraware.txt",1);
		ch[512] = 1;
		Wait(10);
//		PlayMovie("pflush0.txt",1);
		ch[1500] = 1;
		Wait(10);
//		PlayMovie("mosbe01.txt",1);
		ch[1544] = 1;
		Wait(10);

		LoadMapB(505);
		Black(0,100,30);
		Wait(30);
		MapEvent(1);
		Event(600);
		Wait(3);
		
//		BGM(7);

		KaguTest(20020,0);
		CharPos(40,-200000,0,0);
		CharPos(ch[425],0,0,300);
		CharPos(0,0,-1600,0);
		
		Black(0,0,15);
		Wait(15);
		
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
		MapEvent(1);
//		BGM(7);
		
		return 0;
	}
	// デバッグここまで
	
	// 評価表示
		KaguTest(10500,120);
		
		if (ch[2261] < 1)
		{
			ch[2261]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
	
	// ボス倒したことがある場合はそのまま退出
	if (ch[507])
	{
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,5);
		Wait(5);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		return 0;
	}	
	
	TekiStop(0);

	White(0,100,30);
	Wait(30);
	KaguTest(10011,5);
	Wait(5);
//	BGM(0);
//	Camera(-1,0,0,0);
	Mouse(0);
	KaguTest(20065,7);
	PlayMovie("isk_3_3.txt",0);
	Mouse(1);
	CharPos(17,-50895,-412,15);
//	SetSavePos();
	ch[507]=1;
	ResetFade();
	Black(0,100,0);
	
	KaguTest(10100,0);

	ch[298] = 1;
	KaguTest(99999,0);
	
	KaguTest(99990,0);
	Black(0,100,15);
	Wait(15);
	ch[298] = 0;
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,1);
	Wait(10);
	Black(0,0,15);

	TekiStop(0);
	MapEvent(1);
}

#EndScript
////////////////////////////////////////////////////////				
//////回復泉
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00051
int main()
{
//	SelStart(50);
//	SelText("飲む",1);
//	SelText("飲まない",2);
//	SelEnd();
//	if(ch[50]==1)
	{
		SE(953);
//		Black(0,100,5);
		Wait(10);
		Kaifuku();
//		Black(0,0,5);
		KaguTest2(40000,0,"310");
//		RCharEffect(0,310);
		Wait(10);
	}
	return 0;
}
#EndScript					
////////////////////////////////////////////////////////				
//////Ｆ８デバッグメニュ
//////////////////////////////////////////////////////////////////////////////////////////////////////
// DEBUG
#Script:00052
int main()
{
	if (ch[49]) return 0;
	ch[49] = 1;

	SelStart(50);
	SelText("技",12);
	SelText("タイトルに戻る",13);
//	SelText("シナリオフラグオン",1);
//	SelText("フラグオフ",2);
	SelText("ムービー",5);
//	SelText("全ステージクリア",14);
//	SelText("ワープ",3);
//	SelText("レベル",6);
	SelText("謎の袋アイテムリセット",15);
	SelText("難易度",7);
	SelText("家テスト",8);
	SelText("その他",4);
//	SelText("ボステスト",14);
//	SelText("ドリルパワーマックス",9);
//	SelText("ドリルオンオフ",10);
//	SelText("どこでもセーブ",11);
	SelText("終了",0);
	SelEnd();

	if (ch[50] == 15)
	{
		ch[2367] = 0;
		KaguTest(20010,0);
		LoadMap(ch[420]);
		return 0;
	}
	if (ch[50] == 14)
	{
		int i;
		for(i = 2260;i < 2286;i++)
		{
			ch[i] = 1;
		}
		ch[2111] = 1;
		ch[2113] = 1;
		ch[2128] = 1;
//		ch[2149] = 1;
		ch[2189] = 1;
		ch[49] = 0;
		return 0;
	}

	if (ch[50] == 13)
	{
		KaguTest(60000,0);
		return 0;
	}

	if (ch[50] == 14)
	{
		// ボステスト
		KaguTest(20010,0);
		if (ch[420] == 999)
		{
			Mes("ミニマップからはボステストにいけません。");
			retunr 0;
		}
		
		SelStart(50);
//		SelText("ボスラッシュ",6);
//		SelText("ボスラッシュ終わり",7);
		SelText("ボスサップ",1);
		SelText("モスビー",2);
		SelText("ラッシー",3);
		SelText("偽パリン",4);
		SelText("トカロン",5);
		SelEnd();
		
		if (ch[50] == 1)
		{
			LoadMap(105);

			SetSavePos2(109,0,0,0);
			ch[1095] = 109;

			KaguTest(20020,0);
			CharPos(28,-200000,0,0);
			CharPos(ch[425],0,0,0);
			CharPos(ch[425] + 1,0,0,0);
			CharPos(0,0,-500,0);
			
			Black(0,0,30);
			Wait(30);
		}
		if (ch[50] == 2)
		{
			ch[1542] = 1;
			LoadMap(506);

//			SetSavePos2(109,0,0,0);
//			ch[1095] = 109;

//			KaguTest(20020,0);
//			CharPos(40,-200000,0,0);
//			CharPos(ch[425],0,0,300);
//			CharPos(0,0,-1600,0);
			CharPos(0,4525,6025,0);
			
			Black(0,0,30);
			Wait(30);
		}
		if (ch[50] == 3)
		{
//			ch[1505] = 1;
			LoadMap(210);
		
			KaguTest(20020,0);
			CharPos(0,0,0,0);
//			CharPos(ch[425],-1000,277,-782);
//			CharPos(ch[425]+1,-1000,277,-782);
			KaguTest(30028,ch[425]);
//			KaguTest(30028,ch[425]+1);

			Black(0,0,30);
			Wait(30);
		}
		if (ch[50] == 4)
		{
			ch[1505] = 1;
			LoadMap(606);
		
			KaguTest(20020,0);
			CharPos(0,0,2000,1050);
			CharPos(ch[425],0,2300,1050);
			KaguTest(30028,ch[425]);

			Black(0,0,30);
			Wait(30);
		}
		if (ch[50] == 5)
		{
			LoadMap(306);
		
			CharPos(0,2000,450,1500);

			Black(0,0,30);
			Wait(30);
		}
		if (ch[50] == 6)
		{
			// ボスラッシュモード
			ch[2300] = 1;
//			ch[1791] = 100;
			KaguTest(20051,0);

			ch[1780] = 1;
			ch[1781] = 1;
			ch[1784] = 1;
			
//			GetItem(1);
//			GetItem(2);
//			GetItem(9);
			
			GetItem(3);
//			Soubi(3);
			Kaifuku();

			KaguTest(70000,0);
			LoadMap(109);
			CharPos(0,0,900,0);
			ch[3982] = 1;
			KaguTest(70000,0);
			MapEvent(1);
		}
		ch[49]=0;
		return 0;
	}

	if (ch[50] == 12)
	{
		SelStart(50);
		SelText("オールオン",10);
		SelText("立ちコンボＦ",1);
		SelText("歩きコンボＦ",2);
		SelText("奪取コンボＦ",3);
		SelText("ＪＬコンボＦ",4);
		SelText("回転下月",5);
		SelText("地面回転",6);
		SelText("地面回転コンボ",7);
		SelText("地面回転コンボＦ",8);
		SelText("ダッシュ回転",9);
		SelText("限界突破",11);
		SelEnd();

		if (ch[50] == 1)ch[1780]=!ch[1780];
		if (ch[50] == 2)ch[1781]=!ch[1781];
		if (ch[50] == 3)ch[1782]=!ch[1782];
		if (ch[50] == 4)ch[1783]=!ch[1783];
		if (ch[50] == 5)ch[1784]=!ch[1784];
		if (ch[50] == 6)ch[1785]=!ch[1785];
		if (ch[50] == 7)ch[1786]=!ch[1786];
		if (ch[50] == 8)ch[1787]=!ch[1787];
		if (ch[50] == 9)ch[1788]=!ch[1788];
		if (ch[50] == 11)ch[1789]=!ch[1789];
		
		if (ch[50] == 10)
		{
			ch[1780]=1;
			ch[1781]=1;
			ch[1782]=1;
			ch[1783]=1;
			ch[1784]=1;
			ch[1785]=1;
			ch[1786]=1;
			ch[1787]=1;
			ch[1788]=1;
			ch[1789]=1;
		}

		// 本チェック
		int i;
		for (i = 0;i < 10;i++)
		{
			ch[2130 + i] = 0;
		
			if (ch[1780 + i])
			{
				ch[2130 + i] = 0;
			}
		}
	
		ch[49]=0;
		return 0;
	}
	if (ch[50] == 1)
	{
		SelStart(50);
		SelText("ＯＰ",4);
		SelText("道案内",1);
		SelText("モトロの指導",8);
		SelText("ワープ①ＯＮ",2);
		SelText("ボス戦やった①",6);
		SelText("ボス撃破①",3);
		SelText("壊されたイベント",5);
		SelText("石版①触れた",14);
		SelText("モグレヌ発見",17);
		SelText("モグレヌ破壊",12);
		SelText("みんなの応援①",18);
		SelText("ワープ②ＯＮ",11);
		SelText("ボス戦やった②",19);
		SelText("ボス撃破②",20);
		SelText("偽パリン誕生",21);
		SelText("村復興",7);
		SelText("オバケ達との会話",28);
		SelText("石版②触れた",15);
		SelText("モグレヌ失敗",16);
		SelText("モグロウ発見",22);
		SelText("モグ兄弟破壊",13);
		SelText("みんなの応援②",23);
		SelText("偽パリン戦やった",24);
		SelText("偽パリン撃破",25);
		SelText("トカロン戦やった",26);
		SelEnd();

		if(ch[50]==1)ch[510]=1;
		if(ch[50]==2)ch[511]=1;
		if(ch[50]==3)ch[507]=1;
		if(ch[50]==4)ch[508]=1;
		if(ch[50]==5)ch[512]=1;
		if(ch[50]==6)ch[509]=1;
		if(ch[50]==7)ch[528]=1;
		if(ch[50]==8)ch[600]=1;
		if(ch[50]==12)ch[1502]=1;
		if(ch[50]==13)ch[1510]=1;
		if(ch[50]==14)ch[1500]=1;
		if(ch[50]==15)ch[1507]=1;
		if(ch[50]==16)ch[1508]=1;
		if(ch[50]==17)ch[1501]=1;
		if(ch[50]==18)ch[1503]=1;
		if(ch[50]==19)ch[1504]=1;
		if(ch[50]==20)
		{
			ch[1505]=1;
			if(!ch[1506])ch[1515]=1;
			ch[528]=1;
		}
		if(ch[50]==21)
		{
			ch[1506]=1;
			ch[1515]=0;
		}
		if(ch[50]==22)ch[1509]=1;
		if(ch[50]==23)ch[1511]=1;
		if(ch[50]==24)ch[1512]=1;
		if(ch[50]==25)ch[1513]=1;
		if(ch[50]==26)ch[1514]=1;
		if(ch[50]==28)ch[1516]=1;

		ch[49]=0;
		PostScr(52);
		return 0;
	}
	if (ch[50]==2)
	{
		SelStart(50);
		SelText("ＯＰ",4);
		SelText("道案内",1);
		SelText("モトロの指導",8);
		SelText("ワープ①ＯＮ",2);
		SelText("ボス戦やった①",6);
		SelText("ボス撃破①",3);
		SelText("壊されたイベント",31);
		SelText("石版①触れた",14);
		SelText("モグレヌ発見",17);
		SelText("モグレヌ破壊",12);
		SelText("みんなの応援①",18);
		SelText("ワープ②ＯＮ",11);
		SelText("ボス戦やった②",19);
		SelText("ボス撃破②",20);
		SelText("偽パリン誕生",21);
		SelText("村復興",29);
		SelText("オバケ達との会話",28);
		SelText("石版②触れた",15);
		SelText("モグレヌ失敗",16);
		SelText("モグロウ発見",22);
		SelText("モグ兄弟破壊",13);
		SelText("みんなの応援②",23);
		SelText("偽パリン戦やった",24);
		SelText("偽パリン撃破",25);
		SelText("トカロン戦やった",26);
		SelText("兄たま「プロミネ」教授",30);
		SelText("兄たま「覇者の面」授与",29);
		SelText("兄たま「メテオー」教授",37);
		SelText("ポコ「ヒール」教授",31);
		SelText("ポコ「リバイバ」教授",32);
		SelText("ピエール「サンダー」教授",33);
		SelText("イワオ「バリアー」教授",34);
		SelText("チャッキー「アイス」教授",35);
		SelText("モトロ技全部リセット",36);
		SelText("全フラグリセット",27);
		SelEnd();
	
		if(ch[50]==1)ch[510]=0;
		if(ch[50]==2)ch[511]=0;
		if(ch[50]==3)ch[507]=0;
		if(ch[50]==4)ch[508]=0;
		if(ch[50]==31)ch[512]=0;
		if(ch[50]==6)ch[509]=0;
		if(ch[50]==29)ch[528]=0;
		if(ch[50]==8)ch[600]=0;
		if(ch[50]==12)ch[1502]=0;
		if(ch[50]==13)ch[1510]=0;
		if(ch[50]==14)ch[1500]=0;
		if(ch[50]==15)ch[1507]=0;
		if(ch[50]==16)ch[1508]=0;
		if(ch[50]==17)ch[1501]=0;
		if(ch[50]==18)ch[1503]=0;
		if(ch[50]==19)ch[1504]=0;
		if(ch[50]==20)
		{
			ch[1505]=0;
			if(!ch[1506])ch[1515]=0;
			ch[528]=0;
		}
		if(ch[50]==21)
		{
			ch[1506]=0;
			ch[1515]=1;
		}
		if(ch[50]==22)ch[1509]=0;
		if(ch[50]==23)ch[1511]=0;
		if(ch[50]==24)ch[1512]=0;
		if(ch[50]==25)ch[1513]=0;
		if(ch[50]==26)ch[1514]=0;
		if(ch[50]==28)ch[1516]=0;
		if(ch[50]==27)
		{
			ch[1509]=0;
			ch[1511]=0;
			ch[1512]=0;
			ch[1513]=0;
			ch[1514]=0;
			ch[1516]=0;
			ch[528]=0;
			ch[1515]=0;
			ch[1505]=0;
			ch[1502]=0;
			ch[1510]=0;
			ch[1500]=0;
			ch[1507]=0;
			ch[1508]=0;
			ch[1501]=0;
			ch[1503]=0;
			ch[1504]=0;
			ch[600]=0;
			ch[528]=0;
			ch[510]=0;
			ch[511]=0;
			ch[507]=0;
			ch[508]=0;
			ch[512]=0;
			ch[509]=0;
			ch[1519]=0;
			ch[1520]=0;
			ch[1521]=0;
			ch[3999]=0;
			ch[1522]=0;
			ch[1523]=0;
			ch[1524]=0;
			ch[1525]=0;
			ch[1526]=0;
			ch[1527]=0;
			ch[1528]=0;
			ch[1529]=0;
			ch[1530]=0;
			ch[1531]=0;
			ch[1532]=0;
			ch[1533]=0;
			ch[1534]=0;
		}
		if(ch[50]==30)ch[1522]=0;
		if(ch[50]==29)ch[1523]=0;
		if(ch[50]==31)ch[1524]=0;
		if(ch[50]==32)ch[1525]=0;
		if(ch[50]==33)ch[1526]=0;
		if(ch[50]==34)ch[1527]=0;
		if(ch[50]==35)ch[1528]=0;
		if(ch[50]==36)
		{
			ch[1529]=0;
			ch[1530]=0;
			ch[1531]=0;
			ch[1532]=0;
			ch[1533]=0;
			ch[1534]=0;
		}
		if(ch[50]==37)ch[1535]=0;

		ch[49]=0;
		PostScr(52);
		return 0;
	}
	if (ch[50]==3)
	{
		// ワープメニュー
		SelStart(50);
		SelText("1-1",1);
		SelText("1-2",2);
		SelText("1-3",3);
		SelText("1-4",4);
		SelText("1-5",5);
		SelText("2-1",6);
		SelText("2-2",7);
		SelText("2-3",8);
		SelText("2-4",9);
		SelText("2-5",10);
		SelText("2-6",11);
		SelText("3-1",12);
		SelText("3-2",13);
		SelText("3-3",14);
		SelText("3-4",15);
		SelText("3-5",16);
		SelText("3-6",17);
		SelText("3-7",19);
		SelText("3-8",20);
		SelText("4-1",18);
		SelText("012",21);
		
		SelEnd();
		
		if(ch[50]==1) LoadMap(101);
		if(ch[50]==2) LoadMap(102);
		if(ch[50]==3) LoadMap(103);
		if(ch[50]==4) LoadMap(104);
		if(ch[50]==5) LoadMap(105);
		if(ch[50]==6) LoadMap(201);
		if(ch[50]==7) LoadMap(202);
		if(ch[50]==8) LoadMap(203);
		if(ch[50]==9) LoadMap(204);
		if(ch[50]==10) LoadMap(205);
		if(ch[50]==11) LoadMap(206);
		if(ch[50]==12) LoadMap(301);
		if(ch[50]==13) LoadMap(302);
		if(ch[50]==14) LoadMap(303);
		if(ch[50]==15) LoadMap(304);
		if(ch[50]==16) LoadMap(305);
		if(ch[50]==17) LoadMap(306);
		if(ch[50]==18) LoadMap(401);
		if(ch[50]==19) LoadMap(307);
		if(ch[50]==20) LoadMap(308);
		if(ch[50]==21) LoadMap(012);

		if(ch[50]==30)
		{
			ch[3999] = 1;
			LoadMap(111);
		}
		if(ch[50]==31)
		{
			ch[3999] = 0;
			LoadMap(111);
		}

		ch[49]=0;
		return 0;
	}
	if (ch[50]==4)
	{
		// その他メニュー
		SelStart(50);
//		SelText("ワープ",7);
//		SelText("フラグオフ",6);
		SelText("仲間集めＦセット",37);
		SelText("デバッグフラグオン",8);
		SelText("デバッグフラグオフ",4);
//		SelText("土全消去",5);
//		SelText("台座全発見",33);
//		SelText("ピエール発見",11);
//		SelText("イワオ発見",12);
//		SelText("チャッキー発見",13);
//		SelText("兄たま「プロミネ」教授",24);
//		SelText("兄たま「覇者の面」教授",25);
//		SelText("ポコ「ヒール」教授",26);
//		SelText("ポコ「リバイバ」教授",27);
//		SelText("ピエール「サンダー」教授",28);
//		SelText("イワオ「バリアー」教授",29);
//		SelText("チャッキー「アイス」教授",30);
		SelText("岩２９９０個",9);
		SelText("金９９９９",10);
		SelText("薬草ＭＡＸ",52);
		SelText("安全帽",14);
		SelText("ハチマキ",15);
		SelText("リボン",16);
		SelText("平家の兜",17);
		SelText("魔法頭巾",18);
		SelText("覇者の面",19);
		SelText("ネコミミ",36);
		SelText("ハート",20);
//		SelText("ＭＰ",21);
//		SelText("攻撃アップ",22);
//		SelText("防御アップ",23);
//		SelText("全魔法忘却",50);
//		SelText("全技忘却",51);
//		SelText("メガフレア返しテスト",31);
		SelText("全家具取得",32);
//		SelText("鍵取得",35);
		SelText("裏表交代",34);
		SelEnd();
		if(ch[50]==5)PostScr(698);
		if(ch[50]==8)ch[3999]=1;
		if(ch[50]==4)ch[3999]=0;
		if(ch[50]==9)ch[2498]=2990;
		if(ch[50]==10)SetGP(9999);
		if(ch[50]==11)ch[1519]=1;
		if(ch[50]==12)ch[1520]=1;
		if(ch[50]==13)ch[1521]=1;
		if(ch[50]==14)GetItem(43);
		if(ch[50]==15)GetItem(44);
		if(ch[50]==16)GetItem(45);
		if(ch[50]==17)GetItem(46);
		if(ch[50]==18)GetItem(47);
		if(ch[50]==19)GetItem(48);
		if(ch[50]==20)GetItem(16);
		if(ch[50]==21)GetItem(17);
		if(ch[50]==22)GetItem(18);
		if(ch[50]==23)GetItem(19);
		if(ch[50]==24)ch[1522]=1;
		if(ch[50]==25)ch[1523]=1;
		if(ch[50]==26)ch[1524]=1;
		if(ch[50]==27)ch[1525]=1;
		if(ch[50]==28)ch[1526]=1;
		if(ch[50]==29)ch[1527]=1;
		if(ch[50]==30)ch[1528]=1;
		if(ch[50]==50)
		{
			KaguTest(20002,3);
			KaguTest(20002,5);
			KaguTest(20002,12);
			KaguTest(20002,13);
			KaguTest(20002,14);
			KaguTest(20002,15);
			KaguTest(20002,25);
			KaguTest(20002,26);
		}
		if(ch[50]==51)
		{
			KaguTest(20002,1);
			KaguTest(20002,2);
			KaguTest(20002,6);
			KaguTest(20002,7);
			KaguTest(20002,8);
			KaguTest(20002,9);
			KaguTest(20002,10);
			KaguTest(20002,90);
		}
		if (ch[50]==31)
		{
			GetItem(90);
		}
		if (ch[50]==32)
		{
			GetItem(39);
			GetItem(49);
			GetItem(50);
			GetItem(51);
			GetItem(58);
			GetItem(59);
			GetItem(60);
			GetItem(63);
			GetItem(64);
			GetItem(65);
			GetItem(66);
			GetItem(67);
			GetItem(68);
			GetItem(69);
			GetItem(70);
			GetItem(71);
			GetItem(72);
			GetItem(73);
			GetItem(74);
			GetItem(75);
			GetItem(78);
		}
		if (ch[50] == 33)
		{
			KaguTest(20009,0);
		}
		if (ch[50] == 52)
		{
			int a;
			for (a = 0;a < 9;a++)
			{
				GetItem(4);
				GetItem(5);
				GetItem(20);
			}
		}
		if (ch[50] == 34)
		{
			if (ch[2497])
			{
				PostScr(805);
			}
			else
			{
				PostScr(804);
			}
		}
		if (ch[50] == 35)
		{
//			ch[3998]++;
			GetItem(38);
		}
		if(ch[50]==36) GetItem(40);
		if(ch[50]==37)
		{
			ch[2322] = 1;
			ch[2323] = 1;
		}
		
		ch[49]=0;
		PostScr(52);
		return 0;

	}	
	if (ch[50]==5)
	{
		// 長いからスクリプト呼び出し
		PostScr(699);
	}
	if (ch[50]==6)
	{
		SelStart(50);
		SelText("魔法",22);
		SelText("剣術遊戯ＬＶ１",1);
		SelText("剣術遊戯ＬＶ２",2);
		SelText("剣術遊戯ＬＶ３",3);
		SelText("魔人乱舞ＬＶ１",4);
		SelText("魔人乱舞ＬＶ２",5);
		SelText("魔人乱舞ＬＶ３",6);
		SelText("爆裂撃破ＬＶ１",7);
		SelText("爆裂撃破ＬＶ２",8);
		SelText("爆裂撃破ＬＶ３",9);
		SelText("奇想天外ＬＶ１",10);
		SelText("奇想天外ＬＶ２",11);
		SelText("奇想天外ＬＶ３",12);
		SelText("不動心眼ＬＶ１",13);
		SelText("不動心眼ＬＶ２",14);
		SelText("不動心眼ＬＶ３",15);
		SelText("疾風迅雷ＬＶ１",16);
		SelText("疾風迅雷ＬＶ２",17);
		SelText("疾風迅雷ＬＶ３",18);
		SelText("無尽破光ＬＶ１",19);
		SelText("無尽破光ＬＶ２",20);
		SelText("無尽破光ＬＶ３",21);
		SelEnd();
		
		if (ch[50]==22)
		{
			SelStart(50);
			SelText("ファイアＬＶ１",22);
			SelText("ファイアＬＶ２",23);
			SelText("ファイアＬＶ３",24);
			SelText("サンダーＬＶ１",25);
			SelText("サンダーＬＶ２",26);
			SelText("サンダーＬＶ３",27);
			SelText("アイスＬＶ１",28);
			SelText("アイスＬＶ２",29);
			SelText("アイスＬＶ３",30);
			SelText("バリアＬＶ１",31);
			SelText("バリアＬＶ２",32);
			SelText("バリアＬＶ３",33);
			SelText("リバイバＬＶ１",34);
			SelText("リバイバＬＶ２",35);
			SelText("リバイバＬＶ３",36);
			SelText("プロミネＬＶ１",37);
			SelText("プロミネＬＶ２",38);
			SelText("プロミネＬＶ３",39);
			SelText("メテオーＬＶ１",40);
			SelText("メテオーＬＶ２",41);
			SelText("メテオーＬＶ３",42);
			SelText("ヒールＬＶ１",43);
			SelText("ヒールＬＶ２",44);
			SelText("ヒールＬＶ３",45);
			SelEnd();
		}
		
		if (ch[50] % 3 == 1)
		{
			ch[430] = 0;
		}
		if (ch[50] % 3 == 2)
		{
			ch[430] = 1;
		}
		if (ch[50] % 3 == 0)
		{
			ch[430] = 2;
		}
		
		if (ch[50] == 1 || ch[50] == 2 || ch[50] == 3)
		{
			GetItem(1);
			KaguTest(20007,1);
		}
		if (ch[50] == 4 || ch[50] == 5 || ch[50] == 6)
		{
			GetItem(2);
			KaguTest(20007,2);
		}
		if (ch[50] == 7 || ch[50] == 8 || ch[50] == 9)
		{
			GetItem(6);
			KaguTest(20007,6);
		}
		if (ch[50] == 10 || ch[50] == 11 || ch[50] == 12)
		{
			GetItem(7);
			KaguTest(20007,7);
		}
		if (ch[50] == 13 || ch[50] == 14 || ch[50] == 15)
		{
			GetItem(8);
			KaguTest(20007,8);
		}
		if (ch[50] == 16 || ch[50] == 17 || ch[50] == 18)
		{
			GetItem(9);
			KaguTest(20007,9);
		}
		if (ch[50] == 19 || ch[50] == 20 || ch[50] == 21)
		{
			GetItem(10);
			KaguTest(20007,10);
		}
		if (ch[50] == 22 || ch[50] == 23 || ch[50] == 24)
		{
			GetItem(3);
			KaguTest(20007,3);
		}
		if (ch[50] == 25 || ch[50] == 26 || ch[50] == 27)
		{
			GetItem(14);
			KaguTest(20007,14);
		}
		if (ch[50] == 28 || ch[50] == 29 || ch[50] == 30)
		{
			GetItem(15);
			KaguTest(20007,15);
		}
		if (ch[50] == 31 || ch[50] == 32 || ch[50] == 33)
		{
			GetItem(13);
			KaguTest(20007,13);
		}
		if (ch[50] == 34 || ch[50] == 35 || ch[50] == 36)
		{
			GetItem(26);
			KaguTest(20007,26);
		}
		if (ch[50] == 37 || ch[50] == 38 || ch[50] == 39)
		{
			GetItem(25);
			KaguTest(20007,25);
		}
		if (ch[50] == 40 || ch[50] == 41 || ch[50] == 42)
		{
			GetItem(27);
			KaguTest(20007,27);
		}
		if (ch[50] == 43 || ch[50] == 44 || ch[50] == 45)
		{
			GetItem(12);
			KaguTest(20007,12);
		}
		
		ch[49] = 0;
		return 0;
	}
	if (ch[50] == 7)
	{
		SelStart(50);
		SelText("ビギナー",1);
		SelText("ノーマル",2);
		SelText("ハード",3);
		SelText("くれいじー",4);
		SelEnd();
		
		ch[3961] = 0;
		if (ch[50] == 1)
		{
			KaguTest(20071,1);
//			ch[455] = 1;
		}
		if (ch[50] == 2)
		{
			KaguTest(20071,0);
//			ch[455] = 0;
		}
		if (ch[50] == 3)
		{
			KaguTest(20071,2);
//			ch[455] = 2;
		}
		if (ch[50] == 4)
		{
			ch[3961] = 1;
			KaguTest(20071,2);
//			ch[455] = 2;
		}
		
		ch[49] = 0;
		return 0;
	}
	if (ch[50] == 8)
	{
		SelStart(50);
		SelText("ポコの家ＬＶ１",1);
		SelText("ポコの家ＬＶ２",2);
		SelText("ポコの家ＬＶ３",3);
		SelText("ピエール（ヒゲ男爵）の家ＬＶ１",4);
		SelText("ピエール（ヒゲ男爵）の家ＬＶ２",5);
		SelText("ピエール（ヒゲ男爵）の家ＬＶ３",6);
		SelText("イワオの家ＬＶ１",7);
		SelText("イワオの家ＬＶ２",8);
		SelText("イワオの家ＬＶ３",9);
		SelText("チャッキーの家ＬＶ１",10);
		SelText("チャッキーの家ＬＶ２",11);
		SelText("チャッキーの家ＬＶ３",12);
		SelText("町ＬＶ１",13);
		SelText("町ＬＶ２",14);
		SelText("町ＬＶ３",15);
		SelText("町ＬＶ４",16);
		SelEnd();
		
		if (ch[50] == 1)
		{
			ch[1750] = 0;
		}
		if (ch[50] == 2)
		{
			ch[1750] = 1;
		}
		if (ch[50] == 3)
		{
			ch[1750] = 2;
		}
		if (ch[50] == 4)
		{
			ch[1751] = 0;
		}
		if (ch[50] == 5)
		{
			ch[1751] = 1;
		}
		if (ch[50] == 6)
		{
			ch[1751] = 2;
		}
		if (ch[50] == 7)
		{
			ch[1752] = 0;
		}
		if (ch[50] == 8)
		{
			ch[1752] = 1;
		}
		if (ch[50] == 9)
		{
			ch[1752] = 2;
		}
		if (ch[50] == 10)
		{
			ch[1753] = 0;
		}
		if (ch[50] == 11)
		{
			ch[1753] = 1;
		}
		if (ch[50] == 12)
		{
			ch[1753] = 2;
		}
		if (ch[50] == 13)
		{
			ch[1754] = 0;
			ch[1755] = 0;
		}
		if (ch[50] == 14)
		{
			ch[1754] = 0;
			ch[1755] = 1;
		}
		if (ch[50] == 15)
		{
			ch[1754] = 1;
			ch[1755] = 2;
		}
		if (ch[50] == 16)
		{
			ch[1754] = 1;
			ch[1755] = 3;
		}

		ch[49]=0;
		PostScr(52);
		return 0;
	}
	if (ch[50] == 9)
	{
		KaguTest(20011,120);
	}
	if (ch[50] == 10)
	{
		if (ch[2300])
		{
			Scop(0);
			ch[2300] = 0;
			ch[2301] = 0;
		}
		else
		{
			Scop(1);
			ch[2300] = 1;
			ch[2301] = 1;
		}
	}
	if (ch[50] == 11)
	{
		KaguTest(20015,0);
	}
	ch[49]=0;
	return 0;
}
#EndScript				
////////ワープゾーン
//104 <-> 101 ///////////////////////////////////
#Script:00053
int main()
{
	ch[2500] = 0;

	ch[511]=1;
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	KaguTest2(40000,0,"301");
	//Walk(8,0,11);
	Wait(40);
	Lock();
	Event(196);
	Blur(2,0,30);
	Walk(5,0,30);
	Unlock();
	Wait(30);
//	SetSavePos();
	MapEvent(1);
}
#EndScript	
// 101 ///////////////////////////////////2/6new!
#Script:00058
int main()
{
	//BGM(0);
	//Wait(60);
	Lock();
	Mouse(0);
	PlayMovie("saraware.txt",0);
	Black(0,100,0);
	Wait(5);
//	Black(0,0,15);
	Walk(0,-5,1);
	KaguTest(30057,0);
	Mouse(1);
//	BGM(5);
	//CharPos(17,-50895,-412,15);
	ch[512]=1;
	LoadMap(401);
	CharPos(0,-150,1100,0);
	Black(0,100,0);
	Black(0,0,30);
	ResetFade();
	Unlock();
	
	ch[3983] = 0;
	
}

#EndScript
//401 -> 101///////////////////////////////////2/6new!
//#Script:00059
//int main()
//{
//	int x;
//	int y;
//	int z;
//
////	if (ch[1538])
////	{
////		// エンディング時
////		if (ch[1539])
////		{
////		}
////		else
////		{
////			// 全員に話させる
////			MapEvent(0);
////			Walk(8,0,30);
////			Wait(30);
////			Message(0,"帰るにはまだちょっと早いわ。","","","");
////			Walk(5,0,20);
////			Wait(20);
////			MapEvent(1);
////			return 0;
////		}
////	}
//
//	if (!ch[2300])
//	{
//		//ドリルまだ（仮）
//		GetCharPos(0,x,y,z);
//		MapEvent(0);
//		Black(0,100,15);
//		Walk(-8,0,15);
//		Wait(15);
//		
//		ch[2302] = 1;
//		PlayMovie("nuketa.txt",0);
//		LoadMap(401);
//		CharPos(x + 200,y,z);
//		Scop2(19,1,"O_043.it3");
//		ch[2302] = 0;
//		Black(0,0,30);
//		Wait(30);
//		ch[435] = 0;
//		return 0;
//	}
//
//	if (!ch[600])
//	{
//		//ファイアまだ
//	}
//	else
//	{
//		MapEvent(0);
//		Walk(-8,0,11);
//		Wait(11);
//	//	Lock();
//		KaguTest(10100,0);
//		Event(200);
//	//	Unlock();
//		Walk(-5,0,20);
//		Wait(20);
//		MapEvent(1);
//
//		PostScr(697);
//	}
//
//	ch[435] = 0;
//}
//#EndScript

//////////////////////////////////////////////////////////////////////////////////////////////////////
// ポコ会話
#Script:00060
int main()
{
	int a;
	int b;
	int c;
	c = 0;
	int kagu;
	int kaguage;
	int kagudame;
	kagu = 0;
	kaguage = ch[294];
	ch[294] = 0;

	ch[400] = 16;
	
	if (ch[512] && !ch[2328])
	{
		// ポコ発見イベント
		ch[2328] = 1;
		PostScr(1195);
		return 0;
	}
	
	kagudame = 0;
//	if (ch[2263] && !ch[2621])
//	{
//		kagudame = 1;
//	}
	if (ch[2007])
	{
		kagudame = 1;
	}

	// チャッキー・鼻眼鏡クエスト中
	KaguTest(20010,0);
	if (ch[2030] && ch[420] == 401)
	{
		//ポコ
		Message(16,"ブルブルブル……","","","");
		Message(16,"寒くてホームの","修復どころじゃないぽ","","");
		Message(16,"踊って体を温めるぽ！","","","");
		ch[400] = -1;
		
		ch[420] = ch[2035];
		KaguTest(20052,1);
		ch[2035] = ch[420];
		
		return 0;
	}

	// ヘアチェック（アフロチェック）
	KaguTest(20010,0);
	KaguTest(20001,38);
	if (ch[3963] || ch[3964] || ch[3965])
	{
		// かぶりものだめ
		ch[430] = 0;
		kagudame = 1;
	}
	if (ch[430] && ch[420] == 401 && !ch[3962] && !kaguage && !kagudame)
	{
		// アフロ持ってる
		//ポコ
		Message(16,"やぁ、今日は何だぽ？","","","");

		//パリン
		Message(0,"ふふふ…","","","");

		//ポコ
		Message(16,"ど、どうしたぽ？","なんだか怖いぽ","","");

		//パリン
		Message(0,"いいものをプレゼントするわ","","","");

		//ポコ
		Message(16,"わ～い。うれしいんだぽ","","","");

		//パリン
		Message(0,"じゃぁ、ちょっと向こう向いてて","","","");

		//ポコ
		Message(16,"わかったぽ！","","","");

		Black(0,100,15);
		Wait(15);
		KaguTest(20002,38);
		ch[3962] = 1;
		ch[2026] = 1;
		LoadMap(401);
		ch[400] = 116;
		KaguTest(20039,16);
		Black(0,0,15);
		Wait(15);
		//ポコ
		Message(16,"………","","","");

		//パリン
		Message(0,"よく似合ってるわよ","","","");

		ch[400] = 16;
		//ポコ
		Message(16,"ひ、ひどいんだぽ……","","","");
		Message(16,"しかもなぜか取れないぽ。","もうおばけとして生きていく","自信がなくなったぽ……","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2026])
	{
		// アフロつけてる
		//ポコ
		Message(16,"うう、引っぱっても","はずれない上にモーレツに","頭がかゆくなってきたぽ…","");
		Message(16,"かゆいぽ、かゆいぽ！","お願いだから外してほしいぽ！","","");
		Message(16,"燃やしてでも外してほしいぽ！","","","");
		ch[400] = -1;
		return 0;
	}


	KaguTest(20010,0);
	if (ch[420] == 999)
	{
		KaguTest(30020,16);
		if (ch[420] < -791)
		{
			Message(16,"遺跡はこっちじゃないぽ","","","");
		}
		if (ch[420] > -791 && ch[420] < 0)
		{
			Message(16,"ぼくのダンスを見ていくぽ？","","","");
		}
		if (ch[420] > 0 && ch[420] < 820)
		{
			Message(16,"ポテト遺跡はここだぽ","","","");
		}
		if (ch[420] > 820)
		{
			Message(16,"左手にある遺跡がポテト遺跡だぽ","","","");
		}
		ch[400] = -1;
		return 0;
	}

	// 家具あげた数チェック
	KaguTest(10204,0);
	kagu = ch[420];
	
	// 家具持ってたら
	KaguTest(20001,74);
	if (ch[430] && !kaguage && !kagudame)
	{
		if (!ch[2058])
		{
			ch[216]++;

			if (ch[216] < 2)
			{
				//ポコ
				Message(16,"パリン！","","","");

				//パリン
				Message(0,"どうしたの？","","","");

				//ポコ
				Message(16,"奥にいる、あのお姉さんを","しかってほしいぽ！","","");

				//パリン
				Message(0,"ファン姉のこと？","なんでよ？","","");

				//ポコ
				Message(16,"僕のことをスゴクいじめたぽ！","","","");

				//パリン
				Message(0,"えっ…ファン姉が","そんなことするワケないわ","","");
				Message(0,"だいたいポコは見えないはずだし…","","","");
			}
			else
			{
				//ポコ
				Message(16,"奥にいる、あのお姉さんを","しかってほしいぽ！","","");
				Message(16,"僕のことをスゴクいじめたぽ！","","","");
			}
			ch[400] = -1;
			return 0;
		}

		//ポコ
		Message(16,"げっぷ…ぼくの","ラジカセはどこにいったぽ…","","");
		Message(16,"あれがないと踊れないし、","まったくやる気が出ないぽ","","");
		//パリン
		Message(0,"ラジカセならここにあるわよ","","","");
		//ポコ
		Message(16,"確かにぼくのラジカセだぽ！","","","");
		//パリン
		Message(0,"どうやらファントムたちが","持っていったみたいね","","");
		//パリン
		Message(0,"そんなことよりずいぶん","お腹が出てるみたいね","","");
		Message(0,"一体どーいうことよ！","","","");
		//ポコ
		Message(16,"踊ってないからお腹が出てきたぽ","","","");
		//パリン
		Message(0,"じゃあ、その頭のコブは何なのよ","","","");
		//ポコ
		Message(16,"これはオバケの","ジンマシンみたいなものだぽ","","");
		//パリン
		Message(0,"…………………………","","","");
		Message(0,"…ネタはあがってるのよ。","それともラジカセいらないのかしら","","");
		//ポコ
		Message(16,"ご、ごめんなさいだぽ！","もう盗み食いはしないぽ！","","");
		//パリン
		Message(0,"仕方ないわね。","はい、ラジカセ","","");
		//ポコ
		Message(16,"ありがとう、パリン！","これでホームの修理も頑張れるぽ","","");
		
//		SelStart(50);
//		SelText("ラジカセをあげる",1);
//		SelText("ラジカセをあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『ラジカセ』をポコに渡した。");
			KaguTest(20002,74);
			KaguTest(10203,74);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("poko_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			CharPos(0,1109,498,25);
			CharPos(16,900,600,25);
			
			ch[420] = 1130;
			ch[421] = 594;
			ch[422] = 95;
			ch[400] = 116;
			KaguTest(30070,0);
//			ch[420] = 675;
//			ch[421] = 522;
//			ch[422] = 26;
			KaguTest(30070,16);
			
			ch[420] = 760;
			ch[421] = 556;
			ch[422] = 26;
			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 1008;
			ch[421] = ch[421] - 289;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ0");
			KaguTest2(30015,0,"QQ0Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,16);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,16);
			Black(0,0,15);
			Wait(15);

//			Message(16,"よし、やるぽ！","","","");

			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);

//			Message(16,"マナが出てきたぽ。","","","");
//			Message(0,"マナってなに？","","","");
//			Message(16,"僕たちオバケの世界を","明るく照らす","太陽みたいなもんだぽ。","");
//			Message(16,"邪悪な霧は","このマナの光で消えていくはずぽ。","","");

			WaitC(200);

			kagu++;
			if (ch[1750] < 1)
			{
				ch[1750] = 1;
			}
			
			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);

			ch[3959] = 74;
			ch[3979] = 1;
			ch[420] = 22;
			KaguTest(12002,16);
			KaguTest(30019,8);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(16,"残念……","","","");
			ch[400] = -1;
			return 0;
		}
	
	}
	KaguTest(20001,68);
	if (ch[430] && !kaguage && !kagudame)
	{
		//ポコ
		Message(16,"あっ、それはぼくの下駄箱だぽ","","","");
		//パリン
		Message(0,"そうよ。","ファントムたちから","取り返してきたわ","");
		//ポコ
		Message(16,"それじゃ、早速そこに置くぽ","","","");
		//パリン
		Message(0,"わかったわ","","","");

		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『下駄箱』をポコに渡した。");
			KaguTest(20002,68);
			KaguTest(10203,68);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("poko_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			CharPos(0,919,427,25);
			ch[420] = 811;
			ch[421] = 232;
			ch[422] = 35;
			ch[400] = 116;
			KaguTest(30070,0);
			KaguTest(30070,16);
			ch[420] = 900;
			ch[421] = 600;
			ch[422] = 25;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 1008;
			ch[421] = ch[421] - 289;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ0");
			KaguTest2(30015,0,"QQ0Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,16);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,16);
			Black(0,0,15);
			Wait(15);
			
//			Message(16,"やる気が沸いてきたぽ！","","","");
			
			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1750] < 1)
			{
				ch[1750] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);

			ch[3959] = 68;
			ch[3979] = 3;
			ch[420] = 22;
			KaguTest(12002,16);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(16,"残念……","","","");
			ch[400] = -1;
			return 0;
		}
	
	}
	KaguTest(20001,59);
	if (ch[430] && !kaguage && !kagudame)
	{
		//パリン
		Message(0,"本棚を取り返してきたわ","","","");

		//ポコ
		Message(16,"ありがとうだぽ。","これで覚えてない踊りを","練習できるぽ","");

		//パリン
		Message(0,"それにしても、やけに重いわね","","","");

		//ポコ
		Message(16,"その本棚には","ぼくの秘蔵ダンス事典が","コレクションされてるぽ","");
		Message(16,"全部で１００冊あるから","重くて当然だぽ","","");

		//パリン
		Message(0,"それじゃ、まるで私は","怪力少女じゃない","","");

		//ポコ
		Message(16,"そのとおりだぽ","","","");

		//パリン
		Message(0,"かよわい美少女の","つもりでいたのに……","","");

		//ポコ
		Message(16,"そんなことはどうでもいいぽ。","本棚はその角に置くぽ","","");

		//パリン
		Message(0,"どうでもいいことはないけど","とりあえず、そこに置くわ","","");

		
//		SelStart(50);
//		SelText("本棚をあげる",1);
//		SelText("本棚をあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『本棚』をポコに渡した。");
			KaguTest(20002,59);
			KaguTest(10203,59);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("poko_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			CharPos(0,919,427,25);
			ch[420] = 1232;
			ch[421] = 289;
			ch[422] = 35;
			ch[400] = 116;
			KaguTest(30070,0);
			KaguTest(30070,16);
			ch[420] = 900;
			ch[421] = 600;
			ch[422] = 25;
			
			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 1008;
			ch[421] = ch[421] - 289;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ0");
			KaguTest2(30015,0,"QQ0Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,16);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,16);
			Black(0,0,15);
			Wait(15);
			
//			Message(16,"やる気が沸いてきたぽ！","","","");
			
			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1750] < 1)
			{
				ch[1750] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 59;
			ch[3979] = 8;
			ch[420] = 22;
			KaguTest(12002,16);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(16,"残念……","","","");
			ch[400] = -1;
			return 0;
		}
	
	}
	KaguTest(20001,73);
	if (ch[430] && !kaguage && !kagudame)
	{
		//ポコ
		Message(16,"なんだか","聞き覚えのある音がするぽ…","","");
		Message(16,"この音は……","ぼくの蓄音機だぽ","","");
		//パリン
		Message(0,"よくわかるわね。","ファントムから取り返してきたわ","","");
		//ポコ
		Message(16,"毎日聞いてた音だから","忘れるはずないぽ","","");

//		SelStart(50);
//		SelText("蓄音機をあげる",1);
//		SelText("蓄音機をあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『蓄音機』をポコに渡した。");
			KaguTest(20002,73);
			KaguTest(10203,73);
			kagu++;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("poko_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			CharPos(0,919,427,25);
			ch[420] = 736;
			ch[421] = 541;
			ch[422] = 35;
			ch[400] = 116;
			KaguTest(30070,0);
			KaguTest(30070,16);
			ch[420] = 900;
			ch[421] = 600;
			ch[422] = 25;
			
			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 1008;
			ch[421] = ch[421] - 289;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ0");
			KaguTest2(30015,0,"QQ0Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,16);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,16);
			Black(0,0,15);
			Wait(15);
			
//			Message(16,"やる気が沸いてきたぽ！","","","");
			
			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1750] < 1)
			{
				ch[1750] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 73;
			ch[3979] = 40;
			ch[420] = 22;
			KaguTest(12002,16);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;

		}
		else
		{
			Message(16,"残念……","","","");
			ch[400] = -1;
			return 0;
		}
	
	}
	KaguTest(20001,75);
	if (ch[430] && !kaguage && !kagudame)
	{
		//パリン
		Message(0,"また取り返してきたわ。","今度はコンポよ","","");
		//ポコ
		Message(16,"やったぽ","","","");
		Message(16,"発掘品だから","もう手に入らないと","諦めかけていたぽ","");
		//パリン
		Message(0,"よかったわね","","","");
		
		
//		SelStart(50);
//		SelText("コンポをあげる",1);
//		SelText("コンポをあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『コンポ』をポコに渡した。");
			KaguTest(20002,75);
			KaguTest(10203,75);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("poko_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			CharPos(0,919,427,25);
			ch[420] = 1093;
			ch[421] = 688;
			ch[422] = 35;
			ch[400] = 116;
			KaguTest(30070,0);
			KaguTest(30070,16);
			ch[420] = 900;
			ch[421] = 600;
			ch[422] = 25;
			
			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 1008;
			ch[421] = ch[421] - 289;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ0");
			KaguTest2(30015,0,"QQ0Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,16);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,16);
			Black(0,0,15);
			Wait(15);
			
//			Message(16,"やる気が沸いてきたぽ！","","","");
			
			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1750] < 1)
			{
				ch[1750] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 75;
			ch[3979] = 13;
			ch[420] = 22;
			KaguTest(12002,16);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;

		}
		else
		{
			Message(16,"残念……","","","");
			ch[400] = -1;
			return 0;
		}
	
	}
	
	if (kaguage && !kagudame)
	{
		SetWaku(0);
		Mouse(1);
			
		KaguTest(30059,0);
	
		Black(0,0,15);
		Wait(15);
		ch[400] = 16;
		if (ch[3959] == 74)
		{
			//ポコ
			Message(16,"ふう、家が少しだけキレイになったぽ","","","");
			Message(16,"もっともっと頑張るぽ！","","","");
			ch[400] = -1;
			return 0;
		}
		if (ch[3959] == 68)
		{
			//ポコ
			Message(16,"これでクツの整理ができるぽ","","","");
			//パリン
			Message(0,"…クツなんて","持ってないじゃない","","");
			ch[400] = -1;
			return 0;
		}

		if (kagu > 1 && kagu < 5)
		{
			//ポコ
			Message(16,"ありがとうだぽ。","家ににぎやかさが","戻ってきた感じがするぽ","");
			ch[400] = -1;
			return 0;
		}
		if (kagu == 5)
		{
			//ポコ
			Message(16,"ありがとうだぽ。","僕の家具が全部戻ってきたぽ","","");
			ch[400] = -1;
			return 0;
		}
		
	}

	int story;
	int map;
	string str;

	ch[400] = 16;

	KaguTest(11000,0);
	story = ch[420];
	KaguTest(20010,0);
	map = ch[420];
	
	if (map == 401 && ch[2510] && !ch[2511])
	{
		// モグロウ初出現時ホーム
		Message(16,"モグロウとは昔、","よく一緒に遊んだものだぽ","","");
		Message(16,"確かよく待ち合わせを","すっぽかすオバケだったぽ","","");
		ch[400] = -1;
		ch[216] = 0;
		return 0;
	}
	
	if (map == 401 && ch[2327] && !ch[2322])
	{
		// サッカー誘う
		Message(0,"ポコはいつも暇よね？","","","");
		Message(16,"いつもっていうわけじゃないけど","結構暇な時が多いぽ","","");
		Message(0,"３対３のゲームに出てみない？","","","");
		Message(16,"出てもいいけど","何のゲームだぽ？","","");
		Message(0,"あ、何のゲームか","聞いてなかったわ","","");
		Message(16,"まあいいぽ。参加するぽ。","ゲームの時にはそこにいくぽ","","");

		Message(16,"ところで、もう一人は誰ぽ？","","","");
		
		if (!ch[2323])
		{
			Message(0,"まだ決まってないわ","","","");
			Message(16,"それじゃ","後一人はチャッキーを推薦するぽ。","チャッキーも結構暇だぽ","");
			Message(0,"わかった。","チャッキーを誘ってみるわ","","");
		}
		else
		{
			Message(0,"チャッキーよ","","","");
			Message(16,"わかったぽ","","","");
		}
		
		ch[2322] = 1;
		ch[400] = -1;
		return 0;
	}

	ch[216]++;

	if (ch[2526] && !ch[2527])
	{
		//ポコ
		Message(16,"チャッキーが街へ","行ったきり帰ってこないぽ","","");
		Message(16,"ちょっとサボりすぎだぽ！","","","");
		ch[400] = -1;
		return 0;
	}

	if (ch[1538])
	{
		ch[420] = ch[1792];
		KaguTest(20043,31);
		if (ch[420] == 31)
		{
			// ポコの家具は全部そろっている
			if (ch[216] < 2)
			{
				//ポコ
				Message(16,"パリンのおかげで平和が戻ったぽ","","","");
				Message(16,"これでまた好きなだけ","ダンスを踊れる日が来るぽ！","","");
				//パリン
				Message(0,"よかったわね","","","");
				Message(0,"でも、好きなだけって……","あなた、ホームが壊された後でも","さんざん踊ってたじゃない","");
				//ポコ
				Message(16,"細かいことは","気にするものじゃないぽ","","");
				Message(16,"踊れば幸せが訪れるぽ。","だから、どんな時でも","ぼくはダンスを欠かさないぽ","");
				//パリン
				Message(0,"ポコらしいわね","","","");
				//ポコ
				Message(16,"ファントムたちにも","僕のダンスで愛を伝えるぽ","","");
				Message(16,"ぼくは歌って踊る","愛の伝道師を目指すぽ！","","");
			}
			else
			{
				//ポコ
				Message(16,"これでまた好きなだけ","ダンスを踊れる日が来るぽ","","");
				Message(16,"歌って踊る愛の伝道師を目指すぽ！","","","");
			}
		}
		else
		{
			//ポコ
			Message(16,"パリンのおかげで平和が戻ったぽ","","","");
			Message(16,"でも、ボクの家具は","全部戻ってこなかったぽ……","","");
		}
	}
	if (ch[1571] && !ch[1538])
	{
		if (ch[216] < 2)
		{
			//ポコ
			Message(16,"すごい地震だったぽ。","ニンゲンの街にいても伝わってきたぽ","","");
			//パリン
			Message(0,"街で何してたの？","","","");
			//ポコ
			Message(16,"人命救助だぽ","","","");
			//パリン
			Message(0,"ウソでしょ！","","","");
			//ポコ
			Message(16,"ところでプクはどこに行ったぽ？","しばらく姿を見ていないぽ","","");
			Message(16,"プクが指示しないとホームの","復興がなかなかはかどらないぽ","","");
			//パリン
			Message(0,"ヘタなごまかし方ね…","","","");
		}
		else
		{
			//ポコ
			Message(16,"ところでプクはどこに行ったぽ？","しばらく姿を見ていないぽ","","");
			Message(16,"プクが指示しないとホームの","復興がなかなかはかどらないぽ","","");
		}
	}
	if (ch[1513] && !ch[1571])
	{
		if (ch[216] < 2)
		{
			//ポコ
			Message(16,"ビックリしたぽ！","","","");
			Message(16,"散歩していたら北の山の","入り口をふさいでいた","岩がいきなり爆発したぽ","");
			Message(16,"確かあの岩は何年も前から","あそこに置かれていたぽ","","");
			Message(16,"ちょうどファントムたちが","現れた頃だったぽ","","");
		}
		else
		{
			//ポコ
			Message(16,"ピノがさらわれてから","プクはよく出かけてるみたいぽ","","");
			Message(16,"プクは昔から妹思いだから","きっと自分でもピノを探してるぽ","","");
		}
	}
	if (ch[1505] && !ch[1513])
	{
		int kusai;
		if (ch[2532])
		{
			kusai = 1;
			if (ch[216] < 2)
			{
				//ポコ
				Message(16,"…………………………","","","");
				//パリン
				Message(0,"なによ？","","","");
				//ポコ
				Message(16,"何だか、におうぽ","","","");
				//パリン
				Message(0,"ぎくっ","","","");
				//ポコ
				Message(16,"鼻はついてないけど、","ぼくの嗅覚はごまかせないぽ","","");
				Message(16,"そのドリル、何かに呪われてるぽ","","","");
			}
			else
			{
				//ポコ
				Message(16,"何だか、におうぽ","","","");
				Message(16,"鼻はついてないけど、","ぼくの嗅覚はごまかせないぽ","","");
			}
		}
		if (ch[2521] && !ch[2530] && !kusai)
		{
			//ポコ
			Message(16,"エレベーターの修理？","ぼくに直せるはずないぽ","","");
			Message(16,"それならドクの","研究所に行ってみるぽ","","");
			Message(16,"ちなみに研究所が","どこにあったかは忘れたから","自分で探してみてほしいぽ","");
		}
		else
		{
			if (ch[1505] && !ch[2524] && !kusai)
			{
				//ポコ
				Message(16,"めでたいぽ！","","","");
				Message(16,"みんなが戻ってきた記念に","新作のダンスでも披露するぽ","","");
			}
			if (ch[2524] && !ch[2527] && !kusai)
			{
				if (ch[216] < 2)
				{
					//ポコ
					Message(16,"ペケは金持ちだけどかなりの","ひねくれ者でヘンなヤツだぽ","","");
					//パリン
					Message(0,"ポコに言われたくないわね","","","");
					//ポコ
					Message(16,"ぼくはひねくれてないぽ。","とっても素直だぽ！","","");
					//パリン
					Message(0,"それは自分に対してだけでしょ。","ヘンなのはみんなが保証するわ","","");
					//ポコ
					Message(16,"うう、容赦ないぽ…","","","");
				}
				else
				{
					//ポコ
					Message(16,"ペケは金持ちだけどかなりの","ひねくれ者でヘンなヤツだぽ","","");
				}
			}
			if (ch[2527] && !kusai)
			{
				//ポコ
				Message(16,"あのペケがスポンサーに","なってくれるとは思わなかったぽ","","");
				Message(16,"ちょっとだけ見直したぽ","","","");
			}
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (ch[2557] && !ch[2558])
		{
			//パリン
			Message(0,"ポコ、またケーキを","盗み食いしたでしょ？","","");
			//ポコ
			Message(16,"何のことだぽ？","","","");
			//パリン
			Message(0,"街からまたケーキが消えてるそうよ","","","");
			//ポコ
			Message(16,"ご、誤解だぽ。","それはぼくじゃないぽ！","","");
			//パリン
			Message(0,"うーん、本当かしら…","前科があるだけにあやしいわね","","");
			ch[2558] = 1;
			ch[216] = 0;
		}
		else
		{
			if (ch[216] < 2)
			{
				//ポコ
				Message(16,"そういえば、どこかに","伝説の戦士といわれた","オバケが住んでるはずだぽ","");
				//パリン
				Message(0,"どこにいるの？","","","");
				//ポコ
				Message(16,"…忘れたぽ","","","");
				//パリン
				Message(0,"ダメじゃない","","","");
				//ポコ
				Message(16,"長い間、生きてると","覚えてることがたくさん","あり過ぎて頭からこぼれるぽ","");
				Message(16,"どうせ忘れるかと思うと","覚えることが面倒になってきたぽ","","");
				//パリン
				Message(0,"ふーん、長生きも考え物ね","","","");
			}
			else
			{
				//ポコ
				Message(16,"長い間、生きてると","覚えてることがたくさん","あり過ぎて頭からこぼれるぽ","");
				Message(16,"どうせ忘れるかと思うと","覚えることが面倒になってきたぽ","","");
			}
		}
	}	
	if (ch[507] && !ch[1542])
	{
		if (ch[216] < 2)
		{
			//ポコ
			Message(16,"あと、さらわれた","オバケはイワオとチャッキーだぽ","","");
			Message(16,"イワオがいないと","力仕事がはかどらないし…","","");
			Message(16,"チャッキーがいないと","一緒に踊ってくれる","オバケがいなくてつまらないぽ","");
		}
		else
		{
			//ポコ
			Message(16,"イワオがいないと","力仕事がはかどらないし…","","");
			Message(16,"チャッキーがいないと","一緒に踊ってくれる","オバケがいなくてつまらないぽ","");
		}
	}
	if (ch[3200] && !ch[507])
	{
		ch[400] = 16;
		//ポコ
		Message(16,"オバケホーム以外にもオバケが","住んでる場所があるはずだぽ","","");
		Message(16,"見つけたら行ってみるといいぽ","","","");
		ch[400] = -16;
		return 0;
	}
	if (map == 4 && ch[2330] && !ch[3200])
	{
		if (ch[216] < 2)
		{
			//パリン
			Message(0,"こんなところで何してるの？","","","");
			//※ポコにアセアセエモーション
			ch[420] = 2011;
			ch[429] = 0;
			KaguTest(30036,16);
			Wait(30);
			//パリン
			Message(0,"まさかケーキを盗み食いしてる","ワケじゃないわよね","","");
			//ポコ
			Message(16,"ち、ちがうぽ","","","");
			Message(16,"実は逃げ込んだ時、ニンゲンの","生活に深く感心するとともに","とても興味をいだいたぽ","");
			Message(16,"だから、今日はより理解を","深めようと社会見学に来たぽ","","");
			//パリン
			Message(0,"アタマでも打った？","","","");
		}
		else
		{
			//ポコ
			Message(16,"盗み食いしてるわけじゃないぽ","","","");
			Message(16,"なくなったラジカセを","探しに来たんだぽ！","","");
			//パリン
			Message(0,"さっきと言ってることちがうわよ","","","");
		}
	}
	if (map == 401 && ch[2330] && !ch[3200])
	{
		//ポコ
		Message(16,"これじゃ、ダンスを","踊る気にもなれないぽ","","");
		Message(16,"そういえば、ぼくの","ラジカセはどこにいったぽ？","","");
	}
	if (ch[1545] && !ch[2330])
	{
		if (ch[216] < 2)
		{
			//ポコ
			Message(16,"ホームを襲った","ファントムは４人だったぽ","","");
			Message(16,"たった４人でここまでの","力を持っているなんてズルイぽ！","","");
			//パリン
			Message(0,"そーいう問題？","","","");
		}
		else
		{
			//ポコ
			Message(16,"ホームを襲った","ファントムは４人だったぽ","","");
			Message(16,"たった４人でここまでの","力を持っているなんてズルイぽ","","");
		}
	}
	if (ch[2300] && !ch[1545])
	{
		if (ch[216] < 2)
		{
			//ポコ
			Message(16,"そのドリルはすごいドリルだぽ！","","","");
			//パリン
			Message(0,"どうすごいのよ？","","","");
			//ポコ
			Message(16,"……………………","","","");
			Message(16,"伝説の武器っていうくらいだから","きっと、すごいはずだぽ！","","");
			//パリン
			Message(0,"……………………","","","");		}
		else
		{
			//ポコ
			Message(16,"ファントムのやつらは","乱暴だから気をつけるぽ","","");
		}
	}
	if (ch[2552] && !ch[2300])
	{
		//ポコ
		Message(16,"たしかにあれが使えれば、","ファントムと戦えるはずぽ","","");
		Message(16,"でも、まず無理だと思うぽ…","","","");
	}

	ch[400] = -1;
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
// ピノ会話
#Script:00061
int main()
{
	ch[400] = 18;
	int i;
	
	// デバッグ
	KaguTest(20010,0);
	
	if (ch[420] == 207)
	{
		// デバッグピノ
		Message(18,"デバッグでしゅ。","ボスラッシュは工事中になったでしゅ","","");
		
		ch[50] = 0;
		SelStart(50);
//		SelText("純粋ボスラッシュ",1);
//		SelText("シナリオボスラッシュ",2);
		SelText("ステージテスト",3);
//		SelText("Ｄｅｍｏ",4);
		SelText("ムービーテスト",5);
		SelText("キャンセル",0);
		SelEnd();
		
		if (ch[50] == 5)
		{
			PostScr(699);
		}
		if (ch[50] == 4)
		{
			SelStart(50);
			SelText("Ｄｅｍｏ１",1);
			SelText("Ｄｅｍｏ２",2);
			SelText("Ｄｅｍｏ３",3);
			SelText("Ｄｅｍｏ４",4);
			SelText("Ｄｅｍｏ５",5);
			SelText("ボスＤｅｍｏ",6);
			SelEnd();
			
			if (ch[50] == 1)
			{
//				BGM(6);
				Demo("demo1");
			}
			if (ch[50] == 2)
			{
//				BGM(6);
				Demo("demo2");
			}
			if (ch[50] == 3)
			{
//				BGM(6);
				Demo("demo3");
			}
			if (ch[50] == 4)
			{
//				BGM(6);
				Demo("demo4");
			}
			if (ch[50] == 5)
			{
//				BGM(7);
				Demo("demo5");
			}
			if (ch[50] == 6)
			{
//				BGM(6);
				Demo("demo6");
			}
			return 0;
		}
		if (ch[50] == 1)
		{
			// 純粋ボスラッシュ開始（完全ボス戦のみ）
			SelStart(50);
			SelText("ノーマル",0);
			SelText("ビギナー",1);
			SelText("ハード",2);
			SelEnd();
			
			if (ch[50] == -1)
			{
				ch[400] = -1;
				return 0;
			}
			
			KaguTest(20071,ch[50]);
//			ch[455] = ch[50];
			
			KaguTest(20029,0);
			ch[2300] = 1;
			ch[1790] = 0;
			ch[1791] = 0;
			KaguTest(20051,0);
			Scop(1);
			
			ch[1780] = 1;
			ch[1781] = 1;
			ch[1782] = 1;
			ch[1783] = 1;
			ch[1784] = 1;
			ch[1785] = 1;
			ch[1786] = 1;
			ch[1787] = 1;
			ch[1788] = 1;
			ch[1789] = 1;
			
//			Soubi(3);
//			Soubi(41);
			
			ch[3982] = 1;
			ch[400] = -1;
			
				// 一匹目、ボスサップに飛べ
			Black(0,100,30);
			Wait(30);
			LoadMapB(105);
			
			SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
						KaguTest(20020,0);
			CharPos(28,-200000,0,0);
			CharPos(ch[425],0,0,0);
			CharPos(ch[425] + 1,0,0,0);
			CharPos(0,0,-500,0);
			Event(600);
			KaguTest(40001,999);
			
//			BGM(7);
			
			Black(0,0,30);
			Wait(30);

			MapEvent(1);
			return 0;
		}
		if (ch[50] == 2)
		{
			// ボスラッシュ開始（シナリオムービーつき）
			// シナリオボスラッシュ
			SelStart(50);
			SelText("ノーマル",0);
			SelText("ビギナー",1);
			SelText("ハード",2);
			SelEnd();
			
			if (ch[50] == -1)
			{
				ch[400] = -1;
				return 0;
			}

			KaguTest(20071,ch[50]);
//			ch[455] = ch[50];
			KaguTest(20029,0);
			
			ch[1780] = 1;
			ch[1781] = 1;
			ch[1782] = 1;
			ch[1783] = 1;
			ch[1784] = 1;
			ch[1785] = 1;
			ch[1786] = 1;
			ch[1787] = 1;
			ch[1788] = 1;
			ch[1789] = 1;
			
//			Soubi(3);
//			Soubi(41);
			
			ch[3982] = 2;
			ch[400] = -1;
			
				// 一匹目、ボスサップに飛べ
				// の前にムービー
//			PlayMovie("open2.txt",1);
			ch[508] = 1;
			Wait(10);
//			PlayMovie("nuketa.txt",1);
			ch[510] = 1;
			ch[511] = 1;
			Wait(10);
//			PlayMovie("isk_3_2.txt",1);
			ch[509] = 1;
			Wait(10);

			ch[2300] = 1;
			ch[1791] = 0;
			KaguTest(20051,0);
			Scop(0);
			Scop(1);

			Black(0,100,30);
			Wait(30);
//			LoadMapB(105);
			
			SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
						KaguTest(20020,0);
			CharPos(28,-200000,0,0);
			CharPos(ch[425],0,0,0);
			CharPos(ch[425] + 1,0,0,0);
			CharPos(0,0,-500,0);
			Event(600);

//			BGM(7);
			
			Black(0,0,30);
			Wait(30);

			MapEvent(1);
			return 0;
		}
		if (ch[50] == 3)
		{
			// ステージテスト
			KaguTest(20029,0);
			ch[400] = 18;
			for (i = 0;i < 4000;i++)
			{
				if (i != 455 && i != 2501 && i != 3957)
				{
					ch[i] = 0;
				}
			}

			string st;
			SelStart(50);
			SelText(("遺跡１：" + StageName(26)),1);
			SelText(("遺跡２：" + StageName(0)),2);
			SelText(("遺跡ボス：" + StageName(1)),3);
			SelText(("遺跡１裏：" + StageName(27)),4);
			SelText(("遺跡２裏：" + StageName(16)),5);
			SelText(("森１：" + StageName(2)),6);
			SelText(("森２：" + StageName(11)),7);
			SelText(("森ボス：" + StageName(3)),8);
			SelText(("森裏：" + StageName(17)),9);
			SelText(("森裏：" + StageName(18)),10);
			SelText(("洞窟１：" + StageName(4)),11);
			SelText(("洞窟２：" + StageName(13)),12);
			SelText(("洞窟ボス：" + StageName(5)),13);
			SelText(("洞窟１裏：" + StageName(19)),14);
			SelText(("洞窟２裏：" + StageName(20)),15);
			SelText(("山１：" + StageName(6)),16);
			SelText(("山２：" + StageName(12)),17);
			SelText(("山ボス：" + StageName(7)),18);
			SelText(("山１裏：" + StageName(21)),19);
			SelText(("山２裏：" + StageName(22)),20);
			SelText(("エッグ１：" + StageName(8)),21);
			SelText(("エッグ２：" + StageName(9)),22);
			SelText(("エッグボス：" + StageName(10)),23);
			SelText(("グレートファング：" + StageName(35)),27);
			SelText(("エッグ１裏：" + StageName(23)),24);
			SelText(("エッグ２裏：" + StageName(24)),25);
			SelText(("エッグボス裏：" + StageName(25)),26);
//			SelText("ポテト遺跡１",1);
//			SelText("ポテト遺跡ボス",2);
//			SelText("ポテト遺跡裏１",3);
//			SelText("ラディスの森１",4);
//			SelText("ラディスの森２",5);
//			SelText("ラディスの森ボス",6);
//			SelText("ラディスの森裏１",7);
//			SelText("ラディスの森裏２",8);
//			SelText("スピナ洞窟１",9);
//			SelText("スピナ洞窟２",10);
//			SelText("スピナ洞窟ボス",11);
//			SelText("スピナ洞窟裏１",12);
//			SelText("スピナ洞窟裏２",13);
//			SelText("ピメントマウンテン１",14);
//			SelText("ピメントマウンテン２",99);
//			SelText("ピメントマウンテンボス",16);
//			SelText("ピメントマウンテン裏１",99);
//			SelText("ピメントマウンテン裏２",99);
//			SelText("エッグプラント１",19);
//			SelText("エッグプラント２",20);
//			SelText("エッグプラントボス",21);
//			SelText("エッグプラント裏１",99);
//			SelText("エッグプラント裏２",99);
			SelEnd();
			
			if (ch[50] == -1)
			{
				Message(18,"やめるのでしゅか。残念でしゅ","","","");
				ch[400] = -1;
				return 0;
			}
			if (ch[50] == 99)
			{
				Message(18,"まだこのステージは用意できてないでしゅ","","","");
				ch[400] = -1;
				return 0;
			}

			SelStart(51);
			SelText("ノーマル",0);
			SelText("ビギナー",1);
			SelText("ハード",2);
			SelEnd();
			
			if (ch[51] == -1)
			{
				ch[400] = -1;
				return 0;
			}

			KaguTest(20071,ch[51]);
//			ch[455] = ch[51];

			if (ch[50] > 0)
			{
				SetGP(10000);
				if(ch[50] == 6)
				{
					ch[1500] = 1;
				}
				if (ch[50] == 16)
				{
					ch[1508] = 1;
				}
				if (ch[50] == 21)
				{
					ch[1510] = 1;
					ch[1511] = 1;
				}
				if (ch[50] == 11)
				{
					ch[1502] = 1;
					ch[1503] = 1;
				}
				
				ch[1780] = 1;
				ch[1781] = 1;
				ch[1782] = 1;
				ch[1783] = 1;
				ch[1784] = 1;
				ch[1785] = 1;
				ch[1786] = 1;
				ch[1787] = 1;
				ch[1788] = 1;
				ch[1789] = 1;
				
//				Soubi(3);
//				Soubi(41);

				ch[2300] = 1;
//				ch[1790] = 2;	// ドリルレベルは２
//				ch[1791] = 100;
				ch[1791] = 200;
				
				if (ch[50] == 27)
				{
					ch[1791] = 300;
				}
				KaguTest(20051,0);
				Scop(0);
				Scop(1);

				// マップに飛ぶ
				ch[3982] = ch[50];
				CharPos(0,-200000,0,0);
				LoadMapB(999);
				ch[445] = ch[3982];
				ch[3982] = 3;
				ch[400] = -1;
				PostScr(930);
				return 0;
			}
				
			ch[400] = -1;
			PostScr(61);
		}
	
		ch[400] = -1;
		return 0;
	}
	// デバッグここまで
	
	int story;
	int map;
	string str;
	
	ch[400] = 18;
	ch[218]++;

	KaguTest(20010,0);
	map = ch[420];

	// 開発室？
	if (map == 6)
	{
		Message(18,"よくここまで辿り着いたでしゅ","","","");
		
		SelStart(50);
		SelText("ここは？",1);
		SelText("どうしてここにいるの？",2);
		if (ch[2091])
		{
			SelText("ボスラッシュ開始",3);
		}
		SelEnd();
		
		if (ch[50] == 1)
		{
			Message(18,"ここは姉たまのような、やりこみ派の","人達の為に用意された特設会場でしゅ","","");
			Message(18,"ここではボスラッシュが","できるのでしゅ","","");
			Message(18,"姉たまもやってみるといいでしゅよ","","","");
			Message(18,"ボスラッシュしたくなったら","ピノに話しかけて欲しいでしゅ","","");
			ch[2091] = 1;
		}
		if (ch[50] == 2)
		{
			Message(18,"そんな細かいことは","気にしないで欲しいでしゅ","","");
		}
		if (ch[50] == 3)
		{
			Message(18,"準備はできてましゅか？","","","");
			SelStart(50)
			SelText("はい",1);
			SelText("いいえ",2);
			SelEnd();
			
			if(ch[50] == 1)
			{
				// ボスラッシュ開始
				ch[2092] = 1;
				ch[3952] = 1;
				// ボブー戦準備
				Blur(2,200,45);
				Black(0,100,45);
				SE(954);
				Wait(45);
				Blur(0,0,0);
				TekiStop(1);
				KaguTest(100000,0);
				LoadMapB(105);
				KaguTest(40001,999);
				Wait(5);
				Event(600);
				SetSavePos2(6,0,150,0);
				ch[1095] = 6;
				KaguTest(20020,0);
				CharPos(28,-200000,0,0);
				CharPos(ch[425],0,0,0);
				CharPos(ch[425] + 1,0,0,0);
				CharPos(0,0,-500,0);

				Wait(5);
				Walk(0,1,1);
				KaguTest(30057,0);
				Black(0,0,30);
				Wait(30);
				MMV("boss01.mmv");
				TekiStop(0);
				
				ch[400] = -1;
				return 0;
			}
			Message(18,"準備ができたら","また来て欲しいでしゅ","","");
		}
		
		ch[400] = -1;
		return 0;
	}

	// チャッキー・鼻眼鏡クエスト中
	if (ch[2030] && ch[420] == 401)
	{
		//ピノ
		Message(18,"姉たま、このままだと","寒くて凍えそうでしゅ","","");
		Message(18,"ピノは寒すぎると","元気が出ないでしゅよ","","");
		ch[400] = -1;
		return 0;
	}

	if (map == 401 && ch[2510] && !ch[2511])
	{
		// モグロウ初出現時ホーム
		Message(18,"モグロウさんのうわさは","聞いたことがあるでしゅ","","");
		Message(18,"気さくで明るいオバケだって","みんなが言ってたでしゅ","","");
		ch[400] = -1;
		ch[218] = 0;
		return 0;
	}

	if (ch[1538])
	{
		if (ch[218] < 2)
		{
			//ピノ
			Message(18,"姉たまのおかげで兄たまも","みんなに許してもらえたでしゅ","","");
			Message(18,"ありがとうでしゅ！","","","");
			//パリン
			Message(0,"気にすることないわ。","人間が迷惑かけたみたいだし","","");
			//ピノ
			Message(18,"姉たまは悪くないでしゅ","","","");
			Message(18,"故郷はなくなったけど","今度はこのオバケホームが","ピノと兄たまの故郷でしゅ！","");
			Message(18,"ホームのみんなと","姉たまが家族でしゅ！","","");
			//パリン
			Message(0,"ピノ……","","","");
		}
		else
		{
			//ピノ
			Message(18,"故郷はなくなったけど","今度はこのオバケホームが","ピノと兄たまの故郷でしゅ！","");
			Message(18,"ホームのみんなと","姉たまが家族でしゅ","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (ch[1505] && !ch[1513])
	{
		if (ch[1505] && !ch[2524])
		{
			//ピノ
			Message(18,"ようやく、オバケのみんなが","ホームに戻ってきてうれしいでしゅ","","");
			Message(18,"これも姉たまのおかげでしゅね","","","");
		}
		if (ch[2524] && !ch[2525])
		{
			//ピノ
			Message(18,"姉たまからスポンサーを","ペケさんにお願いしてほしいでしゅ","","");
			Message(18,"姉たまならきっと大丈夫でしゅ","","","");
		}
		if (ch[2525] && !ch[2554])
		{
			//ピノ
			Message(18,"え、ペケさんを","笑わせる方法でしゅか？","","");
			Message(18,"ペケさんが笑ってるのって","そういえば見たことないでしゅ","","");
			Message(18,"うーん……","","","");
			Message(18,"変わったものを","装備してみるってのは","どうでしゅかねぇ？","");
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (!ch[2636])
		{
			if (ch[218] < 2)
			{
				//ピノ
				Message(18,"姉たまのおかげで","イワオさんが帰ってきたでしゅよ","","");
				Message(18,"最近、ニンゲンの街を","見に行くのがブームみたいで","イワオさんも街へ出かけてるでしゅ","");
				//パリン
				Message(0,"みんな、今まで怖がって","あまり街へ来なかったのに","","");
				//ピノ
				Message(18,"オバケはみんな","ブームに弱いのでしゅよ","","");
			}
			else
			{
				//ピノ
				Message(18,"姉たまのおかげで","イワオさんが帰ってきたでしゅ","","");
				Message(18,"最近、ニンゲンの街を","見に行くのがブームみたいで","イワオさんも街へ出かけてるでしゅよ","");
			}
		}
		else
		{
			if (ch[218] < 2)
			{
				//ピノ
				Message(18,"イワオさんが戻ってきたから","力仕事をどんどんお任せできましゅ","","");
				Message(18,"これも姉たまのおかげでしゅね","","","");
			}
			else
			{
				//ピノ
				Message(18,"イワオさんが戻ってきたから","力仕事をどんどんお任せできましゅ","","");
			}
		}
	}
	if (ch[507] && !ch[1542] && ch[2506])
	{
		if (!ch[2622])
		{
			if (ch[218] < 2)
			{
				//ピノ
				Message(18,"姉たまのおかげで","ピエールさんが帰ってきたでしゅ","","");
				Message(18,"今は休憩するために","座るものを探して出かけてるでしゅ","","");
				//パリン
				Message(0,"どこへ行ったの？","","","");
				//ピノ
				Message(18,"姉たまの街へ行ったみたいでしゅ","","","");
				//パリン
				Message(0,"ふーん、プチに","かみつかれなきゃいいけど","","");
				//ピノ
				Message(18,"ピノはいまだに","あのわんこちゃんが怖いでしゅよ","","");
			}
			else
			{
				//ピノ
				Message(18,"姉たまのおかげで","ピエールさんが帰ってきたでしゅ","","");
				Message(18,"今は休憩するために座るものを","探して街へ出かけてるでしゅ","","");
			}
		}
		else
		{
			//ピノ
			if (ch[3201])
			{
				Message(18,"ピエールさんがご機嫌で","街から帰ってきたでしゅ","","");
				Message(18,"どうやら良いことが","あったみたいでしゅね","","");
			}
			else
			{
				Message(18,"ピエールさんがご機嫌で","街から帰ってきたでしゅ","","");
				Message(18,"どうやら良いことが","あったみたいでしゅね","","");
			}
		}
	}
	if (!ch[2556] && ch[2330] && map == 401)
	{
		//ピノ
		Message(18,"ピノと兄たまがここへ来たのは","３年ほど前のことでしゅ","","");
		Message(18,"やっと住み慣れてきた","場所なのに悲しいでしゅ…","","");
		ch[400] = -1;
		return 0;
	}
	// ch[2506]で森イベントチェック
	if (ch[2330] && !ch[3200])
	{
		if (ch[420] == 401)
		{
			Message(18,"ポコさんはラジカセをなくして、","とてもガッカリしてたでしゅ","","");
			Message(18,"早く見つかるといいんでしゅけど…","","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (ch[3200] && !ch[507])
	{
		//ピノ
		Message(18,"姉たま、森では助けてくれて","ありがとうでしゅ","","");
		Message(18,"ピノは兄たまと","姉たまが大好きでしゅ！","","");
	}
	
	if (ch[2329] && !ch[2330])
	{
		if (!ch[2317])
		{
			//ピノ
			Message(18,"あ、姉たま…","兄たまがなかなか戻ってこないでしゅ","","");
			Message(18,"ちょっと心配でしゅね…","","","");
		}
		if (ch[2317])
		{
			//ピノ
			Message(18,"みんなのお家もメチャクチャでしゅ","","","");
			Message(18,"こんなのってないでしゅ…","","","");
		}
	}
	if (ch[512] && !ch[2329])
	{
		// ピノ発見イベント
		ch[2329] = 1;
		PostScr(1196);
		return 0;
	}
	if (ch[2300] && !ch[1545])
	{
		//ピノ
		Message(18,"ファントムたちは遺跡のほうに","兄たまを連れ去ったでしゅ","","");
		Message(18,"姉たま、お願いするでしゅ","","","");
	}
	if (ch[508] && !ch[2300] && ch[420] != 999)
	{
		// ドリル引き抜きイベント
		Event(350);
		return 0;
	}

	ch[400] = -1;
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
// 兄たま
#Script:00062
int main()
{
	int story;
	int map;

	ch[400] = 17;

	KaguTest(11000,0);
	story = ch[420];

	ch[217] = ch[217] + 1;
	KaguTest(20010,0);
	map = ch[420];

	if (ch[2538] && map == 310)
	{
		//プク
		Message(17,"どうやら扉を開けるには","仕掛けを解く必要がありそうだ","","");
		Message(17,"中央のクリスタルと周りの","４本の柱が怪しい気がする","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2521] && map == 607)
	{
		if (ch[2533])
		{
			//プク
			Message(17,"この先に君の","にせものとピノがいるはずだ","","");
			Message(17,"くれぐれも気をつけて","","","");
			ch[400] = -1;
			return 0;
		}
		else
		{
			// ドクイベント中
			Message(17,"レバーを修理できるオバケを","つれてくるしかないな","","");
			ch[400] = -1;
			return 0;
		}
	}
	
	if (map == 208)
	{
		if (ch[2513])
		{
			//プク
			Message(17,"確か、ここは毒ガスをまく","キノコが生えていたはずだ","","");
			Message(17,"毒ガスを防ぐ道具が","あればいいんだけど…","","");
			ch[400] = -1;
			return 0;
		}
		if (ch[2517] && !ch[2513])
		{
			// 岩壊し成功ムービー
			PostScr(1198);
			ch[400] = -1;
			return 0;
		}
		if (ch[2510] && !ch[2517])
		{
			//プク
			Message(17,"モグロウには会ったことがないんだ","","","");
			Message(17,"僕とピノがホームへ来るより前に","家を出て行ったらしいからね","","");
			Message(17,"ちょっと変わったオバケらしいよ","","","");
			ch[400] = -1;
			return 0;
		}
		if (ch[2509] && !ch[2510])
		{
			// 岩壊し失敗ムービー
			PostScr(1197);
			ch[400] = -1;
			return 0;
		}
		if (ch[2514] && !ch[2509])
		{
			//プク
			Message(17,"モグラオバケならこの岩を","すぐに取り除けるかもしれない","","");
			Message(17,"探して連れてくるしかないね","","","");
			ch[400] = -1;
			return 0;
		}
	}
	
	// チャッキー・鼻眼鏡クエスト中
	if (ch[2030] && map == 401)
	{
		//プク
		Message(17,"妙だな…","この季節に雪なんて","","");
		Message(17,"これも闇の霧の影響なんだろうか","","","");
		ch[400] = -1;
		return 0;
	}
	
	if (ch[1538])
	{
		if (ch[217] < 2)
		{
			//プク
			Message(17,"モトロさんは昔、あるニンゲンと","会うために君の街へ行ったそうだ","","");
			Message(17,"その時、街の近くで倒れてた","僕とピノを助けてくれたんだ","","");
			//パリン
			Message(0,"ふーん、ある人間って誰だろ？","","","");
			//プク
			Message(17,"…何となく想像はつくけどね","","","");
			//パリン
			Message(0,"え、だれだれ？","","","");
			//プク
			Message(17,"まあ、本人に直接","聞いてみたらいいんじゃないかな","","");
			//パリン
			Message(0,"何よ、ケチねぇ。","教えてくれたっていいじゃない","","");
			//プク
			Message(17,"はは、僕の予想が","当たってるとはかぎらないからね","","");
		}
		else
		{
			//プク
			Message(17,"モトロさんは昔、あるニンゲンと","会うために君の街へ行ったそうだ","","");
			Message(17,"その時、街の近くで倒れてた","僕とピノを助けてくれたんだ","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (ch[1505] && !ch[1513])
	{
		if (ch[2527])
		{
			//プク
			Message(17,"君のニセ者に連れて","行かれたピノのことが心配だ…","","");
			Message(17,"ピメントマウンテンへ向かおう！","","","");
		}
		if (ch[2526] && !ch[2527])
		{
			//プク
			Message(17,"パリン、おかげで助かったよ","","","");
			Message(17,"ペケがスポンサーになってくれれば","復興を進めることができる","","");
		}
		if (ch[2525] && !ch[2526])
		{
			if (ch[217] < 2)
			{
				//プク
				Message(17,"パリン、ペケには会えたかい？","","","");

				//パリン
				Message(0,"会えたわよ。","ひねくれオバケだったわ","","");

				//プク
				Message(17,"うん、昔から","気難しいオバケだけど","何とか説得してほしいんだ","");

				//パリン
				Message(0,"やれるだけやってみるわ","","","");
			}
			else
			{
				//プク
				Message(17,"ペケは昔から","気難しいオバケだけど","何とか説得してほしいんだ","");
			}
		}
		if (ch[2524] && !ch[2525])
		{
			if (ch[217] < 2)
			{
				//プク
				Message(17,"パリン、悪いけど","ペケとの交渉はお願いするよ","","");
				Message(17,"ピノの言うとおり、","君が行ったほうがよさそうだ","","");
				Message(17,"ペケの屋敷はスピナ洞窟を","抜けた先にあるはずだ","","");
			}
			else
			{
				//プク
				Message(17,"パリン、悪いけど","ペケとの交渉はお願いするよ","","");
				Message(17,"ペケの屋敷はスピナ洞窟を","抜けた先にあるはずだ","","");
			}
		}
		if (ch[2265] && !ch[2524])
		{
			// スポンサーイベント
			//プク
			Message(17,"パリン、おかえり","","","");
			Message(17,"ちょうどよかった。","今からみんなで話し合わなきゃ","いけないことがあるんだ","");
			//パリン
			Message(0,"何を話し合うの？","","","");
			//プク
			Message(17,"それはみんなの前で説明するよ。","君も参加してくれないか？","","");
			//パリン
			Message(0,"わかったわ","","","");
			ch[2524] = 1;
			Black(0,100,15);
			Wait(15);
			
			CharPos(17,-27,-184,38);
			CharPos(6,169,96,38);
			CharPos(0,-161,47,38);
			CharPos(18,33,186,38);
			CharPos(7,129,-136,38);
			CharPos(11,-132,-137,38);
			CharPos(16,-81,155,38);
			
			Look(0,17);
			Look(6,17);
			Look(7,17);
			Look(11,17);
			Look(16,17);
			Look(18,17);
			Look(17,18);
			
			Camera(17,-286,770,560);
			Wait(15);
			Black(0,0,15);
			Wait(15);

			ch[400] = 17;
			//プク
			Message(17,"みんなのおかげで","ホームの復興も順調だよ","","");
			Message(17,"でも、これ以上進めるには","スポンサーが必要なんだ","","");
			//パリン
			Message(0,"スポンサー？","","","");
			Look(17,0);
			Wait(10);
			ch[400] = 17;
			//プク
			Message(17,"修理もタダじゃできないからね","","","");
			Look(17,16);
			Look(16,0);
			Look(0,16);
			Look(6,16);
			Look(7,16);
			Look(11,16);
			Look(18,16);
	//		Camera(16,-55,-612,380);
			ch[400] = 16;
			//ポコ
			Message(16,"それなら、ペケにお願いするぽ！","","","");
			Message(16,"あそこの家は昔から金持ちだぽ","","","");

			Camera(18,-822,686,397);
			ch[400] = 18;
			Look(16,18);
			//ピノ
			Message(18,"でも、ペケさんは気難しい人でしゅ","","","");

			ch[400] = 16;
//			Camera(16,465,1275,465);
			//ポコ
			Message(16,"そうだったぽ","","","");
			Message(16,"簡単にスポンサーには","なってくれなさそうだぽ","","");

			Look(18,0);
			Wait(10);
	//		Camera(18,660,713,633);
			ch[400] = 18;
			//ピノ
			Message(18,"姉たまがペケさんに","お願いしてみてほしいでしゅ","","");

			Look(0,18);
			Look(6,0);
			Look(7,0);
			Look(11,0);
			Look(16,0);
			Look(17,0);
	//		Camera(0,130,240,262);
			Camera(0,-822,686,397);

			Wait(10);
			//パリン
			Message(0,"わたしが？","","","");

			Look(6,18);
			Look(7,18);
			Look(11,18);
			Look(16,18);
			Look(17,18);
			ch[400] = 18;
	//		Camera(18,-321,-1155,375);
			//ピノ
			Message(18,"お金を借りるには信用が第一でしゅ","","","");
			Message(18,"伝説のドリルを持っていれば","きっと信用してもらえるでしゅ","","");

			Look(6,0);
			Look(7,0);
			Look(11,0);
			Look(16,0);
			Look(17,0);
			Message(0,"うーん、いいけど…","","","");
			Camera(-1,0,0,0);
			Black(0,100,15);
			Wait(15);
			LoadMap(401);
			Black(0,0,15);
			Wait(15);
			MapEvent(1);
			
			return 0;
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (ch[217] < 2)
		{
			//プク
			Message(17,"イワオから聞いたよ。","ファントムたちは自分たちの","王国を建てたがってるそうだね","");
			//パリン
			Message(0,"そうみたいね","","","");
			//プク
			Message(17,"だから、ここを襲撃したのか…","ますます放っておけないな","","");
			Message(17,"パリン、すまないけど","これからも力を貸してくれ","","");
			//パリン
			Message(0,"まかしといて。","ここがなくなったら、","わたしも退屈になっちゃうもの","");
		}
		else
		{
			//プク
			Message(17,"ファントムたちは自分たちの","王国を建てたがってるそうだね","","");
			Message(17,"パリン、すまないけど","これからも力を貸してくれ","","");
		}
	}
	if (ch[507] && !ch[1542] && ch[2513])
	{
		//プク
		Message(17,"確か、スピナ洞窟には毒ガスをまく","キノコが生えていたはずだ","","");
		Message(17,"毒ガスを防ぐ道具が","あればいいんだけど…","","");
	}
	if (ch[507] && !ch[1542] && !ch[2513])
	{
		//洞窟イベント開始前のホームにいるプクのセリフ追加
		if (ch[217] < 2)
		{
			//プク
			Message(17,"パリン、ピエールを","助け出してくれてありがとう","","");
			Message(17,"ファントムたちはホームを","襲撃した時にみんなの家具を","奪っていったみたいだ","");
			Message(17,"もし家具を見つけたら","みんなに返してあげてくれ","","");
		}
		else
		{
			//プク
			Message(17,"ファントムたちはホームを","襲撃した時にみんなの家具を","奪っていったみたいだ","");
			Message(17,"もし家具を見つけたら","みんなに返してあげてくれ","","");
		}
	}
	if (ch[3200] && !ch[507])
	{
		// ポコにラジカセあげたあと
		ch[400] = 17;
		//プク
		Message(17,"闇の霧が一部晴れて","行ける場所が増えたみたいだ","","");
		Message(17,"ポコがやる気になったおかげだな","","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2260] && !ch[3200])
	{
		// ポコはまだ帰ってきていない
		Message(17,"ポコがいない…","","","");
		Message(17,"ホームの復興をさぼって","どこへ行ったんだろう","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2330] && !ch[507])
	{
		//プク
		Message(17,"闇の霧が発生している場所には","入ることができないはずだ","","");
		Message(17,"ひとまず入れる場所から","仲間を探していくしかないな","","");
	}
	if (ch[2317] && !ch[2330])
	{
		if (!ch[2328] && !ch[2329])
		{
			//プク
			Message(17,"パリン、街のどこかに","ピノとポコが隠れているはずだ","","");
			Message(17,"悪いけど探してきてくれないか？","","","");
		}
		if (!ch[2328] && ch[2329])
		{
			//プク
			Message(17,"パリン、あとはポコが","街のどこかに隠れているはずだ","","");
			Message(17,"悪いけど探してきてくれないか？","","","");
		}
		if (ch[2328] && !ch[2329])
		{
			//プク
			Message(17,"パリン、あとはピノが","街のどこかに隠れているはずだ","","");
			Message(17,"悪いけど探してきてくれないか？","","","");
		}
	}
	if (ch[1545] && !ch[2317])
	{
		// 兄たま発見イベント
		PostScr(1194);
		return 0;
	}

	ch[400] = -1;
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
// モトロ
#Script:00063
int main()
{
	int mg;
	string str;
	string txt;
	string str2;
	int a;
	int b;
	int tute;
	mg = 0;

	ch[2145] = 0;
	ch[2325] = 0;

	if (ch[2497])
	{
		return 0;
	}

	ch[400] = 19;
	
	KaguTest(20010,0);
	if (ch[420] == 310)
	{
		// サンクチュアリ
		//モトロ
		Message(19,"彼は奥のトカロンが","封じられた部屋に向かったようだ","","");
		Message(19,"今すぐ、追いかけるのである！","","","");
		ch[400] = -1;
		return 0;
	}

//	if (!ch[1789])
	{
		if (ch[2320])
		{
			//モトロ
			Message(19,"やぁ、何の用であるかな？","","","");
		}
		else
		{
			if (ch[1571] && !ch[1538])
			{
				//モトロ
				Message(19,"やぁ","","","");

				//パリン
				Message(0,"あっ！　あなたは！！","","","");

				//モトロ
				Message(19,"我輩はモトロである。","よくここまでたどり着いたのである","","");

				//パリン
				Message(0,"って、また先回りしたのね！","","","");

				//モトロ
				Message(19,"いやいや、ここは我輩の家なのである","","","");

				//パリン
				Message(0,"あれ、そうなの？","ずいぶん変わった家ね","","");
				Message(0,"あなた、普段は何してるの？","","","");

				//モトロ
				Message(19,"我輩であるか？","","","");
				Message(19,"我輩はホッカーに燃えている","メダルマニアの間では有名な","ネコおばけである","");

				//パリン
				Message(0,"ホッカーって何？","","","");

				//モトロ
				Message(19,"ニンゲンの君は知らないだろうが","最近オバケの間で流行っている","オバケ界で今一番熱い球技なのである","");
				Message(19,"我輩はホッカーで世界を取るため","日夜モグラオバケ達と","練習に励んでいるのである","");

				//パリン
				Message(0,"へ～、そうなんだ","","","");

				//モトロ
				Message(19,"そういえば、君がここに来たのは","何か用があってのことであるかな？","","");
			}
			if (!ch[1571])
			{
				//モトロ
				Message(19,"やぁ","","","");

				//パリン
				Message(0,"あっ！　あなたは！！","","","");

				//モトロ
				Message(19,"我輩はモトロである。","よくここまでたどり着いたのである","","");

				//パリン
				Message(0,"あれ？今回は白々しく","ごまかしたり、隠れたりしないの？","","");

				//モトロ
				Message(19,"ここは我輩の家なのである。","ごまかしたり、隠れたりするのは","客人に対して失礼なのである","");

				//パリン
				Message(0,"それもそうね。","ところであなたは一体何者なの？","","");

				//モトロ
				Message(19,"我輩であるか？","","","");
				Message(19,"我輩はホッカーに燃えている","メダルマニアの間では有名な","ネコおばけである","");

				//パリン
				Message(0,"ホッカーって何？","","","");

				//モトロ
				Message(19,"ニンゲンの君は知らないだろうが","最近オバケの間で流行っている","オバケ界で今一番熱い球技なのである","");
				Message(19,"我輩はホッカーで世界を取るため","日夜モグラオバケ達と","練習に励んでいるのである","");

				//パリン
				Message(0,"へ～、そうなんだ","","","");

				//モトロ
				Message(19,"そういえば、君がここに来たのは","何か用があってのことであるかな？","","");
			}
			ch[2320] = 1;
		}

		SelStart(50);
		KaguTest(20001,54);
		if (ch[430])
		{
			SelText("白金のメダルを渡す",1);
		}
		SelText("遊びに来た",2);
		SelText("何も用はない",3);
		SelEnd();

		if (ch[50] == 2)
		{
			// ミニゲーム
			if (ch[2322] && ch[2323])
			{
				Message(19,"どうやらチームは","できているようであるな","","");
				Message(19,"よし、それでは準備するのである","","","");
				mg = 1;
			}
			else
			{
				//モトロ
				Message(19,"ホッカーは３対３のチーム戦である","","","");
				Message(19,"メンバーを３人","集めて出直してくるのである","","");
				//パリン
				Message(0,"わかったわ","","","");
				Message(0,"オバケホームで","みんなを誘ってみよっと","","");
				ch[2327] = 1;
				ch[400] = -1;
				return 0;
			}
		}
		if (ch[50] != 2 && ch[50] != 1)
		{
			if (!ch[2324])
			{
				// スカッシュしたことない。
				Message(19,"そうか。","また今度、遊びに来るといい","","");
			}
			else
			{
				// 過去ベスト言う
				if (ch[2321] > ch[2318])
				{
					// モトロが勝っている
					str = "過去最高は" + ch[2318] + "：" + ch[2321] + "で";
					txt = "どうやら我がモトロ・アストラルズが";
					str2 = "勝っているようである";
				}
				else
				{
					int douten;
					douten = 0;
					str2 = "";
					str = "過去最高は" + ch[2318] + "：" + ch[2321] + "で";
					if (ch[2321] == ch[2318])
					{
						// 同点
						txt = "今のところ同点のようである";
						douten = 1;
					}
					// プレイヤーが勝っている
					if (ch[2321] < 1)
					{
						if (ch[2321] != ch[2318])
						{
							txt = "君達オバケドリームチームの";
							str2 = "圧勝のようである";
						}
					}
					else
					{
						if (ch[2318] - ch[2321] > ch[2321] && !douten)
						{
							txt = "君達オバケドリームチームの";
							str2 = "圧勝のようである";
							douten = 2;
						}
						if (ch[2318] - ch[2321] <= ch[2321] && !douten)
						{
							txt = "君達オバケドリームチームが";
							str2 = "勝っているようである";
						}
						
					}
					
				}
				Message(19,str,txt,str2,"");
				Message(19,"また遊びに来るといい","","","");
				
			}
			ch[400] = -1;
			return 0;
		}
		
		if (ch[50] == 1)
		{
			if (!ch[2117])
			{
				Message(0,"……そういえば","あなたってメダルマニアだったっけ？","","");
				Message(19,"うむ……","我輩は昔から超がつくほどの","メダルマニアである","");
				Message(0,"それじゃ、","この白金のメダルをあげるわ","","");
				Message(19,"むむっ、これは！？","幻のプラチナメダルである！！","","");
//				if (ch[2115])
//				{
//					Message(19,"なるほど。","彼の言っていた女の子は","君の事だったであるか……","");
//					Message(0,"なんのこと？","彼って…？","","");
//					Message(19,"な、なんでも無いのである。","気にしないでほしいのである","","");
//				}
				ch[2117] = 1;
			}

			if (ch[1789])
			{
				// メダルを換金する
				switch(ch[2055])
				{
				case 0:	// 初３００００ぺんね
					Message(19,"おお……","よく見つけてくれたのである……","","");
					Message(19,"￥３００００で交換するのである","","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 30000);
					break;
				case 1: // １００００ぺんね
					Message(19,"おお……","よく見つけてくれたのである……","","");
					Message(19,"今回は￥１００００で交換するのである","","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 10000);
					break;
				case 2: // ５０００ぺんね
					Message(19,"また見つけて","きてくれたのであるか？","","");
					Message(19,"最近はプラチナメダルが","よく見つかるせいか","価値が下がってきたのである","");
					Message(19,"今回は￥５０００で交換するのである","","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 5000);
					break;
				case 3: // １０００ぺんね
					Message(19,"またまた見つけてきて","くれたのであるか？","","");
					Message(19,"最近はプラチナメダルが","よく見つかるせいか","価値が下がってきたのである","");
					Message(19,"今回は￥１０００で交換するのである","","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 1000);
					break;
				case 4: // ５００ぺんね
					Message(19,"おや、また見つけて","きてくれたのであるか？","","");
					Message(19,"実はプラチナメダルの価値が","大暴落したのである","","");
					Message(19,"残念だが、今回は","￥５００で交換するのである","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 500);
					break;
				case 5: // １００ぺんね
					Message(19,"おやおや、また","見つけてきてくれたのであるか？","","");
					Message(19,"実はプラチナメダルの価値が","さらに大暴落したのである","","");
					Message(19,"残念だが、今回は","￥１００で交換するのである","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 100);
					break;
				default: // １ぺんね
					Message(19,"もはやプラチナメダルは","レア物でなくなってしまったのである……","","");
					Message(19,"しかし、わざわざ見つけてきてくれたので","￥１で交換するのである","","");
					ch[420] = 1;
					KaguTest(20006,54);
					SetGP(GetGP() + 1);
					break;
				}
				ch[2055] = ch[2055] + 1;
				ch[400] = -1;
				return 0;
			}
			if (ch[430] >= 11)
			{
				Message(19,"どうやら１１枚","集めたようであるな","","");
				Message(19,"よし、それなら我輩が預かっている","ドリルのパーツと交換するのである！","","");
				ch[420] = 11;
				KaguTest(20006,54);
			}
			else
			{
				Message(19,"どうやら１１枚","そろってはいないようである","","");
				Message(19,"１１枚たまったら","我輩が預かっているドリルパーツと","交換するのである！","");
				ch[400] = -1;
				return 0;
			}
			
			// 限界突破ゲット
			KaguTest(20025,0);
			Wait(15);
			KaguTest(30032,-100);
			KaguTest(30033,65);
			Wait(10);
			Camera(-1,0,0,0);

	//		GetItem(13);
			ch[1789] = 1;
			ch[2139] = 1;

	//		KaguTest(20034,ch[50]);
	//		SetGP(GetGP() - 9999);
			b = 1;

			txt = "ドリルレベルの限界値がアップした。";
			tute = 10;
			
			KaguTest(20051,0);
			KaguTest(20051,0);
			KaguTest(20051,0);
			KaguTest(20051,0);

			KaguTest(20023,0);
			Wait(15);
			Mes(txt);
			SE(955);
			Wait(50);
			KaguTest(20024,0);

			// チュートリアル表示
//			KaguTest(10006,0);
//			KaguTest(10007,7);
//
//			KaguTest2(10009,0,"dparts10.bmp");
//
//			ch[423] = 180;
//			ch[424] = 42;
//			ch[425] = 460;
//			ch[426] = 438;
//			ch[427] = 0;
//			ch[428] = 0;
//			ch[429] = 320;
//			ch[430] = 452;
//			ch[431] = 512;
//			KaguTest(10010,10);
//			Wait(10);
//			Message(0,"","","","");
//			ch[420] = 0;
//			KaguTest(10011,10);
//			Wait(10);

			ch[400] = -1;
			Camera(-1,0,0,0);
			KaguTest(30032,0);
			KaguTest(30033,100);
			Look(0,19);

			return 0;
		}
	}
	
	ch[400] = -1;
	
	if (ch[1538])
	{
		return 0;
	}

	if (mg)
	{
		int ln;
		// ミニゲームする	
		ch[2145] = 0;

		ch[420] = -1250;
		ch[421] = 0;
		ch[422] = 625;
		ch[423] = 670;
		ch[424] = 0;
		ch[425] = 70;
		KaguTest(30019,1);
		CrossFade();
		Wait(15);
		Event(231);
		SE(480);
		Wait(25);

		ln = Door2C(1);	
		KaguTest(30077,ln);
		SE(481);
//		Wait(5);
		KaguTest(30019,0);
		ch[420] = -1249;
		ch[421] = 0;
		ch[422] = 624;
		ch[423] = 0;
		ch[424] = 1349;
		ch[425] = 69;
//		Camera(ln,-1250,0,625);
		KaguTest(30019,1);
		CrossFade();
		Wait(25);
		ch[420] = 250;
		ch[421] = 1350;
		ch[422] = 0;
		ch[423] = 740;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,0);
		ch[420] = 250;
		ch[421] = 1550;
		KaguTest(30045,0);
		ch[420] = 0;
		KaguTest(30045,0);
		ch[420] = -250;
		KaguTest(30045,0);
		ch[421] = 1350;
		KaguTest(30045,0);
//		KaguTest2(30016,0,"7391827364");
		SE(482);
		Wait(1);

		KaguTest(30078,ln);
		Wait(25);
		ln = Door2C(2);	
		KaguTest(30077,ln);
		SE(481);
//		Wait(15);
		ch[420] = -1249;
		ch[421] = 0;
		ch[422] = 624;
		ch[423] = 0;
		ch[424] = -1349;
		ch[425] = 69;
//		Camera(ln,-1250,0,625);
		KaguTest(30019,1);
		CrossFade();

		Wait(25);
		ch[420] = 250;
		ch[421] = -1350;
		ch[422] = 0;
		ch[423] = 740;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,0);
		ch[420] = 250;
		ch[421] = -1550;
		KaguTest(30045,0);
		ch[420] = 0;
		KaguTest(30045,0);
		ch[420] = -250;
		KaguTest(30045,0);
		ch[421] = -1350;
		KaguTest(30045,0);
//		KaguTest2(30016,0,"7391827364");
		SE(482);
		Wait(1);

		KaguTest(30078,ln);
		Wait(25);
		
		Black(0,100,15);
		Wait(15);
		KaguTest(30019,0);
		ch[2144] = 5400;
		ch[2497] = 1;
		LoadMap(24);
		Camera(-1,0,0,0);
		Event(232);

		CharPos(0,0,-750,0);		
		CharPos(60,-300,-750,0);
		CharPos(61,300,-750,0);
		CharPos(64,0,750,0);
		CharPos(62,-300,750,0);
		CharPos(63,300,750,0);
		Camera(0,-450,-2380,840);
		Look(0,64);
		Look(64,0);
		Look(60,62);
		Look(62,60);
		Look(61,63);
		Look(63,61);
		KaguTest(12000,60);
		KaguTest(12001,60);
		KaguTest(12000,61);
		KaguTest(12001,61);
		KaguTest(12000,62);
		KaguTest(12001,62);
		KaguTest(12000,63);
		KaguTest(12001,63);

		CrossFade();
		Wait(15);
		Black(0,0,15);
		Wait(15);

		ch[400] = 64;

		Message(64,"ルールを説明するのである","","","");
		Message(64,"中央に現れるボールを","相手陣地のゴールに入れれば","得点になるのである","");
		Message(64,"３分間戦って、得点が多い","チームの勝利なのである","","");
		
		if (!ch[2324])
		{
			Message(64,"ところで君たちのチーム名を","教えてほしいのである","","");
			Message(60,"オバケドリームチームだぽ","","","");
			Look(0,60);
			Wait(10);
			Message(0,"えっ","そんなのいつ決まったの？","","");
			Look(61,0);
			Look(0,61);
			Message(61,"きっと今決まったんだよ","","","");
			Look(0,64);
			Look(61,63);
			Message(64,"オバケドリームチーム……","なかなか強そうなチーム名である","","");
			Message(64,"我輩たちはモトロ・アストラルズ。","いずれは世界に進出するチームである","","");
			Message(0,"凄いのね。","お手柔らかにお願いするわ","","")
			ch[2324]=1;
		}
		else
		{
			Message(0,"わかったわ","","","");
		}

		Message(64,"それでは始めるのである","","","");

		KaguTest(12000,58);
		KaguTest(12001,58);
//		Walk2(58,0,2,1);
//		KaguTest(20021,58);
//		Walk2(0,0,2,1);
//		KaguTest(20021,0);

		Wait(10);
		Camera(0,-800,-1375,370);
//		KaguTest(12000,58);
//		KaguTest(12000,59);
//		KaguTest(12001,58);
//		KaguTest(12001,59);
		Wait(15);
		ch[3982] = 4;
		ch[400] = -1;
		
		// テクスチャ読み込んでおく
		KaguTest2(10009,0,"minigm.iti");

		Camera(-1,0,0,0);		
		Wait(90);
		BGM(10);
		ch[2061] = 1;
	}
	
	return 0;

}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00078
int main()
{
//	//キャンディー食べた
	ch[3978] = ch[1790] * 1000 + ch[1791];
	ch[3977] = 1800; // 6０秒
	Wait(30);
}
#EndScript

//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00080
int main()
{
	//ネコミミ装備
	Wait(30);
	Soubi(40);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00081
int main()
{
	//ゴーグル装備
	Wait(30);
	Soubi(41);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00082
int main()
{
	//マスク装備
	Wait(30);
	Soubi(42);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00083
int main()
{
	//HPアップ
//	StatusUp(0);
	KaguTest(20032,0);
	Recover(0,15,1.0,0.0,10.0);
	Mes("ＨＰの最大値がアップした。");
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00084
int main()
{
	//MPアップ
//	StatusUp(1);
	KaguTest(20032,1);
	Mes("ＭＰの最大値がアップした。");
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00085
int main()
{
//	//OPアップ
//	StatusUp(2);
//	return 0;
	//MP回復
	KaguTest(20033,30);
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00086
int main()
{
	//ドリル回復
//	StatusUp(3);
//	int drill;
//	int bdri;
//	drill = 2;
//	bdri = ch[1791] / 100;

//	if (ch[1789])
//	{
//		drill = 3;
//	}
	Wait(50);
//	if (ch[1790] < drill)
//	{
//		ch[1790] = ch[1790] + 1;
//		Scop(0);
//		Scop(1);
//	}

//	ch[1791] = ch[1791] + 101;

	KaguTest(20051,0);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00087
int main()
{
	//安全装備
	Wait(30);
	Soubi(43);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00088
int main()
{
	//ハチマキ
	Wait(30);
	Soubi(44);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00089
int main()
{
	//りぼん装備
	Wait(30);
	Soubi(45);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00090
int main()
{
	//平家装備
	Wait(30);
	Soubi(46);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00091
int main()
{
	//頭巾装備
	Wait(30);
	Soubi(47);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00092
int main()
{
	//覇者装備
	Wait(30);
	Soubi(48);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00093
int main()
{
	//ファイア装備
	Wait(30);
	Soubi(3);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00094
int main()
{
	//吸血キット装備
	Wait(30);
	Soubi(21);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00095
int main()
{
	//バリア装備
	Wait(30);
	Soubi(13);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00096
int main()
{
	//サンダー装備
	Wait(30);
	Soubi(14);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00097
int main()
{
	//アイス装備
	Wait(30);
	Soubi(15);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00098
int main()
{
	//プロミネ装備
	Wait(30);
	Soubi(25);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00099
int main()
{
	//リバイバ装備
	Wait(30);
	Soubi(26);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00079
int main()
{
	//メテオー装備
	Wait(30);
	Soubi(27);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00100
int main()
{
	//猿防止装備
	Wait(30);
	Soubi(56);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00101
int main()
{
	//無いとキャップ装備
	Wait(30);
	Soubi(57);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00102
int main()
{
	//おだんご装備
	Wait(30);
	Soubi(61);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00103
int main()
{
	//王冠装備
	Wait(30);
	Soubi(62);
	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
#Script:00104
int main()
{
	//メイドキャップ装備
	Wait(30);
	Soubi(37);
	return 0;
}
#EndScript

//201 -> 401 改め 201 -> 208///////////////////////////////////3/28new!
#Script:00501
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(100);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		
//201 -> 202 ///////////////////////////////////3/28new!
#Script:00502
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(120);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		
			
//202 -> 201 ///////////////////////////////////3/28new!
#Script:00503
int main()
{
	int a;
	a = rand() % 7;
	ch[3610] = 0;
	ch[3611] = 0;
	ch[3612] = 0;
	ch[3613] = 0;
	ch[3614] = 0;
	ch[3615] = 0;
	ch[3616] = 0;
	ch[3610 + a] = 1;
	
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(100);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		
			
//202 -> 203 改め 202 -> ミニマップ ///////////////////////////////////3/28new!
#Script:00504
int main()
{
	MapEvent(0);

	if (ch[2497])
	{
		 //出る
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
//		if (ch[11])
		{
			// クリア
			int a;
			a = ch[2264];
			
			KaguTest(40002,0);

			TekiStop(1);
			MapEvent(0);
//			Walk(0,8,15);
				// 評価表示
			KaguTest(10500,120);

			if (ch[2264] < 1)
			{
				ch[2264]=1;
			}
			
			Wait(90);
			
			Message(0,"","","","");
			
			// ミニフィールドへ戻る
//			Black(0,100,30);
//			Wait(30);
			KaguTest(10011,10);
			Wait(10);
//			KaguTest(10100,0);
//			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
			
//			KaguTest(20025,0);
			PostScr(1192);
			
//			if (!a)
//			{
//				ch[429] = 3;
//				PostScr(1052);
//			}
			
		}
	}
	
	MapEvent(1);
}

#EndScript		
			
//203 -> 202 ///////////////////////////////////3/28new!
#Script:00505
int main()
{
	MapEvent(0);
	TekiStop(1);
	if (ch[2497])
	{
		// クリア
		int a;
		a = ch[2279];
		
		KaguTest(40002,0);
		TekiStop(1);
		MapEvent(0);
//		Walk(0,-8,15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2279] < 1)
		{
			ch[2279]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
		KaguTest(10011,10);
		Wait(10);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
//		KaguTest(20025,0);
		PostScr(1192);
		
//		if (!a)
//		{
//			ch[429] = 3;
//			PostScr(1052);
//		}
		
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,15);
			Wait(15);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}

#EndScript	

//203 -> 204 ///////////////////////////////////3/28new!
#Script:00506
int main()
{
	MapEvent(0);
	KaguTest(40002,0);

	if (ch[2497])
	{
		Walk(-8,0,11);
	}
	else
	{
		Walk(8,0,11);
	}
	
	Wait(11);
	Event(110);

	if (ch[2497])
	{
		Walk(-5,0,20);
	}
	else
	{
		Walk(5,0,20);
	}
	
	Wait(20);
	MapEvent(1);
}

#EndScript		
			
//204 -> 203 ///////////////////////////////////3/28new!
#Script:00507
int main()
{
	KaguTest(40002,0);
	if (ch[2498] > 2996)
	{
		ch[2498] = 2996;
	}
	MapEvent(0);

	if (ch[2497])
	{
		Walk(8,0,11);
	}
	else
	{
		Walk(-8,0,11);
	}
	
	Wait(11);
	Event(100);

	if (ch[2497])
	{
		Walk(5,0,20);

//		LiftEnable(0);
	}
	else
	{
		Walk(-5,0,20);
	}
	
	Wait(20);
	MapEvent(1);
}

#EndScript	

//204 -> 205 ///////////////////////////////////3/28new!
#Script:00508
int main()
{
	MapEvent(0);
	KaguTest(40002,0);

	if (ch[2497])
	{
		Walk(-8,0,11);
	}
	else
	{
		Walk(8,0,11);
	}
	
	Wait(11);
	Event(110);

	if (ch[2497])
	{
		Walk(-5,0,20);
	}
	else
	{
		Walk(5,0,20);
	}
	
	Wait(20);
	MapEvent(1);
}

#EndScript		
			
//205 -> 204 ///////////////////////////////////3/28new!
#Script:00509
int main()
{
	MapEvent(0);
	KaguTest(40002,0);

	if (ch[2497])
	{
		Walk(8,0,11);
	}
	else
	{
		Walk(-8,0,11);
	}
	
	Wait(11);
	Event(100);

	if (ch[2497])
	{
		Walk(5,0,20);
	}
	else
	{
		Walk(-5,0,20);
	}
	
	Wait(20);
	MapEvent(1);
}

#EndScript	

//205 -> クリア ///////////////////////////////////3/28new!
#Script:00510
int main()
{
	if (ch[2497])
	{
		// 裏
	}
	else
	{
		int a;
		a = ch[2273];
	
		KaguTest(40002,0);
		// クリア
		TekiStop(1);
		MapEvent(0);
//		Walk(-8,0,15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2273] < 1)
		{
			ch[2273]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
		KaguTest(10011,10);
		Wait(10);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
//		KaguTest(20025,0);
		PostScr(1192);
		
//		if (!a)
//		{
//			ch[429] = 3;
//			PostScr(1052);
//		}
	}

}

#EndScript		
			
//206 -> 205 ///////////////////////////////////3/28new!
#Script:00511
int main()
{
	MapEvent(0);

	if (ch[2497])
	{
		Walk(-8,0,11);
	}
	else
	{
		Walk(8,0,11);
	}
	
	Wait(11);
	Event(100);
	if (ch[2497])
	{
		Walk(-5,0,20);
	}
	else
	{
		Walk(5,0,20);
	}
	Wait(20);
	MapEvent(1);
}

#EndScript	

////401 -> 301 ///////////////////////////////////3/28new!
//#Script:00512
//int main()
//{
//	if (ch[1538])
//	{
//		MapEvent(0);
//		Walk(0,8,30);
//		Wait(30);
//		Message(0,"こっちに行く必要は無いわ。","","","");
//		Walk(0,5,20);
//		Wait(20);
//		MapEvent(1);
//		return 0;
//	}
//
//	MapEvent(0);
//	Walk(0,-8,11);
//	Wait(11);
//	KaguTest(10100,0);
//	Event(130);
//	Walk(0,5,20);
//	Wait(20);
//	MMV("egg.mmv");
//	MapEvent(1);
//
//	PostScr(697);
//
//	ch[435] = 0;
//}
//#EndScript		
			
//301 -> 401 あらため、301 -> 309 ///////////////////////////////////3/28new!
//309の場合はクリア
#Script:00513
int main()
{
	KaguTest(20010,0);

	if (ch[420] == 301)
	{
		KaguTest(40002,0);
		MapEvent(0);
		Walk(0,-8,11);
		Wait(11);
		Event(100);
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
	
		return 0;
	}

	int a;
	a = ch[2284];

	MapEvent(0);
	KaguTest(40002,0);
	// クリア
	TekiStop(1);
	MapEvent(0);
//	Walk(0,-8,15);
		// 評価表示
	KaguTest(10500,120);

	if (ch[2284] < 1)
	{
		ch[2284]=1;
	}
	
	Wait(90);
	
	Message(0,"","","","");
	
	// ミニフィールドへ戻る
	Black(0,100,30);
	Wait(30);
	KaguTest(10011,10);
	Wait(10);
	KaguTest(10100,0);
	KaguTest(99999,0);
	TekiStop(0);
	MapEvent(1);

	return 0;

}

#EndScript		

//301 -> 302 ///////////////////////////////////3/28new!
#Script:00514
int main()
{
	ch[3600] = 1;
//	ch[2501] = 0;

	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(110);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		
			
//302 -> 301 ///////////////////////////////////3/28new!
#Script:00515
int main()
{
//	ch[2501] = 0;

	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(100);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		

//302 -> 303 ///////////////////////////////////3/28new!
#Script:00516
int main()
{
//	ch[2501] = 1;
	MapEvent(0);
	KaguTest(40002,0);

	if (ch[2497])
	{
		Walk(-8,0,11);
	}
	else
	{
		Walk(8,0,11);
	}
	
	Wait(11);
	Event(110);

	if (ch[2497])
	{
		Walk(-5,0,20);
	}
	else
	{
		Walk(5,0,20);
	}
	
	Wait(20);
	MapEvent(1);
	
	if (!ch[2497])
	{
		PostScr(815);
	}
}

#EndScript		
			
//303 -> 302 ///////////////////////////////////3/28new!
#Script:00517
int main()
{
//	ch[2501] = 1;
	MapEvent(0);
	KaguTest(40002,0);

	if (ch[2497])
	{
		Walk(8,0,11);
	}
	else
	{
		Walk(-8,0,11);
	}
	
	Black(0,100,11);
	Wait(11);
	Event(100);
	Wait(15);
	Black(0,0,15);
	
	// イベント起こす
	if (ch[2497])
	{
		// 岩をどける
		int rock;
		int c;
		int pt1;
		int pt2;
		int pt3;
		int x;
		int y;
		int z;
		ch[421] = 3;
		KaguTest(30034,3);
		rock = ch[420];
		KaguTest(30025,1);
		c = ch[420];
		KaguTest(12004,c);
		pt1 = ch[420];
		KaguTest(12004,c+1);
		pt2 = ch[420];
		KaguTest(12004,c+2);
		pt3 = ch[420];
		KaguTest(12000,c);
		KaguTest(12000,c+1);
		KaguTest(12000,c+2);

		GetCharPos(rock,x,y,z);		
		CharPos(rock,x,y,2000);
		GetCharPos(rock+1,x,y,z);		
		CharPos(rock+1,x,y,2000);
		GetCharPos(rock+2,x,y,z);		
		CharPos(rock+2,x,y,2000);
		CharPos(c,-4650,-75,0);
		CharPos(c+1,-4350,0,0);
		CharPos(c+2,-4350,-150,0);
		
		// パリン歩く
		Walk(5,0,20);
		ch[429] = 0;
		KaguTest(30039,0);

		// ファントムたち歩く
		Walk2(c,6,0,60);
		ch[429] = 0;
		KaguTest(30039,0);
		Walk2(c+1,8,0,60);
		ch[429] = 0;
		KaguTest(30039,0);
		Walk2(c+2,8,0,60);
		ch[429] = 0;
		KaguTest(30039,0);
		Wait(20);
			// カメラを奴らに
		SaveCamera();
		ch[420] = -5089;
		ch[421] = -55;
		ch[422] = 320;
		ch[423] = -4039;
		ch[424] = -72;
		ch[425] = 20;
		KaguTest(30093,40);
		KaguTest(30019,14);
		CrossFade();
		Wait(40);
		// エモ出し
		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,c+1);
		Wait(10);
		KaguTest(30036,c+2);
		Wait(10);
		ch[420] = 8;
		KaguTest(30036,c);
		Wait(20);
		
		// 岩ふってくる
		KaguTest(30077,rock);
		KaguTest(30077,rock+1);
		KaguTest(30077,rock+2);
		ch[420] = 478;
		KaguTest(30100,rock);
		
		// 魚人は前方によける
		Walk2(c+1,10,15,15);
		ch[429] = 1;
		KaguTest(30039,0);
		Walk2(c+2,10,-15,15);
		ch[429] = 1;
		KaguTest(30039,0);
		ch[421] = 30;
		ch[422] = 1;
		KaguTest(30037,c+1);
		KaguTest(30037,c+2);
		
		// しいたけスライムは後方に
		Walk2(c+1,15,0,15);
		ch[429] = 1;
		KaguTest(30039,0);
		ch[421] = 30;
		ch[422] = 1;
		KaguTest(30037,c);
		Wait(15);
		Look(c+1,rock);
		Look(c+2,rock);
		Wait(23);
		
		// 岩着地
		KaguTest(30078,rock);
		KaguTest(30078,rock+1);
		KaguTest(30078,rock+2);
		int x2;
		int y2;
		GetCharPos(rock,x,y,z);
		x2 = x;
		y2 = y;
		CharPos(rock,x,y,0);
		GetCharPos(rock+1,x,y,z);
		x2 = x2 + x;
		y2 = y2 + y;
		CharPos(rock+1,x,y,0);
		GetCharPos(rock+2,x,y,z);
		x2 = x2 + x;
		y2 = y2 + y;
		CharPos(rock+2,x,y,0);
		
		// エフェクト
		ch[420] = x2 / 3;
		ch[421] = y2 / 3;
		ch[422] = 0;
		ch[423] = 734;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,0);
		ch[422] = -20;
		KaguTest(30045,0);
		ch[422] = -5;
		KaguTest(30045,0);
		ch[422] = 15;
		ch[423] = 2105;
		KaguTest(30045,0);
		KaguTest2(30016,0,"4545");
		ch[420] = 477;
		KaguTest(30100,rock);
		
		Wait(7);
		
		// 涙エモと汗エモだす
		ch[420] = 2015;
		ch[429] = 1;
		KaguTest(30036,c);
		ch[420] = 2011;
		ch[429] = 1;
		KaguTest(30036,c+1);
		KaguTest(30036,c+2);
		Wait(30);
		
		// イベント終わり
		ch[420] = pt1;
		KaguTest(12002,c);
		ch[420] = pt2;
		KaguTest(12002,c+1);
		ch[420] = pt3;
		KaguTest(12002,c+2);
		ch[420] = 3;
		KaguTest(12005,c);
		KaguTest(12005,c+1);
		KaguTest(12005,c+2);
		
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
	}
	else
	{
		Walk(-5,0,20);
		Wait(20);
	}
	MapEvent(1);
}

#EndScript		

//303 -> 304 改め 303 -> ミニマップ ///////////////////////////////////3/28new!
#Script:00518
int main()
{
	MapEvent(0);

	if (ch[2497])
	{
	}
	else
	{
		// クリア
		int a;
		a = ch[2268];
		
		KaguTest(40002,0);

		TekiStop(1);
//		Walk(8,0,15);

			// 評価表示
		KaguTest(10500,120);

		if (ch[2268] < 1)
		{
			ch[2268] = 1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,10);
		Wait(10);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
		if (!a)
		{
			ch[429] = 5;
			PostScr(1052);
		}
		
	}

//	if (ch[2497])
//	{
//		Walk(-8,0,11);
//	}
//	else
//	{
//		Walk(8,0,11);
//		KaguTest(40002,0);
//	}
//	
//	Wait(11);
//	Event(110);
//
//	if (ch[2497])
//	{
//		Walk(-5,0,20);
//	}
//	else
//	{
//		Walk(5,0,20);
//	}
//	
//	Wait(20);
//	MapEvent(1);
}
#EndScript
			
//304 -> 303 ///////////////////////////////////3/28new!
#Script:00519
int main()
{
	if (ch[2497])
	{
		int a;
		a = ch[2283];
	
		KaguTest(40002,0);

		// クリア
		TekiStop(1);
		MapEvent(0);
//		Walk(8,0,15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2283] < 1)
		{
			ch[2283]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,10);
		Wait(10);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
		if (!a)
		{
			ch[429] = 5;
			PostScr(1052);
		}
		
	}
	else
	{
		MapEvent(0);
		Walk(-8,0,11);

		Wait(11);
		Event(100);

		Walk(-5,0,20);

		Wait(20);
		MapEvent(1);
	}
}

#EndScript		

//304 -> 305 ///////////////////////////////////3/28new!
#Script:00520
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(110);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		
			
//305 -> 304 ///////////////////////////////////3/28new!
#Script:00521
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(100);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}

#EndScript		

//305 -> 306 改め 305 -> ミニマップ///////////////////////////////////3/28new!
#Script:00522
int main()
{
	MapEvent(0);
	
	if (ch[2497])
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(-8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		// クリア
		KaguTest(40002,0);

		TekiStop(1);
		MapEvent(0);
//		Walk(8,0,15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2269] < 1)
		{
			ch[2269]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
		Black(0,100,30);
		Wait(30);
		
//		if (!ch[2635])
//		{
//			PlayMovie("ouen3.txt",0);
//		}
		
		KaguTest(10011,10);
		Wait(10);
		KaguTest(10100,0);
		ch[298] = 1;
		KaguTest(99999,0);
		ch[397] = 1;
		
		if (!ch[2235])
		{
			ch[2235] = 1;
//			ch[296] = 1;
		}

		if (!ch[2635])
		{
//			KaguTest(99990,0);
			ch[2635] = 1;
		}
		Black(0,100,15);
		Wait(15);
		ch[298] = 0;
		ch[420] = 100;
		ch[421] = 100;
		ch[422] = 100;
		KaguTest(30046,1);
		Wait(10);
		Black(0,0,15);

		TekiStop(0);
		MapEvent(1);
	}

//	ch[3609] = 1;
//	ch[2502] = 0;
//	if (ch[2497])
//	{
//		Walk(-8,0,11);
//	}
//	else
//	{
//		KaguTest(40002,0);
//		Walk(8,0,11);
//	}
//	
//	Wait(11);
//	Event(110);
//	if (ch[2497])
//	{
//		Walk(-5,0,20);
//	}
//	else
//	{
//		Walk(5,0,20);
//	}
//	Wait(20);
//	SetSavePos();
//	MapEvent(1);
}

#EndScript		

//306 -> 305 ///////////////////////////////////3/28new!
#Script:00523
int main()
{
	TekiStop(1);
	
	if (ch[2497])
	{
	}
	else
	{
		ch[50] = 0;
		WaitD(0);
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(-8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}


//	MapEvent(0);
//	if (ch[2497])
//	{
//		Walk(8,0,11);
//	}
//	else
//	{
//		Walk(-8,0,11);
//	}
//	Wait(11);
//	Event(100);
//
//	if (ch[2497])
//	{
//		Walk(5,0,20);
//	}
//	else
//	{
//		Walk(-5,0,20);
//	}
//	
//	Wait(20);
//	MapEvent(1);
}

#EndScript		

//312 -> 307 または 312 -> 308///////////////////////////////////3/28new!
//312 -> 315 315 -> 308
#Script:00524
int main()
{
	KaguTest(20010,0)
	
	if (ch[2497] && ch[420] == 315)
	{
		// ブラックビーン中間マップ
		float fx;
		float fy;
		int x;
		int y;
		// 裏マップ
		MapEvent(0);
		SaveCamera();
		ch[424] = 0;
		ch[425] = -4550;
		ch[426] = 12;
		KaguTest(30061,0);
		KaguTest(30060,0);
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		ch[420] = 0;
		ch[421] = -3115;
		ch[422] = 220;
		ch[423] = 0;
		ch[424] = -4567;
		ch[425] = -200;
		KaguTest(30019,1);
		KaguTest(20042,180);
		CrossFade();
		Wait(35);
		Event(112);
		ch[420] = 762;
		KaguTest(30100,0);
		Wait(115);
		Walk(0,-5,130);
		Wait(30);
		Event(113);
		ch[420] = 762;
		KaguTest(30100,0);
		Wait(100);
		Event(114);
		Black(0,100,30);
		Wait(30);
		RestoreCamera();
		CrossFade();
		Event(111);
		Blur(5,0,30);
		Black(0,0,30);
		Walk(0,8,30);
		KaguTest(30057,0);
		Wait(30);
		MapEvent(1);
		KaguTest2(30014,3,"trance2");
		KaguTest2(30014,2,"trance3");
		Blur(5,120,90);
		return 0;
	}
	
	if (ch[2497])
	{
		float fx;
		float fy;
		int x;
		int y;
		// 裏マップ
		MapEvent(0);
		SaveCamera();
		ch[424] = 50;
		ch[425] = 535;
		ch[426] = 12;
		KaguTest(30061,0);
		KaguTest(30060,0);
		Walk(ch[421],ch[422],ch[423]/2);
		Wait(ch[423]/2);
		ch[420] = 50;
		ch[421] = -550;
		ch[422] = 370;
		ch[423] = 45;
		ch[424] = 675;
		ch[425] = 375;
		KaguTest(30019,1);
		KaguTest(20042,180);
		CrossFade();
		Wait(35);
		Event(112);
		ch[420] = 762;
		KaguTest(30100,0);
		Wait(115);
		Walk(0,5,130);
		Wait(30);
		Event(113);
		ch[420] = 762;
		KaguTest(30100,0);
		Wait(100);
		Event(114);
		Black(0,100,30);
		Wait(30);
		RestoreCamera();
		CrossFade();
		Event(111);
		Blur(5,160,90);
		Black(0,0,30);
		Walk(6,-2,30);
		KaguTest(30057,0);
		Wait(30);
		MapEvent(1);
	}
	else
	{
		ch[50] = 1;
		if (ch[1541])
		{
			// 選択させる
			WaitD(0);
			SelStart(50);
			SelText("トカロンと戦う",1);
			SelText("アーマートカロンと戦う",2);
			SelEnd();
		}
		
		MapEvent(0);
		Walk(-8,0,11);
		Wait(11);

		if (ch[50] == 2)
		{
			// 308へ
			White(0,100,15);
			Wait(15);
			CharPos(0,0,-300,0);
			LoadMap(308);
			CharPos(0,0,-300,0);
		// モンスター_MONSHITO取得して配置
			KaguTest(20020,0);
			CharPos(ch[425],0,900,0000);
			KaguTest(30028,ch[425]);
			Wait(5);
			Walk(0,5,1);
			KaguTest(30057,0);
			
			TekiStop(1);
			White(0,0,30);
			Wait(30);
			TekiStop(0);
			MMV("boss08.mmv");
			MapEvent(1);
			return 0;
		}
		
		Black(0,100,15);
		Wait(15);
//		ch[1541] = 0;
		Event(110);
	//	Walk(-5,0,20);
	//	Wait(20);
		MapEvent(1);
	//	ch[2502] = 1;
		PostScr(413);
	}
}

#EndScript		
			
//307 -> 306 ///////////////////////////////////3/28new!
#Script:00525
int main()
{
//	ch[2502] = 1;
	MapEvent(0);
	Walk(8,0,11);
	Wait(11);
	Event(100);
	Walk(-5,0,20);
	Wait(20);
	MapEvent(1);
//	MMV(StageMMV(ch[1107]-2260));
}

#EndScript		

//307 -> 308 ///////////////////////////////////3/28new!
#Script:00526
int main()
{
//	MapEvent(0);
//	Walk(0,0,11);
//	Wait(11);
//	Event(110);
//	Walk(0,0,20);
//	Wait(20);
//	MapEvent(1);
}

#EndScript		

//308 -> 308 ///////////////////////////////////3/28new!
#Script:00527
int main()
{
	MapEvent(0);
	Walk(0,0,0);
	Wait(11);
	Event(100);
	Walk(0,0,0);
	Wait(20);
	MapEvent(1);
}

#EndScript		

//308 -> 307 ///////////////////////////////////3/28new!
//#Script:00528
//int main()
//{
//	MapEvent(0);
//	Walk(8,0,11);
//	Wait(11);
//	Event(110);
//	Walk(-5,0,20);
//	Wait(20);
//	MapEvent(1);
//}
//
//#EndScript		

//401 -> 208 ///////////////////////////////////
//#Script:00529
//int main()
//{
//	// 201阻止
//	MapEvent(0);
//	Walk(-8,0,30);
//	Wait(30);
//	Message(0,"まだこっちには行けないわ。","","","");
//	Walk(-5,0,20);
//	Wait(20);
//	MapEvent(1);
//	return 0;
//
//	MapEvent(0);
//	Walk(8,0,11);
//	Wait(11);
//	Black(0,100,15);
//	Wait(15);
//	KaguTest(10100,0);
//	Event(120);
//	Walk(8,0,20);
//	Wait(20);
//	MapEvent(1);
//
//	ch[435] = 0;
//}
//#EndScript		

//401 -> 309 ///////////////////////////////////
//#Script:00530
//int main()
//{
//	MapEvent(0);
//	Walk(0,-8,11);
//	Wait(11);
//	Black(0,100,15);
//	Wait(15);
//	KaguTest(10100,0);
//	Event(130);
//	Walk(0,5,20);
//	Wait(20);
//	MapEvent(1);
//
//	ch[435] = 0;
//}
//#EndScript		

//////////////////////
// ダンジョン１トラップ等

// 103:スイッチ入れたらリフトが動く
// 103裏:表のドアが開く
#Script:00552
int main()
{
	int x;
	int y;
	int z;
	int bt15;
	int ln;

//  表
	if (!ch[2497])
	{	
		ln = Lift2C(2);
		
		GetCharPos(ln,x,y,z);
		bt15 = Getbt15(ln);

		if (!bt15)
		{

	// スイッチ入れる
//			if (!ch[100])
			{
				if (!ch[2600])
				{
					SE(950);
				}
				Wait(5);

				TekiStop(1);
				Lock();
				SaveCamera();
//				KaguTest(30005,0);
//				Camera(ln , ch[421] , ch[422] , ch[423] );
				Camera(ln , 2175 , -1400 , 1100);
				CrossFade();
				Unlock();

				Wait(10);

				ch[100] = 1;
				Event(102);

				Wait(25);

//				if (!ch[2304])
//				{
////					KaguTest(10006,2);
////					ch[423] = -50;
////					KaguTest(10007,4);
////					KaguTest2(10008,0,"スイッチリフト");
////					KaguTest2(10008,1,"中心のボタンに乗ったり、レバーを引いたりすると");
////					KaguTest2(10008,2,"動き出して、上に乗っている人や物を運びます。");
////					KaguTest2(10008,3,"勝手に動くリフトや全く動かないリフトもあります。");
////					KaguTest(10010,10);
////					
////					Wait(10);
////					
////					Message(0,"","","","");
////					
////					KaguTest(10011,10);
//
//					KaguTest(10006,0);
//					KaguTest(10007,7);
//					KaguTest2(10009,0,"tute_07.bmp");
//					ch[423] = 180;
//					ch[424] = 42;
//					ch[425] = 460;
//					ch[426] = 438;
//					ch[427] = 0;
//					ch[428] = 0;
//					ch[429] = 320;
//					ch[430] = 452;
//					ch[431] = 512;
//					KaguTest(10010,10);
//					Wait(10);
//					Message(0,"","","","");
//					ch[420] = 0;
//					KaguTest(10011,10);
//					Wait(10);
//						
//					ch[2304] = 1;
//				}

				Lock();
				RestoreCamera();
					Camera(-1 , 0 , 0 , 0 );
				CrossFade();
				Unlock();
				TekiStop(0);
			}

		}
	}
	else
	{
//		裏
		if (!ch[260])
		{
			TekiStop(1);
		
			ch[260] = 1;
			ln = Door2C(1);
			
			GetCharPos(ln,x,y,z);
			
			SE(950);
			
			SaveCamera();
			Camera(ln,x - 1200,y + 400,z + 400);
			CrossFade();

			Wait(15);
			
			Event(102);
			
			Wait(40);
			
			Camera(-1,0,0,0);
			RestoreCamera();
			CrossFade();
			
			Wait(15);
			TekiStop(0);
		}

	}
}
#EndScript

///////////////////////////////////
// ダンジョン２トラップ

// 203下->203上
//#Script:00560
//int main()
//{
//	if (ch[2110])
//	{
//		MapEvent(0);
//		Blur(2,200,40);
//		SE(954);
//		KaguTest2(40000,0,"301");
//		//Walk(8,0,11);
//		Wait(40);
//		Event(203);
//		Blur(2,0,30);
//		Walk(0,-5,30);
//		Wait(30);
//		SetSavePos();
//		MapEvent(1);
//	}
//}
//#EndScript

// 203上->203下
//#Script:00561
//int main()
//{
//	ch[2110] = 1;
//	MapEvent(0);
//	Blur(2,200,40);
//	SE(954);
//	KaguTest2(40000,0,"301");
//	//Walk(8,0,11);
//	Wait(40);
//	Event(202);
//	Blur(2,0,30);
//	Walk(0,-5,30);
//	Wait(30);
//	SetSavePos();
//	MapEvent(1);
//}
//#EndScript

// 201:左側レバーオン
#Script:00562
int main()
{
	if (!ch[202] && !ch[260])
	{
		ch[202] = 1;
//		KaguTest(30021,60);	// ID60の敵復活
		if (ch[203])
		{
			SE(950);

			Wait(5)
			
		TekiStop(1);
		SaveCamera();
			Camera(Door2C(1) , -150 , -2700 , 400 );
		CrossFade();
			
			Wait(25);
			
			Event(114);
			
			Wait(35);
			
		RestoreCamera();
			Camera(-1,0,0,0);
		CrossFade();
		
			Wait(15);
			ch[260] = 1;
		TekiStop(0);
		}
	}
//	if (!ch[202])
//	{
//		if (!ch[2112])
//		{
//			Event(101);
//		}
//		
// 敵出す
//		CharPos( 58 , -1650 , -1950 , 150 );	
//		CharPos( 59 , -1650 , -1350 , 150 );	
//		SE(952);
//		
//		ch[202] = 1;
//	}
}
#EndScript

// 202:あたりに触れると次々に現れる敵の最初の奴が現れる
#Script:00563
int main()
{
	SaveCamera();
	TekiStop(1);

	ch[420] = -88;
	ch[421] = 6156;
	ch[422] = 172;
	ch[423] = -130;
	ch[424] = 7247;
	ch[425] = 195;
	KaguTest(30019,1);
	CrossFade();
	Wait(20);
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,3);
	Wait(30);
	
	TekiStop(0);
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
}
#EndScript

// 201:右側レバーオン
#Script:00564
int main()
{
	if (!ch[203] && !ch[260])
	{
		ch[203] = 1;
//		KaguTest(30021,60);	// ID60の敵復活
		if (ch[202])
		{
			SE(950);

			Wait(5)
			
		TekiStop(1);
		SaveCamera();
			Camera(Door2C(1) , -150 , -2700 , 400 );
		CrossFade();
			
			Wait(25);
			
			Event(114);
			
			Wait(35);
			
		RestoreCamera();
			Camera(-1,0,0,0);
		CrossFade();
			Wait(15);
			
			ch[260] = 1;
		TekiStop(0);
		}
	}

//	if (!ch[203])
//	{
//		if (!ch[2113])
//		{
//			Event(103);
//		}
//		
// 敵出す
//		CharPos( 60 , 1350 , -1950 , 150 );	
//		CharPos( 61 , 1350 , -1350 , 150 );	
//		SE(952);
//		
//		ch[203] = 1;
//	}
}
#EndScript

// 204:あたりに触れると敵が飛び降りてくる
#Script:00565
int main()
{
	int c;
	int pt1;
	int pt2;
	int pt3;
	
	SaveCamera();
	// 出現させておく
	ch[420] = 100000;
	ch[427] = 6;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c = ch[420];
	
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	KaguTest(12000,c+2);
	
	TekiStop(1);
	// カメラ向ける
	ch[420] = -1998;
	ch[421] = 200;
	ch[422] = -755;
	ch[423] = -1039;
	ch[424] = -9;
	ch[425] = -254;
	KaguTest(30093,15);
	KaguTest(30019,14);
	CrossFade();
	Wait(25);
	// 二匹飛ぶ
	Look(0,c);
	Walk2(c,-12,0,20);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(3);
	ch[421] = 25;
	ch[422] = 1;
	KaguTest(30037,c);
	Walk2(c+1,-12,0,20);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(3);
	ch[421] = 25;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(30);
	Look(c,0);
	Look(c+1,0);
	// 残り一匹飛ぶ
	Look(0,c+2);
	ch[420] = -1861;
	ch[421] = 217;
	ch[422] = -830;
	ch[423] = -1344;
	ch[424] = -616;
	ch[425] = -329;
	KaguTest(30093,20);
	Wait(25);
	Walk2(c+2,0,12,20);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(3);
	ch[421] = 25;
	ch[422] = 1;
	KaguTest(30037,c+2);
	Wait(30);
	Look(c+2,0);
	
	// 後始末
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = pt3;
	KaguTest(12002,c+2);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	TekiStop(0);
}
#EndScript

// 201:敵自販機
#Script:00566
int main()
{
// 購入可能な時
	int leftgp;
	int paygp;
	
	TekiStop(1);
	
	if (ch[2499] == 9)
	{
		// もう使えない
		Message(0,"もう使えないみたいね","","","");
		TekiStop(0);
		ch[2111] = 1;
		return 0;
	}
	
	if (ch[2499] == 9 && ch[418] == 0)
	{
		ch[2499] = 8;
	}

	if (ch[402] == 0 && ch[2499] < 9)
	{
		// メッセージ表示
		if (ch[2499] == 0)
		{
			ch[2499] = 1;
		}
		
		Message(0,"ちょうどお金が入りそうね","","","");
		
		SelStart(50);
		switch( ch[2499] )
		{
		case 1:
			SelText("￥１０入れる" , 1);
			SelText("￥１０入れない" , 2);
			paygp = 10;
			break;
		case 2:
			SelText("￥２０入れる" , 1);
			SelText("￥２０入れない" , 2);
			paygp = 20;
			break;
		case 3:
			SelText("￥５０入れる" , 1);
			SelText("￥５０入れない" , 2);
			paygp = 50;
			break;
		case 4:
			SelText("￥１００入れる" , 1);
			SelText("￥１００入れない" , 2);
			paygp = 100;
			break;
		case 5:
			SelText("￥２００入れる" , 1);
			SelText("￥２００入れない" , 2);
			paygp = 200;
			break;
		case 6:
			SelText("￥５００入れる" , 1);
			SelText("￥５００入れない" , 2);
			paygp = 500;
			break;
		case 7:
			SelText("￥１０００入れる" , 1);
			SelText("￥１０００入れない" , 2);
			paygp = 1000;
			break;
		case 8:
			SelText("￥２０００入れる" , 1);
			SelText("￥２０００入れない" , 2);
			paygp = 2000;
			break;
//		case 9:
//			SelText("￥２５０００入れる" , 1);
//			SelText("￥２５０００入れない" , 2);
//			paygp = 25000;
//			break;
		}
		SelEnd();
		
		if (ch[50] == 1)
		{
			leftgp = GetGP();
			// お金を取る
			if (leftgp < paygp)
			{
				ch[50] = -1;
				Message(0,"お金が足りないわ","","","");
			}
			else
			{
				leftgp = leftgp - paygp;
				SE(893);
			}
			SetGP(leftgp);
		}
//		else
//		{
//			SetGP(45000);
//		}
		
		if (ch[50] == 1)
		{
			ch[402] = 1;
			
			// 自販機から出させる
			TekiStop(0);
			Wait(2);
			
			if (ch[2499] == 8)
			{
				// 指定位置に宝箱移動させる
				TekiStop(1);
				SE(566);
				Wait(20);
				ch[2111] = 1;
				TekiStop(0);
				
				ch[2499] = 9;
			}
			else
			{
				// 敵止めて移動させる
				TekiStop(1);
				SE(951);
				Wait(15);
				KaguTest(20020,0);
				Walk2(4 + ch[425] + ch[2499],-8,0,35);
				KaguTest(20061,4 + ch[425] + ch[2499]);
				KaguTest(20021,0);
				Wait(35);
				TekiStop(0);
				Wait(1);
				KaguTest(30028,4 + ch[425] + ch[2499]);
			}
		}
	}
	else
	{
		Message(0,"今は使えないみたいね","","","");
	}
	TekiStop(0);
}
#EndScript

// 204:敵軍団倒したら扉開く
#Script:00567
int main()
{
	ch[201] = 1;
	Wait(15);
	SE(950);
	Camera(Door2C(1),-563,-1190,-609);
	CrossFade();
	Wait(20);
	Event(403);
	Wait(30);
	Camera(-1,0,0,0);
	CrossFade();
	Wait(15);
}
#EndScript

// 201:イベントあたりの敵倒した
#Script:00568
int main()
{
	if (!ch[261])
	{
		Wait(30);
	
		SE(950);
//	SE(952);

		TekiStop(1);

		SaveCamera();
		Camera(Door2C(5) , -150 , -550 , 550 );
		CrossFade();
		Wait(20);

		Event(117);

		Wait(30);
		Lock();
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Unlock();
		Wait(15);

		TekiStop(0);

		ch[261] = 1;
	}
}
#EndScript

// 202:スイッチ入れたら次のスイッチの場所示す
#Script:00569
int main()
{
	if (ch[302] == 0)
	{
		ch[302] = 1;

//		TekiStop(1);
		Wait(7);
		SE(950);
		SaveCamera();
		
		KaguTest(30033,50);
		CrossFade();
		Blur(3,100,15);
		Wait(7);
		ch[420] = -517;
		ch[421] = -964;
		ch[422] = 232;
		ch[423] = 349;
		ch[424] = -1184;
		ch[425] = 71;
		KaguTest(30093,20);
		ch[420] = 349;
		ch[421] = -1184;
		ch[422] = 71;
		KaguTest(30094,20);
		KaguTest(30019,15);
		Wait(20);
		ch[420] = -122;
		ch[421] = -1062;
		ch[422] = 271;
		ch[423] = 921;
		ch[424] = -1442;
		ch[425] = 71;
		KaguTest(30093,20);
		KaguTest(30019,14);
		Wait(20);
		ch[420] = 1335;
		ch[421] = -1034;
		ch[422] = 300;
		ch[423] = 821;
		ch[424] = -2161;
		ch[425] = -53;
		KaguTest(30093,20);
		Wait(20);
		ch[420] = 1730;
		ch[421] = -1829;
		ch[422] = 371;
		ch[423] = 357;
		ch[424] = -2026;
		ch[425] = 121;
		KaguTest(30093,20);

// 箱_OBJHITO取得して配置
		KaguTest(20020,1);
		
		CharPos(ch[425] + 2 , 75,-2175,500);
		CharPos(ch[425] + 3 , 375,-2175,500);
		CharPos(ch[425] + 4 , -525,-2175,500);
		CharPos(ch[425] + 5 , -225,-2175,500);
		KaguTest(30028,ch[425]+2);
		KaguTest(30028,ch[425]+3);
		KaguTest(30028,ch[425]+4);
		KaguTest(30028,ch[425]+5);

		ch[420] = 375;
		ch[421] = -2175;
		ch[422] = 150;
		KaguTest(30055,0);
		ch[420] = 75;
		ch[422] = 300;
		KaguTest(30055,0);
		ch[420] = -225;
		KaguTest(30055,0);
		ch[420] = -525;
		KaguTest(30055,0);

		Wait(20);
		ch[420] = 100000;
		ch[427] = 3;
		KaguTest(30015,2);
		KaguTest(30025,2);
		ch[421] = ch[420];
		ch[420] = 0;
		KaguTest(30109,ch[421]);
		
		ch[420] = 721;
		ch[421] = -2189;
		ch[422] = 933;
		ch[423] = -706;
		ch[424] = -2179;
		ch[425] = 446;
		KaguTest(30093,20);
		Wait(55);

		KaguTest(30033,100);
		RestoreCamera();
		KaguTest(30019,0);
		CrossFade();
		Blur(3,0,15);
		Wait(15);
		
//		TekiStop(0);
	}
	
}
#EndScript

// 205:壁壊したら石転がる。転がった後、揺れる
#Script:00570
int main()
{
	if (!ch[301])
	{
		ch[301] = 1;
//		Event(302);
//		ch[420] = 358;
//		KaguTest(30042,304);
//		ch[420] = 399;
//		KaguTest(30042,303);
//		ch[420] = 9999;
//		KaguTest2(30003,2,"tekiatari1");
		ch[402] = 1;
	}
	else
	{
		KaguTest2(30016,0,"B1B9B1B9B3B719374545");
		KaguTest2(30014,2,"@ballA");
		SE(568);
		KaguTest(20046,0);
		ch[420] = 1950;
		ch[421] = 716;
		ch[422] = -823;
		ch[423] = 352;
		ch[424] = 0;
		ch[425] = 11;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 1;
		KaguTest(30045,0);
		ch[420] = 1510;
		ch[421] = 860;
		ch[422] = -771;
		KaguTest(30045,rand() % 10);
		ch[420] = 1375;
		ch[421] = 629;
		ch[422] = -823;
		KaguTest(30045,rand() % 15);
		ch[420] = 100000;
		ch[427] = 0;
		KaguTest(30015,1);

		if (ch[2497])
		{
			ch[420] = -1650;
		}
		else
		{
			ch[420] = 1650;
		}
		ch[421] = 675;
		ch[422] = -615;
		KaguTest(30055,0);
	}
}
#EndScript

// 202:ボタンが２つ押されていたら扉開く
#Script:00571
int main()
{
	int y;
	if (ch[104] && !ch[155])
	{
		ch[155] = 1;
		KaguTest(30022,90);
	}

	if (ch[104] && ch[106] && !ch[11])
	{
		TekiStop(1);
		
		Wait(20);
		
 		SE(950);

 		Wait(5);
		SaveCamera();
		
		KaguTest(30105,0);
		y = 0;
		Blur(3,100,20);
		CrossFade();
		if (ch[421] < 2800)
		{
			y = 1;
			// ドアから遠い
			ch[420] = -140;
			ch[421] = 940;
			ch[422] = 175;
			ch[423] = -153;
			ch[424] = 1523;
			ch[425] = 70;
			KaguTest(30093,20);
			ch[420] = -153;
			ch[421] = 1523;
			ch[422] = 70;
			KaguTest(30094,20);
			KaguTest(30019,15);
			Wait(20);
		}
		ch[420] = -166;
		ch[421] = 3379;
		ch[422] = 229;
		ch[423] = -145;
		ch[424] = 4129;
		ch[425] = 170;
		KaguTest(30093,20);
		ch[420] = -145;
		ch[421] = 4129;
		ch[422] = 170;
		KaguTest(30094,20);
		KaguTest(30019,15);
		Wait(20);

		ch[420] = -175;
		ch[421] = 5772;
		ch[422] = 434;
		ch[423] = -129;
		ch[424] = 7430;
		ch[425] = 220;
		KaguTest(30093,20);
		KaguTest(30019,14);
		
		Wait(20);
	 	
		Event(106);
		ch[266] = 1;
		
		Wait(35);
		RestoreCamera();
		KaguTest(30019,0);
		CrossFade();
		Blur(3,0,15);

		Wait(15);
		TekiStop(0);
			
//		else
//		{
//			Event(106);
//		}
	}
}
#EndScript

// 205:サンダイザーつけたら扉開いて敵出てくる
#Script:00572
int main()
{
	TekiStop(1);
	Wait(15);
	SE(950);

	// カメラ向ける
	SaveCamera();	
	ch[420] = 1614;
	ch[421] = -2095;
	ch[422] = -538;
	ch[423] = 1632;
	ch[424] = -2591;
	ch[425] = -735;
	KaguTest(30093,20);
//	ch[420] = 1632;
//	ch[421] = -2591;
//	ch[422] = -735;
//	KaguTest(30094,20);
	KaguTest(30019,14);
	CrossFade();
	Blur(3,110,15);
	Wait(20);
	ch[420] = 1775;
	ch[421] = -3104;
	ch[422] = -301;
	ch[423] = 1492;
	ch[424] = -4157;
	ch[425] = -735;
	KaguTest(30093,20);
	KaguTest(30019,14);
	Wait(20);
	ch[420] = 1472;
	ch[421] = -4174;
	ch[422] = -78;
	ch[423] = -305;
	ch[424] = -4189;
	ch[425] = -785;
	KaguTest(30093,20);
	Wait(15);
		// 敵出現
	ch[420] = 100000;
	ch[427] = 5;
	KaguTest(30015,2);
	Wait(10);
	Event(307);
	Wait(40);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Blur(3,0,15);
	Wait(15);
	
	TekiStop(0);
	ch[300] = 1;
}
#EndScript

// 202:宝箱あけたら敵が降ってくる（中身の有無に関係なし）
#Script:00573
int main()
{
	SE(951);

// モンスター_MONSHITO取得して配置
	KaguTest(20020,0);
	CharPos( ch[425]+3 , 1200 , 3900 , 300 );	
	CharPos( ch[425]+4 , 1200 , 4500 , 300 );	
	KaguTest(30028,ch[425]+3);
	KaguTest(30028,ch[425]+4);
}
#EndScript

// 204:扉開ける
#Script:00574
int main()
{
	int x;
	int y;
	int z;

	SE(950);
	Black(0,100,30);
	Wait(30);

	ch[2497] = 0;

	SaveCamera();
	GetCharPos(0,x,y,z);

	LoadMap(204);
//	TekiStop(1);
	Camera(Door2C(10),500,150,200);
	CharPos(0,-100000,0,0);
	ResetFade();
	Wait(25);
	Black(0,0,10);
	Wait(10);

	Event(102);
	Wait(50);
	Black(0,100,10);
	Wait(10);

	ch[2497] = 1;
	Camera(-1,0,0,0);
	LoadMap(204);
	CharPos(0,x,y,z + 5);
	TekiStop(1);
	RestoreCamera();
	ResetFade();
	Black(0,0,30);
	Wait(30);

	TekiStop(0);

}
#EndScript

// 0205:ワープゾーン（0205<->0101）
#Script:00575
int main()
{
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	KaguTest2(40000,0,"301");
	//Walk(8,0,11);
	Wait(40);
//	Event(196);
//	if (ch[1505] && !ch[1516])
//	{
//		Black(0,100,15);
//		Wait(15);
//		Lock();
//		Blur(2,0,30);
//		CharPos(0,-20000,0,0);
//		LoadMap(401);
//		ResetFade();
//		Unlock();
//	}
//	else
	{
		Event(196);
		Blur(2,0,30);
		Walk(-5,0,30);
		Wait(30);
//		SetSavePos();
	}
	MapEvent(1);
}
#EndScript	

// ダンジョン３
// 0303:レバーで敵降るだけのトラップ
#Script:00576
int main()
{
	SE(951);

// モンスター_MONSHITO取得して配置
	KaguTest(20020,0);
	CharPos( ch[425]+10 , -375 , -675 , 400 );	
	CharPos( ch[425]+11 , 1050 , -150 , 400 );	
	KaguTest(30028,ch[425]+10);
	KaguTest(30028,ch[425]+11);
}
#EndScript

// 0303:レバーで敵降るだけのトラップ2
#Script:00577
int main()
{
	SE(951);

// モンスター_MONSHITO取得して配置
	KaguTest(20020,0);
	CharPos( ch[425]+12 , -375 , -675 , 400 );	
	CharPos( ch[425]+13 , 1050 , -150 , 400 );	
	KaguTest(30028,ch[425]+12);
	KaguTest(30028,ch[425]+13);
}
#EndScript

// 0303:亀に乗ったまま進むと扉が開く
#Script:00578
int main()
{
	if (ch[401])
	{
		SE(950);

		TekiStop(1);

		Wait(5);
		Lock();
		SaveCamera();
		Camera(Door2C(52),750,-150,550);
		CrossFade();
		Unlock();
		Wait(20);

		Event(203);

		Wait(30);
		Lock();
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Unlock();
		Wait(15);
		
		TekiStop(0);
		
		ch[264] = 1;
	}
}
#EndScript

// 0301:ボタン押されたら扉開く
#Script:00579
int main()
{
	SE(950);
	
	TekiStop(1);
//	Wait(20);
//	SaveCamera();
//	Camera(Door2C(2),-150,1800,550);
//	CrossFade();
//	Wait(20);
//	
//	Event(106);
//	
	Wait(30);
	Camera(Door2C(7),-150,650,550);
	CrossFade();
	Wait(20);
	
	Event(106);
	Event(112);
	
	Wait(30);
	RestoreCamera();
	Camera(-1,0,0,0);
	CrossFade();
	Wait(20);
	TekiStop(0);
	ch[260] = 1;
}
#EndScript

// 0301:ボタン離されたら扉閉じる
#Script:00580
int main()
{
		TekiStop(1);
		Wait(20);
		Lock();
		SaveCamera();
		Camera(Door2C(2),-150,1800,550);
		CrossFade();
		Unlock();
		Wait(20);
		
		Event(107);
		
		Wait(30);
		Lock();
		Camera(Door2C(7),-150,650,550);
		CrossFade();
		Unlock();
		Wait(20);
		
		Event(113);
		
		Wait(30);
		Lock();
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Unlock();
		Wait(20);
		TekiStop(0);
		
//	else
//	{
//		Event(107);
//		Event(113);
//	}
}
#EndScript

// 0301:空の宝箱あけたら敵が出る
#Script:00581
int main()
{
	TekiStop(1);
	Wait(45);
	ch[420] = -143;
	ch[421] = 2085;
	ch[422] = 310;
	ch[423] = -166;
	ch[424] = 3119;
	ch[425] = -42;
	KaguTest(30019,1);
	CrossFade();

	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);

	Wait(15);

	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,1);	
	int c;
	int pt[5];
	int i;
	KaguTest(30025,2);
	c = ch[420];
	// ID3は表示番号同じにする
	ch[420] = 1;
	KaguTest(30051,c+3);
	KaguTest(30051,c+4);
	for (i = 0;i < 5;i++)
	{
		KaguTest(12004,c+i);
		pt[i] = ch[420];
		KaguTest(12000,c+i);
	}
	Wait(15);
	ch[420] = 100000;
	KaguTest(30015,2);
	Wait(15);
	KaguTest(30015,3);
	Wait(15);
	ch[420] = 9;
	ch[429] = 1;
	KaguTest(30036,c);
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	KaguTest(30036,c+3);
	KaguTest(30036,c+4);
	Wait(30);
	for (i = 0;i < 5;i++)
	{
		ch[420] = pt[i];
		KaguTest(12002,c+i);
		ch[420] = 3;
		KaguTest(12005,c+i);
	}

	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	ch[100] = 1;
	TekiStop(0);
}
#EndScript

// 0302:敵を倒すと扉が開く
#Script:00582
int main()
{
	Wait(30);
	
	SE(950);
	
	TekiStop(1);
		Lock();
		SaveCamera();
	Camera(Door2C(56),3100,-75,500);
		CrossFade();
		Unlock();
	Wait(20);
	
	Event(103);
	
	Wait(30);
		Lock();
		RestoreCamera();
	Camera(-1,0,0,0);
		CrossFade();
		Unlock();
	Wait(20);
	TekiStop(0);
	ch[163] = 1;
}
#EndScript

// 302:飾台に雷ついたらリフト動く
#Script:00583
int main()
{
	TekiStop(1);
	if (ch[261] && ch[262] && ch[263] && ch[264])
	{
		// 全部の飾台に雷がついた
		SaveCamera();
		Wait(15);
		SE(950);
		ch[420] = -150;
		ch[421] = -3675;
		ch[422] = 360;
		ch[423] = -150;
		ch[424] = -2300;
		ch[425] = -440;
		KaguTest(30019,1);
		CrossFade();
		Wait(25);
		
		// SE出しながら動きだす
//		SE(891);
		ch[361] = 1;
//		Wait(10);
//		SE(891);
		ch[362] = 1;
//		Wait(10);
		SE(891);
		ch[363] = 1;
		Wait(20);
		SE(891);
		ch[364] = 1;
		Wait(40);
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
	}
	TekiStop(0);
}
#EndScript

// 0302:リフト移動させる
#Script:00584
int main()
{
//	SE(950);
	int a;
	a = 0;
	
	TekiStop(1);
	SaveCamera();

	if (!Getbt15(Lift2C(11)))
	{
		Wait(15);
		Camera(Lift2C(11),500,650,800);
		CrossFade();
		Wait(20);
		
		Event(107);
		
		Wait(90);
		a = 1;
	}
	if (!Getbt15(Lift2C(12)))
	{
		Camera(Lift2C(12),-225,-1100,525);
		CrossFade();
		Wait(20);
		
		Event(111);
		Wait(90);
		a = 1;
	}

	if (a)
	{	
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Wait(20);
	}
	
	TekiStop(0);
}
#EndScript

// 0302:早登りリフトオン
#Script:00585
int main()
{
	SE(950);
	
	Wait(5);
		Lock();
		SaveCamera();
	Camera(Lift2C(13),-450,-2625,1450);
		CrossFade();
		Unlock();
	Wait(20);
	
	Event(108);

	Wait(90);
		Lock();
		RestoreCamera();
	Camera(-1,0,0,0);
		CrossFade();
		Unlock();
	Wait(20);
	
}
#EndScript

// 304:あたりに触れるとカイザー角とスライム兵ｘ２出てくる
#Script:00586
int main()
{
	TekiStop(1);
	ch[420] = 1540;
	ch[421] = 566;
	ch[422] = 758;
	ch[423] = 1856;
	ch[424] = 2175;
	ch[425] = 120;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	
	// 出現
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,3);
	KaguTest(30015,4);
	KaguTest(30015,5);
	KaguTest(30025,3);
	int c;
	c = ch[420];
	ch[420] = 2009;
	ch[421] = 30;
	ch[429] = 1;
	Wait(45);
	KaguTest(30053,c);
	Wait(45);
	ch[420] = 9;
	ch[429] = 1;
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	Wait(30);
	
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	TekiStop(0);
}
#EndScript

// 0304:火つけると扉開く
#Script:00587
int main()
{
	TekiStop(1);

	Wait(20);

	SE(950);
	KaguTest(30025,6);
	KaguTest(30114,ch[420]);
	
	SaveCamera();

	ch[420] = -1347;
	ch[421] = 489;
	ch[422] = 295;
	ch[423] = -298;
	ch[424] = 456;
	ch[425] = -4;
	KaguTest(30093,20);
	KaguTest(30019,14);
	CrossFade();
	Wait(20);
	ch[420] = -262;
	ch[421] = 490;
	ch[422] = 246;
	ch[423] = 575;
	ch[424] = 463;
	ch[425] = 95;
	KaguTest(30093,20);
	Wait(40);
	
	if (!ch[363])
	{
		Ksk(17);
		Wait(30);
	}
	Event(106);
	
	Wait(30);
	
	// 敵現れる
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	int c;
	int pt1;
	int pt2;
	KaguTest(30025,1);
	c = ch[420];
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);

	ch[420] = 474;
	ch[421] = 177;
	ch[422] = 288;
	ch[423] = -182;
	ch[424] = 452;
	ch[425] = 45;
	KaguTest(30019,1);
	CrossFade();
	Look(c+1,0);
	Wait(15);

	// ファントム打ち合わせ？
	ch[420] = 2009;
	ch[429] = 1;
	KaguTest(30036,c+1);
	Wait(45);
	Look(c+1,c);
	Wait(30);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c);
	KaguTest(30036,c+1);
	
	// ファントム出撃
	Walk2(c+1,0,6,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);
	Walk2(c+1,-12,0,60);
	KaguTest(30039,0);
	Walk2(c,0,-12,15);
	KaguTest(30039,0);
	Wait(15);
	Walk2(c,-12,0,45);
	KaguTest(30039,0);
	ch[420] = -2235;
	ch[421] = 1115;
	ch[422] = 458;
	ch[423] = -683;
	ch[424] = 505;
	ch[425] = 70;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	Look(0,c+1);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	Look(c+1,0);
	Look(c,0);

	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	TekiStop(0);
	
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	
	ch[267] = 1;
}
#EndScript

// 0304:レバーひくと扉開く
#Script:00588
int main()
{
	int x;
	int y;
	int z;

	if (!ch[268])
	{
//		ch[268] = 1;
//		Wait(20);
		SE(950);
//		Mes("どこかで扉の開く音がした");

		TekiStop(1);
		Wait(10);
//		Black(0,100,10);
//		Wait(10);

//		ch[2497] = 1;
		TekiStop(0);
//		GetCharPos(0,x,y,z);
		SaveCamera();
//		LoadMap(304);
		
//		CharPos(0,-100000,0,0);
		Camera(Door2C(53),1600,1200,500);
		ResetFade();
//		Wait(10);
//		Black(0,0,10);
		Wait(30);
		
		Event(107);
		Wait(40);
//		Black(0,100,10);
//		Wait(10);
		
//		ch[2497] = 0;
		Camera(-1,0,0,0);
//		LoadMap(304);
//		CharPos(0,x,y,z+5);
		TekiStop(1);
		RestoreCamera();
		ResetFade();
		Wait(10);
//		Black(0,0,10);
//		Wait(10);

		ch[268] = 1;

		TekiStop(0);
	}
}
#EndScript

// 0305:全ての飾台の火を消せば扉開く
#Script:00589
int main()
{
	if (!ch[305])
	{
		SaveCamera();

		TekiStop(1);
		Wait(15);
		SE(950);
		ch[420] = 757;
		ch[421] = -160;
		ch[422] = 334;
		ch[423] = 1942;
		ch[424] = -155;
		ch[425] = -4;
		KaguTest(30019,1);
		CrossFade();
		Wait(30);
			
		Event(101);
		Wait(20);
		ch[420] = 100000;
		ch[427] = 1;
		KaguTest(30015,1);
		KaguTest(30025,1);
		int c;
		c = ch[420];
		TekiStop(0);
		KaguTest(12006,c);
		KaguTest(12006,c+1);
		KaguTest(12006,c+2);
		KaguTest(12006,c+3);
		TekiStop(1);
		
		Wait(40);

		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		TekiStop(0);
		ch[305] = 1;
	}
}
#EndScript

// 305:アタリに触れたらボクサースライム現れる（ロッキー前座？）
#Script:00590
int main()
{
	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");

	TekiStop(1);
	Event(314);
	Wait(15);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Look(0,Door2C(2));
	Wait(30);
	
	ch[420] = 2750;
	ch[421] = 2475;
	ch[422] = 320;
	ch[423] = 3807;
	ch[424] = 2475;
	ch[425] = 20;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,2);
	KaguTest(30025,2);
	int c;
	c = ch[420];
	Look(0,c);
	Wait(30);
	ch[420] = 9;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(30);
	
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 305:敵倒したら扉開く
#Script:00591
int main()
{
	Wait(30);
	TekiStop(1);
	SE(950);
	
	ch[420] = 2750;
	ch[421] = 2475;
	ch[422] = 320;
	ch[423] = 3807;
	ch[424] = 2475;
	ch[425] = 20;
	KaguTest(30019,1);
	CrossFade();
	Wait(25);
	Event(317);
	Wait(40);
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	TekiStop(0);
	ch[315] = 1;
}
#EndScript

// 305裏：立て札
#Script:00592
int main()
{
	Message(0,"何か書いてある","","","");
	Message(0,"「一気に走り抜けろ","s080怪盗Ｍ」","","");
}
#EndScript

// 0201:モンスター自販機、敵倒した
#Script:00593
int main()
{
	if (ch[2499] != 9)
	{
		ch[410 + ch[2499]] = 0;
	}
	ch[2499] = ch[2499] + 1;
	ch[402] = 0;
}
#EndScript

// 0101:ワープゾーン（0101<->0205）
#Script:00594
int main()
{
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	KaguTest2(40000,0,"301");
	//Walk(8,0,11);
	Wait(40);
	Event(197);
	Blur(2,0,30);
	Walk(5,0,30);
	Wait(30);
//	SetSavePos();
	MapEvent(1);
}
#EndScript	

// 0306:ワープゾーン（0306<->0101）
#Script:00595
int main()
{
//	ch[2130]=1;
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	KaguTest2(40000,0,"301");
	//Walk(8,0,11);
	Wait(40);
	Event(196);
	Blur(2,0,30);
	Walk(5,0,30);
	Wait(30);
//	SetSavePos();
	MapEvent(1);
}
#EndScript

// 0101:ワープゾーン（0101<->0305）
#Script:00596
int main()
{
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	KaguTest2(40000,0,"301");
	//Walk(8,0,11);
	Wait(40);
	ch[3609] = 1;
//	ch[2502] = 0;

	Event(198);
	Blur(2,0,30);
	Walk(0,-5,30);
	Wait(30);
//	SetSavePos();
	MapEvent(1);
}
#EndScript	

// 0206 金魚イベント
#Script:00597
int main()
{
}
#EndScript

// 0205:毒ガス立て札
#Script:00598
int main()
{
	TekiStop(1);
	
	
	Message(0,"何か書いてあるわ","","","");
	ch[420] = 2009;
	ch[421] = 30;
	KaguTest(30053,0);
	Wait(30);
	KaguTest(20010,0);
	if (ch[420] == 205)
	{
		Message(0,"また、このマークだわ……","","","");
		Message(0,"……だんがー？","だんじゃー？？","","");
		Message(0,"やっぱりよく分からないけど","危険みたいね","","");
	}
	else
	{
		Message(0,"どくろマークに……","……だんげる……？","","");
		Message(0,"よくわからないけど","何だか危険みたいね","","");
	}
	TekiStop(0);

//	KaguTest(10006,0);
//	KaguTest(10007,1);
//	KaguTest2(10008,2,"謎のマークが描かれている……");
//	KaguTest2(10009,0,"info_03.bmp");
//	KaguTest(10010,10);
	
//	Wait(10);
	
//	Message(0,"","","","");
	
//	KaguTest(10011,10);
	
//	Message(0,"よくわからないわ","","","");
}
#EndScript

// 305裏：あたりに触れたらトゲ中ボスがダイブしてトゲボールと合体（してるようにみせたい）
#Script:00599
int main()
{
	int c;
	SaveCamera();
	KaguTest(30025,1);
	c = ch[420];
	Look(0,c);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	
	ch[420] = -829;
	ch[421] = 449;
	ch[422] = 370;
	ch[423] = -215;
	ch[424] = -402;
	ch[425] = 70;
	KaguTest(30019,1);
	CrossFade();
	Wait(25);

	KaguTest(12000,c + 1);
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(30095,c + 1);
	
	Walk2(c + 1,-6,-4,45);
	Wait(5);
	ch[421] = 45;
	ch[422] = 1;
	KaguTest(30037,c + 1);
	ch[420] = 2;
	KaguTest(30095,c);
	Wait(40);
	CharPos(c + 1,-200000,0,0);
	Wait(30);

	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c);
	ch[420] = 3;
	KaguTest(12005,c);
	ch[420] = 1;
	KaguTest(30095,c);
	Wait(30);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
}
#EndScript

////////////////////////////
// シナリオ進行用

// 0208:ダンジョン２石版DAO
#Script:00400
int main()
{
	if (!ch[512] && !ch[1542])
	{
		// 壊されたイベントまだ
		Mes("大きな石版で道が塞がれている。");
		return 0;
	}

	{
		if (!ch[1542])
		{
			// 石版２回目以降
			Message(0,"モグレヌを探さないと","","","");
//			Message(0,"たしか、ラディスの森にいるとか……","","","");
		}
		else if (!ch[1502])
		{
			Black(0,100,30);
			Wait(30);
//			PlayMovie("skowa0.txt",0);
			ch[1502] = 1;
//			PlayMovie("ouen.txt",0);
			ch[1503] = 1;
			Black(0,100,0);
			LoadMap(208);
			Walk(-5,0,1);
			KaguTest(30057,0);
			Black(0,0,30);
			Wait(30);

//			Event(150);
		}
	}
}
#EndScript

// 0309:ダンジョン３石版DAO
#Script:00401
int main()
{
	if (!ch[1516])
	{
		// 壊されたイベントまだ
		Mes("大きな石版で道が塞がれている。");
		return 0;
	}

	if (!ch[1507])
	{
	// 石版初回
		//Mes("「イベント」初めて石版②に触れる");

//		Wait(10);
//		ch[1500] = 1;	
//		Wait(15)
//		REffect(6000,0,-1900,0);	
//		White(0,0,0);
//		YukaKesi(0,-1900);
	//	YukaKesi(1400,0);
	//	YukaKesi(-1300,-150);
//		White(0,100,30);
//		Wait(30);
//		ch[1507] = 1;
//		LoadMap(401);
//		PlayMovie("pflush2.txt",0);
//		Black(0,100,0);
//		Black(0,0,30);
//		ResetFade();
//		CharPos( 2 , -1800, -75 ,20 );
//		Wait(30);
//		//LoadMap(401);
//		
//		ch[442]=1;
	}
	else
	{
		// 石版２回目以降　＆　モグレヌ失敗後
		Message(0,"モグロウを探さないと","","","");
	}
}
#EndScript

// 0401:モグレヌ破壊
#Script:00402
int main()
{
	Black(0,100,30);
	Wait(30);
	Lock();
//	PlayMovie("skowa0.txt",0);
	Black(0,100,0);
	Black(0,0,30);
	ResetFade();
	Unlock();
	Wait(30);


	Wait(10);
	ch[1502] = 1;
}
#EndScript

// 0206:ラッシー戦
#Script:00403
int main()
{
	//Mes("「イベント」ラッシー戦");
	
	// ボス戦やったフラグを立てる
//	ch[1504] = 1;
}
#EndScript

// 0208:みんなの応援①
#Script:00404
int main()
{
//	Mes("「イベント」みんなの応援①");
//	Wait(30);


	Black(0,100,30);
	Wait(30);
	Lock();
//	PlayMovie("ouen.txt",0);
	Black(0,100,0);
	Black(0,0,30);
	MapEvent(0);
//	Event(120);
	ResetFade();
	Unlock();
//	Wait(30);

	ch[1503] = 1;

//	MapEvent(0);
//	Event(120);
//	Walk(0,5,20);
//	Wait(20);
//	MMV("spini.mmv");
	MapEvent(1);
}
#EndScript

// 0206:逃げるラッシー
#Script:00405
int main()
{
//	Mes("「イベント」ボス撃破②");
//	White(0,0,0);
//	White(0,100,30);
//	Wait(60);

	KaguTest(40002,0);
	
	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
//		if (ch[1790] > 2) ch[1790] = 2;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		LoadMapB(606);
		CharPos(0,0,2000,1050);

		KaguTest(20020,0);
	//		CharPos(ch[425],0,-300,20);
			CharPos(ch[425],0,2300,1050);
			KaguTest(30028,ch[425]);
			
			Scop2(ch[425],1,"scop.it3");
			
			KaguTest2(30013,50001,"fall_atari_ue");

		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
//		if (ch[1790] > 2) ch[1790] = 2;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
//		PlayMovie("dkt_3_3.txt",1);
		ch[1505] = 1;
		Wait(10);
//		PlayMovie("houkoku.txt",1);
		ch[1506] = 1;
		ch[1515] = 1;
		ch[528] = 1;
		Wait(10);
//		PlayMovie("fukkou.txt",1);
		ch[1516] = 1;
		Wait(10);
//		PlayMovie("pflush2.txt",1);
		ch[1507] = 1;
		ch[1508] = 1;
		Wait(10);
//		PlayMovie("nise.txt",1);
		ch[1512] = 1;
		Wait(10);
		
		LoadMapB(606);
		CharPos(0,0,2000,1050);

		KaguTest(20020,0);
	//		CharPos(ch[425],0,-300,20);
			CharPos(ch[425],0,2300,1050);
			KaguTest(30028,ch[425]);
			
			Scop2(ch[425],1,"scop.it3");
			
			KaguTest2(30013,50001,"fall_atari_ue");

		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	// デバッグここまで
	
//	BGM(6);

//	Lock();
	// 評価表示
	KaguTest(20020,0);
	CharPos(ch[425],-200000,0,0);
	CharPos(ch[425]+1,-200000,0,0);
	CharPos(ch[425]+2,-200000,0,0);
	CharPos(ch[425]+3,-200000,0,0);
	CharPos(ch[425]+4,-200000,0,0);
	CharPos(ch[425]+5,-200000,0,0);
	CharPos(ch[425]+6,-200000,0,0);
	White(0,0,30);
	Wait(30);
	KaguTest(10500,120);
		
	if (ch[2265] < 1)
	{
		ch[2265]=1;
	}
	
	Wait(90);
		
	Message(0,"","","","");
	
	// ボス倒したことがある場合はそのまま退出
	if (ch[1505])
	{
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,5);
		Wait(5);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		return 0;
	}	

	White(0,100,30);
	Wait(30);
	KaguTest(10011,5);
	Wait(5);
//	BGM(0);

	Mouse(0);
	KaguTest(20065,7);
	PlayMovie("dkt_3_3.txt",0);
	Mouse(1);
//	PlayMovie("houkoku.txt",0);
	ResetFade();
	Black(0,100,0);
//	Black(0,0,30);
	Unlock();

//	SetSavePos2( 206 , 0 , 0 , 38 );

	// いろいろフラグ立てる
	// ボス撃破　１５０５
	// 偽パリン誕生イベント見るためのフラグ　１５１５
	// 町復興フラグ　５２８
	ch[1505] = 1;
	ch[1515] = 1;
	ch[528] = 1;
	
	ch[298] = 1;
	KaguTest(99999,0);
	
	KaguTest(99990,0);
	Black(0,100,15);
	Wait(15);
	ch[298] = 0;
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,1);
	Wait(10);
	Black(0,0,15);

	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 0206 -> 0205（ボス撃破後初回時）:偽パリン誕生
#Script:00406
int main()
{
	MapEvent(0);
	Walk(8,0,11);
	Wait(5);
	Black(0,100,30);
//	Wait(11);

//	Mes("「イベント」偽パリン誕生");
	Wait(30);

//	Black(0,0,0);
//	Black(0,100,30);
//	Wait(30);

	Lock();	

	SaveMap();

	LoadMap(209);
//	PlayMovie("houkoku.txt",0);
	ResetFade();

	RestoreMap();
	ResetFade();

	Black(0,100,0);
	Black(0,0,30);
	Unlock();


	ch[1506] = 1;
	ch[1515] = 0;

	Event(100);

	Walk(5,0,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 0401:オバケ達との会話
#Script:00407
int main()
{
	ch[1516] = 1;
	Lock();	
//	PlayMovie("fukkou.txt",0);
	ResetFade();
	Walk(0,-4,1);
	KaguTest(30057,0);
	Black(0,100,0);
	Black(0,0,30);
	Unlock();
//	SetSavePos();
	ch[442] = 1;
	MapEvent(1);
	ch[3983] = 0;

//	Mes("「イベント」オバケ達との会話");
}
#EndScript

// 0401:モグレヌ失敗
#Script:00408
int main()
{
	Black(0,100,30);
	Wait(30);
	Lock();
//	PlayMovie("ssippa.txt",0);
	Black(0,100,0);
	Black(0,0,30);
	ResetFade();
	Unlock();
	Wait(40);
	ch[1508] = 1;
}
#EndScript

// 0401:モグ兄弟破壊
#Script:00409
int main()
{
	Black(0,100,30);
	Wait(30);
	Lock();
//	PlayMovie("skowa2.txt",0);
	Black(0,100,0);
	Black(0,0,30);
	ResetFade();
	Unlock();
	Wait(30);
//	Mes("イベント「モグ兄弟・石版破壊」");
	ch[1510] = 1;
//	Wait(10);
//	LoadMap(401);
}
#EndScript

// 0309:みんなの応援②
#Script:00410
int main()
{
//	Mes("イベント「みんなの応援②」");

//	return 0;
	Wait(30);
//	Event(120);

	Black(0,100,30);
	Wait(30);
	Lock();
//	PlayMovie("ouen2.txt",0);
	Black(0,100,0);
	Black(0,0,30);	
	MapEvent(0);
	Event(120);
	ResetFade();
	Unlock();

	ch[1511] = 1;

	Walk(0,5,20);
	Wait(20);
	MMV("egg.mmv");
	MapEvent(1);
}
#EndScript

// 0606:偽パリン戦
#Script:00411
int main()
{

	if (!ch[300])
	{
		if (!ch[1513])
		{
			// リフト位置関連フラグ
//			ch[2502] = 1;

			Black(0,100,30);
			Wait(30);
			Lock();
			Scop2(58,1,"scop.it3");
//			PlayMovie("yama_b0.txt",ch[1512]);
			Mouse(0);
			KaguTest(20065,28);
			PlayMovie("yam_3_2.txt",ch[1512]);
			Black(0,100,0);
			Wait(5);
//			Black(0,0,15);
			Walk(0,5,1);
			KaguTest(30057,0);
			Mouse(1);
//			BGM(28);	// 山ボス曲

			LoadMapB(606);
//			BGM(28);
			CharPos(0,0,2000,1050);

			TekiStop(1);
	//		LiftEnable(0);
			Black(0,100,0);
			MapEvent(0);
			ResetFade();
			Black(0,0,30);	

	//		CharPos(10,-500001,0,0);
	//		CharPos(58,0,0,0);

			Unlock();
	//		LoadMap(306);


			//Mes("イベント「偽パリン戦」");
			
			// リフトの移動
			Event(160);

			// 偽パリン戦やったフラグ	
			ch[1512] = 1;
			// 二度実行防止フラグ
			ch[300] = 1;

			// ゲームオーバー時用のリフト位置フラグ
//			ch[2502] = 0;

			MapEvent(1);

			CharPos(10,-500001,0,0);
	// モンスター_MONSHITO取得して配置
		KaguTest(20020,0);
	//		CharPos(ch[425],0,-300,20);
			CharPos(ch[425],0,2300,1065);
			KaguTest(30028,ch[425]);
			
			Scop2(ch[425],1,"scop.it3");
			
			KaguTest2(30013,50001,"fall_atari_ue");
			TekiStop(0);
		}
		else
		{
			TekiStop(1);
			
			Black(0,100,30);
			Wait(30);
			CharPos(0,0,2000,1050);

			KaguTest(20020,0);
	//		CharPos(ch[425],0,-300,20);
			CharPos(ch[425],0,2300,1065);
			KaguTest(30028,ch[425]);
			
			Scop2(ch[425],1,"scop.it3");
			ch[300] = 1;

			KaguTest2(30013,50001,"fall_atari_ue");
			BGM(28);
			
			Look(ch[425],0);
			Look(0,ch[425]);

			TekiStop(0);
			Black(0,0,30);
			
		}
		KaguTest(10600,ch[1107]-2260);
//		MMV(StageMMV(ch[420]));
		MMV("boss04.mmv");

	}

	SetSavePos2(606,0,-1050,-450);

	LiftEnable(0);
}
#EndScript

// 0606:偽パリン倒した
#Script:00412
int main()
{
//	Mes("偽パリン倒した");

//	Wait(100);
	// クリア表示
//	MapEvent(0);
//	TekiStop(1);

	KaguTest(40002,0);

//	White(0,0,30);
//	Wait(30);
	
	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		LoadMapB(307);
		CharPos(18,235,75,6555);
		CharPos(0,2100,0,6535);
		ch[301] = 1;
		
		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
//		PlayMovie("nise2.txt",1);
		ch[1513] = 1;
		ch[1509] = 1;
		Wait(10);
//		PlayMovie("skowa2.txt",1);
		ch[1510] = 1;
		ch[1511] = 1;
		Wait(10);
//		PlayMovie("lasboss.txt",1);
		ch[1514] = 1;
		Wait(10);
		
		LoadMapB(307);
		CharPos(18,235,75,6555);
		CharPos(0,2100,0,6535);
		ch[301] = 1;
		
		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	// デバッグここまで
	// 評価表示
//	BGM(0);
	KaguTest(10500,120);
		
	if (ch[2267] < 1)
	{
		ch[2267]=1;
	}
		
	Wait(90);
		
	Message(0,"","","","");
	

	// ボス倒したことがある場合はそのまま退出
	if (ch[1513])
	{
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,5);
		Wait(5);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		return 0;
	}	

	TekiStop(0);

	White(0,100,30);
	Wait(30);
	KaguTest(10011,5);
	Wait(5);
//	PlayMovie("yama_b1.txt",0);
	Mouse(0);
	KaguTest(20065,14);
	PlayMovie("yam_3_3.txt",0);
	
	// エッグプラントへの道開けるイベント出す
	PostScr(1240);
	SetWaku(1);
	KaguTest(99999,1);
	Wait(15);
}
#EndScript

// 0307:トカロン戦
#Script:00413
int main()
{
	int x;
	int y;
	int z;

	// 二度実行防止フラグ
	ch[300] = 1;

//	Mes("イベント「トカロン戦」");
		MapEvent(0);
		Black(0,100,30);
		Wait(30);
//		PlayMovie("lasboss.txt",ch[1514]);
		Mouse(0);
		KaguTest(20065,32);
		PlayMovie("GF_1.txt",ch[1514]);
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(-5,0,1);
		KaguTest(30057,0);
		Mouse(1);
//		BGM(32);
		MapEvent(0);
//		LiftEnable(0);
		Black(0,100,0);
		ResetFade();
		Black(0,0,30);	

//		CharPos(10,-500001,0,0);
//		CharPos(58,0,0,0);
		CharPos(18,235,75,6555);
		GetCharPos(0,x,y,z);
		CharPos(0,2100,0,6535);

//		SetSavePos2(306, 1050 , 450 , 1500);
		SetSavePos2(312, -675 , 0 , 0);

		Wait(15);
		ch[301] = 1;

		MapEvent(1);
		MMV("boss07.mmv");
	

	// トカロン戦やったフラグ	
	ch[1514] = 1;
}
#EndScript

///////////////////////////////////////////////
// 会話用

// モグレヌ
#Script:00380
int main()
{
	string str;
	int mg;
	int map;
	int nukeru;
	mg = 0;
	nukeru = 0;

	ch[400] = 2;
	ch[202]++;
	
	KaguTest(20010,0);
	map = ch[420];
	
	if (ch[2514] && !ch[2648])
	{
		// 岩壊しを依頼する
		if (ch[2515])
		{
			Message(2,"今日はどうしたんだべ？","","","");
		}
		else
		{
			Message(2,"おや…","","","");
			Message(2,"ここへニンゲンが訪ねて","来るなんて何十年ぶりだべか","","");
			Message(2,"今日は一体どうしたんだべ？","","","");
		}
		Message(0,"実は…","","","");
		Black(0,100,15);
		Wait(45);
		Black(0,0,15);
		Wait(15);
		//モグレヌ
		Message(2,"洞窟の落石だべか…","","","");
		Message(2,"他の仕事が入ってるけど","頼まれごとを断っては","モグラがすたるべ","");
		//パリン
		Message(0,"じゃあ、やってくれるのね","","","");
		//モグレヌ
		Message(2,"いいけど条件があるべ","","","");
		//パリン
		Message(0,"条件？","","","");
		//モグレヌ
		Message(2,"そのドリル、オイラと","同じ穴掘り職人と見受けるべ","","");
		Message(2,"穴掘りどうしが出会ったからには","勝負するのが運命だべ！","","");
		//パリン
		Message(0,"勝てば引き受けてくれるのね。","面白いじゃない","","");
		ch[2648] = 1;
		nukeru = 1;
	}
	if (ch[2514] && !ch[2509])
	{
		//モグレヌ
		Message(2,"オイラとの勝負、受けるべか？","","","");
		SelStart(50);
		SelText("勝負を受ける",1);
		SelText("勝負を受けない",2);
		SelEnd();
		if (ch[50] == 1)
		{
			mg = 1;
		}
		else
		{
			Message(2,"勝負したくなったら","また来るといいだべ","","");
		}
		nukeru = 1;
	}
	
	ch[2515] = 1;

	if (ch[2509] && !ch[2510])
	{
		// 岩壊し失敗ムービー
		PostScr(1197);
		ch[400] = -1;
		return 0;
	}
	if (ch[2510] && !ch[2511])
	{
		//モグレヌ
		Message(2,"モグロウ兄さんと協力すれば","きっとこの岩を壊せるべ","","");
		Message(2,"兄さんはオバケホームにいるはずだべ","","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2511] && !ch[2512])
	{
		//モグレヌ
		Message(2,"モグロウ兄さんはどうしたべ？","","","");
		//パリン
		Message(0,"まだ来てないの？","","","");
		//モグレヌ
		Message(2,"ははあ…","兄さんには悪いクセがあるだべよ","","");
		Message(2,"そのせいでどこかで","迷ってるかもしれないべ","","");
		//パリン
		Message(0,"悪いクセ？","","","");
		//モグレヌ
		Message(2,"とにかく、もう一度","兄さんを探してきてほしいべ","","");
		//パリン
		Message(0,"えー","","","");

		ch[400] = -1;
		ch[2512] = 1;
		return 0;
	}
	if (ch[2512] && !ch[2516])
	{
		//モグレヌ
		Message(2,"悪いけど、もう一度","兄さんを探してきてほしいべ","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2516] && !ch[2517])
	{
		Message(2,"モグロウ兄さんはどうしたべ？","","","");
		Message(0,"やっぱり来てないのね…","","","");
		ch[400] = -1;
//		ch[2517] = 1;
		return 0;
	}
	if (ch[2517] && !ch[2513])
	{
		PostScr(1198);
		ch[400] = -1;
		return 0;
	}

	if (!nukeru)
	{
		if (ch[1538])
		{
			//モグレヌ
			if (ch[2090])
			{
				// バッド
				//モグレヌ
				Message(2,"ようやくオバケホームの","工事も一段落だべ","","");
				Message(2,"あとは一刻も早く","闇の霧が晴れるといいだべな","","");
			}
			else
			{
				if (ch[202] < 2)
				{
					//モグレヌ
					Message(2,"オイラとモグロウ兄さんは","昔、伝説の勇者や戦士と","一緒に戦ったんだべ","");

					//パリン
					Message(0,"え、そうだったの？","","","");

					//モグレヌ
					Message(2,"うんだ、今回も影ながら","アンタを手伝わせてもらったべ","","");

					//パリン
					Message(0,"手伝い？？？","","","");

					//モグレヌ
					Message(2,"ふっふっふっ、完ペキな","カモフラージュだったから","気づかなかったようだべな","");
				}
				else
				{
					//モグレヌ
					Message(2,"なつかしいだべな……","","","");
					Message(2,"戦いが終わって勇者と別れた後、","兄さんはロックスターを目指して","旅に出たんだべ","");
				}
			}
		}
		if (ch[1571] && !ch[1538])
		{
			//モグレヌ
			Message(2,"さっきの地震で","腰が抜けそうになったべ","","");
			Message(2,"工事中のオバケホームが","どうなっているか心配だべな","","");
		}
		if (ch[1513] && !ch[1571])
		{
			//モグレヌ
			Message(2,"オバケホームの工事は順調だけど","どうしても人手が足りないべ","","");
			Message(2,"どうしたもんだべな…","","","");
		}
		if (ch[1505] && !ch[1513])
		{
			if (ch[1505] && !ch[2524])
			{
				//モグレヌ
				Message(2,"これからピメントマウンテンへ","別荘造りの仕事に行く予定だべ","","");
				Message(2,"準備もできたので","そろそろ出発しないといけないべ","","");
			}
			if (ch[2527])
			{
				if (ch[202] < 2)
				{
					//モグレヌ
					Message(2,"そういえばピノを","連れてたアンタの顔には","イレズミがあった気がするだ","");
					//パリン
					Message(0,"それ、思いっきり","ニセモノくさいじゃない","","");
					Message(0,"何でみんな気づかないのよ","","","");
				}
				else
				{
					//モグレヌ
					Message(2,"そういえばピノを","連れてたアンタには","イレズミがあった気がするだ","");
				}
			}
		}
		if (ch[1542] && !ch[1505])
		{
			if (!ch[2514])
			{
				if (!ch[3203])
				{
					//モグレヌ
					Message(2,"ある金持ちから別荘を","作る仕事を引き受けたけど","闇の霧のせいで山に入れないべ","");
					Message(2,"困っただべな…","","","");
				}
				else
				{
					//モグレヌ
					Message(2,"闇の霧が晴れたおかげで","ようやく別荘作りが再開できるべ","","");
					Message(2,"準備をして","さっそく山へ向かうとするべ","","");
				}
			}
			else
			{
				//モグレヌ
				Message(2,"モグロウ兄さんが仕事を","手伝ってくれることになったべ","","");
				Message(2,"工事が必要な場合は","ぜひ、ここに連絡してほしいべ","","");
			}
		}
		if (ch[507] && !ch[1542])
		{
			if (!ch[2514])
			{
				//モグレヌ
				Message(2,"もうすぐ、数年ぶりに","モグロウ兄さんが帰ってくるべ","","");
				Message(2,"迷わずにちゃんと","帰ってこられるかが心配だべ","","");
			}
			else
			{
				//モグレヌ
				Message(2,"また穴掘りの仕事があれば","いつでも受けるべ","","");
				Message(2,"遠慮しないで相談に来るといいべ","","","");
			}
		}
		if (!ch[507])
		{
			if (ch[202] < 2)
			{
				//モグレヌ
				Message(2,"おや…","","","");
				Message(2,"ここへニンゲンが訪ねて","来るなんて何十年ぶりだべか","","");
				//パリン
				Message(0,"あなたは？","","","");
				//モグレヌ
				Message(2,"モグラオバケのモグレヌだべ","","","");
				Message(2,"穴掘り名人の","オイラに何か用だべか？","","");
				//パリン
				Message(0,"穴掘りならわたしも負けないわよ","","","");
				//モグレヌ
				Message(2,"むむ、ライバル出現だべ","","","");
				Message(2,"これはいずれ決着を","つけなければならないべ","","");
			}
			else
			{
				//モグレヌ
				Message(2,"むむ、ライバル出現だべ","","","");
				Message(2,"これはいずれ決着を","つけなければならないべ","","");
			}
		}
	}
	
	if (ch[2513] && map == 21 && !ch[1538])
	{
		// 岩壊ししたことがある
		if (ch[2143] < 27)
		{
			// 岩壊し不合格
			if (ch[2143] == 26)
			{
				str = "過去最高は" + (ch[2143] - 1) + "：" + (51 - ch[2143]) + "で同点だったべ";
			}
			else
			{
				str = "過去最高は" + (ch[2143] - 1) + "：" + (51 - ch[2143]) + "でオイラの勝ちだったべ";
			}
			
			Message(2,"ところで、またオイラに挑戦するだべか？",str,"","");
			
			SelStart(50);
			SelText("挑戦する",1);
			SelText("挑戦しない",2);
			SelEnd();
			
			if (ch[50] == 1)
			{
				Message(2,"わかったべ。","それじゃ準備するだべ","","");
				
				// ミニゲーム準備
				mg = 1;
			}
			else
			{
				Message(2,"またくるといいだべ","","","");
			}

		}
		else
		{
			// 岩壊し合格
			{
				if (ch[2143] - 1 < 50)
				{
					str = "過去最高は" + (ch[2143] - 1) + "：" + (51 - ch[2143]) + "であんたの勝ちだべ";
				}
				else
				{
					str = "過去最高は" + (ch[2143] - 1) + "：" + (51 - ch[2143]) + "であんたの圧勝だべ";
				}
			}
			Message(2,"今日は何の用だべ？","","","");

			SelStart(50);
			SelText("岩壊しをする",1);
			SelText("何でもない",3);
			SelEnd();

			if (ch[50] == 1)
			{
				Message(2,"わかったべ。","それじゃ準備するだべ","","");
				
				// ミニゲーム準備
				mg = 1;
			}
			if (!mg && ch[50] != 2)
			{
				Message(2,"オイラとの勝負の",str,"","");
				Message(2,"また今度、遊んでくれだべ","","","");
			}
			
		}
	}
	
	ch[400] = -1;
	
	if (ch[1538])
	{
		return 0;
	}

	if (mg)
	{
		// ミニゲームする
		ch[420] = -1110;
		ch[421] = 600;
		ch[422] = 480;
		ch[423] = 850;
		ch[424] = 600;
		ch[425] = -75;
		KaguTest(30019,1);
		CrossFade();
		Wait(15);
		ch[420] = 812;
		ch[421] = 685;
		ch[422] = -150;
		ch[423] = 724;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,3);
		KaguTest(30045,5);
		KaguTest(30045,7);
		KaguTest(30045,9);
		ch[421] = 560;
		KaguTest(30045,3);
		KaguTest(30045,5);
		KaguTest(30045,7);
		KaguTest(30045,9);
		Event(231);
		SE(479);
		Wait(30);
		
		ch[2145] = 0;
		Black(0,100,15);
		Wait(15);
		ch[2144] = 1;
		ch[2497] = 1;
		LoadMap(21);
		KaguTest(30019,0);
		Event(232);
		CharPos(0,0,450,-93);
		CharPos(58,0,900,-93);
//		CharPos(59,150,900,-93);
		CharPos(1,-200000,0,0);
		CharPos(2,-200000,0,0);
		Camera(58,0,-600,370);
		Look(0,58);
		Look(58,0);
		Look(59,0);
		KaguTest(12000,58);
		KaguTest(12001,58);
		KaguTest(12000,59);
		KaguTest(12001,59);
		CrossFade();
		Wait(15);
		Black(0,0,15);
		
		ch[400] = 4;
		if (ch[2143] < 27)
		{
			// 合格して無いとき
			Message(58,"始める前にルール説明するべ。","","","");
			Message(58,"オイラと岩を壊しあって","より多く壊した方の勝利だべ","","");
			Message(58,"オイラに勝てたら落石を","なんとかしてあげるだべ","","");
		}
		else
		{
			Message(58,"オイラと岩を壊しあって","より多く壊した方の勝利だべ","","");
		}
		Message(58,"んでは、いくだべよ","","","");
		Wait(15);
//		Camera(0,0,-800,420);
		Camera(-1,0,0,0);
		CrossFade();
		Wait(30);
		ch[3982] = 4;
		ch[400] = -1;
		// テクスチャ読み込んでおく
		KaguTest2(10009,0,"minigm.iti");
		Wait(90);
		BGM(10);
		ch[2061] = 1;
	}
	
	return 0;
}
#EndScript

// モグロウ
#Script:00381
int main()
{
	int map;
	

	ch[400] = 1;

	KaguTest(20010,0);
	map = ch[420];
	
	// 合格している
	ch[400] = 1;
	
	if (ch[2510] && !ch[2511])
	{
		// モグロウ探せＰ１中
		//モグロウ
		Message(1,"どうしたんだい、ベイビー","","","");
		Message(1,"このオレに何か用事かい？","","","");
		//パリン
		Message(0,"お願いがあるの","","","");

		Black(0,100,15);
		Wait(30);
		Black(0,0,15);
		Wait(15);

		//モグロウ
		Message(1,"なるほど…","モグレヌのやつが探してるのか","","");
		Message(1,"オーケイ、先に","その洞窟へ行って待ってるぜ","","");
		//パリン
		Message(0,"よろしくね","","","");
		//モグロウ
		Message(1,"後で会おうぜ、ベイビー。","オレの穴掘りにシビれるなよ","","");

		ch[400] = 101;
		ch[420] = 13;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,1);
		ch[420] = -200;
		ch[421] = 0;
		ch[422] = 38;
		ch[423] = 724;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,8);
		KaguTest(30045,20);
		Wait(10);
		// 降り始める
		ch[420] = 1;
		KaguTest(30004,0);
		KaguTest(30079,1);
		Wait(45);
		ch[420] = 1;
		KaguTest(30004,1);
		KaguTest(30079,0);
		CharPos(1,-200000,0,0);
		ch[400] = -1;
		ch[2511] = 1;
		return 0;
	}
	if (ch[2511] && !ch[2516])
	{
		ch[2512] = 1;
		ch[400] = 101;
		//モグロウ
		Message(1,"ひゅう、グレイト！","心いやされる場所だぜ","","");
		//パリン
		ch[420] = 9;
		ch[421] = 30;
		KaguTest(30053,0);
		Wait(30);
		Message(0,"ちょっと！！","何でこんな場所にいるのよ","","");
		ch[400] = 1;
		Wait(10);
		//モグロウ
		Message(1,"地面にもぐって洞窟へ向かったんだが","つい掘るのに夢中になっちまってね","","");
		Message(1,"気がついたら","ここへ出ちまったぜ、ベイビー","","");
		//パリン
		Message(0,"迷うくらいなら、ちゃんと道を歩いてよ","","","");
		//モグロウ
		Message(1,"ハッハー！","オーケイ、今度こそ洞窟に向かうぜ","","");
		//パリン
		Message(0,"頼んだわよ","","","");
		//モグロウ
		Message(1,"イェイ、先に行ってるからな","","","");
		ch[400] = 101;
		ch[420] = 13;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,1);
		ch[420] = -575;
		ch[421] = 1127;
		ch[422] = 0;
		ch[423] = 724;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,8);
		KaguTest(30045,20);
		Wait(10);
		// 降り始める
		ch[420] = 1;
		KaguTest(30004,0);
		KaguTest(30079,1);
		Wait(45);
		ch[420] = 1;
		KaguTest(30004,1);
		KaguTest(30079,0);
		CharPos(1,-200000,0,0);
		ch[420] = 4;
		ch[421] = 30;
		KaguTest(30053,0);
		Wait(30);
		Message(0,"…………………………","","","");
		ch[2516] = 1;
		return 0;
	}
	if (ch[2516] && !ch[2517])
	{
		//モグロウ
		Message(1,"へっくし！","","","");
		Message(1,"ベイビー、ひどい目にあったぜ","","","");
		//パリン
		Message(0,"ちょっと","","","");
		//モグロウ
		Message(1,"おや、どうした？","","","");
		//パリン
		ch[420] = 9;
		ch[421] = 30;
		KaguTest(30053,0);
		Wait(30);
		Message(0,"歩いていけって言ったじゃないの！！","","","");
		//モグロウ
		Message(1,"へへ、わりィわりィ","","","");
		Message(1,"歩くより速いから","つい地面にもぐっちまうんだ","","");
		ch[420] = 7;
		ch[421] = 30;
		KaguTest(30053,1);
		Wait(30);
		Message(1,"もぐると、掘るのが楽しくてな。","どうにも止まらねェんだよ","","");
		Message(1,"これってきっと本能なんだぜ","","","");
		//※ややあきれ気味のパリン。
		//パリン
		ch[420] = 4;
		ch[421] = 30;
		KaguTest(30053,0);
		Wait(30);
		Message(0,"どうしようもないわね","","","");
		Message(0,"とにかく次こそ","歩いて行ってもらうわ","","");
		//モグロウ
		Message(1,"オーケイ、ベイビー！","","","");
		Message(1,"穴掘ってたら湖にぶつかって","おぼれそうになっちまった","","");
		Message(1,"さすがに今度は歩いていくぜ","","","");

		ch[400] = 101;
		KaguTest(30005,0);
		Camera(1,ch[421],ch[422],ch[423]);
		KaguTest(30062,0);
		KaguTest(30061,0);
		ch[420] = 1;
		KaguTest(30063,0); // パリンはモグレヌをみつめる
		ch[424] = -150;
		ch[425] = -750;
		ch[420] = 1;
		ch[426] = 12;
		KaguTest(30060,1);
		ch[421] = ch[421]*2;
		ch[422] = ch[422]*2;
		Walk2(1,ch[421],ch[422],ch[423]/2);
		Wait(ch[423]/2);
		KaguTest(30061,0);
		ch[424] = 0;
		ch[425] = -1175;
		ch[420] = 1;
		ch[426] = 12;
		KaguTest(30060,1);
		if (ch[423] - 15 < 1)
		{
			ch[423] = 1;
		}
		Walk2(1,ch[421]*2,ch[422]*2,ch[423] / 2);
		Wait((ch[423] / 2) - 15);
		ch[420] = 3;
		KaguTest(30064,1);
		Wait(25);
		Camera(-1,0,0,0);
		CharPos(1,-200000,0,0);
		KaguTest(30063,-1,);	

		ch[2517] = 1;
		return 0;
	}
	if (ch[2517] && !ch[2513])
	{
		PostScr(1198);
		ch[400] = -1;
		return 0;
	}
	
	ch[201]++;
	
	if (ch[1538])
	{
		if (ch[2090])
		{
			// バッド
			//モグロウ
			Message(1,"ヘイ、お疲れ様だったな。","確かにトカロンはいなくなった…","","");
			Message(1,"しかし、それだけじゃ、","本当の解決と言えないゼ","","");
		}
		else
		{
			// トゥルー
			//モグロウ
			Message(1,"ハッハー、あのトカロンを","倒すなんて大したもんだぜ！","","");
			Message(1,"それにしてもモトロのやつも","あいかわらず水くさいな","","");
			Message(1,"呼んでくれりゃ、","オレも助太刀にいったゼ","","");
		}
	}
	if (ch[1571] && !ch[1538])
	{
		//モグロウ
		Message(1,"この気配……","","","");
		Message(1,"さっきの地震といい間違いないぜ。","５０年前にヤツが来た時と同じだ","","");
	}
	if (ch[1513] && !ch[1571])
	{
		//モグロウ
		Message(1,"ホームの工事ももっと誰かが","手伝ってくれりゃ助かるんだが","","");
		Message(1,"湖のほとりにいた兄ちゃんなんか","力がありそうだったぜ","","");
	}
	if (ch[1505] && !ch[1513])
	{
		if (!ch[2527])
		{
			//モグロウ
			Message(1,"弟はオレと違って","かなり仕事熱心だぜ、ベイビー","","");
		}
		if (ch[2527])
		{
			if (ch[201] < 2)
			{
				//モグロウ
				Message(1,"ニセモノのユーは","ドリルでなく、スコップを持ってたぜ","","");
				Message(1,"ちょっとダサいよな","","","");
				//パリン
				Message(0,"そうそう、時代はやっぱドリルよ","","","");
			}
			else
			{
				//モグロウ
				Message(1,"ニセモノのユーは","ドリルでなくてスコップを持ってたぜ","","");
				Message(1,"ちょっとダサいよな","","","");
			}
		}
	}
	if (ch[1542] && !ch[1505])
	{
		//モグロウ
		Message(1,"しばらくは弟のところで","やっかいになることにしたぜ","","");
		Message(1,"都会も悪くないが","やっぱ地元は落ち着くってもんよ","","");
		Message(1,"いつでも会いに","来てくれていいんだぜ、ベイビー","","");
	}
	if (ch[507] && !ch[1542])
	{
		//モグロウ
		Message(1,"ヘイ、ベイビー。","久しぶりにいい汗をかいちまったぜ","","");
		Message(1,"たまには働くのも","悪くないかもしれないな","","");
	}
	
	if (ch[2143] > 34 && map == 21 && !ch[1538])
	{
		// もぐろうと戦えるようになっている
		string txt;
		if (ch[2315] < 27)
		{
			if (ch[2315] == 26)
			{
				txt = "今までの過去最高は"+(ch[2315]-1)+"："+(51-ch[2315])+"で同点だ";
			}
			else
			{
				txt = "今までの過去最高は"+(ch[2315]-1)+"："+(51-ch[2315])+"でオレの勝ちだ";
			}
		}
		else
		{
			txt = "今までの過去最高は"+(ch[2315]-1)+"："+(51-ch[2315])+"でアンタの勝ちだ";
		}
		if (ch[2315] == 0)
		{
			txt = "";
		}
		Message(1,"ところで、オレと岩壊し勝負してみないか？",txt,"","");
		SelStart(50);
		SelText("モグロウと競う",2);
		SelText("モグロウと競わない",3);
		SelEnd();
			
		if (ch[50] == 2)
		{
			// ミニゲームする
			ch[420] = -1110;
			ch[421] = 600;
			ch[422] = 480;
			ch[423] = 850;
			ch[424] = 600;
			ch[425] = -75;
			KaguTest(30019,1);
			CrossFade();
			Wait(15);
			ch[420] = 812;
			ch[421] = 685;
			ch[422] = -150;
			ch[423] = 724;
			ch[424] = 0;
			ch[425] = 0;
			ch[426] = 0;
			ch[427] = 100;
			ch[428] = 0;
			KaguTest(30045,3);
			KaguTest(30045,5);
			KaguTest(30045,7);
			KaguTest(30045,9);
			ch[421] = 560;
			KaguTest(30045,3);
			KaguTest(30045,5);
			KaguTest(30045,7);
			KaguTest(30045,9);
			Event(231);
			SE(479);
			Wait(30);

			ch[2145] = 0;
			Black(0,100,15);
			Wait(15);
			ch[2144] = 1;
			ch[2497] = 1;
			ch[2316] = 1;
			LoadMap(21);
			Event(232);
			CharPos(0,0,450,-93);
			CharPos(59,0,900,-93);
	//		CharPos(59,150,900,-93);
			CharPos(1,-200000,0,0);
			CharPos(2,-200000,0,0);
			Camera(59,0,-600,370);
			Look(0,59);
			Look(58,0);
			Look(59,0);
			KaguTest(12000,58);
			KaguTest(12001,58);
			KaguTest(12000,59);
			KaguTest(12001,59);
			CrossFade();
			Wait(15);
			Black(0,0,15);
			
			ch[400] = 59;
			Message(59,"ルールは弟の時と一緒だ","","","");
			Message(59,"それでは、いくぞ","","","");
			Wait(15);
	//		Camera(0,0,-800,420);
			Camera(-1,0,0,0);
			CrossFade();
			Wait(30);
			ch[3982] = 4;
			ch[400] = -1;
			// テクスチャ読み込んでおく
			KaguTest2(10009,0,"minigm.iti");
			Wait(90);
			BGM(10);
			ch[2061] = 1;
			return 0;
		}
		else
		{
			Message(1,"そうか。","また来るといいゼ","","");
		}
	
	}

	ch[400] = -1;
	return 0;
}
#EndScript

// 家具屋（ディスク）
#Script:00382
int main()
{
	int a;
	int b;
	int c;
	int d;
	int e;
	int f;
	int sumi;
	sumi = 0;
	int kaizou;
	kaizou = 1;
	int qnuke;
	qnuke = 0;
	
	if (ch[2007] && !ch[2018])
	{
		// クエスト中
		ch[205]++;
		ch[400] = 5;
		if (ch[2002])
		{
			// のぞきクエスト
			ch[420] = ch[2006];
			KaguTest(20043,4);
			if (!ch[420])
			{
				ch[420] = ch[2006];
				KaguTest(20052,4);
				ch[2006] = ch[420];

				//ディスク
				Message(5,"やあ、パリンちゃん。","今日も元気そうだね","","");

				//パリン
				Message(0,"ね、シリンダーさんを見なかった？","","","");

				//ディスク
				Message(5,"シリンダーさん？","ああ、今朝早く店に来たよ","","");

				//パリン
				Message(0,"朝じゃなくて、さっきまで","このあたりにいたはずなのよ","","");

				//ディスク
				Message(5,"うーん、それは","ちょっと分からないなぁ","","");
			}
			else
			{
				//ディスク
				Message(5,"シリンダーさんなら","今日は朝早く店に来たよ","","");
				Message(5,"その後のことは分からないなぁ","","","");
			}
			
			if (ch[2003] == 2 && ch[2006] == 15)
			{
				// ファン以外の全員から話を聞いた
				ch[2003] = 3;
			}
		}
		if (ch[2010])
		{
			// ビラ貼りクエスト
			if (!ch[2012] || !ch[2013] || !ch[2014])
			{
				Message(5,"一枚残らず、街の中に","貼ってきちゃってよ","","");
			}
			else
			{
				//ディスク
				Message(5,"やあ、パリンちゃん。","チラシを貼ってくれたみたいだね","","");
				Message(5,"ありがとう、これはお礼だよ","","","");

				//システム
				SE(853);
				KaguTest(10006,0);
				KaguTest(10007,1);
				KaguTest2(10008,0,"壁紙⑦「わかきひの…」を手に入れた。");
				KaguTest2(10008,2,"パリンの家の机で");
				KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
				KaguTest2(10009,0,"kb007s.bmp");
				KaguTest(10010,10);
				Wait(10);
				Message(0,"","","","");
				KaguTest(10011,10);

				GetItem(2);

				//パリン
				Message(0,"それで売れ行きはどうなの？","もうかってる？","","");

				//ディスク
				Message(5,"そ、それがね…","","","");
				Message(5,"チラシに間違いがあって","２０万ペンネの商品が","２０ペンネになっていたんだ","");
				Message(5,"店の信用を失いたくないから","チラシ通りの値段で売ったけど、","ハッキリ言って大ピンチだよ～","");

				//パリン
				Message(0,"がくっ","","","");
				
				ch[2010] = 0;
				ch[2011] = 1;
				ch[2006] = 0;
				ch[2007] = 0;
				ch[2008] = 0;
				ch[2009] = 0;
			}
		}
		if (ch[2020])
		{
			// プラチナメダルクエスト中
			qnuke = 1;
		}
		
		if (!qnuke)
		{
			ch[400] = -1;
			return 0;
		}
	}
	
//	if (ch[2018])
	if (ch[2501] != 6)
	{
		// わらしべクエストチェック
		KaguTest(20001,17);
		if (ch[430] && !ch[291])
		{
			// ダイヤモンド持っている
			// 売り払う
			//ディスク
			Message(5,"おや、そのダイヤモンドは…","","","");

			//パリン
			Message(0,"いいでしょ。","いくらになるかな？","","");

			//ディスク
			Message(5,"よく見せてごらん","","","");
			Message(5,"むむ、これは……","","","");

			//パリン
			Message(0,"ごくっ…","","","");

			//ディスク
			Message(5,"これはイミテーションだね。","１０００ペンネくらいの価値かな","","");

			//パリン
			Message(0,"がくっ、そうなんだ？","","","");

			//ディスク
			Message(5,"どうする？","パリンちゃんがよければ引き取るよ","","");
			
			SelStart(50);
			SelText("ダイヤモンドを売る",1);
			SelText("ダイヤモンドを売らない",2);
			SelEnd();
			
			if (ch[50] != 1)
			{
				ch[291] = 0;
				ch[400] = -1;
				return 0;
			}

			//パリン
			Message(0,"ニセモノを持っていても仕方ないわね。","お願いするわ","","");

			//ディスク
			Message(5,"毎度！","","","");
			SetGP(GetGP() + 1000);
			KaguTest(20002,17);
			SE(893);	// 勘定音

//			ch[2018] = 0;
//			ch[2007] = 0;
			
			ch[400] = -1;
			return 0;
		}
		else
		{
			KaguTest(20001,18);
			if (ch[430])
			{
				// ドラスレと錬金術の書交換
				//ディスク
				Message(5,"おや、それはもしかして…","","","");

				//パリン
				Message(0,"ん、このゴツい剣のこと？","","","");

				//ディスク
				Message(5,"伝説の名剣と名高い","ドラゴンスレイヤーじゃないか！","","");
				Message(5,"間違いない、ホンモノだよ","","","");

				//パリン
				Message(0,"へー、そんなにスゴイ剣なの？","","","");

				//ディスク
				Message(5,"そりゃあ、何といっても","あの有名なキングドラゴンを","倒した剣だからね","");
				Message(5,"パリンちゃん、この剣、","僕のとっておきと交換してくれないか","","");

				//パリン
				Message(0,"いいわよ。","どうせ、わたしは","ドリルしか使わないし","");

				//ディスク
				Message(5,"ありがとう！","じゃあ、これをあげるよ","","");

				//システム
				Mes("『錬金術の書』を手に入れた。");
				KaguTest(20022,25);
				KaguTest(20002,18);
				GetItem(25);
				Wait(60);
				ch[400] = -1;
				return 0;
			}
		}
	}


	// ビラ貼りクエスト発生チェック
	KaguTest(20001,42);
	a = ch[430];
	KaguTest(20001,45);
	b = ch[430];
	KaguTest(20001,21);
	c = ch[430];
	d = 1;
	KaguTest(20001,40);
	e = ch[430];
	f = 1;
	if (ch[2063])
	{
		KaguTest(20001,37);
		f = ch[430];
	}
	
	int quest;
	quest = 0;
	int aaaa;
	aaaa = 0;
	if (!ch[2007] && ch[205] < 1 && ch[2300])
	{
		if (a && b && c && d && f)
		{
			aaaa = 1;
		}
	}
	
	if (aaaa && ch[3960])
	{
		if (e && f && ch[2501] != 6)
		{
			quest = 1;
		}
	}
	
	if (quest)
	{
		if (!ch[2011] && !ch[2010])
		{
			//ディスク
			Message(5,"やあ、パリンちゃん。","いつも元気そうだね","","");

			//パリン
			Message(0,"ディスクさんはいつもより","元気なさそうに見えるわ","","");
			Message(0,"まるで店の売り上げが","落ちてきたような顔してるわよ","","");

			//ディスク
			Message(5,"パリンちゃんは鋭いね","","","");
			Message(5,"実際に売り上げが落ちてきて","どうしようか悩んでいるんだ","","");

			//パリン
			Message(0,"ふーん","","","");

			//ディスク
			Message(5,"やっぱり地道に","営業努力しかなさそうだ","","");
			Message(5,"そうだ、パリンちゃん。","店のチラシを色々な","場所に貼ってくれないかい？","");
			
			SelStart(50);
			SelText("はい",1);
			SelText("いいえ",2);
			SelEnd();
			
			if (ch[50] == 1)
			{
				//ディスク
				Message(5,"本当かい？","それじゃ、これだけ頼むよ","","");

				//システム
				Mes("『宣伝用チラシ』をもらった。");
				KaguTest(20022,8);
				Wait(60);
				GetItem(8);
				GetItem(8);
				GetItem(8);

				//ディスク
				Message(5,"よろしくね。","一枚残らず、街の中に","貼ってきちゃってよ","");
				
				// クエスト開始
				ch[2010] = 1;
				ch[2006] = 0;
				ch[2007] = 1;
				ch[2008] = 0;
				ch[2009] = 0;
			}
			else
			{
				//ディスク
				Message(5,"そっか、気が向いたら","また頼むよ","","");
			}
			ch[205]++;
			ch[400] = -1;
			return 0;
		}
		else
		{
			// おかしいぞ？
		}
	}
	
	int nuke;
	nuke = 0;
	if (!ch[2063] && ch[2501] == 4 && ch[2300])
	{
		ch[2063] = 1;
		// ヘッドドレス販売イベント
		Message(5,"やあ、パリンちゃん。","かわいいカッコをしているね","","");
		Message(5,"……そうだ！","","","");
		Message(5,"ちょうど今、新しい","商品を仕入れたところで、","その服にぴったりの頭飾りもあるよ","");
		Message(5,"値段がちょっと高いんだけど","ゼッタイ似合うからオススメだよ！","","");
		nuke = 1;
	}

	ch[205]++;
	
	if (!nuke && ch[1545] && !ch[2054])
	{
		//ディスク
		Message(5,"やあ、パリンちゃん。","ディスカウントショップへようこそ！","","");
		Message(5,"今日から売るだけじゃなくて","商品の改造をすることにしたんだ","","");
		//パリン
		Message(0,"改造？","","","");
		//ディスク
		Message(5,"ああ、いい商品をより便利に","使いやすくパワーアップするよ","","");
		//パリン
		Message(0,"へー、たとえば？","","","");
		//ディスク
		Message(5,"よくぞ聞いてくれました！","","","");
		Message(5,"例えばこちらのゴーグル","もとは売ってるものと同じだけど…","","");
		Message(5,"当店で改造するとこの通り！","","","");
		Message(5,"何とより効果の高いものに","早代わりするよ！","","");
		//パリン
		Message(0,"ふーん…でも、あまり","変わったように見えないけど？","","");
		//ディスク
		Message(5,"うちは性能で勝負なんだ。","とにかく、これはオススメだよ！","","");
		Message(5,"同じ装備品でも","何度か改造することで","どんどんパワーアップするんだ","");
		//パリン
		Message(0,"ふーん、お願いするには","お金を払えばいいわけ？","","");
		//ディスク
		Message(5,"いやいや、改造するには","材料になるガラクタがいるんだ","","");
		//パリン
		Message(0,"ガラクタ？","","","");
		//ディスク
		Message(5,"そう、ガラクタを集めてくれば","お金はいらないよ","","");
		//パリン
		Message(0,"ふーん、ファントムから","集めたものが役立ちそうね","","");
		//ディスク
		Message(5,"え、なに？","","","");
		//パリン
		Message(0,"何でもないわ。","機会があればお願いするから","","");
		//ディスク
		Message(5,"ああ、よろしく！","","","");
		ch[2054] = 1;

		// チュートリアル表示
		KaguTest(10006,0);
		KaguTest(10007,7);
		KaguTest2(10009,0,"tute_12.bmp");
		ch[423] = 180;
		ch[424] = 42;
		ch[425] = 460;
		ch[426] = 438;
		ch[427] = 0;
		ch[428] = 0;
		ch[429] = 320;
		ch[430] = 452;
		ch[431] = 512;
		SE(399);
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		ch[420] = 0;
		KaguTest(10011,10);
		Wait(10);
		
		ch[400] = -1;
		ch[205] = 0;
		return 0;
	}
	else
	{
		if (!nuke && ch[1571])// && !ch[1538])
		{
			//ディスク」
			Message(5,"すごい地震だったね。","鉱山のほうで何かあったのかな？","","");
			Message(5,"また、シリンダーさんが","山を吹き飛ばしてなきゃいいけど","","");
		}
		if (!nuke && ch[1513] && !ch[1571])
		{
			if (ch[205] < 2)
			{
				//ディスク
				Message(5,"やあ、パリンちゃん。","イタズラはやめたのかい？","","");
				//パリン
				Message(0,"だから、あれは誤解だってば！","","","");
				//ディスク
				Message(5,"でも、みんな目撃してるからなぁ","","","");
				Message(5,"ま、それはとにかく","何か買ってくかい？","","");
			}
			else
			{
				//ディスク
				Message(5,"パリンちゃん、何か買ってくかい？","","","");
			}
		}
		if (!nuke && ch[1505] && !ch[1513])
		{
			if (!ch[2527])
			{
				if (ch[205] < 2)
				{
					//ディスク
					Message(5,"おや、パリンちゃん。","また来たのかい？","","");
					//パリン
					Message(0,"わたし、そんなに何度も来たっけ？","","","");
					//ディスク
					Message(5,"はは、当店は何度","来てもらっても大歓迎だよ","","");
				}
				else
				{
					//ディスク
					Message(5,"はは、当店は何度","来てもらっても大歓迎だよ","","");
				}
			}
			else
			{
				if (ch[205] < 2)
				{
					//ディスク
					Message(5,"パリンちゃん、お願いだから","自慢のメガネを返してくれよ","","");
					//パリン
//					Message(0,"とってないわよ。","ちゃんとメガネしてるじゃない","","");
					Message(0,"メガネ？","とってないわよ","","");
					Message(0,"だいたい、ちゃんと","メガネかけてるじゃない","","");
					//ディスク
					Message(5,"これはダテメガネだから","実は全然見えていないんだ","","");
					Message(5,"ついさっきもとなりの","ファンさんにローソクのかわりに","ダイナマイトを売ってしまったよ","");
					Message(5,"とにかく早く返してくれ。","このままじゃ何売るか分からないよ","","");
				}
				else
				{
					//ディスク
					Message(5,"早くメガネを返してくれ。","このままじゃ何売るか分からないよ","","");
				}
			}
		}
		if (!nuke && ch[1542] && !ch[1505])
		{
			//ディスク
			Message(5,"シリンダーさんに頼まれて","鉱山用の火薬を仕入れたんだ","","");
			Message(5,"ここだけの話だけど","あの人に火薬渡すのって","何だか不安になっちゃうんだよね","");
			Message(5,"いつか何か起こしちゃいそうな","気がしないかい？","","");
		}
		if (!nuke && ch[507] && !ch[1542])
		{
			if (ch[205] < 2)
			{
				KaguTest(20001,42);
				//ディスク
				Message(5,"この前、鉱山の中で","毒ガスが発生したらしいね","","");
				Message(5,"そんなときは、はいこれ、","ごぞんじガスマスク！！","","");
				if (ch[430])
				{
					//パリン
					Message(0,"もう持ってるわ","","","");
				}
				//ディスク
				Message(5,"毒ガスにも色々あるよね。","例えば硫化水素、例えば一酸化炭素","","");
				Message(5,"どんな毒ガスでもこれさえ","つけていれば、もう全然平気！","","");
				Message(5,"当店だからこの価格でご提供！","さあ、いかがでしょう！！","","");
				if (ch[430])
				{
					//パリン
					Message(0,"だから、もう持ってるってば！","","","");
				}
			}
			else
			{
				//ディスク
				Message(5,"この前、鉱山の中で","毒ガスが発生したらしいね","","");
				Message(5,"そんなときは、はいこれ、","ごぞんじガスマスクだよ！！","","");
			}
		}
		if (!nuke && ch[2330] && !ch[507])
		{
			//ディスク
	//		Message(5,"う～ん、もっと","売り上げを伸ばさないとなぁ","","");
	//		Message(5,"実演販売でもしようかな？","","","");
			//ディスク
			Message(5,"３年ほど前だったかなぁ……","山のほうですごい","爆発事故があったんだ","");
			Message(5,"景気がいいのは結構だけど","鉱山を掘るのは危険と","隣り合わせだからね","");
			Message(5,"みんな、事故にはくれぐれも","気をつけてほしいよ","","");
		}
		if (!nuke && ch[1545] && !ch[2330])
		{
			//ディスク
			Message(5,"となりの店でケーキが","いっせいに消えたそうだよ","","");
			Message(5,"うちも万引きには","くれぐれも気をつけなくちゃね","","");
		}
		if (!nuke && ch[1545] && !ch[1545])
		{
			//ディスク
			Message(5,"今日から売るだけじゃなくて","商品の改造をすることにしたんだ","","");
			Message(5,"ぜひ利用していってよ","","","");
		}
		if (!nuke && !ch[1545] && ch[2300])
		{
			if (ch[205] < 2)
			{
				kaizou = 0;
				//ディスク
				Message(5,"やあ、パリンちゃん。","近いうちに新しいサービスを","始めようかと思うんだ","");

				//パリン
				Message(0,"何を始めるの？","","","");

				//ディスク
				Message(5,"それはまだヒミツだよ。","もうすぐ準備ができるから","また店に来てみてよ","");
			}
			else
			{
				//ディスク
				kaizou = 0;
				Message(5,"近いうちに新しいサービスを","始めようかと思うんだ","","");
				Message(5,"もうすぐ準備ができるから","また店に来てみてよ","","");
			}
		}
		if (!nuke && !ch[2300])
		{
			kaizou = 0;
			//OP前
			ch[400] = 5;
			
			if (!ch[2551])
			{
				ch[2551] = 1;
				Message(5,"いらっしゃい！","","","");
				Message(5,"おや、珍しいお客さんだね…","お嬢ちゃん、引っ越してきたのかい？","","");
				Message(0,"そうよ、パリンっていうの","","","");
				Message(5,"かわいい名前だね。","僕はディスク、よろしく","","");
				Message(0,"ところでここは何のお店なの？","","","");
				Message(5,"よくぞ聞いてくれました！","ここはディスカウントショップだよ","","");
				Message(0,"ディスカウント？","どんなものを売ってるのよ？","","");
				Message(5,"そう、例えばこちらの商品…","何と最新式のゴーグルなんだ！","","");
				Message(5,"しかも、当店オリジナルモデル。","とことん、材質やデザインに","こだわっているんだよ","");
				Message(0,"へー","","","");
				//ディスク
				Message(5,"それだけじゃないよ。","ここが必見！","","");
				Message(5,"何と、これをかけただけで","水のダメージを減らせるんだ！","","");
				//パリン
				Message(0,"おおー","","","");
				//ディスク
				Message(5,"今日は特別にこの新製品、","当店オリジナル・ゴーグルをキミに！","","");

				KaguTest(20022,41);
				GetItem(41);
				Mes("『ゴーグル』を手に入れた。");
				Wait(70);

				Message(0,"やった！","気前がいいのね","","");
				Message(5,"分割は２０回までは金利手数料、","当店負担だから月々何と２００ペンネ！","","");
				Message(5,"たったの２００ペンネだよ！","","","");
				Message(0,"ちょっと！","タダじゃないの？","","");
				Message(5,"はは、じょーだんだよ","","","");
				Message(5,"ちなみに装備品は","ちゃんと装備しないとダメだよ","","");
				Message(5,"他にもここだけの便利な商品が","ゲキ安プライスだから買っていってね","","");
				sumi = 1;

				// チュートリアル表示
				KaguTest(10006,0);
				KaguTest(10007,7);
				KaguTest2(10009,0,"tute_03.bmp");
				ch[423] = 180;
				ch[424] = 42;
				ch[425] = 460;
				ch[426] = 438;
				ch[427] = 0;
				ch[428] = 0;
				ch[429] = 320;
				ch[430] = 452;
				ch[431] = 512;
				SE(399);
				KaguTest(10010,10);
				Wait(10);
				Message(0,"","","","");
				ch[420] = 0;
				KaguTest(10011,10);
				Wait(10);
			}
			else
			{
				Message(5,"ちなみに装備品は","ちゃんと装備しないとダメだよ","","");
				Message(5,"ここだけの便利な商品が","ゲキ安プライスだから買っていってね","","");
			}
			
			ch[2551] = 1;
			
			if (ch[2547] && ch[2548] && ch[2549] && ch[2550])
			{
				// 全員と会話済み
	//			Message(0,"誰も相手してくれないのね。","","","");
	//			Message(0,"どこかに面白いことないかしら。","","","");
	//			Message(0,"路地裏にでも入ってみようかな。","","","");
				ch[2553] = 1;
			}
			
			if (sumi)
			{
				ch[400] = -1;
				return 0;
			}
		}
	}
	ch[400] = 5;

	int story;
	int map;
	string str;

	KaguTest(20001,42);
	a = ch[430];
	KaguTest(20001,45);
	b = ch[430];
	KaguTest(20001,21);
	c = ch[430];
//	KaguTest(20001,43);
//	d = ch[430];
	d = 1;
	KaguTest(20001,40);
	e = ch[430];
	f = 1;
	if (ch[2063])
	{
		KaguTest(20001,37);
		f = ch[430];
	}

	SelStart(50);
	SelText("購入する",1);
	if (kaizou)
	{
		SelText("改造する",2);
	}
	SelText("用はない",3);
	SelEnd();

	if (ch[50] == 1)
	{
		if (a && b && c && d && e && f)
		{
			Message(5,"君が買い占めていったから","まともな商品はもう無いんだ","","");
		}
		else
		{
			ch[3976] = 100;
			// モトロマジック適応
			if (ch[3975] == 0)
			{
				ch[3975] = 100;
			}
			ch[3976] = (ch[3976] * ch[3975]) / 100;
			ShopStart();
			if (!a)
			{
				ShopItem(42); // ガスマスク
			}
			if (!e)
			{
				ShopItem(40); // ネコミミ
			}
			if (!d)
			{
				ShopItem(43); // ヘルメット
			}
			if (!b)
			{
				ShopItem(45); // リボン
			}
			if (!c)
			{
				ShopItem(21); // 吸血キット
			}
			if (!f)
			{
				ShopItem(37); // ヘッドドレス
			}
			
			ShopEnd();
			
			KaguTest(20001,42);
			a = ch[430];
			KaguTest(20001,45);
			b = ch[430];
			KaguTest(20001,21);
			c = ch[430];
//			KaguTest(20001,43);
//			d = ch[430];
			d = 1;
			KaguTest(20001,40);
			e = ch[430];
			f = 1;
			if (ch[2063])
			{
				KaguTest(20001,37);
				f = ch[430];
			}
			
			if (a && b && c && d && e && f)
			{
				Message(5,"うちの商品を買い占めるなんて","君もなかなかやるね","","");
			}
			else
			{
				Message(5,"またきてくれよ","","","");
			}
		}
	}
	else
	{
		if (ch[50] == 2)
		{
			// 改造
			//改造できるかチェック
			if(Custom3(0))
			{
				//改造メニュー表示
				if(Custom())
				{
					
					Message(5,Custom2(0)+"を改造するんだね。","それにはガラクタが"+Custom2(1)+"必要だ","改造するかい？","");
					SelStart(50);
					SelText("改造する",1);
					SelText("やっぱやめ",2);
					SelEnd();
					if(ch[50]==1)
					{
						//改造実行
						Black(0,100,15);
						Wait(15);
						Custom3(1);
						SE(512);
						Wait(30);
						Black(0,0,15);
						Wait(15);
						//改造結果表示
						while(Custom3(2))
						{
							SE(513);
							Wait(60);
						}
						Message(5,"またね","","","");
					}
					else
					{
						Message(5,"やめるのかい。","またきておくれ","","");
					}
				}
				else
				{
					Message(5,"やめるのかい。","またきておくれ","","");
				}
			}
			else
			{
				Message(5,"改造できるような装備品をもっていないようだ","","","");
			}
		}
		else
		{
			Message(5,"また来てくれよ","","","");
		}
	}

	ch[400] = -1;
	return 0;
}
#EndScript

// ピエール（ヒゲ男爵）会話
#Script:00383
int main()
{
	int a;
	int b;
	int c;
	c = 0;
	int kagu;
	int kaguage;
	int kagudame;
	int check;
	kagu = 0;
	kaguage = ch[294];
	ch[294] = 0;

	ch[400] = 6;

	if (ch[2007])
	{
		kagudame = 1;
	}

	// チャッキー・鼻眼鏡クエスト中
	KaguTest(20010,0);
	if (ch[2030] && ch[420] == 401)
	{
		//ピエール
		Message(6,"ボンジュ～ル、マドモアゼル。","なぜか急に冷え込んできましたね","","");
		Message(6,"くしょん！　このままでは","風邪を引いてしまいそうです","","");
		ch[400] = -1;
		
		ch[420] = ch[2035];
		KaguTest(20052,4);
		ch[2035] = ch[420];
		
		return 0;
	}

	// ソンブレロチェック
	KaguTest(20010,0);
	KaguTest(20001,39);
	if (ch[3962] || ch[3964] || ch[3965])
	{
		// かぶりものだめ
		ch[430] = 0;
		kagudame = 1;
	}
	if (ch[430] && ch[420] == 401 && !ch[3963] && !kaguage && !kagudame)
	{
		// ソンブレロ持ってる
		//ピエール
		Message(6,"ボンジュ～ル。","麗しのマドモアゼル","","");

		//パリン
		Message(0,"相変わらずフランスが好きみたいね","","","");

		//ピエール
		Message(6,"もちろんですよ。","ワタクシからフランスを取ったら","紳士しか残りませんから","");

		//パリン
		Message(0,"ふ～ん……","ところでピエールに似合いそうな","すごい帽子を手に入れたわ","");

		//ピエール
		Message(6,"ワタクシに似合いそうな帽子ですか？","ぜひとも頂きたいものですね","","");

		//パリン
		Message(0,"それじゃ、かぶせてあげるから","ちょっと目を閉じてて","","");

		Black(0,100,15);
		Wait(15);
		KaguTest(20002,39);
		ch[3963] = 1;
		ch[2028] = 1;
		ch[2034] = 0;
		LoadMap(401);
		ch[400] = 106;
		KaguTest(20039,6);
		Black(0,0,15);
		Wait(15);
		//ピエール
		Message(6,"………","","","");

		//パリン
		Message(0,"どう？","","","");

		ch[400] = 6;
		//ピエール
		Message(6,"アミ～ゴ～～！！","","","");

		//パリン
		Message(0,"な、なんなの！？","いったいどうしたの？？","","");

		//ピエール
		Message(6,"どうもしていませんよ、","セニョリータ","","");

		//パリン
		Message(0,"なんだかノリがちがうわよ","","","");

		//ピエール
		Message(6,"そうですか？","きっと気のせいです","","");

		//パリン
		Message(0,"そうかなぁ……","","","");

		//ピエール
		Message(6,"グラシアス！","ビバ、オバケホーム！！","","");
		Message(6,"…………おや？","","","");
		Message(6,"…………………………","","","");

		//パリン
		Message(0,"どうかしたの？","","","");

		//ピエール
		Message(6,"おお…セニョリータ……","","","");

		//パリン
		Message(0,"何なの、いきなり元気ないわね","","","");

		//ピエール
		Message(6,"フランソワがいないのです……","","","");

		//パリン
		Message(0,"フランソワ？","あ、シルクハットに","住んでるハトのことね","");
		Message(0,"もしかして帽子を","かえた時に逃げたのかしら？","","");
		Message(0,"その新しいのが","気に入らなかったんじゃない？","","");

		//ピエール
		Message(6,"何ということでしょう……","一体どこに行ったのでしょうか","","");
		Message(6,"セニョリータ……","もしフランソワを見かけたら","連れ戻してください","");
		Message(6,"それほど遠くに行ったとは","思えないのですが……","","");

		ch[400] = -1;
		return 0;
	}
	if (ch[2028])
	{
		// ソンブレロつけている
		{
			KaguTest(20001,33);
			if (ch[430])
			{
				// フランソワがいる
				//ピエール
				Message(6,"おお、そこにいるのは","我が友フランソワですね","","");

				//フランソワ
				int x;
				int y;
				int z;
				int x2;
				int y2;
				int z2;
				int yoko;
				GetCharPos(0,x,y,z);
				GetCharPos(6,x2,y2,z2);
				x = x - x2;
				y = y - y2;
				
				if (x * x > y * y)
				{
					yoko = 1;
				}
				else
				{
					yoko = 0;
				}
				GetCharPos(0,x,y,z);
				if (yoko)
				{
					CharPos(61,x,y+50,z);
				}
				else
				{
					CharPos(61,x+50,y,z);
				}
				Look(61,6);
				
				Message(61,"くるっくー","","","");

				//ピエール
				Message(6,"帽子が気に入らなかったのなら","すぐに元に戻しましょう","","");
				Message(6,"ですから、ワタクシの","ところに帰ってきてください","","");

				//フランソワ
				Message(61,"くるっくー","","","");
				
				Black(0,100,15);
				Wait(15);
				KaguTest(20010,0);
				ch[3963] = 0;
				LoadMap(ch[420]);
				KaguTest(20002,33);
				ch[400] = 6;
				ch[2028] = 0;
				Black(0,0,15);
				Wait(15);

				//パリン
				Message(0,"よかったわね","","","");
				//ピエール
				Message(6,"このたび、マドモアゼルには","ご迷惑をかけました","","");
				Message(6,"これはワタクシからのお礼です。","どうか受け取ってください","","");
				
				if (ch[2029])
				{
					// 既に壁紙持ってる
					//システム
					KaguTest(20001,20);
					Mes("『ケーキ』を手に入れた。");
					KaguTest(20022,20);
					GetItem(20);
					Wait(60);
					if (ch[430] == 3)
					{
						// オーバーしている
						Mes("荷物が一杯で持てなかった。");
						Wait(60);
					}
				}
				else
				{
					// 壁紙初めて
					//システム
					SE(853);
					KaguTest(10006,0);
					KaguTest(10007,1);
					KaguTest2(10008,0,"壁紙⑨「リターンザホーム」を手に入れた。");
					KaguTest2(10008,2,"パリンの家の机で");
					KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
					KaguTest2(10009,0,"kb009s.bmp");
					KaguTest(10010,10);
					Wait(10);
					Message(0,"","","","");
					KaguTest(10011,10);

					GetItem(2);
					
					ch[2029] = 1;
				}
				//ピエール
				Message(6,"やっぱり、ワタクシには","シルクハットが一番ですよ","","");
			}
			else
			{
				// フランソワいない
				ch[207]++;
				//ピエール
				Message(6,"おお、セニョリータ……","もしフランソワを見かけたら","連れ戻してください","");
				Message(6,"それほど遠くに行ったとは","思えないのですが…","","");
			}
			
		}
		ch[400] = -1;
		return 0;
	}


	// 家具あげた数チェック
	KaguTest(10204,1);
	kagu = ch[420];
	
	// 家具持ってたら
	KaguTest(20001,60);
	if (ch[430] && !kaguage && !kagudame)
	{
		// テーブル
		//ピエール
		Message(6,"ボンジュ～ル……","","","");
		//パリン
		Message(0,"どうしたの？","元気ないわね","","");
		//ピエール
		Message(6,"ファントムに家を破壊され","家具を奪われてからというもの…","","");
		Message(6,"テーブルがなくて","午後のティータイムを","楽しむ事ができないのです","");
		//パリン
		Message(0,"そういえば","この前テーブルを取り返したわ。","あなたのかしら？","");
		//ピエール
		Message(6,"そ、それは！？","まぎれもなくワタクシのテーブルですよ","","");
		//パリン
		Message(0,"それは良かったわ","","","");
		
//		SelStart(50);
//		SelText("テーブルをあげる",1);
//		SelText("テーブルをあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『テーブル』をピエールに渡した。");
			ch[2622] = 1;
			KaguTest(20002,60);
			KaguTest(10203,60);
			
			Wait(75);
			
//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("pie_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,424,-787,25);
			ch[420] = 428;
			ch[421] = -1281;
			ch[422] = 35;
			ch[400] = 106;
			KaguTest(30070,0);
			KaguTest(30070,6);
			ch[420] = 550;
			ch[421] = -950;
			ch[422] = 75;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 329;
			ch[421] = ch[421] + 996;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ1");
			KaguTest2(30015,0,"QQ1Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,6);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,6);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきた来ました！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1751] < 1)
			{
				ch[1751] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 60;
			ch[3979] = 5;
			ch[420] = 22;
			KaguTest(12002,6);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
	}
	KaguTest(20001,69);
	if (ch[430] && !kaguage && !kagudame)
	{
		// 帽子掛け
		//ピエール
		Message(6,"おや？","その帽子掛けは……","","");

		//パリン
		Message(0,"この帽子掛けがどうかしたの？","","","");

		//ピエール
		Message(6,"シンプル・イズ・ベストを追求した","その見事なまでのシルエットは","間違いなくワタクシの帽子掛け","");

		//パリン
		Message(0,"あなたのだったのね。","私もそうだと思ったわ","","");

		//ピエール
		Message(6,"ファントムたちから","取り返してくださったのですね","","");

		//ピエール
		Message(6,"ありがとうございます","","","");

		//パリン
		Message(0,"もう奪われないでね","","","");
	
//		SelStart(50);
//		SelText("帽子掛けをあげる",1);
//		SelText("帽子掛けをあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『帽子掛け』をピエールに渡した。");
			ch[2622] = 1;
			KaguTest(20002,69);
			KaguTest(10203,69);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("pie_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,424,-787,25);
			ch[420] = 321;
			ch[421] = -866;
			ch[422] = 35;
			ch[400] = 106;
			KaguTest(30070,0);
			KaguTest(30070,6);
			ch[420] = 550;
			ch[421] = -950;
			ch[422] = 75;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 329;
			ch[421] = ch[421] + 996;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ1");
			KaguTest2(30015,0,"QQ1Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,06);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,06);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきた来ました！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1751] < 1)
			{
				ch[1751] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 69;
			ch[3979] = 4;
			ch[420] = 22;
			KaguTest(12002,6);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(6,"そうですか","","","");
			Message(6,"気が変わったら","ワシに譲ってくださいね","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,63);
	if (ch[430] && !kaguage && !kagudame)
	{
		// ソファー
		//ピエール
		Message(6,"ボンジュ～ル","","","");
		Message(6,"ずっと立っていて","さすがのワタクシも疲れてきました","","");
		//パリン
		Message(0,"床にすわればいいじゃない","","","");
		//ピエール
		Message(6,"床は硬くて","ワタクシに合わないのですよ","","");
		//パリン
		Message(0,"仕方ないわね。","ファントムから取り返した","このソファーをあげるわ","");
		//ピエール
		Message(6,"そのソファーは","ワタクシがファントムに奪われた","最高級ソファーじゃありませんか","");
		//パリン
		Message(0,"あら、そうだったの？","それじゃ、あなたに返すわ","","");
		//ピエール
		Message(6,"マドモアゼル、取り返してくれて","ありがとうございます","","");
	
//		SelStart(50);
//		SelText("ソファーをあげる",1);
//		SelText("ソファーをあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『ソファー』をピエールに渡した。");
			ch[2622] = 1;
			KaguTest(20002,63);
			KaguTest(10203,63);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("pie_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,424,-787,25);
			ch[420] = 385;
			ch[421] = -1130;
			ch[422] = 35;
			ch[400] = 106;
			KaguTest(30070,0);
			KaguTest(30070,6);
			ch[420] = 550;
			ch[421] = -950;
			ch[422] = 75;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 329;
			ch[421] = ch[421] + 996;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ1");
			KaguTest2(30015,0,"QQ1Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,6);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,6);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきた来ました！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1751] < 1)
			{
				ch[1751] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 63;
			ch[3979] = 2;
			ch[420] = 22;
			KaguTest(12002,6);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(6,"何か座る物が見つかったら","ワシに譲ってくださいね","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,49);
	if (ch[430] && !kaguage && !kagudame)
	{
		//ピエール
		Message(6,"その神々しいまでに","光り輝く鉢植えはまさしく","ワタクシが持っていたもの","");
		Message(6,"取り返してくれたのですね","感謝の言葉もありません","","");
	
//		SelStart(50);
//		SelText("鉢植えをあげる",1);
//		SelText("鉢植えをあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『鉢植え』をピエールに渡した。");
			ch[2622] = 1;
			KaguTest(20002,49);
			KaguTest(10203,49);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("pie_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,424,-787,25);
			ch[420] = 253;
			ch[421] = -888;
			ch[422] = 35;
			ch[400] = 106;
			KaguTest(30070,0);
			KaguTest(30070,6);
			ch[420] = 550;
			ch[421] = -950;
			ch[422] = 75;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 329;
			ch[421] = ch[421] + 996;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ1");
			KaguTest2(30015,0,"QQ1Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,06);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,06);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきた来ました！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1751] < 1)
			{
				ch[1751] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 49;
			ch[3979] = 11;
			ch[420] = 22;
			KaguTest(12002,6);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(6,"気が変わったら","ワシに譲ってくださいね","","");
			ch[400] = -1;
			return 0;
		}
	}

	KaguTest(20001,66);
	if (ch[430] && !kaguage && !kagudame)
	{
		//ピエール
		Message(6,"その高級感あふれる","本棚はリッチメンの","象徴ともいえる伝説の家具","");
		Message(6,"そしてワタクシが","所有していた物ではありませんか","","");
		Message(6,"麗しのマドモアゼルよ。","こんなワタクシのために","取り返してきてくれたのですね","");
	
//		SelStart(50);
//		SelText("高級本棚をあげる",1);
//		SelText("高級本棚をあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『高級本棚』をピエールに渡した。");
			ch[2622] = 1;
			KaguTest(20002,66);
			KaguTest(10203,66);
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("pie_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,424,-787,25);
			ch[420] = 738;
			ch[421] = -1149;
			ch[422] = 35;
			ch[400] = 106;
			KaguTest(30070,0);
			KaguTest(30070,6);
			ch[420] = 550;
			ch[421] = -950;
			ch[422] = 75;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] - 329;
			ch[421] = ch[421] + 996;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ1");
			KaguTest2(30015,0,"QQ1Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,6);
			ch[420] = 7;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,6);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきた来ました！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1751] < 1)
			{
				ch[1751] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3959] = 66;
			ch[3979] = 16;
			ch[420] = 22;
			KaguTest(12002,6);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(6,"気が変わったら","ワシに譲ってくださいね","","");
			ch[400] = -1;
			return 0;
		}
	}

	if (kaguage && !kagudame)
	{
		SetWaku(0);
		Mouse(1);

		KaguTest(30059,0);

		Black(0,0,15);
		Wait(15);
		ch[400] = 6;
		if (ch[3959] == 63)
		{
			//ピエール
			Message(6,"これでいつ疲れても大丈夫","","","");
			Message(6,"心置きなくホームの","修復に打ち込めますよ","","");
			ch[400] = -1;
			return 0;
		}
		if (ch[3959] == 60)
		{
			//ピエール
			Message(6,"ありがとう。","これで午後のティータイムを","楽しむ事ができますよ","");
			ch[400] = -1;
			return 0;
		}
		if (ch[3959] == 69)
		{
			//ピエール
			Message(6,"ありがとう、マドモアゼル。","これで自慢のシルクハットを","型崩れさせずにすみますよ","");
			ch[400] = -1;
			return 0;
		}
		if (kagu < 5)
		{
			//ピエール
			Message(6,"ありがとう","","","");
			Message(6,"勇敢なマドモアゼルの","話は家具とともに","末代にまで語り継がせますよ","");
			ch[400] = -1;
			return 0;
		}
		if (kagu > 4)
		{
			//ピエール
			Message(6,"ありがとう。","麗しのマドモアゼルよ","","");
			Message(6,"もはや言葉では言い表せないほど","感謝していますよ","","");
			ch[400] = -1;
			return 0;
		}
	}

	int story;
	int map;
	string str;

	ch[400] = 17;

	KaguTest(11000,0);
	story = ch[420];
	KaguTest(20010,0);
	map = ch[420];

	if (map == 401 && ch[2510] && !ch[2511])
	{
		// モグロウ初出現時ホーム
		Message(6,"ボンジュ～ル。","ムッシュ・モグロウが久々に","いらっしゃっているようですね","");
		Message(6,"マドモアゼルは彼に","お会いするのは初めてでしょう？","","");
		Message(6,"我が家がこんな惨状でなければ","招待するところなのですが……","","");
		ch[400] = -1;
		ch[206] = 0;
		return 0;
	}

	ch[206]++;
	
	if (ch[1538])
	{
		ch[420] = ch[1792];
		KaguTest(20043,7936);
		if (ch[420] == 7936)
		{
			// ピエールの家具は全部そろっている
			if (ch[206] < 2)
			{
				//ピエール
				Message(6,"ボンジュ～ル、マドモアゼル","ご機嫌いかがですか？","","");
				//パリン
				Message(0,"ピエールの家もきれいになったわね","","","");
				//ピエール
				Message(6,"おお、これも勇敢な","マドモアゼルのおかげです","","");
				Message(6,"ホームの再建が一段落したので","明日からいよいよファントムたちの","家を建て始めますよ","");
				//パリン
				Message(0,"オバケホームもにぎやかになるわね","","","");
				//ピエール
				Message(6,"ええ、このホームを花の都と","呼ばれるくらいの街にしてみせます","","");
			}
			else
			{
				//ピエール
				Message(6,"ボンジュ～ル、マドモアゼル","ご機嫌いかがですか？","","");
				Message(6,"このオバケホームを花の都と","呼ばれるくらいの街にしてみせます","","");
			}
		}
		else
		{
			//ピエール
			if (ch[206] < 2 || ch[3210])
			{
				Message(6,"ボンジュ～ル、マドモアゼル","ご機嫌いかがですか？","","");
				Message(6,"ようやく平和が戻りましたが","どこか気が晴れないのです……","","");
			}
			
			if (!ch[3210])
			{
				// 鉢植えなし
				Message(6,"そういえば、ワタクシの","お気に入りだった鉢植えは","どこに行ったのでしょう？","");
				Message(6,"プクが捕まっていた","遺跡でそれらしきものを","見たと言っていたのですが……","");
			}
		}
	}
	if (ch[1571] && !ch[1538])
	{
		if (ch[206] < 2)
		{
			//ピエール
			Message(6,"すごい地震でした。","あんなに大きなのは初めてです","","");
			Message(6,"おケガはありませんか、マドモアゼル","","","");
			//パリン
			Message(0,"ありがとう、さすが紳士ね","","","");
		}
		else
		{
			//ピエール
			Message(6,"すごい地震でした。","おケガはありませんか、マドモアゼル","","");
		}
	}
	if (ch[1513] && !ch[1571])
	{
		if (ch[206] < 2)
		{
			//ピエール
			Message(6,"ボンジュ～ル、マドモアゼル","","","");
			Message(6,"捕まっていた時に聞いたのですが","ファントムたちの国は","ずいぶん前に滅びたそうです","");
			//パリン
			Message(0,"へー、何で滅びたのよ？","","","");
			//ピエール
			Message(6,"それは分かりませんが…","長い間放浪の旅を続けて","ここへたどり着いたようです","");
			Message(6,"そう思うと何だか気の毒ですね","","","");
		}
		else
		{
			//ピエール
			Message(6,"ファントムたちは","長い間放浪の旅を続けて","ここへたどり着いたようです","");
			Message(6,"そう思うと何だか気の毒ですね","","","");
		}
	}
	if (ch[1505] && !ch[1513])
	{
		if (ch[1505] && !ch[2524])
		{
			//ピエール
			Message(6,"ボンジュ～ル、マドモアゼル。","オバケホームの復興は順調ですよ","","");
			Message(6,"これも勇ましい","マドモアゼルのおかげです","","");
		}
		if (ch[2526] && !ch[2527])
		{
//			if (ch[206] < 2)
//			{
				//ピエール
				Message(6,"ボンジュ～ル、マドモアゼル。","ペケが来てくれたようですね","","");
				Message(6,"彼もまた気高き紳士と言えるでしょう。","これで心置きなく修復に励めます","","");
//			}
//			else
//			{
//			}
		}
		if (ch[2524] && !ch[2526])
		{
			if (ch[206] < 2)
			{
				//ピエール
				Message(6,"ボンジュ～ル、マドモアゼル","","","");
				Message(6,"弱りましたね、復興のお金を","出したいのはやまやまですが…","","");
				//パリン
				Message(0,"ピエールってお金持ちじゃないの？","高そうな家具を持ってるでしょ","","");
				//ピエール
				Message(6,"確かに高級な家具は紳士の象徴","","","");
				Message(6,"しかし、真の紳士とは気高き","心を持つオバケのことであって","決してお金持ちとは限りません","");
				//パリン
				Message(0,"ふーん、言い訳っぽく聞こえるけど","そういうものなの？","","");
				//ピエール
				Message(6,"そういうものです","","","");
			}
			else
			{
				Message(6,"弱りましたね、復興のお金を","出したいのはやまやまですが…","","");
			}
		}
		if (ch[2527])
		{
			//ピエール
			Message(6,"おや、マドモアゼル。","おでかけですか？","","");
			Message(6,"ピメントマウンテンは","険しいことで有名な山です","","");
			Message(6,"どうか、お気をつけて","","","");
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (ch[206] < 2)
		{
			//ピエール
			Message(6,"ボンジュ～ル。","この世界にはグレートファングと","呼ばれる大穴が存在しています","");
			Message(6,"その大穴は別の世界に","つながってるというウワサです","","");
			//パリン
			Message(0,"わたしたちの世界にも","つながってるの？","","");
			//ピエール
			Message(6,"それは分かりません、マドモアゼル","","","");
			Message(6,"何しろ大穴に入って無事で","戻ってきたオバケはいませんから","","");
		}
		else
		{
			//ピエール
			Message(6,"この世界にはグレートファングと","呼ばれる大穴が存在しています","","");
			Message(6,"その大穴は別の世界に","つながってるというウワサです","","");
		}
	}
	if (ch[507] && !ch[1542])
	{
		if (ch[3201])
		{
			if (ch[206] < 2)
			{
				//ピエール
				Message(6,"ボンジュ～ル。","今日は少し昔話をしましょうか","","");
				Message(6,"５０年くらい前に破壊竜と","オバケたちの戦いがありました","","");
				Message(6,"ワタクシたちは要塞を","建てて破壊竜と戦ったのです","","");
				//パリン
				Message(0,"へー、何だかすごそうね。","みんなのノンビリぶりからは","とても想像つかないわ","");
				//ピエール
				Message(6,"その時、先頭に立ったのが","あるオバケとドリルを持って","ここへ迷い込んだニンゲンでした","");
				//パリン
				Message(0,"このドリルの持ち主ね。","もう１人のオバケっていうのは？","","");
				//ピエール
				Message(6,"今もどこかで暮らしているはずです。","このホームは彼が建てたのです","","");
				//パリン
				Message(0,"ふーん、そんな話初めて聞いたわ","","","");
				//ピエール
				Message(6,"オバケはみんな、","忘れっぽいですからね","","");
				Message(6,"いつかマドモアゼルに","ワタクシの輝かしい武勇の","数々をお聞かせしましょう","");
			}
			else
			{
				//ピエール
				Message(6,"いつかマドモアゼルに","ワタクシの輝かしい武勇の","数々をお聞かせしましょう","");
			}
		}
		else
		{
			if (ch[2622])
			{
				//ピエール
				Message(6,"ボンジュ～ル","","","");
				Message(6,"疲れてきたので","座るものを探しているのです","","");
			}
			else
			{
				//パリン
				Message(0,"ここで何してるの？","","","");

				//ピエール
				Message(6,"ボンジュ～ル","","","");
				Message(6,"疲れてきたので","座るものを探しているのです","","");

				//パリン
				Message(0,"そこにイスがあるじゃない","","","");

				//ピエール
				Message(6,"……………………","","","");

				//パリン
				Message(0,"何で無視するのよ！","","","");
			}
		}
	}
	if (ch[2300] && !ch[507])
	{
		//ピエール
		Message(6,"ファントムには四天王と呼ばれる","オバケたちがいるそうです","","");
		Message(6,"マドモアゼル、","どうかお気をつけて","","");
	}
	if (!ch[2300])
	{
		if (ch[206] < 2)
		{
			//ピエール
			Message(6,"ボンジュ～ル、","麗しのマドモアゼル","","");
			Message(6,"あの慎重なプクがファントムに","さらわれるなんて信じられません","","");
			Message(6,"無事でいるといいのですが……","","","");
		}
		else
		{
			//ピエール
			Message(6,"あの慎重なプクがファントムに","さらわれるなんて信じられません","","");
			Message(6,"無事でいるといいのですが……","","","");
		}
	}

	ch[400] = -1;
	return 0;
}
#EndScript

// イワオイワオ
#Script:000384
int main()
{
	int a;
	int b;
	int c;
	c = 0;
	int kagu;
	int kaguage;
	int kagudame;
	int check;
	kagu = 0;
	kaguage = ch[294];
	ch[294] = 0;

	ch[400] = 7;

	if (ch[2007])
	{
		kagudame = 1;
	}


	// チャッキー・鼻眼鏡クエスト中
	KaguTest(20010,0);
	if (ch[2030] && ch[420] == 401)
	{
		//イワオ
		Message(7,"チャッキー殿の家から","冷気が漂ってくるでがんす","","");
		Message(7,"一体何があったでがんすか？","","","");
		ch[400] = -1;
		
		ch[420] = ch[2035];
		KaguTest(20052,2);
		ch[2035] = ch[420];
		
		return 0;
	}

	// ファラオチェック
	KaguTest(20010,0);
	KaguTest(20001,52);
	if (ch[3963] || ch[3962] || ch[3965])
	{
		// かぶりものだめ
		ch[430] = 0;
		kagudame = 1;
	}
	if (ch[430] && ch[420] == 401 && !ch[3964] && !kaguage && !kagudame)
	{
		// ファラオ持ってる
		//パリン
		Message(0,"う～ん、やっぱり","イワオが一番似合いそうだわ","","");

		//イワオ
		Message(7,"なんの話でがんす？","","","");

		//パリン
		Message(0,"イワオに良いものをあげるわ。","ちょっと目を閉じてて","","");

		//イワオ
		Message(7,"わかったでがんす","","","");

		Black(0,100,15);
		Wait(15);
		KaguTest(20002,52);
		ch[3964] = 1;
		ch[2032] = 1;
		LoadMap(401);
		ch[400] = 107;
		KaguTest(20039,7);
		Black(0,0,15);
		Wait(15);
		//イワオ
		Message(7,"………","","","");
		ch[400] = 7;
		Message(7,"な、なんだか頭が","重くなったでがんす","","");

		//パリン
		Message(0,"うんうん。","やっぱりイワオにぴったりだわ","","");

		//イワオ
		Message(7,"はずしてほしいでがんす。","呪われたみたいで気持ち悪いでがんす","","");

		//パリン
		Message(0,"大丈夫よ。","そのうち気にならなくなるわ","","");

		//イワオ
		Message(7,"うぅ……","そういう問題じゃないでがんす","","");
		ch[400] = -1;

		return 0;
	}
	if (ch[2032])
	{
		// ファラオ中
		if (ch[2032] == 1)
		{
			//パリン
			Message(0,"イワオ、大丈夫？","","","");

			//イワオ
			Message(7,"…ガ……ガガガ……","","","");
			Message(7,"……………………","","","");

			//パリン
			Message(0,"イワオ？","","","");

			//イワオ
			Message(7,"無礼者ッ、ワレハ…","汝ラの王ナルゾ…ガガガ…","","");
			Message(7,"控エヌカ、ワレをココヘ","遣ワシタノハ神デアル…ガガ…","","");

			//パリン
			Message(0,"どうやら完全に","呪われちゃったみたいね。","どうにか正気に戻さなくちゃ","");
			ch[2032] = 2;
		}
		else
		{
			//イワオ
			Message(7,"…我ニ…我ニ約束の地ヲ……","","","");
		}
		ch[400] = -1;
		return 0;
	}


	KaguTest(20010,0);


	// 家具あげた数チェック
	KaguTest(10204,3);
	kagu = ch[420];
	KaguTest(10204,4);

	// 家具持ってたら
	KaguTest(20001,58);
	if (ch[430] && !kaguage && !kagudame)
	{
		//パリン
		Message(0,"ちゃぶ台を取り返してきたわ。","イワオの家具よね？","","");
		//イワオ
		Message(7,"よくわかったでがんすね","","","");
		//パリン
		Message(0,"イワオは東洋マニアだから","きっとそうだと思ったわ","","");
		
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『ちゃぶ台』をイワオに渡した。");
			ch[2636] = 1;
			KaguTest(20002,58);
			KaguTest(10203,58);
			ch[3959] = 58;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("iwao_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-892,-498,25);
			ch[420] = -1141;
			ch[421] = -378;
			ch[422] = 35;
			ch[400] = 107;
			KaguTest(30070,0);
			KaguTest(30070,7);
			ch[420] = -1100;
			ch[421] = -580;
			ch[422] = 150;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 994;
			ch[421] = ch[421] + 335;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ3");
			KaguTest2(30015,0,"QQ3Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,7);
//			ch[420] = 9;
//			ch[421] = 1;
//			ch[422] = 5;
//			KaguTest(12003,7);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきたでがんす！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1753] < 1)
			{
				ch[1753] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 6;
			ch[420] = 22;
			KaguTest(12002,7);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(0,"それじゃ、また今度あげるわ","","","");
			ch[400] = -1;
			return 0;
		}

	}
	KaguTest(20001,64);
	if (ch[430] && !kaguage && !kagudame)
	{
		//イワオ
		Message(7,"はぁ……","","","");
		//パリン
		Message(0,"どうしたの？","","","");
		//イワオ
		Message(7,"非常食の岩をため込んでいた","桐の箪笥まで奪われてしまって","悲しみにあけくれているでがんす","");
		//パリン
		Message(0,"桐の箪笥ならここにあるわよ","","","");
		//イワオ
		Message(7,"なぬ！？","取り返してくれたがんすか？","","");
		Message(7,"それはありがたいことでがんす！","","","");

		ch[50] = 1;

		if (ch[50] == 1)
		{
			Mes("『桐の箪笥』をイワオに渡した。");
			ch[2636] = 1;
			KaguTest(20002,64);
			KaguTest(10203,64);
			ch[3959] = 64;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("iwao_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-892,-498,25);
			ch[420] = -1337;
			ch[421] = -437;
			ch[422] = 35;
			ch[400] = 107;
			KaguTest(30070,0);
			KaguTest(30070,7);
			ch[420] = -1100;
			ch[421] = -580;
			ch[422] = 150;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 994;
			ch[421] = ch[421] + 335;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ3");
			KaguTest2(30015,0,"QQ3Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,07);
//			ch[420] = 9;
//			ch[421] = 1;
//			ch[422] = 5;
//			KaguTest(12003,07);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきたでがんす！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1753] < 1)
			{
				ch[1753] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 14;
			ch[420] = 22;
			KaguTest(12002,7);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(0,"また今度あげるわ","","","");
			ch[400] = -1;
			return 0;
		}

	}
	KaguTest(20001,50);
	if (ch[430] && !kaguage && !kagudame)
	{
		//イワオ
		Message(7,"ぉぉ、ジョセフィーヌよ。","戻ってきてくれたでがんすか！","","");
		//パリン
		Message(0,"えっ、何？","誰のこと！？","","");
		//イワオ
		Message(7,"……ん？","あぁ、すまないでがんす","","");
		Message(7,"ジョセフィーヌしか","見えてなかったでがんすよ","","");
		//パリン
		Message(0,"ジョセフィーヌって誰？","","","");
		//イワオ
		Message(7,"その石像のことでがんす","","","");
		//パリン
		Message(0,"石像に呼びかけるなんて……","","","");
		Message(0,"イワオって怪しい","趣味の持ち主だったのね","","");
		//イワオ
		Message(7,"なんて事を言うでがんすか","","","");
		Message(7,"ワシらオバケだって、もとは","石や木だったりするでがんす","","");
		Message(7,"だから、ジョセフィーヌも","今は石像だとしても、いつかは","オバケになるかもしれないでがんす","");
		//パリン
		Message(0,"あ、そっか。","ごめんなさい","","");
		Message(0,"それで、このジョセフィーヌは","イワオの石像なのね？","","");
		//イワオ
		Message(7,"うむ、ジョセフィーヌを","救い出してくれてありがとうでがんす","","");

		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『ジョセフィーヌ』をイワオに渡した。");
			ch[2636] = 1;
			KaguTest(20002,50);
			KaguTest(10203,50);
			ch[3959] = 50;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("iwao_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-892,-498,25);
			ch[420] = -1150;
			ch[421] = -823;
			ch[422] = 35;
			ch[400] = 107;
			KaguTest(30070,0);
			KaguTest(30070,7);
			ch[420] = -1100;
			ch[421] = -580;
			ch[422] = 150;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 994;
			ch[421] = ch[421] + 335;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ3");
			KaguTest2(30015,0,"QQ3Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,7);
//			ch[420] = 9;
//			ch[421] = 1;
//			ch[422] = 5;
//			KaguTest(12003,7);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきたでがんす！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1753] < 1)
			{
				ch[1753] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 7;
			ch[420] = 22;
			KaguTest(12002,7);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(7,"そうか。","それは残念だ","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,78);
	if (ch[430] && !kaguage && !kagudame)
	{
		//イワオ
		Message(7,"その金魚は……","ワシの愛魚、金之助でがんす！","","");
		//パリン
		Message(0,"愛魚って言うほど","大事な金魚だったのね","","");
		//イワオ
		Message(7,"うむ、ワシと金之助の","出会いはかれこれ","数十年前にさかのぼるでがんす…","");
		//パリン
		Message(0,"なんだか長くなりそうだから","出会いの話は遠慮しておくわ","","");
		//イワオ
		Message(7,"そ、そうでがんすか……","それは残念でがんす","","");
		//パリン
		Message(0,"とにかく金之助が","戻ってきて良かったわね","","");
		//イワオ
		Message(7,"うむ、感謝してるでがんす","","","");
		
//		SelStart(50);
//		SelText("金魚鉢をあげる",1);
//		SelText("金魚鉢をあげない",2);
//		SelEnd();
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『金之助』をイワオに渡した。");
			ch[2636] = 1;
			KaguTest(20002,78);
			KaguTest(10203,78);
			ch[3959] = 78;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("iwao_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-892,-498,25);
			ch[420] = -982;
			ch[421] = -767;
			ch[422] = 35;
			ch[400] = 107;
			KaguTest(30070,0);
			KaguTest(30070,7);
			ch[420] = -1100;
			ch[421] = -580;
			ch[422] = 150;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 994;
			ch[421] = ch[421] + 335;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ3");
			KaguTest2(30015,0,"QQ3Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,07);
//			ch[420] = 9;
//			ch[421] = 1;
//			ch[422] = 5;
//			KaguTest(12003,07);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきたでがんす！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1753] < 1)
			{
				ch[1753] = 1;
			}

			KaguTest(10202,0);
			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 41;
			ch[420] = 22;
			KaguTest(12002,7);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(7,"そうか。","それは残念だ","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,51);
	if (ch[430] && !kaguage && !kagudame)
	{
		//パリン
		Message(0,"秘伝の書を取り返したわ","","","");
		//イワオ
		Message(7,"ぉぉ、確かにそれは","我が一族に伝わる秘伝の書でがんす","","");
		//パリン
		Message(0,"何が書いてあるの？","","","");
		//イワオ
		Message(7,"正しい岩の食し方から","おいしい岩の見分け方まで","完全に網羅されているでがんす","");
		//パリン
		Message(0,"あんまり面白くなさそうね","","","");
		//イワオ
		Message(7,"秘伝とはそういう物でがんすよ。","わかる人にしか価値はないでがんす","","");
		Message(7,"何はともあれ取り返してくれて","ありがとうでがんす","","");
		
		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			Mes("『秘伝の書』をイワオに渡した。");
			KaguTest(20002,51);
			KaguTest(10203,51);
			ch[3959] = 51;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("iwao_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-892,-498,25);
			ch[420] = -1068;
			ch[421] = -790;
			ch[422] = 35;
			ch[400] = 107;
			KaguTest(30070,0);
			KaguTest(30070,7);
			ch[420] = -1100;
			ch[421] = -580;
			ch[422] = 150;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 994;
			ch[421] = ch[421] + 335;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ3");
			KaguTest2(30015,0,"QQ3Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,7);
//			ch[420] = 9;
//			ch[421] = 1;
//			ch[422] = 5;
//			KaguTest(12003,7);
			Black(0,0,15);
			Wait(15);
			
//			Message(6,"やる気が沸いてきたでがんす！","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1753] < 1)
			{
				ch[1753] = 1;
			}

			KaguTest(10202,0);
			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 17;
			ch[420] = 22;
			KaguTest(12002,7);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(7,"そうか。","それは残念だ","","");
			ch[400] = -1;
			return 0;
		}
	}

	if (kaguage && !kagudame)
	{
		SetWaku(0);
		Mouse(1);
		KaguTest(30059,0);

		Black(0,0,15);
		Wait(15);
			
		ch[400] = 7;
		if (ch[3959] == 50)
		{
			//イワオ
			Message(7,"ジョセフィーヌ、","さみしい思いをさせて、","すまないでがんす","");
			ch[400] = -1;
			return 0;
		}
		if (ch[3959] == 78)
		{
			//イワオ
			Message(7,"ぉぉ、金之助…","いつ見てもラヴリーでがんす…","","");
			ch[400] = -1;
			return 0;
		}
		if (kagu == 1)
		{
			//イワオ
			Message(7,"家具が戻ってきて","少しだけ元の我が家に","近づいてきたでがんす","");
			ch[400] = -1;
			return 0;
		}
		if (kagu < 5)
		{
			//イワオ
			Message(7,"ありがとう、おかげで","家らしくなってきたでがんす","","");
			ch[400] = -1;
			return 0;
		}
		if (kagu > 4)
		{
			//イワオ
			Message(7,"おかげで全ての","家具が戻ってきたでがんす","","");
			Message(7,"本当にかたじけないでがんす","","","");
			ch[400] = -1;
			return 0;
		}

	}


	int story;
	int map;
	string str;

	ch[400] = 7;

	KaguTest(11000,0);
	story = ch[420];
	KaguTest(20010,0);
	map = ch[420];

	ch[207]++;
	
	if (ch[1538])
	{
		ch[420] = ch[1792];
		KaguTest(20043,520093696);
		if (ch[420] == 520093696)
		{
			// イワオの家具は全部そろっている
			if (ch[207] < 2)
			{
				//イワオ
				Message(7,"ホームの修復が終わって、","闇の霧もすっかり消えたでがんす","","");
				Message(7,"これからは何の不安もなく","暮らしていけるでがんすよ","","");
				//パリン
				Message(0,"イワオは体の風化が","止まらないと安心できないでしょ","","");
				//イワオ
				Message(7,"…せっかく忘れてたんだから","思い出させないでほしいでがんす","","");
				Message(7,"とにかくめでたいでがんす。","これもパリン殿や","モトロさんのおかげでがんす","");
			}
			else
			{
				//イワオ
				Message(7,"ホームの修復が終わって、","闇の霧もすっかり消えたでがんす","","");
				Message(7,"これからは何の不安もなく","暮らしていけるでがんすよ","","");
			}
		}
		else
		{
			//イワオ
			Message(7,"ホームはなおったでがんすが、","外にはまだまだ闇の霧が","残っているようでがんす","");
			Message(7,"どうしてでがんすかねぇ…","","","");
		}
	}
	if (ch[1571] && !ch[1538])
	{
		if (ch[207] < 2)
		{
			//イワオ
			Message(7,"さっき久しぶりに","モトロさんが来たでがんす","","");
			Message(7,"このホームはもともと","モトロさんが作ったものでがんすよ","","");
			Message(7,"すぐにどこか行ってしまったけど、","地震と関係あるんでがんすかね","","");
		}
		else
		{
			//イワオ
			Message(7,"さっき久しぶりに","モトロさんが来たでがんす","","");
			Message(7,"このホームはもともと","モトロさんが作ったものでがんすよ","","");
		}
	}
	if (ch[1513] && !ch[1571])
	{
		//イワオ
		Message(7,"そういえば、何年か前、","北にある山の方角に何かが","落ちていくのを見たでがんす","");
		Message(7,"あれは何だったでがんすかねぇ","","","");
	}
	if (ch[1505] && !ch[1513])
	{
		if (ch[1505] && !ch[2524])
		{
			//イワオ
			Message(7,"おお、パリン殿、","おかえりなさいでがんす","","");
			Message(7,"パリン殿のおかげで","ホームに活気が戻ってきたでがんす","","");
		}
		if (ch[2524] && !ch[2526])
		{
			//イワオ
			// 別のメッセージの方がいいかも？
			Message(7,"おお、パリン殿、","おかえりなさいでがんす","","");
			Message(7,"パリン殿のおかげで","ホームに活気が戻ってきたでがんす","","");
		}
		if (ch[2526] && !ch[2527])
		{
			if (ch[207] < 2)
			{
				//イワオ
				Message(7,"うひゃあ、もう削らないで！","","","");
				Message(7,"これ以上削られたら岩オバケではなく","石オバケになってしまうでがんす！","","");
				//パリン
				Message(0,"何かあったの？","","","");
				//イワオ
				Message(7,"とぼけないで欲しいでがんす","","","");
				Message(7,"さっきパリン殿がスコップで","ワシを削っていったでがんす！","","");
				//パリン
				Message(0,"スコップ？","ドリルしか持ってないわよ","","");
				//イワオ
				Message(7,"あれ、おかしいな…","他人の空似でがんすかね","","");
				//パリン
				Message(0,"その人はどこへ行ったの？","","","");
				//イワオ
				Message(7,"たしかニンゲンの","街へ去って行ったでがんす","","");
				//パリン
				Message(0,"そんなこと、あるはずないわ。","夢でも見たんじゃない？","","");
				//イワオ
				Message(7,"うーむ、そうでがんすかねぇ","","","");
				Message(7,"それにしては削られる感触が","やけに生々しかったでがんす","","");
			}
			else
			{
				Message(7,"確かにパリン殿に","体を削られたでがんすよ","","");
				Message(7,"その後、パリン殿は","街のほうへ去って行ったでがんす","","");
			}
		}
		if (ch[2527])
		{
			if (ch[207] < 2)
			{
				//イワオ
				Message(7,"最近、体が風化してきたのが","ワシの悩みでがんす","","");
				//パリン
				Message(0,"ふーか？","","","");
				//イワオ
				Message(7,"体の岩がもろくなってきたと","いうことでがんす","","");
				//パリン
				Message(0,"ふーん、お肌の","曲がり角ってことね","","");
			}
			else
			{
				//イワオ
				Message(7,"最近、体が風化してきたのが","ワシの悩みでがんす","","");
			}
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (ch[3205])
		{
			if (ch[207] < 2)
			{
				//イワオ
				Message(7,"崩れているとはいえ、","やはり我が家が落ち着くでがんす","","");
				//パリン
				Message(0,"それにここならデカいイワオも","人の邪魔にならなくていいわね","","");
				Message(0,"ずっと、ここにいてよ","","","");
				//イワオ
				Message(7,"そ、それはひどいでがんす","","","");
			}
			else
			{
				//イワオ
				Message(7,"崩れているとはいえ、","やはり我が家が落ち着くでがんす","","");
			}
		}
		else
		{
			if (ch[207] < 2)
			{
				//イワオ
				Message(7,"パリン殿、森では助けてくれて","ありがとうでがんす","","");
				//パリン
				Message(0,"こんなところでどうしたの？","","","");
				//イワオ
				Message(7,"ポコ殿にすすめられて","街を見物に来たでがんす","","");
				Message(7,"なかなか珍しいものが多くて","驚いてばかりでがんす","","");
				//パリン
				Message(0,"どうでもいいけどイワオ、","デカすぎて通行の邪魔だわ","","");
			}
			else
			{
				//イワオ
				Message(7,"ポコ殿にすすめられて","街を見物に来たでがんす","","");
				Message(7,"なかなか珍しいものが多くて","驚いてばかりでがんす","","");
			}
		}
	}
	if (ch[2300] && !ch[1542])
	{
		//イワオ
		Message(7,"ファントムたちは３年くらい前に","この世界に現れたでがんす","","");
		Message(7,"どこから来たのかとか、","何が目的なのかは謎でがんすよ","","");
		Message(7,"北の山を根城にしてるみたいだから","近づかないほうがいいでがんす","","");
	}
	if (!ch[2300])
	{
		//イワオ
		Message(7,"プクとピノは家族をなくして","２人だけでここへ来たでがんす","","");
		Message(7,"ピノにとってプクは","かけがえのない存在でがんす","","");
	}

	ch[400] = -1;
	return 0;
}
#EndScript

// チャッキー
#Script:000385
int main()
{
	int a;
	int b;
	int c;
	c = 0;
	int kagu;
	int kaguage;
	int kagudame;
	int check;
	kagu = 0;
	kaguage = ch[294];
	ch[294] = 0;

	ch[400] = 11;

	if (ch[2007])
	{
		kagudame = 1;
	}
	// スポンサーイベント中？
	if (ch[2523] && !ch[2527])
	{
		// 家具はあげられない
		Message(11,"姉たんもウソつくなんてひどいよー","","","");
		Message(0,"？？？","","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2526] && !ch[2523])
	{
		// スポンサーイベント発動
		ch[400] = 111;
		//チャッキー
		Message(11,"…………………………","","","");
		//パリン
		Message(0,"ヘンなポーズね。","何してるの？","","");
		//チャッキー
		Message(11,"何してるのって…","姉たんが教えてくれたんだよ","","");
		Message(11,"このポーズしてないとニンゲンに","見つかっていじめられるって","","");
		//パリン
		Message(0,"そんなこと言ってないわよ","","","");
		Message(0,"ふつう、オバケは","おとなたちに見えないはずよ","","");
		ch[400] = 11;
		ch[2523] = 1;
//		ch[3982] = 4;
		ch[420] = 11;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,11);
		//チャッキー
		Message(11,"なーんだ。","それを聞いて安心したよ","","");
		Message(11,"あのポーズのまま","帰れないかと思ってたんだ","","");
		Message(11,"姉たんもウソつくなんて","ひどいよー","","");
		//パリン
		Message(0,"？？？","","","");
		ch[400] = -1;
		return 0;
	}
	if(ch[2524] && !ch[2526])
	{
		ch[400] = 111;
		//チャッキー
		Message(11,"…………………………","","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[2265] && !ch[2524])
	{
		ch[400] = 11;
		Message(11,"ボク、ニンゲンの街を見るの初めてなんだ","","","");
		Message(11,"見物が終わったら","ちゃんとみんなの手伝いをするよ","","");
		Message(11,"そういえば、プクが","姉たんを探していたよ","","");
		ch[400] = -1;
		return 0;
	}
	

	// 鼻眼鏡チェック
	KaguTest(20010,0);
	KaguTest(20001,53);
	if (ch[3963] || ch[3964] || ch[3962])
	{
		// かぶりものだめ
		ch[430] = 0;
		kagudame = 1;
	}
	if (ch[430] && ch[420] == 401 && !ch[3965] && !kaguage && !kagudame)
	{
		// 鼻眼鏡持ってる
		//パリン
		Message(0,"ふっふっふっ……","","","");

		//チャッキー
		Message(11,"ど、どうしたの？","","","");

		//パリン
		Message(0,"チャッキーって、いつも","大人になりたがってたわよね？","","");

		//チャッキー
		Message(11,"うん。そうだよ。","早く一人前になりたいんだ","","");

		//パリン
		Message(0,"そんなチャッキーに","すごい物をプレゼントよ。","これをつけるだけで大人になれるわ","");

		//チャッキー
		Message(11,"え、そんな便利なものがあるの？","なんだか嬉しいな～","","");

		//パリン
		Message(0,"じゃぁ、つけてあげるから","目を閉じてて","","");

		//チャッキー
		Message(11,"………","","","");
		Black(0,100,15);
		Wait(15);
		KaguTest(20002,53);
		ch[3965] = 1;
		ch[2030] = 1;
		LoadMap(401);
		ch[400] = 111;
		KaguTest(20039,11);
		Black(0,0,15);
		Wait(15);
		//パリン
		Message(0,"どう？大人になった気分は","","","");

		//チャッキー
		Message(11,"………","","","");

		//パリン
		Message(0,"感無量で言葉も出ないでしょ？","","","");
		ch[400] = 11;
		//チャッキー
		Message(11,"ひどいよ、姉たん。","大人は大人でもこれじゃ","ただの変なオヤジじゃないか","");

		//パリン
		Message(0,"でも、すごく似合ってるわよ","","","");

		//チャッキー
		Message(11,"そ、そう？","","","");
		Message(11,"そういえば頭が","冴えてきた気がするよ。","これが大人になった証拠かな？","");

		//パリン
		Message(0,"よかったわね","","","");

		//チャッキー
		Message(11,"みんなに大人になった","お祝いをしてもらえるかな","","");
		Message(11,"お祝いだけに…おい、ワイン！","なんちゃって！","","");
		
		Fill(2,0.8);
		ch[420] = -10000;
		ch[421] = -10000;
		ch[422] = 10000;
		ch[423] = 10000;
		KaguTest(20054,0);
		SE(473);
		Wait(90);
		Fill(0,0.0);
		ch[420] = -100000;
		ch[421] = -100000;
		ch[422] = -100000;
		ch[423] = -100000;
		KaguTest(20054,0);

		//パリン
		Message(0,"どうやら、ギャグまで","オヤジ化したみたいね……","","");
		
		ch[400] = -1;
		return 0;
	}
	if (ch[2030])
	{
		if (ch[2035] == 7)
		{
			// 話聞いた
			//パリン
			Message(0,"ちょっと、チャッキー。","みんなが寒くて困ってるじゃない","","");
			Message(0,"みんなに迷惑をかけるのは","大人のやることじゃないわよ","","");

			//チャッキー
			Message(11,"えっ、そんな！","","","");
			Message(11,"…ごめんなさい、ボク","そんなつもりじゃなかったんだ","","");
			Message(11,"きっと、こんなものに頼って","大人になろうとしたのが","よくなかったんだね…","");

			//パリン
			Message(0,"分かってくれたみたいね","","","");
			
			Black(0,100,15);
			Wait(15);
			ch[2030] = 0;
			ch[3965] = 0;
			LoadMap(401);
			Black(0,0,15);
			Wait(15);

			//チャッキー
			Message(11,"やっぱり、ゆっくり少しずつ","大人になっていくことにするよ","","");
			Message(11,"姉たん、色々教えてくれてありがとう。","これを受け取ってよ","","");

			if (ch[2031])
			{
				// 壁紙はすでに貰っている
				KaguTest(20001,20);
				Mes("『ケーキ』を手に入れた。");
				KaguTest(20022,20);
				GetItem(20);
				Wait(60);
				if (ch[430] == 3)
				{
					// オーバーしている
					Mes("荷物が一杯で持てなかった。");
					Wait(60);
				}
			}
			else
			{
				//システム
				SE(853);
				KaguTest(10006,0);
				KaguTest(10007,1);
				KaguTest2(10008,0,"壁紙①「やねがたくさん」を手に入れた。");
				KaguTest2(10008,2,"パリンの家の机で");
				KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
				KaguTest2(10009,0,"kb001s.bmp");
				KaguTest(10010,10);
				Wait(10);
				Message(0,"","","","");
				KaguTest(10011,10);

				GetItem(2);
				ch[2031] = 1;
			}
		}
		else
		{
			// ランダムで駄洒落
			switch(rand() % 3)
			{
			case 0:
				//チャッキー
				Message(11,"え、僕が何か","言うと雪が降るって？","","");
				Message(11,"明日は雪がトっモロー……","何ちゃって！","","");
				break;
			case 1:
				//チャッキー
				Message(11,"姉たんの街にいる犬は面白いよね","","","");

				//パリン
				Message(0,"何でよ？","","","");

				//チャッキー
				Message(11,"白い犬は、尾も白い。","何ちゃって！","","");
				break;
			case 2:
				//チャッキー
				Message(11,"姉たん、山へ","行くときは気をつけてね","","");
				Message(11,"石がストーンと落ちてくるから。","なんちゃって！","","");
				break;
			}

			Fill(2,0.8);
			ch[420] = -10000;
			ch[421] = -10000;
			ch[422] = 10000;
			ch[423] = 10000;
			KaguTest(20054,0);
			SE(473);
			Wait(60);
			Fill(0,0.0);
			ch[420] = -100000;
			ch[421] = -100000;
			ch[422] = -100000;
			ch[423] = -100000;
			KaguTest(20054,0);

		}
		ch[400] = -1;
		return 0;
	}

	KaguTest(20010,0);


	// 家具あげた数チェック
	KaguTest(10204,2);
	kagu = ch[420];

	// 家具持ってるか
	KaguTest(20001,67);
	if (ch[430] && !kaguage && !kagudame)
	{
		//チャッキー
		Message(11,"あ、傘たてだ","","","");
		//パリン
		Message(0,"ファントムから取り返してきたわ","","","");
		//チャッキー
		Message(11,"この前、濡れた傘をしまう","場所が無くて困ってたんだ","","");
		Message(11,"取り返してきてくれて","助かったよ","","");
		Message(11,"姉たん、ありがとう！","","","");

		ch[50] = 1;
				
		if (ch[50] == 1)
		{
			ch[2638] = 1;
			Mes("『傘たて』をチャッキーに渡した。");
			KaguTest(20002,67);
			KaguTest(10203,67);
			ch[3959] = 67;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("kyuta_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-964,415,25);
			ch[420] = -926;
			ch[421] = 234;
			ch[422] = 35;
			ch[400] = 111;
			KaguTest(30070,0);
			KaguTest(30070,11);
			ch[420] = -850;
			ch[421] = 550;
			ch[422] = 80;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 745;
			ch[421] = ch[421] - 739;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ2");
			KaguTest2(30015,0,"QQ2Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,11);
			ch[420] = 2;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,11);
			Black(0,0,15);
			Wait(15);
			
//			Message(11,"なんだかやる気が沸いてきたよ","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1752] < 1)
			{
				ch[1752] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 10;
			ch[420] = 22;
			KaguTest(12002,11);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(11,"じゃあ、いらなくなったら頂戴","","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,65);
	if (ch[430] && !kaguage && !kagudame)
	{
		//パリン
		Message(0,"箪笥を取り返してきたわ","","","");
		//チャッキー
		Message(11,"やった。ありがとう。","着替えがなくて困ってたんだ","","");

		ch[50] = 1;
		
		if (ch[50] == 1)
		{
			ch[2638] = 1;
			Mes("『洋服箪笥』をチャッキーに渡した。");
			KaguTest(20002,65);
			KaguTest(10203,65);
			ch[3959] = 65;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("kyuta_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-964,415,25);
			ch[420] = -1257;
			ch[421] = 381;
			ch[422] = 35;
			ch[400] = 111;
			KaguTest(30070,0);
			KaguTest(30070,11);
			ch[420] = -850;
			ch[421] = 550;
			ch[422] = 80;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 745;
			ch[421] = ch[421] - 739;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ2");
			KaguTest2(30015,0,"QQ2Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,11);
			ch[420] = 2;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,11);
			Black(0,0,15);
			Wait(15);
			
//			Message(11,"なんだかやる気が沸いてきたよ","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1752] < 1)
			{
				ch[1752] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 9;
			ch[420] = 22;
			KaguTest(12002,11);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
			
		}
		else
		{
			Message(11,"何かあったら頂戴","","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,70);
	if (ch[430] && !kaguage && !kagudame)
	{
		//パリン
		Message(0,"あひるを取り返したんだけど","あなたのよね？","","");
		//チャッキー
		Message(11,"うん、ボクのだよ","","","");
		Message(11,"お風呂に入る時に","さみしくて困ってたんだ。","取り返してくれてありがとう","");

		ch[50] = 1;		
		
		if (ch[50] == 1)
		{
			ch[2638] = 1;
			Mes("『あひる』をチャッキーに渡した。");
			KaguTest(20002,70);
			KaguTest(10203,70);
			ch[3959] = 70;
			
			Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("kyuta_k.txt",0);
//			}

			Black(0,100,15);
			Wait(15);
			SetWaku(1);
			Mouse(0);
			
			LoadMap(401);
			Black(0,100,0);
			Wait(10);
			CharPos(0,-964,415,25);
			ch[420] = -1120;
			ch[421] = 717;
			ch[422] = 35;
			ch[400] = 111;
			KaguTest(30070,0);
			KaguTest(30070,11);
			ch[420] = -850;
			ch[421] = 550;
			ch[422] = 80;

			ch[423] = ch[420];
			ch[424] = ch[421];
			ch[425] = ch[422];
			ch[420] = ch[420] + 745;
			ch[421] = ch[421] - 739;
			ch[422] = ch[422] + 370;
			KaguTest(30019,8);
			KaguTest2(30015,0,"QQ2");
			KaguTest2(30015,0,"QQ2Alpha");
			KaguTest(30118,0);
			ch[420] = -1;
			KaguTest(12002,11);
			ch[420] = 2;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,11);
			Black(0,0,15);
			Wait(15);
			
//			Message(11,"なんだかやる気が沸いてきたよ","","","");

//			WaitC(75);
			ch[420] = ch[423];
			ch[421] = ch[424];
			ch[422] = ch[425];
			KaguTest(30072,1);
			WaitC(15);
			KaguTest(30069,1920);
			
			WaitC(200);

			kagu++;
			if (ch[1752] < 1)
			{
				ch[1752] = 1;
			}

			WaitC(30);
			Black(0,100,15);
			WaitC(15);
			Black(0,100,0);
	
			ch[3979] = 12;
			ch[420] = 22;
			KaguTest(12002,11);
			KaguTest(30019,0);
			KaguTest(30072,0);
			KaguTest(99999,1);
			ch[298] = 1;
			ch[400] = -1;

			return 0;
		}
		else
		{
			Message(11,"何かあったら頂戴","","","");
			ch[400] = -1;
			return 0;
		}
	}
	KaguTest(20001,71);
	if (ch[430] && !kaguage && !kagudame)
	{
		//チャッキー
		Message(11,"あ！　それは僕の車の模型だね","","","");
		Message(11,"遊び道具がなくて退屈してたんだ。","取り返してくれて、ありがとう","","");

		ch[50] = 1;		
		
		ch[2638] = 1;
		Mes("『車の模型』をチャッキーに渡した。");
		KaguTest(20002,71);
		KaguTest(10203,71);
		ch[3959] = 71;
		
		Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("kyuta_k.txt",0);
//			}

		Black(0,100,15);
		Wait(15);
		SetWaku(1);
		Mouse(0);
		
		LoadMap(401);
		Black(0,100,0);
		Wait(10);
		CharPos(0,-1028,336,25);
		ch[420] = -1208;
		ch[421] = 544;
		ch[422] = 35;
		ch[400] = 111;
		KaguTest(30070,0);
		KaguTest(30070,11);
		ch[420] = -850;
		ch[421] = 550;
		ch[422] = 80;

		ch[423] = ch[420];
		ch[424] = ch[421];
		ch[425] = ch[422];
		ch[420] = ch[420] + 745;
		ch[421] = ch[421] - 739;
		ch[422] = ch[422] + 370;
		KaguTest(30019,8);
		KaguTest2(30015,0,"QQ2");
		KaguTest2(30015,0,"QQ2Alpha");
		KaguTest(30118,0);
		ch[420] = -1;
		KaguTest(12002,11);
		ch[420] = 2;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,11);
		Black(0,0,15);
		Wait(15);
		
//			Message(11,"なんだかやる気が沸いてきたよ","","","");

//			WaitC(75);
		ch[420] = ch[423];
		ch[421] = ch[424];
		ch[422] = ch[425];
		KaguTest(30072,1);
		WaitC(15);
		KaguTest(30069,1920);
		
		WaitC(200);

		kagu++;
		if (ch[1752] < 1)
		{
			ch[1752] = 1;
		}

		WaitC(30);
		Black(0,100,15);
		WaitC(15);
		Black(0,100,0);

		ch[3979] = 42;
		ch[420] = 22;
		KaguTest(12002,11);
		KaguTest(30019,0);
		KaguTest(30072,0);
		KaguTest(99999,1);
		ch[298] = 1;
		ch[400] = -1;

		return 0;
	}
	KaguTest(20001,72);
	if (ch[430] && !kaguage && !kagudame)
	{
		//チャッキー
		Message(11,"くまさんがいなくなってから","夜眠れなくて困ってるんだ","","");

		//パリン
		Message(0,"くまのぬいぐるみなら","ここにあるわよ","","");

		//チャッキー
		Message(11,"取り返してきてくれたんだね。","ありがとう","","");

		ch[50] = 1;
		
		ch[2638] = 1;
		Mes("『ぬいぐるみ』をチャッキーに渡した。");
		KaguTest(20002,72);
		KaguTest(10203,72);
		ch[3959] = 72;
		
		Wait(75);

//			if (kagu == 0)
//			{
//				// 初回ムービー
//				PlayMovie("kyuta_k.txt",0);
//			}

		Black(0,100,15);
		Wait(15);
		SetWaku(1);
		Mouse(0);
		
		LoadMap(401);
		Black(0,100,0);
		Wait(10);
		CharPos(0,-964,415,25);
		ch[420] = -1015;
		ch[421] = 672;
		ch[422] = 35;
		ch[400] = 111;
		KaguTest(30070,0);
		KaguTest(30070,11);
		ch[420] = -850;
		ch[421] = 550;
		ch[422] = 80;

		ch[423] = ch[420];
		ch[424] = ch[421];
		ch[425] = ch[422];
		ch[420] = ch[420] + 745;
		ch[421] = ch[421] - 739;
		ch[422] = ch[422] + 370;
		KaguTest(30019,8);
		KaguTest2(30015,0,"QQ2");
		KaguTest2(30015,0,"QQ2Alpha");
		KaguTest(30118,0);
		ch[420] = -1;
		KaguTest(12002,11);
		ch[420] = 2;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,11);
		Black(0,0,15);
		Wait(15);
		
//			Message(11,"なんだかやる気が沸いてきたよ","","","");

//			WaitC(75);
		ch[420] = ch[423];
		ch[421] = ch[424];
		ch[422] = ch[425];
		KaguTest(30072,1);
		WaitC(15);
		KaguTest(30069,1920);
		
		WaitC(200);

		kagu++;
		if (ch[1752] < 1)
		{
			ch[1752] = 1;
		}

		WaitC(30);
		Black(0,100,15);
		WaitC(15);
		Black(0,100,0);

		ch[3979] = 18;
		ch[420] = 22;
		KaguTest(12002,11);
		KaguTest(30019,0);
		KaguTest(30072,0);
		KaguTest(99999,1);
		ch[298] = 1;
		ch[400] = -1;

		return 0;
	}

	if (kaguage && !kagudame)
	{
		SetWaku(0);
		Mouse(1);
		KaguTest(30059,0);

		Black(0,0,15);
		Wait(15);
	
		ch[400] = 11;

		if (ch[3959] == 67)
		{
			//チャッキー
			Message(11,"ありがとう。","これで雨がふっても安心だね","","");
			ch[400] = -1;
			return 0;
		}
		if (ch[3959] == 70)
		{
			//チャッキー
			Message(11,"やっぱり、これがなくちゃね","","","");
			ch[400] = -1;
			return 0;
		}
		if (ch[3959] == 72)
		{
			//チャッキー
			Message(11,"これで夜はぐっすりだよ","","","");
			ch[400] = -1;
			return 0;
		}

		if (kagu < 5)
		{
			//チャッキー
			Message(11,"姉たん、ありがとう！","","","");
			ch[400] = -1;
			return 0;
		}
		if (kagu > 4)
		{
			//チャッキー
			Message(11,"わーい、家具が全部揃ったよ。","姉たん、ありがとう！！","","");
			ch[400] = -1;
			return 0;
		}
	}
	
	int story;
	int map;
	string str;

	ch[400] = 11;

	KaguTest(11000,0);
	story = ch[420];
	KaguTest(20010,0);
	map = ch[420];
	ch[211]++;

	if (map == 401 && ch[2327] && !ch[2323])
	{
		// サッカー誘う
		Message(0,"チャッキーっていつも暇よね？","","","");
		Message(11,"うん。暇だよ","","","");
		Message(0,"３対３のゲームに出てみない？","","","");
		Message(11,"ゲームってどんなゲーム？","","","");
		Message(0,"何のゲームかわからないんだけど","きっと楽しいはずよ","","");
		Message(11,"楽しいゲームなら参加するよ。","ゲーム開始の時にはそこに","行くようにするよ","");

		Message(11,"ところで、３対３ということは","もう一人いるんだよね？","","");
		
		if (!ch[2322])
		{
			Message(0,"もう一人はまだ決まってないわ","","","");
			Message(11,"それならもう一人は","ポコがいいんじゃないかな。","ポコはいつも暇そうだよ","");
			Message(0,"そうね。","ポコを誘ってみるわ","","");
		}
		else
		{
			Message(0,"ポコよ","","","");
			Message(11,"ポコか～。","楽しくなりそうだね","","");
		}
		
		ch[2323] = 1;
		ch[400] = -1;
		return 0;
	}

	if (ch[1538])
	{
		ch[420] = ch[1792];
		KaguTest(20043,2031616);
		if (ch[420] == 2031616)
		{
			// チャッキーの家具は全部そろっている
			if (ch[211] < 2)
			{
				//チャッキー
				Message(11,"このまま行くとオバケホームが","前よりスゴイ町になると思うよ","","");
				Message(11,"姉たんの街と同じくらい","りっぱになっちゃうかもね","","");
				//パリン
				Message(0,"みんな、頑張ってるもんね","","","");
				//チャッキー
				Message(11,"姉たん、ボクも","いっぱいお手伝いしてるよ","","");
				//パリン
				Message(0,"うん、チャッキーも","よく頑張ってるわ","","");
				//チャッキー
				Message(11,"わーい！","ほめてもらっちゃった","","");
			}
			else
			{
				//チャッキー
				Message(11,"このまま行くとオバケホームが","前よりスゴイ町になると思うよ","","");
				Message(11,"姉たんの街と同じくらい","りっぱになっちゃうかもね","","");
			}
		}
		else
		{
			//チャッキー
			Message(11,"みんな仲直りできたけど、","何だか物足りないんだ","","");
			Message(11,"どうしてかな？","心にぽっかり穴が","開いたみたいなんだ","");
		}
	}
	if (ch[1571] && !ch[1538])
	{
		//チャッキー
		Message(11,"びっくりしたなぁ…","さっきの地震は何だったんだろ","","");
		Message(11,"せっかく建て直した家が","また壊れちゃうかと思ったよ","","");
	}
	if (ch[1513] && !ch[1571])
	{
		//チャッキー
		Message(11,"姉たん、ピノ姉は見つかった？","","","");
		Message(11,"ピノ姉がいないと","何だか落ち着かないよ","","");
	}
	if (ch[1505] && !ch[1513])
	{
		if (ch[2638])
		{
			//チャッキー
			Message(11,"姉たん、家具を","取り戻してくれて、ありがとう","","");
			Message(11,"僕も一生懸命ホームをなおして","大人の仲間にいれてもらうんだ","","");
		}
		else
		{
			Message(11,"姉たん、ウソつくなんてひどいよー","","","");
			Message(11,"ずっとヘンなかっこしてたせいで","首が痛くなっちゃったよ","","");
		}
	}
	if (ch[2300] && !ch[1505])
	{
		//チャッキー
		Message(11,"姉たん、お外は","危険がいっぱいなんだって","","");
		Message(11,"もしもの時のために","街で売ってるクッキーや","チョコレートを持っていってね","");
	}
	if (!ch[2300])
	{
		//チャッキー
		Message(11,"ボクがおとなになったら、","ファントムなんてやっつけちゃうのに","","");
	}

	int chch;
	chch = 0;
	KaguTest(20001,23);
	if (ch[430])
	{
		chch = 1;
	}
	KaguTest(20001,24);
	if (ch[430])
	{
		chch = 1;
	}
	KaguTest(20001,26);
	if (ch[430])
	{
		chch = 1;
	}
	KaguTest(20001,28);
	if (ch[430])
	{
		chch = 1;
	}
	KaguTest(20001,55);
	if (ch[430])
	{
		chch = 1;
	}

//	if (ch[507] && !chch)
//	{
//		Message(11,"このツボを持っていくといいよ","","","");
//		SelStart(50);
//		SelText("ツボを受け取る",1);
//		SelText("ツボを受け取らない",2);
//		SelEnd();
//		if (ch[50] == 1)
//		{
//			GetItem(26);
//			Mes("『緑色のツボ』を手に入れた。");
//			ch[2543] = 1;
//		}
//		else
//		{
//			Message(0,"遠慮しておくわ。","","","");
//			Message(11,"残念だよ。","","","");
//		}
//	}
	ch[400] = -1;
	return 0;
}
#EndScript

// ブラックビーン
#Script:00386
int main()
{
	int a;
	a = 0;
	ch[400] = 25;
	
	// 倒したことがある？
//	KaguTest(20001,48);

	if (ch[2075])
	{
		//ブラックビーン
		Message(25,"やぁ、また来たのかい。","今日は何の用事かな？","","");
		
		SelStart(50);
		SelText("あなたは？",5);
		SelText("勝負だ！！",1);
		SelText("何かちょうだい",2);
		
		if (ch[3960])
		{
			SelText("トカロン倒して",4);
		}

		SelText("用事はない",3);
		SelEnd();
		
		if (ch[50] == 1)
		{
			Message(25,"うん、そうしよう。","今度は手加減しないよ","","");
		}
		if (ch[50] == 2)
		{
			Message(25,"なんて図々しい人なんだ","","","");
			Message(25,"そんな人はこらしめてあげるよ","","","");
		}
		if (ch[50] == 4)
		{
			//ブラックビーン
			Message(25,"甘えるな！","","","");
			Message(25,"その根性を","僕がたたき直してあげるよ","","");
		}
		if (ch[50] != 1 && ch[50] != 2 && ch[50] != 4)
		{
			if (ch[50] == 5)
			{
				Message(25,"うっ、アタマが……","","","");
				Message(0,"どうしたの？","","","");
				Message(25,"ここはどこ？","僕は…僕はだれだろう…","","");
			}
			else
			{
				Message(25,"そっか……","何も用事はないのか…","","");
				Message(25,"…ヒマだから強いヤツに","化けて誰かと戦っちゃおうかな","","");
				Message(25,"最近はいつも","そうやって遊んでるんだ","","");
			}
		}
		else
		{
			CharPos(58,0,0,0);
			CharPos(25,-200000,0,0);
			MMV("boss09.mmv");
		}
	
		ch[400] = -1;
		return 0;
	}
	
	//ブラックビーン
	Message(25,"やあ、こんにちわ。","こんなところまでよく来たね","","");
	Message(25,"ちょうど退屈してたところなんだ。","僕と一緒に遊んでよ","","");
	
	SelStart(50);
	SelText("あなたは？",1);
	SelText("遊びましょう",2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		Message(25,"うっ、アタマが……","","","");
		Message(0,"どうしたの？","","","");
		Message(25,"ここはどこ？","僕は…僕はだれだろう…","","");
		ch[400] = -1;
		return 0;
	}
	if (ch[50] != 2)
	{
		ch[420] = 2009;
		ch[429] = 1;
		KaguTest(30036,25);
		return 0;
	}
	
	CharPos(58,0,0,0);
	CharPos(25,-200000,0,0);
	ch[2075] = 1;
	ch[400] = -1;
	MMV("boss09.mmv");
	return 0;
}
#EndScript

// 00387:ブラックビーン後始末
#Script:00387
int main()
{
	if (ch[1598] < 2) ch[1598] = 2;
	BGM(0);
}
#EndScript

// 00388:町の人・プレーンおばさん
#Script:00388
int main()
{
	ch[400] = 13;
	ch[213]++;
	
	int qnuke;
	qnuke = 0;

	if (ch[2007] && !ch[2018])
	{
		// クエスト中
		ch[400] = 13;
		if (ch[2002])
		{
			// のぞきクエスト
			ch[420] = ch[2006];
			KaguTest(20043,2);
			if (!ch[420])
			{
				ch[420] = ch[2006];
				KaguTest(20052,2);
				ch[2006] = ch[420];

				//プレーン
				Message(13,"おや、パリンちゃん。","そんなにあわてて、","どうしたんだい？","");

				//パリン
				Message(0,"ね、シリンダーさん見なかった？","","","");

				//プレーン
				Message(13,"いいえ、見てないわよ","","","");
				Message(13,"それより今日はプチの鳴き声で","朝早く起こされちゃったのよ","","");
				Message(13,"おかげで眠くて眠くて…","","","");
				Message(13,"買い物が終わったら","ケーキでも食べて","ゆっくりお昼寝しようかしら","");
			}
			else
			{
				//プレーン
				Message(13,"今日はプチの鳴き声で","朝早く起こされちゃったのよ","","");
				Message(13,"おかげで眠くて眠くて…","","","");
			}
			
			if (ch[2003] == 2 && ch[2006] == 15)
			{
				// ファン以外の全員から話を聞いた
				ch[2003] = 3;
			}
		}
		if (ch[2010])
		{
			qnuke = 1;
		}
		if (ch[2020])
		{
			// プラチナメダルクエスト中
			qnuke = 1;
		}
		
		if (!qnuke)
		{
			ch[400] = -1;
			return 0;
		}
	}


	// 謎の物体持っているかチェック
	KaguTest(20001,35);
	if (ch[430])
	{
		// 謎の物体持っている
		int ccc;
		int i;
		int j;
		int k;
		j = 0;
		k = -1;
		ccc = rand() % ch[430];
		for (i = 0;i < 32;i)
		{
			if (ch[2334 + i])
			{
				// カウント
				j = j + 1;
				k = i;
			}
			if (j == ccc + 1)
			{
				// オーバーした。こいつだ。
				break;
			}
			i++;
		}
		if (i == 32)
		{
			i = k;
		}
		if (i != -1)
		{
			ch[2334 + i] = ch[2334 + i] - 1;
		}
		else
		{
			i = 0;
		}
		
		Message(13,"あらあら","パリンちゃん、福袋を持ってるのね","","");
		Message(13,"おばさん、福袋には目が無いのよ","","","");
		Message(13,"おばさんが開けてあげるわ","","","");
		Message(0,"………","","","");
		if (ch[2367 + i] != 17)
		{
			Message(13,"あらあら、こんなに","いい物が入ってたわよ。","よかったわね","");
		}
		else
		{
			if (!ch[2019])
			{
				// わらしべクエスト開始
				Message(13,"あらあら","こんなにいい物が……","","");
				//パリン
				Message(0,"どうしたの？","","","");

				//プレーン
				Message(13,"…入ってないわ。","これはきっとハズレね","","");

				//パリン
				Message(0,"…今、何かかくしたでしょ！","","","");

				//プレーン
				Message(13,"ふふ、バレちゃった？","","","");
				Message(13,"仕方ないわね。","はい、コレが入ってたわ","","");

//				ch[2007] = 1;
//				ch[2018] = 1;
				
//				KaguTest(20010,0);
//				if (ch[420] == 12)
//				{
//					Event(656);
//				}
			}
			else
			{
				// わらしべクエストはもう終わっている
				// クッキー入手
				Message(13,"あらあら","こんなにいい物が入ってたわよ。","よかったわね","");
				for (i = 0;i < 32;i)
				{
					if (ch[2367 + i] == 4)
					{
						break;
					}
					i++;
				}
			}
		}
		if (ch[2367 + i] == 0)
		{
			ch[2367 + i] = 4;
		}
		
		// アイテムオーバーチェック
		int iov;
		int item;
		iov = 0;
		KaguTest(20001,ch[2367 + i]);
		if (ch[430] == 3)
		{
			iov = 1;
		}
		
		GetItem(ch[2367 + i]);
		switch(ch[2367 + i])
		{
		case 4:
			Mes("『クッキー』を手に入れた。");
			break;
		case 5:
			Mes("『チョコレート』を手に入れた。");
			break;
		case 20:
			Mes("『ケーキ』を手に入れた。");
			break;
		case 19:
			Mes("『強化オイル』を手に入れた。");
			break;
		case 22:
			Mes("『耐久オイル』を手に入れた。");
			break;
		case 52:
			Mes("『ファラオ』を手に入れた。");
			break;
		case 39:
			Mes("『ソンブレロ』を手に入れた。");
			break;
		case 44:
			Mes("『ハチマキ』を手に入れた。");
			break;
		case 47:
			Mes("『魔法の頭巾』を手に入れた。");
			break;
		case 40:
			Mes("『ネコミミ』を手に入れた。");
			break;
		case 17:
			Mes("『ダイヤモンド』を手に入れた。");
			break;
		case 43:
			Mes("『ヘルメット』を手に入れた。");
			break;
		}
		KaguTest(20022,ch[2367 + i]);
		Wait(60);
		ch[420] = 1;
		KaguTest(20006,35);
		ch[213] = 0;
		
		if (iov)
		{
			// オーバーしている
			Mes("荷物が一杯で持てない。");
			Wait(60);
			Message(0,"残念だけどもう持てそうにないわ","","","");
			Message(13,"あら、そうなの？","","","");
			Message(13,"じゃあ、おばさんが","￥１００で買い取ってあげるわ","","");
			SetGP(GetGP() + 100);
			SE(893);
			Message(13,"うふふ、トクしちゃったわね。","ありがとう、パリンちゃん","","");
		}
		ch[400] = -1;
		
		return 0;
	}

//	if (ch[2018])
	if (ch[2501] != 6)
	{
		// わらしべクエストチェック
		KaguTest(20001,17);
		if (ch[430] && !ch[2007])
		{
			// ダイヤモンド持っている
			//プレーン
			Message(13,"パリンちゃん、","ちょっとちょっと…","","");

			//パリン
			Message(0,"何？","","","");

			//プレーン
			Message(13,"あなたに相談があるのよ","","","");
			Message(13,"そのダイヤモンド、","とっておきのものと","交換してくれないかしら？","");

			//パリン
			Message(0,"とっておき？","","","");

			//プレーン
			Message(13,"とってもいいものよ","","","");

			//パリン
			Message(0,"う～ん、何だろう……","","","");
			Message(0,"気になるから、","交換してもいいわよ","","");

			//プレーン
			Message(13,"あら、本当？","じゃあ、さっそく交換しましょ","","");
			Message(13,"はい、とっておき","","","");

			//システム
			Mes("『ドラスレ』を手に入れた。");
			KaguTest(20022,18);
			KaguTest(20002,17);
			GetItem(18);
			Wait(60);

			//パリン
			Message(0,"わ、ずいぶんゴツい剣ね。","これがおばさんのとっておき？","","");

			//プレーン
			Message(13,"ふふ、実はうちの","ダンナのとっておきなの","","");
			Message(13,"持っていっていいわよ。","どうせ、もう使いやしないんだから","","");

			ch[2018] = 1;
			ch[2007] = 1;
			ch[213] = 0;
			ch[400] = -1;
			
			KaguTest(20010,0);
			if (ch[420] == 12)
			{
				PostScr(1287);
			}
			return 0;
		}
		else
		{
			KaguTest(20001,32);
			if (ch[430])
			{
				// 金貨と壁紙を交換
				//プレーン
				Message(13,"あら、その金貨は……","","","");
				Message(13,"わたしがこの街へ来る前に","なくした女王生誕祭の","記念金貨と同じね","");

				//パリン
				Message(0,"ふーん、そうなの？","","","");

				//プレーン
				Message(13,"なつかしいわね。","あの時はクーデターとかあって","色々と大変だったわ","");
				Message(13,"ねぇ、パリンちゃん…","","","");

				//パリン
				Message(0,"あー、はいはい、交換でしょ？","別にいいわよ","","");

				//プレーン
				Message(13,"ありがとう、昔を思い出したわ。","お礼にこれをあげるわね","","");

				//システム
				SE(853);
				KaguTest(10006,0);
				KaguTest(10007,1);
				KaguTest2(10008,0,"壁紙③「しょうじょマンガ」を手に入れた。");
				KaguTest2(10008,2,"パリンの家の机で");
				KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
				KaguTest2(10009,0,"kb003s.bmp");
				KaguTest(10010,10);
				Wait(10);
				Message(0,"","","","");
				KaguTest(10011,10);

				GetItem(2);
				KaguTest(20002,32);
				
				ch[2018] = 0;
				ch[2019] = 1;
				ch[2007] = 0;
				
				ch[420] = 58;
				KaguTest2(30003,1,"@atariyotsu");
				ch[400] = -1;
				return 0;
				
			}
		}
	}

//	if (ch[2529])
//	{
//		//プレーン
//		Message(13,"あらあら、パリンちゃん。","ウワサで聞いたわよ","","");
//		Message(13,"いくら退屈でも","イタズラはほどほどにね","","");
//		ch[400] = -1;
//		return 0;
//	}

	if (ch[1571])// && !ch[1538])
	{
		if (ch[213] < 2)
		{
			//プレーン
			Message(13,"ハイパボリックさんは","若い頃、坑道で行方不明に","なったことがあるそうよ","");
			//パリン
			Message(0,"じーちゃんが？","","","");
			//プレーン
			Message(13,"神隠しだって大騒ぎになって","街のみんなが総出で探したみたいね","","");
			Message(13,"それでも見つからなくて、","ご両親もあきらめかけた頃に","ひょっこり帰ってきたそうよ","");
			//パリン
			Message(0,"ふーん、初めて聞いたわ","","","");
		}
		else
		{
			//プレーン
			Message(13,"ハイパボリックさんは","若い頃、坑道で行方不明に","なったことがあるそうよ","");
			Message(13,"神隠しだって大騒ぎになって","街のみんなが総出で探したみたいね","","");
		}
	}
	if (ch[1513] && !ch[1571])
	{
		if (ch[213] < 2)
		{
			//プレーン
			Message(13,"パリンちゃん、ようやく","イタズラをやめたみたいね","","");
			//パリン
			Message(0,"だから、わたしじゃないってば！","","","");
			//プレーン
			Message(13,"遊ぶ友達がいればパリンちゃんも","そんなことしないでしょうにねぇ","","");
			//パリン
			Message(0,"文句が言えないのがくやしいわ…","","","");
		}
		else
		{
			//プレーン
			Message(13,"パリンちゃん、ようやく","イタズラをやめたみたいね","","");
			Message(13,"遊ぶ友達がいればパリンちゃんも","そんなことしないでしょうにねぇ","","");
		}
	}
	if (ch[1505] && !ch[1513])
	{
		int kusai;
		kusai = 0;
		if (ch[2532])
		{
			kusai = 1;
			if (ch[213] < 2)
			{
				//プレーン
				Message(13,"あらあら、パリンちゃん","","","");
				//パリン
				Message(0,"なに？","","","");
				//プレーン
				Message(13,"ダメよ、女の子なんだから。","ちゃんとお風呂に入りなさい","","");
				Message(13,"鉱山から帰ってきた","男たちと同じニオイがするわ","","");
				//パリン
				Message(0,"がーん！！","","","");
			}
			else
			{
				//プレーン
				Message(13,"女の子なんだから。","ちゃんとお風呂に入りなさい","","");
				Message(13,"鉱山から帰ってきた","男たちと同じニオイがするわ","","");
			}
		}
		if (!ch[2529] && !kusai)
		{
			//プレーン
			Message(13,"主婦って朝から晩まで","２４時間営業なのよ","","");
			Message(13,"遊んでる暇もないし、","いろいろと大変なのよねぇ","","");
		}
		if (ch[2527] && !kusai)
		{
			if (ch[213] < 2)
			{
				Message(13,"番犬のプチは子犬のころ、","シリンダーさんが拾ってきたの","","");
				Message(13,"ちょうど山で爆発事故が","あった頃だったかしら…","","");
				Message(13,"何でも崖から落ちそうに","なったところを助けたそうよ","","");
				Message(13,"あの人って意外と","動物好きなのよねぇ…","","");
			}
			else
			{
				Message(13,"番犬のプチは子犬のころ、","シリンダーさんが拾ってきたの","","");
				Message(13,"ちょうど山で爆発事故が","あった頃だったかしら…","","");
			}
		}
		if (ch[2529] && !ch[2527] && !kusai)
		{
			//プレーン
			Message(13,"あらあら、パリンちゃん。","ウワサで聞いたわよ","","");
			Message(13,"いくら退屈でも","イタズラはほどほどにね","","");
		}
	}
	if (ch[1542] && !ch[1505])
	{
		//プレーン
		Message(13,"最近、よく街の中で","不思議なことが起きるみたいよ","","");
		Message(13,"ケーキが消えちゃったり","歩いていて見えないものに","ぶつかったりするらしいわ…","");
		Message(13,"何だか不気味ねぇ","","","");
	}
	if (ch[507] && !ch[1542])
	{
		//プレーン
		Message(13,"福袋の醍醐味っていえば","やっぱり袋を開ける瞬間よね","","");
		Message(13,"中身がどんなつまらなくても","何も知らずに開ける瞬間は","ドキドキするでしょ？","");
		Message(13,"もし、福袋を手に入れたら","わたしに開けさせてちょうだい","","");
	}
	if (ch[2330] && !ch[507])
	{
		if (ch[213] < 2)
		{
			//プレーン
			Message(13,"知ってる？","ここだけの話だけどね…","","");
			Message(13,"シリンダーさんって昔、","何やらとんでもないことを","やらかしたらしいわよ","");
			//パリン
			Message(0,"あの人の場合、","存在自体がとんでもないわ","","");
			//プレーン
			Message(13,"それは言えてるわね","","","");
			Message(13,"あの人、年甲斐もなくケーキ屋の","ファンを狙ってるらしいわよ","","");
			Message(13,"相手にされるわけもないのにねぇ","","","");
		}
		else
		{
			//プレーン
			Message(13,"知ってる？","ここだけの話だけどね…","","");
			Message(13,"シリンダーさんって昔、","何やらとんでもないことを","やらかしたらしいわよ","");
		}
	}
	if (ch[1545] && !ch[2330])
	{
		//プレーン
		Message(13,"怪しい人がいるわけじゃないのに","プチがずっと吠えているのよ","","");
		Message(13,"確か以前にもこんなことあったわ。","このままじゃ、あの子は番犬失格よ","","");
	}
	if (ch[2552] && !ch[1545])
	{
		if (ch[213] < 2)
		{
			//プレーン
			Message(13,"昔、このあたりは","とんでもないイナカだったのよ","","");
			Message(13,"汽車が通るようになって","ちょっとは便利になったけどね","","");
			Message(13,"もう少し発展すれば","パリンちゃんみたいな","子供も増えるかもしれないわね","");
		}
		else
		{
			//プレーン
			Message(13,"この町も汽車が通るようになって","ちょっとは便利になったわ","","");
			Message(13,"もう少し発展すれば","パリンちゃんみたいな","子供も増えるかもしれないわね","");
		}
	}
	if (!ch[2552])
	{
		//OP前
		if (ch[213] < 2)
		{
			Message(13,"あら、町長のところに","引っ越してきたお嬢ちゃんね","","");
			Message(13,"この街ってば、","人が少なく見えるでしょ？","","");
			Message(0,"みんな、どこにいるの？","","","");
			Message(13,"男の人たちは昼間、","鉱山へ働きに行っているのよ","","");
			Message(13,"それにしても今日は","番犬のプチがよく吠えるわ","","");
			Message(13,"一体どうしたのかしら？","","","");
		}
		else
		{
			Message(13,"番犬のプチがよく吠えるわ","","","");
			Message(13,"一体どうしたのかしら？","","","");
		}
		
		ch[2549] = 1;
		
		if (ch[2547] && ch[2548] && ch[2550] && ch[2551])
		{
			// 全員と会話済み
//			Message(0,"誰も相手してくれないのね。","","","");
//			Message(0,"どこかに面白いことないかしら。","","","");
//			Message(0,"路地裏にでも入ってみようかな。","","","");
			ch[2553] = 1;
		}
		
		ch[400] = -1;
		return 0;
	}
	
	

	ch[400] = -1;
}
#EndScript

// 00389:町の人・シリンダーおやじ
#Script:00389
int main()
{
	ch[400] = 15;
	ch[215]++;

	int qnuke;
	qnuke = 0;
	if (ch[2007] && !ch[2018])
	{
		// クエスト中
		if (ch[2002])
		{
			// のぞきクエスト中
			// いないはず（念のため）
			qnuke = 1;
		}
		if (ch[2010])
		{
			// ビラ貼りクエスト中
			qnuke = 1;
		}
		if (ch[2020])
		{
			// プラチナメダルクエスト中
			qnuke = 1;
		}
		
		if (!qnuke)
		{
			ch[400] = -1;
			return 0;
		}
	}


//	if (ch[2018])
	if (ch[2501] != 6)
	{
		// わらしべクエスト中
		KaguTest(20001,25);
		if (ch[430])
		{
			//シリンダー
			Message(15,"おや、パリンちゃん、","ずいぶんオカルトチックな","本を持っているね","");

			//パリン
			Message(0,"錬金術の書のことね","","","");

			//シリンダー
			Message(15,"俺は技術屋だけど","そういう違う分野のことも","勉強しておきたいなぁ","");
			Message(15,"どうだい、パリンちゃん。","こっちの本と交換しないかい？","","");

			//パリン
			Message(0,"そっちのほうがわたし好みだわ。","交換してあげてもいいわよ","","");

			//シリンダー
			Message(15,"はっはっ、ありがとう","","","");

			//システム
			Mes("『少女マンガ』を手に入れた。");
			KaguTest(20022,27);
			KaguTest(20002,25);
			GetItem(27);
			Wait(60);
			ch[400] = -1;
			ch[215] = 0;
			return 0;
		}
	}


	if (ch[2530] && !ch[2531])
	{
		ch[2531] = 1;
		// 臭いパーツゲットだぜ！
		//シリンダー
		Message(15,"やあ、パリンちゃん","","","");
		Message(15,"とっておきの話を","聞かせるからお茶しないかい？","","");

		//パリン
		Message(0,"お茶はしないけど、","とっておきの話は聞くわ","","");

		//シリンダー
		Message(15,"はっはっはっ、まいったね。","聞いて驚かないでくれよ","","");
		Message(15,"実はね、今は超一流の","スーパー発破職人である俺も","３年前に大失敗をしたんだ","");

		//パリン
		Message(0,"大失敗？","","","");

		//シリンダー
		Message(15,"そう、あの時は","ちょうど仕事の合間でね、","タバコを吸っていたんだよ","");

		//パリン
		Message(0,"タバコって…","危ないじゃない！","火薬使うのが仕事でしょ？","");

		//シリンダー
		Message(15,"はっはっ、そうなんだ","","","");
		Message(15,"うっかり火のついたタバコを","火薬の箱に落としちゃってね","","");

		//パリン
		Message(0,"どうなったの？","","","");

		//シリンダー
		Message(15,"そこは小さな森だったんだが","あたり一面吹き飛んでしまったよ","","");
		Message(15,"それ以来、仲間のあいだでは","炎の発破職人と呼ばれてるんだ","","");

		//パリン
		Message(0,"よく生きてたわね…","","","");

		//シリンダー
		Message(15,"崖下の川に飛び込んだからね。","さすがに死ぬかと思ったよ","","");
		Message(15,"…さて、そろそろ","鉱山に戻らなくちゃな","","");

		//パリン
		Message(0,"サボってばかりいると","クビになっちゃうわよ？","","");

		//シリンダー
		Message(15,"はっはっ、サボりじゃないぞ。","愛用ドリルのパーツが壊れちまったんだ","","");
		Message(15,"そうだ、これをやるから","デートしてくれないかい？","","");

		//パリン
		Message(0,"いらない！！","","","");
		Message(0,"壊れたパーツもらっても嬉しくないし","デートするわけないでしょ","","");

		//シリンダー
		Message(15,"大事にしてやってくれ","","","");
		Message(15,"俺の血と汗と涙がしみこんだ愛用品だ","","","");

		//パリン
		Message(0,"だからいらないって！！","","","");

		Mes("無理やり『汗臭いパーツ』を押し付けられた。");
		Wait(60);
		Black(0,100,10);
		Wait(10);
		ch[2532] = 1;
		Scop(0);
		Scop(1);
		GetItem(29);
		Black(0,0,10);
		KaguTest(20023,0);
		Mes("ドリルがのろわれた！！");
		SE(483);
		Wait(75);
		Message(0,"ぎゃー！！","","","");
		ch[400] = -1;
		ch[215] = 0;
		return 0;
	}
	
	if (ch[1571])// && !ch[1538])
	{
		if (ch[215] < 2)
		{
			//シリンダー
			Message(15,"すごい地震だったね","","","");
			Message(15,"俺としたことがファンちゃんに","みっともないトコを見せちゃったよ","","");
			Message(15,"鉱山にいる連中は大丈夫かな……","落ち着いたら様子を見に行ってみるか","","");
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
		else
		{
			//シリンダー
			Message(15,"やあ、パリンちゃん。","ドリルのパーツを見ていくかい？","","");
		}
	}
	if (ch[1513] && !ch[1571])
	{
		if (ch[215] < 2)
		{
			//シリンダー
			Message(15,"そういえば、デートの約束は","どうなったんだい？","","");
			//パリン
			Message(0,"あれは私の影武者よ。","だからデートは無効なの","","");
			//シリンダー
			Message(15,"なんてこったい。","そうか、影武者じゃ仕方ないな","","");
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
		else
		{
			//シリンダー
			Message(15,"やあ、パリンちゃん。","ドリルのパーツを見ていくかい？","","");
		}
	}
	if (ch[1505] && !ch[1513])
	{
		if (!ch[2527])
		{
			if (ch[215] < 2)
			{
				//シリンダー
				Message(15,"パリンちゃん、さっき","ファンちゃんが探していたよ","","");
				//パリン
				Message(0,"何かしら？","","","");
				//シリンダー
				Message(15,"あのファンちゃんに","探してもらえるなんてうらやましいよ","","");
				Message(15,"ところでドリルの","パーツを見ていくかい？","","");
			}
			else
			{
				//シリンダー
				Message(15,"パリンちゃん、さっき","ファンちゃんが探していたよ","","");
				Message(15,"ついでにドリルの","パーツを見ていくかい？","","");
			}
		}
		else
		{
			if (ch[215] < 2)
			{
				//シリンダー
				Message(15,"パリンちゃん、","さっきの話、楽しみにしてるよ","","");
				Message(15,"あとでケーキ屋でね","","","");
				//パリン
				Message(0,"何の話よ？","","","");
				//シリンダー
				Message(15,"はっはっ、照れてるのかい？","デートの約束をしたじゃないか","","");
				//パリン
				Message(0,"してないってば。","するワケないでしょ","","");
				//シリンダー
				Message(15,"恥ずかしがっちゃって初々しいね。","それじゃあ、待ってるからね","","");
				Message(15,"あ、ついでにドリルの","パーツを見ていくかい？","","");
			}
			else
			{
				//シリンダー
				Message(15,"パリンちゃん、あとで","ケーキ屋で待ってるからね","","");
				Message(15,"ついでにドリルの","パーツを見ていくかい？","","");
			}
		}
	}
	if (ch[1542] && !ch[1505])
	{
		if (ch[215] < 2)
		{
			//シリンダー
			Message(15,"さっきケーキ屋から","飛び出てきたみたいだけど","ファンちゃんと何かあったのかい？","");
			//パリン
			Message(0,"わたしが？","別に何もないわよ","","");
			//シリンダー
			Message(15,"そっか、それならいいんだが","","","");
			//パリン
			Message(0,"？？？","","","");
			//シリンダー
			Message(15,"ついでにドリルの","パーツを見ていくかい？","","");
		}
		else
		{
			//シリンダー
			Message(15,"あわててケーキ屋から","出てきたからファンちゃんと","ケンカでもしたのかと思ったよ","");
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
	}
	if (ch[507] && !ch[1542])
	{
		if(ch[215] < 2)
		{
			//シリンダー
			Message(15,"ゴホゴホ…","","","");
			//パリン
			Message(0,"どうしたの？","","","");
			//シリンダー
			Message(15,"鉱山で毒ガスが発生してね。","ひどい目にあったよ、ゴホゴホ…","","");
			Message(15,"決して仮病を使って","ファンちゃんの気を引こうと","してるわけじゃないからね","");
			//パリン
			Message(0,"…………………………","","","");
			//シリンダー
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
		else
		{
			//シリンダー
			Message(15,"鉱山で毒ガスが発生してね。","ひどい目にあったよ、ゴホゴホ…","","");
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
	}
	if (ch[2330] && !ch[507])
	{
		//シリンダー
		Message(15,"うーん、仕事用の","火薬が切れてきてしまったな。","そろそろ仕入れておかなくちゃ","");
		Message(15,"ところでドリルの","パーツを見ていくかい？","","");
	}
	if (ch[1545] && !ch[2330])
	{
		if (ch[215] < 2)
		{
			//シリンダー
			Message(15,"さっき、ファンちゃんの","悲鳴が聞こえたんだ","","");
			Message(15,"駆けつけたら、フォークや","ナイフを投げつけられちゃってね","","");
			Message(15,"はっはっはっ、","あんなに照れるなんてまいったな","","");
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
		else
		{
			//シリンダー
			Message(15,"ファンちゃんにフォークや","ナイフを投げつけられちゃってね","","");
			Message(15,"はっはっはっ、","あんなに照れるなんてまいったな","","");
			Message(15,"ところでドリルの","パーツを見ていくかい？","","");
		}
	}
	if (ch[2300] && !ch[1545])
	{
		if(ch[215] < 2 && !ch[2001])
		{
			//シリンダー
			Message(15,"おや、パリンちゃん、","そのドリルはどうしたんだい？","","");
			//パリン
			Message(0,"いいでしょ、マイドリルよ","","","");
			//シリンダー
			Message(15,"ふむ、ずいぶん古い代物だな。","なかなかシブい趣味をしてるね","","");
			Message(15,"俺は発破職人だけど","機械をいじるのも得意なんだ","","");
			Message(15,"もしよかったら色々と","ドリルのパーツをゆずってあげよう","","");
			//パリン
			Message(0,"ほんと？","","","");
			//シリンダー
			Message(15,"ああ、デートしてくれたら","タダでゆずってもいいよ","","");
			//パリン
			Message(0,"…お金は払うわ","","","");
			//シリンダー
			Message(15,"はっはっ、今度、お茶しながら","ドリルについて語り合わないかい？","","");
			ch[2001] = 1;
		}
		else
		{
			//シリンダー
			Message(15,"今度、お茶しながら","ドリルについて語り合わないかい？","","");
		}
	}
	if (ch[2552] && !ch[2300])
	{
		if(ch[215] < 2)
		{
			//シリンダー
			Message(15,"朝からケーキ屋のファンちゃんと","甘いひとときを過ごしてしまったよ","","");
			Message(15,"はっはっはっ、モテる男はつらいね","","","");
			//パリン
			Message(0,"またまたウソくさいわね","一方的につき合わせただけでしょ","","");
			//シリンダー
			Message(15,"いやいや、何を言う。","ファンちゃんに聞いてみるといい","","");
			Message(15,"さーて、そろそろ鉱山に","行って仕事を始めなくちゃな","","");
		}
		else
		{
			//シリンダー
			Message(15,"朝からケーキ屋のファンちゃんと","甘いひとときを過ごしてしまったよ","","");
			Message(15,"はっはっはっ、モテる男はつらいね","","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (!ch[2552])
	{
		//OP前
		if(!ch[2548])
		{
			Message(15,"おや、お嬢ちゃん。","もしかして引っ越してきたのかい？","","");
			Message(0,"そうよ","","","");
			Message(15,"俺の名前はシリンダー。","鉱山で発破職人をやってるんだ","","");
			Message(0,"ハッパ職人？","","","");
			Message(15,"鉱山で爆薬をしかけて","爆破を行う人のことさ","","");
			Message(0,"へー","","","");
			Message(15,"君のような子が","この街に来るのは珍しいね","","");
			//シリンダー
			Message(15,"どうだい、おごるから","今日、俺とデートしないかい？","","");
			Message(0,"（このオジサンとは","友達になりたくないわね…）","","");
			Message(0,"悪いけど安売りはしないわ。","デートはお断りね","","");
			//シリンダー
			Message(15,"はっはっはっ、そんなに","照れないでくれよ","","");

			//パリン
			Message(0,"照れてないってば！","じゃあね","","");

			//シリンダー
			Message(15,"ああ、仕事が終わったら","向かえに行くよ","","");

			//パリン
			Message(0,"だからデートはしないって、","言ってるでしょ！","","");
		}
		else
		{
			//シリンダー
			Message(15,"お嬢ちゃん、","デート、楽しみにしてるよ","","");

			//パリン
			Message(0,"しないってば！","","","");
		}
		
		ch[2548] = 1;
		
		if (ch[2547] && ch[2549] && ch[2550] && ch[2551])
		{
			// 全員と会話済み
//			Message(0,"誰も相手してくれないのね。","","","");
//			Message(0,"どこかに面白いことないかしら。","","","");
//			Message(0,"路地裏にでも入ってみようかな。","","","");
			ch[2553] = 1;
		}
		
		ch[400] = -1;
		return 0;
	}

	// ドリルパーツショップ
	// シナリオ進行に応じて出すものを変える
	int mg;
	string str;
	string txt;
	int a;
	int b;
	int waribiki;
	int tute;
	int taikyu;
	int kyouka;
	taikyu = 0;
	kyouka = 0;
	a = 0;
	ch[420] = 0;
	ch[421] = 0;
	ch[422] = 0;
	ch[423] = 0;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 0;
	ch[430] = 0;
	
	// 標準
	if (!ch[1780])
	{
		ch[420] = 1;	// 立ちコンボ
		a++;
	}
	if (!ch[1785])
	{
		ch[425] = 1;	// 地面回転
		a++;
	}
	if (ch[1542])
	{
		if (!ch[1783] && ch[1780])
		{
			ch[423] = 1;	// ＰＭキック
			a++;
		}
		if (!ch[1784])
		{
			ch[424] = 1;	// 回転下月
			a++;
		}
	}
	if (ch[2527])
	{
		if (!ch[1782] && ch[1783])
		{
			ch[422] = 1;	// ダッシュコンボ
			a++;
		}
		if (!ch[1786] && ch[1785])
		{
			ch[426] = 1;	// 回転２
			a++;
		}
	}
	
	if (ch[2068] && !ch[420] && !ch[1780])
	{
		// 前転斬り
		ch[420] = 1;
		a++;
	}
	if (ch[2069] && !ch[423] && !ch[1783] && ch[1780])
	{
		// ＰＭキック
		ch[423] = 1;
		a++;
	}
	if (ch[2070] && !ch[422] && !ch[1782] && ch[1783])
	{
		// ドラフレ
		ch[422] = 1;
		a++;
	}
	if (ch[2071] && !ch[424] && !ch[1784])
	{
		// 回転下月
		ch[424] = 1;
		a++;
	}
	if (ch[2072] && !ch[425] && !ch[1785])
	{
		// Ｄトルネード
		ch[425] = 1;
		a++;
	}
	if (ch[2073] && !ch[426] && !ch[1786] && ch[1785])
	{
		// 回転乱舞
		ch[426] = 1;
		a++;
	}
	KaguTest(20001,22);
	if (ch[430] < 3)
	{
		taikyu = 1;
		a++;
	}
	KaguTest(20001,19);
	if (ch[430] < 3)
	{
		kyouka = 1;
		a++;
	}
	
	// 売りものがない
	if (a == 0)
	{
		Message(15,"……と思ったけど","今、手持ちのパーツが無かったよ","","");
		Message(15,"また今度仕入れておくから","その時は見ていってくれ","","");
		ch[400] = -1;
		return 0;
	}

	ch[3976] = 100;
	// モトロマジック適応
	if (ch[3975] == 0)
	{
		ch[3975] = 100;
	}
	waribiki = (100 - ch[3975]) / 2;
	waribiki = 100 - waribiki;
	if (ch[2640])
	{
		waribiki = waribiki - 25;
	}
	// しりんだーは割引してはいけない
	waribiki = 100;
	ch[3976] = (ch[3976] * waribiki) / 100;
	ShopStart();
	if (ch[420])
	{
		ShopItem(1);
	}
	if (ch[425])
	{
		ShopItem(10);
	}
	if (ch[423])
	{
		ShopItem(6);
	}
	if (ch[424])
	{
		ShopItem(9);
	}
	if (ch[426])
	{
		ShopItem(11);
	}
	if (ch[422])
	{
		ShopItem(7);
	}
	if (taikyu)
	{
		ShopItem(22);
	}
	if (kyouka)
	{
		ShopItem(19);
	}

	ch[50] = ShopEnd2();

	b = 0;

	int aiteru;
	int i;
	aiteru = 0;

	if (ch[50] > 0 && ch[50] != 22 && ch[50] != 19)
	{
		// ゲットだぜ
		SE(893);
		Wait(15);
		KaguTest(30020,0);
		ch[2649] = ch[420];
		ch[2650] = ch[421];
		ch[2651] = ch[422];
		KaguTest(30020,15);
		ch[2652] = ch[420];
		ch[2653] = ch[421];
		ch[2654] = ch[422];
		KaguTest(20010,0);
		ch[2656] = ch[420];

		Black(0,100,15);
		Wait(15);
		ch[2655] = ch[50];
		LoadMap(227);
		ch[50] = ch[2655];
		CharPos(0,-150,150,0);
		Camera(0,0,-1000,370);
//		KaguTest(30059,0);
		Wait(10);
//		KaguTest(20025,-30);
		ch[420] = 1000;
		ch[421] = -1000;
		KaguTest(30070,0);
		Wait(15);
		KaguTest(30032,-100);
		KaguTest(30033,65);
		Wait(10);
		Camera(-1,0,0,0);
		Black(0,0,15);
		Wait(15);
	}
	Camera(-1,0,0,0);
	if (ch[50] == 22)
	{
		SE(893);
		KaguTest(20034,ch[50]);
		GetItem(22);
	}
	if (ch[50] == 19)
	{
		SE(893);
		KaguTest(20034,ch[50]);
		GetItem(19);
	}

	if (ch[50] == 1)
	{
		// 立ちコンボ
		ch[1780] = 1;
		ch[2130] = 1;
		KaguTest(20034,ch[50]);
		b = 1;
		
		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"最初にガードダッシュ。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);
		
		KaguTest(20027,43);
		Wait2(15);
		
		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ガードダッシュ中にすばやく回転して攻撃。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);
		KaguTest(20027,23);
		Wait2(60);

		txt = "『前転斬り』を会得した。";
		tute = 1;
	}
	if (ch[50] == 9)
	{
		ch[1784] = 1;
		ch[2135] = 1;
		KaguTest(20034,ch[50]);
		b = 1;

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"最初にジャンプ。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(30031,40);
		Wait2(15);
		KaguTest(30066,1);
		
		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"空中ですばやく回転して攻撃。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);
		KaguTest(30066,0);

		KaguTest(20027,40);
		KaguTest(20028,0);
		Wait2(45);
		txt = "『回転下突き』を会得した。";
		tute = 6;
	}
	if (ch[50] == 6)
	{
		ch[1783] = 1;
		ch[2132] = 1;
		KaguTest(20034,ch[50]);
		b = 1;
		
		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"最初にガードダッシュ。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);
		
		KaguTest(20027,43);
		Wait2(15);

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ガードダッシュ中にすばやく回転して攻撃。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(20027,22);
		Wait2(60);

		txt = "『プリティミサイルキック』を会得した。";
		tute = 3;
	}
	if (ch[50] == 10)
	{
		ch[1785] = 1;
		ch[2136] = 1;
		KaguTest(20034,ch[50]);
		b = 1;

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"地上ですばやく回転して攻撃。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(20027,16);
		Wait2(60);
		txt = "『ドリルトルネード』を会得した。";
		tute = 7;
	}
	if (ch[50] == 7)
	{
		ch[1782] = 1;
		ch[2133] = 1;
		KaguTest(20034,ch[50]);
		b = 1;

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"最初にガードダッシュ。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(20027,43);
		Wait2(15);

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ガードダッシュ中にすばやく回転して攻撃。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(20027,25);
		Wait2(75);

		txt = "『ドラゴンフレイム』を会得した。";
		tute = 4;
	}
	if (ch[50] == 11)
	{
		ch[1786] = 1;
		ch[2137] = 1;
		KaguTest(20034,ch[50]);
		b = 1;

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"最初にドリルトルネード。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(20027,16);
		Wait2(45);

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ドリルトルネードが終わる頃に攻撃。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(20027,20);
		Wait2(60);
		txt = "『回転乱舞』を会得した。";
		tute = 8;
	}

	if (b == 1)
	{
		KaguTest(20023,0);
		Wait(15);
		Mes(txt);
		SE(955);
		Wait(50);

		KaguTest(20024,0);

		// チュートリアル表示
		if (tute > 0)
		{
			KaguTest(10006,0);
			KaguTest(10007,7);

			switch(tute)
			{
			case 1:
				KaguTest2(10009,0,"dparts01.bmp");
				break;
			case 2:
				KaguTest2(10009,0,"dparts02.bmp");
				break;
			case 3:
				KaguTest2(10009,0,"dparts03.bmp");
				break;
			case 4:
				KaguTest2(10009,0,"dparts04.bmp");
				break;
			case 5:
				KaguTest2(10009,0,"dparts05.bmp");
				break;
			case 6:
				KaguTest2(10009,0,"dparts06.bmp");
				break;
			case 7:
				KaguTest2(10009,0,"dparts07.bmp");
				break;
			case 8:
				KaguTest2(10009,0,"dparts08.bmp");
				break;
			case 9:
				KaguTest2(10009,0,"dparts09.bmp");
				break;
			case 10:
				KaguTest2(10009,0,"dparts10.bmp");
				break;
			}
			ch[423] = 180;
			ch[424] = 42;
			ch[425] = 460;
			ch[426] = 438;
			ch[427] = 0;
			ch[428] = 0;
			ch[429] = 320;
			ch[430] = 452;
			ch[431] = 512;
			KaguTest(10010,10);
			Wait(10);
			Message(0,"","","","");
			ch[420] = 0;
			KaguTest(10011,10);
			Wait(10);
		}

		Black(0,100,15);
		Wait(15);
		LoadMap(ch[2656]);
		CharPos(0,ch[2649],ch[2650],ch[2651]);
		Wait(15);
		CharPos(15,ch[2652],ch[2653],ch[2654]);
		Look(0,15);
		Look(15,0);
		KaguTest(30059,0);
		ch[400] = 15;
		Black(0,0,15);
		Wait(15);
	}

	ch[400] = -1;
	Camera(-1,0,0,0);
//	BGM(5);
	KaguTest(30032,0);
	KaguTest(30033,100);
	return 0;

//	if (a < 2)
//	{
//		// 妖精の粉売る
//		ch[430] = 1;
//	}

	ch[400] = -1;
}
#EndScript

// 00388:町の人・ハイパボリックじじぃ
#Script:00390
int main()
{
	int meda;
	int medama;
	int ukky;
	int night;
	int odango;
	int dou;
	int gin;
	int kin;
	int tmp;
	string text;
	string text2;
	int nukeru;
	int ismeda;
	int qnuke;
	qnuke = 0;
	nukeru = 0;
	ismeda = 0;
	
	ch[400] = 20;
	
	ch[220]++;

	KaguTest(20001,79);
	meda = ch[430];
	KaguTest(20001,56);
	ukky = ch[430];
	KaguTest(20001,57);
	night = ch[430];
	KaguTest(20001,61);
	odango = ch[430];
	KaguTest(20001,77);
	dou = ch[430];
	KaguTest(20001,76);
	gin = ch[430];
	kin = meda;
	if (kin || gin || dou)
	{
		ismeda = 1;
	}

	if (ch[2007] && !ch[2018])
	{
		// クエスト中
		ch[400] = 20;
		if (ch[2002])
		{
			// のぞきクエスト
			ch[420] = ch[2006];
			KaguTest(20043,1);
			if (ch[420])
			{
				//ハイパボリック
				Message(20,"シリンダーなら","わしは見ておらんぞい","","");
			}
			else
			{
				//パリン
				Message(0,"ね、じーちゃん！","シリンダーさんを見なかった？","","");
				//ハイパボリック
				Message(20,"シリンダーじゃと？","いや、わしは見ておらんぞい","","");
				//パリン
				Message(0,"おかしいわね…","","","");
				Message(0,"じーちゃんなら","いつもここにいるから","見ているとと思ったのに…","");
				
				ch[420] = ch[2006];
				KaguTest(20052,1);
				ch[2006] = ch[420];
			}
			
			if (ch[2003] == 2 && ch[2006] == 15)
			{
				// ファン以外の全員から話を聞いた
				ch[2003] = 3;
			}
		}
		if (ch[2010])
		{
			// ビラ貼りクエスト中
			qnuke = 1;
		}

		if (ch[2020])
		{
			// プラチナメダルクエスト中
			KaguTest(20001,54);
			if (ch[430])
			{
				// プラチナメダル発見した
				//パリン
				Message(0,"じーちゃん、新しい","メダルを見つけてきたわ！","","");

				//ハイパボリック
				Message(20,"ほう、これじゃこれじゃ。","これは大変珍しいものでな…","","");
				Message(20,"このメダル専門の","コレクターがいるくらいじゃよ","","");

				//パリン
				Message(0,"ふーん、そうなんだ","","","");

				//ハイパボリック
				Message(20,"よく見つけてきたのう。","これはご褒美じゃ","","");

				//システム
				SE(853);
				KaguTest(10006,0);
				KaguTest(10007,1);
				KaguTest2(10008,0,"壁紙②「るんるるるん」を手に入れた。");
				KaguTest2(10008,2,"パリンの家の机で");
				KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
				KaguTest2(10009,0,"kb002s.bmp");
				KaguTest(10010,10);
				Wait(10);
				Message(0,"","","","");
				KaguTest(10011,10);

				GetItem(2);

				//ハイパボリック
				Message(20,"これと同じメダルは","なかなか手に入らないのじゃ","","");
				Message(20,"求めるなら、全ての場所に","足を踏み入れてみることが大切じゃ","","");
				
				ch[2020] = 0;
				ch[2021] = 1;
				ch[2007] = 0;
				
				ch[420] = 58;
				KaguTest2(30003,1,"@atariyotsu");
				
			}
			else
			{
				// プラチナメダル発見してない
				Message(20,"どうじゃ、珍しいメダルは","見つかったかのぉ？","","");
				Message(0,"全然見つからないわ。","一体どこに隠してあるのよ？","","");
				Message(20,"ふぉふぉ、隠し場所を","教えてしまうのは面白くないじゃろ","","");
				Message(20,"それともあきらめてしまうのかのぉ？","","","");
				
				SelStart(50);
				SelText("あきらめる",1);
				SelText("あきらめない",2);
				SelEnd();
				
				if (ch[50] == 1)
				{
					Message(0,"ふう、もう疲れたから","あきらめることにするわ","","");
					ch[2020] = 0;
					ch[2007] = 0;
					ch[2022] = 1;

					ch[420] = 58;
					KaguTest2(30003,1,"@atariyotsu");
				}
				else
				{
					Message(0,"あきらめるワケないでしょ。","絶対に見つけだしてやるわ","","");
				}
			}
		}
		
		if (!qnuke)
		{
			ch[400] = -1;
			return 0;
		}
	}
	
//	if (ch[2018])
	if (ch[2501] != 6)
	{
		// わらしべクエスト中
		KaguTest(20001,30);
		if (ch[430])
		{
			//ハイパボリック
			Message(20,"何だか甘いものが","食べたい気分じゃのう","","");

			//パリン
			Message(0,"甘いものならここにあるわよ","","","");

			//ハイパボリック
			Message(20,"ほほう、こりゃうまそうじゃ。","ファンの新作かのう？","","");
			Message(20,"どうじゃ、パリン","ワシの昼飯と交換せんか？","","");

			//パリン
			Message(0,"じーちゃんが食べたいなら","交換してもいいわよ","","");

			//ハイパボリック
			Message(20,"いい孫を持って","ワシはしあわせじゃわい","","");

			//システム
			Mes("『ランプステーキ』を手に入れた。");
			KaguTest(20022,31);
			KaguTest(20002,30);
			GetItem(31);
			Wait(60);
			ch[400] = -1;
			return 0;
		}
	}

	// プラチナメダルクエスト発動チェック
	if (!ch[2007] && (ch[2023] + ch[2024] + ch[2025]) > 2 && !ch[2021] && !ch[2022] && ch[2501] != 6)
	{
		// 発動
		//ハイパボリック
		Message(20,"ふむ、順調に色々な","メダルを集めておるようじゃの","","");
		Message(20,"しかし、これだけじゃ","まだ真のコレクターとは言えん","","");
		Message(20,"世の中にはまだ見たことない","メダルが存在しているはずじゃ","","");

		//パリン
		Message(0,"他にどんなメダルがあるの？","","","");

		//ハイパボリック
		Message(20,"知りたいか？","この街のどこかに一枚だけ","ワシが隠した珍しいメダルがある","");
		Message(20,"それを見つけてくるのじゃ。","おのずと答えを見つけられよう","","");

		//パリン
		Message(0,"わかった、さがしてくる！","","","");

		ch[2007] = 1;
		ch[2020] = 1;
		
		ch[400] = -1;

		KaguTest(20010,0);
		if (ch[420] == 12)
		{
			PostScr(1287);
		}
		ch[400] = -1;
		return 0;
	}

	if (ismeda && !ch[3958])
	{
		// じじぃ発動
		// 発動してなければ必ずここに来るべし
		//ハイパボリック
		Message(20,"いいことを教えてやろう","","","");
		Message(20,"実を言うとワシは","メダルを集めるのが趣味なんじゃ","","");
		Message(20,"はて、前にも教えたかのう","","","");
		//パリン
		Message(0,"聞いてないってば！","","","");
		//ハイパボリック
		Message(20,"お前さんも今、珍しい","メダルを持っておるようじゃ","","");
		Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
		Message(20,"もちろんお礼はするのじゃ","","","");
		ch[3958] = 1;
		nukeru = 1;
	}
	else
	{
		if (ch[1571] && !ch[1538])
		{
			if (ch[220] < 2)
			{
				//ハイパボリック
				Message(20,"ひどい地震だったのう。","腰を抜かしそうになったわい","","");
				Message(20,"街に被害が","出ていなければいいのじゃが","","");
				if (ismeda)
				{
					Message(20,"ところでお前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
					//パリン
					Message(0,"話の振り方が唐突ね","","","");
				}
			}
			else
			{
				if (ismeda)
				{
					//ハイパボリック
					Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
				else
				{
					//ハイパボリック
					Message(20,"ひどい地震だったのう。","腰を抜かしそうになったわい","","");
					Message(20,"街に被害が","出ていなければいいのじゃが","","");
				}
			}
		}
		if (ch[1513] && !ch[1571])
		{
			if (ch[220] < 2)
			{
				//ハイパボリック
				Message(20,"お前さんにはいつも","退屈させてすまんのう…","","");
				Message(20,"せめて同年代の","友達がいればいいのじゃが","","");
				//パリン
				Message(0,"気にしないでいいわ。","今はやりたいこともあるし、","ここの生活はわりと好きよ","");
				//ハイパボリック
				Message(20,"わしにも若い頃、","仲のいい友達がいたもんじゃ","","");
				Message(20,"今はもう会うことができないが","あいつはいつも心の中にいる…","","");
				if (ismeda)
				{
					Message(20,"ところでお前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
			}
			else
			{
				if (ismeda)
				{
					//ハイパボリック
					Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
				else
				{
					//ハイパボリック
					Message(20,"お前さんにはいつも","退屈させてすまんのう…","","");
					Message(20,"せめて同年代の","友達がいればいいのじゃが","","");
				}
			}
		}
		if (ch[1505] && !ch[1513])
		{
			if (!ch[2527])
			{
				if (ch[220] < 2)
				{
					//ハイパボリック
					Message(20,"昔、山の反対側で","爆発事故があってな…","","");
					Message(20,"そこに生えてた木や草花が","全て吹き飛んでしまったんじゃ","","");
					//パリン
					Message(0,"何でそんなことになったのよ","","","");
					//ハイパボリック
					Message(20,"うむ、火薬を運んでいた","人間に不注意があったんじゃ。","お前さんも火遊びはしないようにな","");
					if (ismeda)
					{
						Message(20,"ところでお前さん、今、","メダルを持っておるようじゃ","","");
						Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
					}
				}
				else
				{
					if (ismeda)
					{
						//ハイパボリック
						Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
						Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
					}
					else
					{
						//ハイパボリック
						Message(20,"昔、山の反対側で","爆発事故があってな…","「そこに生えてた木や草花が","全て吹き飛んでしまったんじゃ");
					}
				}
			}
			else
			{
				if (ch[220] < 2)
				{
					//ハイパボリック
					Message(20,"街の住人からお前さんに","イタズラされたという","苦情が来ているようじゃが…","");
					//パリン
					Message(0,"イタズラ？してないわよ","","","");
					//ハイパボリック
					Message(20,"ふむ、そうか…","","","");
					if (ismeda)
					{
						Message(20,"ところでお前さん、今、","メダルを持っておるようじゃ","","");
						Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
					}
				}
				else
				{
					if (ismeda)
					{
						//ハイパボリック
						Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
						Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
					}
					else
					{
						//ハイパボリック
						Message(20,"街の住人からお前さんに","イタズラされたという","苦情が来ているようじゃが…","");
						//パリン
						Message(0,"わたしじゃないってば","","","");
					}
				}
			}
		}
		if (ch[1542] && !ch[1505])
		{
			if (ch[220] < 2)
			{
				//ハイパボリック
				Message(20,"そういえば、お前さんの","両親から手紙が来たぞ","","");
				//パリン
				Message(0,"何て書いてあったの？","","","");
				//ハイパボリック
				Message(20,"今、新しい遺跡を発掘中だそうだ","","","");
				Message(20,"面白いものが出てきたら","お前さんに送るそうじゃぞ","","");
				//パリン
				Message(0,"たしか去年の誕生日には","発掘したての呪い人形を送ってきたわ","","");
				//ハイパボリック
				Message(20,"お前さんの両親も変わっとらんのう","","","");
				if (ismeda)
				{
					Message(20,"ところでお前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
			}
			else
			{
				if (ismeda)
				{
					//ハイパボリック
					Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
				else
				{
					//ハイパボリック
					Message(20,"お前さんの両親は今、","新しい遺跡を発掘中だそうだ","","");
					Message(20,"面白いものが出てきたら","お前さんに送るそうじゃぞ","","");
				}
			}
		}
		if (ch[507] && !ch[1542])
		{
			if (ch[220] < 2)
			{
				//パリン
				Message(0,"ね、じーちゃんは子供の頃から","この街に住んでるんでしょ？","","");
				Message(0,"子供のころに何か","変わったものを見なかった？","","");
				//ハイパボリック
				Message(20,"変わったものか、はて……","","","");
				Message(20,"…………………………","","","");
				Message(20,"ほっほっほっ、そんな","昔のことは忘れてしまったわい","","");
				//パリン
				Message(0,"聞くだけムダだったわね","","","");
				if (ismeda)
				{
					//ハイパボリック
					Message(20,"それよりお前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
			}
			else
			{
				if (ismeda)
				{
					//ハイパボリック
					Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
				else
				{
					//ハイパボリック
					Message(20,"ほっほっほっ、昔のことなんて","忘れてしまったわい","","");
				}
			}
		}
		if (ch[2330] && !ch[507])
		{
			if (ch[220] < 2)
			{
				//ハイパボリック
				Message(20,"色々と機械が発達してきてから","鉱山は大忙しなんじゃよ","","");
				Message(20,"できるなら、この街も","もう少し大きくしたいものじゃ","","");
				//パリン
				Message(0,"そうなれば、","人間の友達もできるかな？","","");
				//ハイパボリック
				Message(20,"そうじゃな、できると思うぞ","","","");
				if (ismeda)
				{
					Message(20,"ところでお前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
			}
			else
			{
				if (ismeda)
				{
					Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
					Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
				}
				else
				{
					//ハイパボリック
					Message(20,"もう少し街が大きくなれば","パリンにも友達が","出来るかもしれんのう","");
				}
			}
		}
		if (ch[1545] && !ch[2330])
		{
			if (ismeda)
			{
				//ハイパボリック
				Message(20,"お前さん、今、","メダルを持っておるようじゃ","","");
				Message(20,"もしよかったらワシに","ゆずってはくれんかのぉ？","","");
			}
			else
			{
				//ハイパボリック
				Message(20,"おや、気のせいか","落ち込んでいるように見えるのう","","");
				//パリン
				Message(0,"そんなことないわよ","","","");
			}
		}
		nukeru = 1;
	}
	if (ch[2300] && !ch[1545])
	{
		if (ch[220] < 2)
		{
//			ch[400] = 220;
//			ch[420] = 4;
//			ch[421] = 1;
//			ch[422] = 5;
//			KaguTest(12003,20);
			
//			Message(20,"！","","","");
//			ch[400] = 20;
			//ハイパボリック
			Message(20,"おや、パリン……","","","");
			Message(20,"ドリルなんか持ってどうしたんじゃ？","","","");
			//パリン
			Message(0,"もらったのよ","","","");
			//ハイパボリック
			Message(20,"ほほう、鉱山の","仕事を手伝ってくれる気かの？","","");
			Message(20,"残念だが子供は鉱山に入れないぞい","","","");
			//パリン
			Message(0,"大人になってもあんな","暗いところで働きたくないわ","","");
			Message(0,"そういえば、じーちゃんは","昔、鉱山で働いてたんだっけ？","","");
			//ハイパボリック
			Message(20,"おお、こう見えても鉱夫の間じゃ","有名な穴掘りじゃったぞ","","");
			//パリン
			Message(0,"パパとママは考古学者だし、","うちの家族って穴を掘る人ばっかね","","");
			//ハイパボリック
			Message(20,"ほっほっ、確かにそうじゃ","","","");
		}
		else
		{
			//ハイパボリック
			Message(20,"そのドリルはどうしたんじゃ？","","","");
			//パリン
			Message(0,"もらったんだってば。","さっき言ったでしょ","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (ch[508] && !ch[2300])
	{
		if (ch[220] < 2)
		{
			//ハイパボリック
			Message(20,"パリン、最近よく","出かけているようじゃの","","");
			Message(20,"どこへ行ってるんじゃ？","","","");
			//パリン
			Message(0,"うん、ちょっとそこまでね","","","");
			//ハイパボリック
			Message(20,"あまり遅くならないうちに","帰ってくるんじゃぞ","","");
			//パリン
			Message(0,"はーい","","","");
		}
		else
		{
			//ハイパボリック
			Message(20,"パリン、最近よく","出かけているようじゃの","","");
			Message(20,"あまり遅くならないうちに","帰ってくるんじゃぞ","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (!ch[2552])
	{
		//OP前
		if (ch[220] < 2)
		{
			Message(20,"ほっほっ","最近物忘れが激しくての","","");
			Message(0,"しっかりしてよ。","一応、町長でしょ？","","");
		}
		//ハイパボリック
		Message(20,"そういえば階段を上がったところの","塀に穴が開いてしまっての","","");
		Message(20,"ずいぶん前から直そうと思いつつも","つい忘れて、そのままじゃよ","","");
		if (ch[220] < 2)
		{
			Message(0,"ダメだ、こりゃ","","","");
		}
		
		ch[2547] = 1;
		
		if (ch[2548] && ch[2549] && ch[2550] && ch[2551])
		{
			// 全員と会話済み
//			Message(0,"誰も相手してくれないのね。","","","");
//			Message(0,"どこかに面白いことないかしら。","","","");
//			Message(0,"路地裏にでも入ってみようかな。","","","");
			ch[2553] = 1;
		}
		
		ch[400] = -1;
		return 0;
	}

	if (!ch[3958])
	{
		ch[400] = -1;
		return 0;
	}

	if (!ismeda)
	{
		// メダル持ってなければ戻る
		ch[400] = -1;
		return 0;
	}

	// メダルチェック
	if (dou)
	{
		if (ch[2023] < dou)
		{
			ch[2023] = dou;
		}
	}
	if (gin)
	{
		if (ch[2024] < gin)
		{
			ch[2024] = gin;
		}
	}
	if (kin)
	{
		if (ch[2025] < kin)
		{
			ch[2025] = kin;
		}
	}

	SelStart(50);
	SelText("金のメダルを譲る",1);
	SelText("銀のメダルを譲る",2);
	SelText("銅のメダルを譲る",3);
	SelText("何も譲らない",4);
	SelEnd();
	
	if (ch[50] == 1)
	{
		if (ukky && night && odango)
		{
			if (kin <= 0)
			{
				Message(20,"お前さんは金のメダルを","１枚も持っておらんようじゃ","","");
				Message(20,"残念なのじゃ……","","","");
				ch[400] = -1;
				return 0;
			}

			Message(20,"もうお礼にあげる物が無いのじゃ。","代わりに小遣いをあげるのじゃ","","");
			int kane;
			if (ch[2064] && ch[2065] && ch[2066])
			{
				kane = kin * 100;
			}
			else
			{
				kane = kin * 5000;
			}
			SE(893);
			text = "『￥" + kane + "』を手に入れた。";
			Mes(text);
			Wait(60);
			SetGP(GetGP() + kane);
			KaguTest(20002,79);
			ch[400] = -1;
			return 0;
		}

		int odane;
		int nigne;
		int ukkne;
		int bunpai;
		int bunpain;
		int takai;
		takai = 0;
		bunpai = 0;
		odane = 19;
		nigne = 7;
		ukkne = 4;
		bunpain = 0;
		
		if (ch[2064])
		{
			// 既におだんご交換済み
			bunpai = odane - 1;
			odane = 1;
		}
		else
		{
			bunpain++;
		}
		if (ch[2065])
		{
			bunpai = bunpai + nigne - 1;
			nigne = 1;
		}
		else
		{
			bunpain++;
		}
		if (ch[2066])
		{
			bunpai = bunpai + ukkne - 1;
			ukkne = 1;
		}
		else
		{
			bunpain++;
		}
		
		if (bunpain < 3)
		{
			if (!ch[2064])
			{
				odane = odane + (bunpai / bunpain);
			}
			if (!ch[2065])
			{
				nigne = nigne + (bunpai / bunpain);
			}
			if (!ch[2066])
			{
				ukkne = ukkne + (bunpai / bunpain);
			}
		}
		int a;
		a = odane + nigne + ukkne;
		if (a < 30)
		{
			if (ukkne != 1)
			{
				ukkne = 30 - odane - nigne;
			}
			else
			{
				if (nigne != 1)
				{
					nigne = 30 - odane - ukkne;
				}
				else
				{
					if (odane != 1)
					{
						odane = 30 - nigne - ukkne;
					}
				}
			}
		}
		
		if (ukky && night && !odango)
		{
			odane = 30 - ukkne - nigne;
			takai = 1;
		}
		if (!ukky && night && odango)
		{
			ukkne = 30 - odane - nigne;
			takai = 1;
		}
		if (ukky && !night && odango)
		{
			nigne = 30 - ukkne - odane;
			takai = 1;
		}
		if (takai && ch[2064] && ch[2065] && ch[2066])
		{
			takai = 2;
		}

		if (meda > 0)
		{
			// 交換可能
			text = "お前さん、金のメダルを" + kin + "枚";
			Message(20,text,"持っているようじゃな","","");
			Message(20,"お前さんさえよければ","わしの持ってるいいものと","交換してはくれないか？","");
			if (takai == 2)
			{
				Message(20,"最後の一つじゃから","交換に必要なメダルも多くなるが","我慢して欲しいのじゃ","");
			}
			SelStart(50);

			string txt;
			txt = "おさるの帽子s100（"+ukkne+"枚）";
			if (!ukky)
			{
				SelText(txt,1);
			}
			txt = "ナイトキャップs100（"+nigne+"枚）";
			if (!night)
			{
				SelText(txt,2);
			}
			txt = "おだんごs100（"+odane+"枚）";
			if (!odango)
			{
				SelText(txt,3);
			}
			SelText("交換しない",4);
			SelEnd();
			a = 0;
			switch(ch[50])
			{
			case 1: // おサルの帽子
				if (ukkne > kin)
				{
					a = 1;
				}
				break;
			case 2: // ナイトキャップ
				if (nigne > kin)
				{
					a = 1;
				}
				break;
			case 3: // おだんご
				if (odane > kin)
				{
					a = 1;
				}
				break;
			}
			if (a)
			{
				ch[50] = 0;
			}
			
			switch(ch[50])
			{
			case 1:	// お猿の帽子
				KaguTest(20022,56);
				GetItem(56);
				Mes("『おさるの帽子』を手に入れた。");
				ch[420] = ukkne;
				KaguTest(20006,79);
				Wait(40);

				ukky = 1;
				ch[50] = 5;
				break;
			case 2:	// ナイトキャップ
				KaguTest(20022,57);
				GetItem(57);
				Mes("『ナイトキャップ』を手に入れた。");
				ch[420] = nigne;
				KaguTest(20006,79);
				Wait(40);

				night = 1;
				ch[50] = 5;
				break;
			case 3:	// おだんご
				KaguTest(20022,61);
				GetItem(61);
				Mes("『おだんご』を手に入れた。");
				ch[420] = odane;
				KaguTest(20006,79);
				Wait(40);

				odango = 1;
				ch[50] = 5;
				break;
			case 0: // メダル足りない
				Message(20,"メダルが足りないのじゃ","","","");
				break;
			default:
				ch[50] = 0;
				Message(20,"そうか……","","","");
				Message(20,"気が向いたら","交換しておくれ","","");
				ch[400] = -1;
				return 0;
				break;
			}
			if (ch[50] == 5 && odango && night && ukky)
			{
				Message(20,"おぉぉ……","","","");
				Message(0,"どうしたの？","","","");
				Message(20,"お前さんのおかげで","念願のメダル１００枚に到達したのじゃ","","");
				Message(20,"これでもう思い残すことは","何も無いのじゃ","","");

				KaguTest(20001,87);
				if (ch[455] == 1 && !ch[430])
				{
					// 銅の勲章くれる
					Message(20,"お礼にこれをあげるのじゃ","","","");
					GetItem(87);
					Mes("『銅の勲章』を手に入れた。");
					KaguTest(20022,87);
					Wait(60);
				}
				KaguTest(20001,88);
				if (ch[455] == 0 && !ch[430])
				{
					// 銀の勲章くれる
					Message(20,"お礼にこれをあげるのじゃ","","","");
					GetItem(88);
					Mes("『銀の勲章』を手に入れた。");
					KaguTest(20022,88);
					Wait(60);
				}
				KaguTest(20001,89);
				if (ch[455] == 2 && !ch[3961] && !ch[430])
				{
					// 金の勲章くれる
					Message(20,"お礼にこれをあげるのじゃ","","","");
					GetItem(89);
					Mes("『金の勲章』を手に入れた。");
					KaguTest(20022,89);
					Wait(60);
				}
				KaguTest(20001,90);
				if (ch[455] == 2 && ch[3961]==1 && !ch[430])
				{
					// 白金の勲章くれる
					Message(20,"お礼にこれをあげるのじゃ","","","");
					GetItem(90);
					Mes("『白金の勲章』を手に入れた。");
					KaguTest(20022,90);
					Wait(60);
				}
				KaguTest(20001,91);
				if (ch[455] == 2 && ch[3961]==2 && !ch[430])
				{
					// 白金の勲章くれる
					Message(20,"お礼にこれをあげるのじゃ","","","");
					GetItem(91);
					Mes("『ウランの勲章』を手に入れた。");
					KaguTest(20022,91);
					Wait(60);
				}
								
			}
		}
		else
		{
			Message(20,"お前さんは金のメダルを","１枚も持っておらんようじゃ","","");
			Message(20,"残念なのじゃ……","","","");
		}
		ch[400] = -1;	
		return 0;
	}
	
	if (ch[50] == 2)
	{
		if (gin <= 0)
		{
			Message(20,"お前さんは銀のメダルを","１枚も持っておらんようじゃ","","");
			Message(20,"残念なのじゃ……","","","");
			ch[400] = -1;
			return 0;
		}
		
		text = "お前さんは今" + gin + "枚持っておるから";
		text2 = "￥" + (gin * 1000) + "になるがよいかのぉ？";
		Message(20,"銀のメダルは１枚￥１０００で交換なのじゃ。",text,text2,"");
		text2 = "￥" + (gin * 1000) + "で交換する";
		SelStart(50);
		SelText(text2,1);
		SelText("やっぱりやめる",2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			Message(20,"商談成立なのじゃ","","","");
			int kane;
			SE(893);
			kane = gin * 1000;
			text = "『￥" + kane + "』を手に入れた。";
			Mes(text);
			Wait(60);
			SetGP(GetGP() + kane);
			KaguTest(20002,76);
			ch[400] = -1;
			return 0;
		}
		
		Message(20,"それは残念なのじゃ……","","","");
		ch[400] = -1;
		return 0;
	}

	if (ch[50] == 3)
	{
		if (dou <= 0)
		{
			Message(20,"お前さんは銅のメダルを","１枚も持っておらんようじゃ","","");
			Message(20,"残念なのじゃ……","","","");
			ch[400] = -1;
			return 0;
		}
		
		text = "お前さんは今" + dou + "枚持っておるから";
		text2 = "￥" + (dou * 100) + "になるがよいかのぉ？";
		Message(20,"銅のメダルは１枚￥１００で交換なのじゃ。",text,text2,"");
		text2 = "￥" + (dou * 100) + "で交換する";
		SelStart(50);
		SelText(text2,1);
		SelText("やっぱりやめる",2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			Message(20,"商談成立なのじゃ","","","");
			int kane;
			kane = dou * 100;
			SE(893);
			text = "『￥" + kane + "』を手に入れた。";
			Mes(text);
			Wait(60);
			SetGP(GetGP() + kane);
			KaguTest(20002,77);
			ch[400] = -1;
			return 0;
		}
		
		Message(20,"それは残念なのじゃ……","","","");
		ch[400] = -1;
		return 0;
	}
	
//	if (ch[50] == 5)
//	{
//		Message(20,"そ、そ、そ、","それは！！！","","");
//		Message(0,"どうしたの？","","","");
//		Message(20,"プ、プ、プ、","プラチナメダルじゃないか！","","");
//		Message(20,"長年メダルを集めてきたのじゃが","プラチナメダルを見るのは","初めてじゃわい","");
//		Message(0,"へ～","そんなに珍しいメダルなんだ","","");
//		Message(20,"わしが手にするには","あまりにも勿体ないわい","","");
//		Message(20,"世界にはわしよりもさらに","メダルマニアな男が五万といるらしい","","");
//		Message(20,"そのメダルをあげるのなら","そういう男達にあげると良いじゃろう","","");
//		Message(0,"わかったわ。","もしそんな変な人を見かけたら","その人にあげることにするわ","");
//		ch[400] = -1;
//		ch[2115] = 1;
//	}

	Message(20,"残念なのじゃ……","","","");

	ch[400] = -1;	
	return 0;


	// 居場所で話す内容が変わる
	KaguTest(20014,20);
	// 今いる場所（家具テストでチェックした内容）
	switch(ch[430])
	{
	case 2:	// 炭鉱前
		Message(20,"わしの家はどこじゃったかのぉ","","","");
		break;
	case 3: // 研究所前
		Message(20,"この青い建物はわしの研究所じゃ。","わしの長年の夢が詰まっておる","","");
		Message(0,"なんの研究所なの？","","","");
		Message(20,"それは……","はて、なんじゃったかのぉ？","","");
		break;
	case 4: // 研究所前小広場
	case 5: // 町見下ろし場
	case 6: // 道具屋前
	case 11: // 家具屋前
		Message(20,"この街も変わってしもうたわい","","","");
		Message(20,"昔は緑に溢れた美しい村じゃったが","今では鉄や石に覆われてしまっておる。","これが時の流れと言う物なのじゃろうか……","");
		break;
	case 7: // 道具屋入り口
	case 8: // 道具屋右端
	case 9:	// 道具屋店主前
	case 10: // 道具屋棚前
		Message(20,"この店の売り物はさっぱりわからんわい","","","");
		Message(20,"「ガスマスク」なんて","誰が使うんじゃ？","","");
		break;
	case 12: // 家具屋入り口前
	case 13: // 家具屋店主前
	case 14: // 家具屋家具前
		Message(20,"いつも甘い匂いに誘われて","この店に入ってしまうのじゃ","","");
		Message(20,"しかし、値段をみて","ショックを受けるのじゃ……","","");
		break;
	case 15: // 広場
		Message(20,"この街はわしには広すぎて困るわい","","","");
		break;
	case 16: // 大家の部屋
	case 19: // 駅前
		Message(20,"最近、よく道に迷うのじゃ。","やはりもう歳なのかのぉ","","");
		Message(20,"今も道に迷っておる所なのじゃ。","慣れるとなかなか楽しいのじゃ","","");
		break;
	case 17: // 大家の部屋階段横
	case 18: // 大家の部屋階段下
	case 21: // テラスへの階段下
	case 22: // テラスへの階段上
	case 23: // パリン部屋階段上
	case 29: // パリン部屋前～階段上
		Message(20,"もう歳かのぉ。","階段の上り下りがきつくなってきたわい","","");
		break;
	case 24: // パリン部屋
	case 26: // パリン部屋入り口
		Message(20,"お前さん、わしの家になんのようじゃ？","","","");
		Message(0,"ここは私の家よ","","","");
		break;
	case 25: // テラス
	case 28: // パリン部屋前
	case 27: // テラス渡り廊下
		Message(20,"見える！見えるぞ！！","","","");
		Message(0,"何が見えるの？","","","");
		Message(20,"空が良く見えるのじゃ。","今日の様子じゃと、明日もきっと晴れるのじゃ","","");
		break;
	}

	ch[400] = -1;
}
#EndScript

// 391:身にトカロン
#Script:00391
int main()
{
	ch[400] = 12;
	Message(12,"オバケのみんなとも","これからはうまくやっていけそうだ","","");
	ch[400] = -1;
}
#EndScript

// いろいろ
// 掘った
#Script:00430
int main()
{
//	KaguTest(10006,0);
//	KaguTest(10007,1);
//	KaguTest2(10008,0,"s085☆s115台座s160☆");
//	KaguTest2(10008,2,"台座を掘り当てました。");
//	KaguTest2(10008,3,"家具などを置いて町を好きなように飾りつけでき");
//	KaguTest2(10008,4,"オバケ達がそれを採点してくれます。");
//	KaguTest2(10008,5,"");
//	KaguTest2(10008,6,"台座の前で家具を使用すると設置し、");
//	KaguTest2(10008,7,"家具の前で「とる」を実行すると撤去します。");
//	KaguTest2(10009,0,"info_01.bmp");
//	KaguTest(10010,10);
	
//	Wait(15);
	
//	Message(0,"","","","");

//	KaguTest(10011,10);
//	Wait(30);
	
	
	ch[1518] = 1;
}
#EndScript

// 402初入り
#Script:00431
int main()
{
//	Wait(120);

//	KaguTest(10006,0);
//	KaguTest(10007,5);
//	KaguTest2(10008,0,"s068☆s098オバケホームs201☆");
//	KaguTest2(10008,1,"");
//	KaguTest2(10008,2,"オバケ達の町はファントム達に破壊されて");
//	KaguTest2(10008,3,"土砂やガレキに埋もれてしまいました。");
//	KaguTest2(10008,4,"");
//	KaguTest2(10008,5,"土砂やガレキを取り除き、点在する台座に家具を置けば");
//	KaguTest2(10008,6,"オバケ達がお礼してくれるかも知れません。");
//	KaguTest2(10008,7,"土砂の中には貴重なアイテムが埋もれていることも……");
//	KaguTest2(10009,0,"info_02.bmp");
//	KaguTest(10010,10);
	
//	Wait(15);
	
//	Message(0,"","","","");

//	KaguTest(10011,10);
//	Wait(30);
	
	
	ch[1517] = 1;
}
#EndScript

// 307:トカロン倒した
#Script:00432
int main()
{
//	White(0,0,0);
//	White(0,100,30);
//	Blur(1,100,30);
//	Wait(60);

	// ボスラッシュ中？
	if (ch[2092])
	{
		// トカロン第二戦へ
		Black(0,100,10);
		Wait(10);
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(308);
		Wait(5);
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		CharPos(0,0,-300,0);
	// モンスター_MONSHITO取得して配置
		KaguTest(20020,0);
		CharPos(ch[425],0,900,0000);
		KaguTest(30028,ch[425]);

		Wait(5);
		Walk(0,5,1);
		KaguTest(30057,0);

		Black(0,0,30);
		Wait(30);
		MMV("boss08.mmv");
		TekiStop(0);
		MapEvent(1);

		return 0;
	}

	Black(0,100,0);
	KaguTest(40002,0);

	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
		LoadMapB(308);

		CharPos(0,-300,-300,2000);
		// モンスター_MONSHITO取得して配置
		KaguTest(20020,0);
		CharPos(ch[425]+1,300,300,0000);
		KaguTest(30028,ch[425]+1);
		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);

		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
//		PlayMovie("lasbo2.txt",1);
		Wait(10);
		
		LoadMapB(308);

		CharPos(0,-300,-300,2000);
		// モンスター_MONSHITO取得して配置
		KaguTest(20020,0);
		CharPos(ch[425]+1,300,300,0000);
		KaguTest(30028,ch[425]+1);
		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);

		return 0;
	}
	// デバッグここまで

//	Lock();	
//	PlayMovie("lasbo2.txt",ch[1541]);
	KaguTest(20065,-38);
	Mouse(0);
	PlayMovie("GF_2a.txt",ch[1572]);
	KaguTest(100000,0);
	PlayMovie2("GF_2b.txt",ch[1572]);
	Mouse(1);
	KaguTest(20066,0);
	ch[1572] = 1;
	ch[1541] = 1;
	ResetFade();
	White(0,100,0);
	
	// トカロンのテクスチャを戻す（念のため）
	KaguTest(60001,0);

	CharPos(0,0,-300,0);
	LoadMap(308);
	CharPos(0,0,-300,0);
// モンスター_MONSHITO取得して配置
	KaguTest(20020,0);
	CharPos(ch[425],0,900,0000);
	KaguTest(30028,ch[425]);
	Wait(5);
	Walk(0,5,1);
	KaguTest(30057,0);
	
//	SetSavePos2(306, 1992 , 434 , 1505);

//	SetSavePos2(312, -675 , 0 , 0);

	TekiStop(1);
	White(0,0,30);
	Wait(30);
	TekiStop(0);
	MMV("boss08.mmv");
//	Unlock();
}
#EndScript

// 308:トカロン倒した
#Script:00433
int main()
{
	// ボスラッシュ中？
	if (ch[2092])
	{
		// ブラックビーン戦へ
		ch[2103] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		ch[2497] = 1;
		KaguTest(100000,0);
		LoadMapB(308);
		Wait(5);
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		CharPos(0,0,-600,0);
		CharPos(58,0,0,0);
		CharPos(25,-200000,0,0);

		Wait(5);
		Walk(0,1,1);
		KaguTest(30057,0);

		White(0,0,30);
		Wait(30);
		MMV("boss09.mmv");
		TekiStop(0);
		MapEvent(1);

		return 0;
	}

	int f;
	int tobu;
//	White(0,0,0);
//	White(0,100,30);
	Wait(30);
	KaguTest(40002,0);

	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
//		ch[1790] = 3;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		Black(0,100,30);
		Wait(30);
		ch[2497] = 1;
		LoadMapB(308);
		MapEvent(1);
		Wait(3);
		
//		BGM(7);

		KaguTest(20020,0);
		CharPos(0,0,-500,0);
		
		Black(0,0,15);
		Wait(15);
		
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
		MapEvent(1);
//		BGM(7);
		
		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
//		ch[1790] = 3;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		ch[1538]=1;
//		PlayMovie("end1.txt",1);
		ch[1538]=0;
		Wait(10);

		ch[2497] = 1;
		LoadMapB(308);
		Black(0,100,30);
		Wait(30);
		MapEvent(1);
		Wait(3);
		
//		BGM(7);

		KaguTest(20020,0);
		CharPos(0,0,-300,0);
		
		Black(0,0,15);
		Wait(15);
		
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
		MapEvent(1);
//		BGM(7);
		
		return 0;
	}
	if (ch[3982] == 3)
	{
		// ステージテスト中
		TekiStop(1);

		Black(0,0,15);
		KaguTest(10500,120);
			
		if (ch[2270] < 1)
		{
			ch[2270]=1;
		}
			
		Wait(90);

		Message(0,"","","","");

		KaguTest(10011,5);
		KaguTest(99999,0);
		return 0;
	}
	// デバッグここまで
	TekiStop(1);
	
	// マップとパリン消す
//	BGM(0);
	KaguTest(30087,0);
	CharPos(0,-200000,0,0);

//	White(0,0,15);
//	KaguTest(10500,120);
//		
//	if (ch[2270] < 1)
//	{
//		ch[2270]=1;
//	}
//		
//	Wait(90);
//
//	Message(0,"","","","");
//
//	White(0,100,30);
//	Wait(30);
//	KaguTest(10011,5);
//	Wait(5);

//	PlayMovie("end1.txt",0);
	KaguTest(99993,0);	// クリアフラグチェック
	if (ch[420] || ch[421] || ch[422] || ch[425])
	{
		tobu = 1;
	}
	else
	{
		tobu = 0;
	}
	ch[1538] = 1;
//	PlayMovie("GF_3.txt",tobu);
	Mouse(0);
	int movi;
	KaguTest(20065,-40);
	movi = PlayMovie("GF_3a.txt",tobu);
	KaguTest(100000,0);
	if (movi)
	{
		movi = PlayMovie2("GF_3b.txt",tobu);
		KaguTest(100000,0);
	}
//	if (movi || ch[1792] != 522133279)
	{
		movi = PlayMovie2("GF_3c.txt",tobu);
		KaguTest(100000,0);
	}
	Mouse(1);
//	ch[1538]=0;
	ResetFade();
	Black(0,100,0);
	Blur(2,0,1);
	
	KaguTest(10100,0);
	ch[298] = 1;
//	KaguTest(99999,0);
//	KaguTest(99990,0);
//	KaguTest(99998,0);
	ch[1538]=1;
	ch[1759] = 0;
	ch[1760] = 0;
	
	// 家具持ってたら捨てる
	KaguTest(10205,0);

	if (ch[1792] == 522133279)
	{
		Mouse(0);
		ch[3600] = 1;
		ch[2036] = 1;
		PlayMovie("EP_1.txt",tobu);
		ch[2036] = 0;
		ch[3600] = 0;
		ch[2288] = 0;
		ch[2289] = 0;
		ch[2290] = 0;
		ch[2291] = 0;
		LoadMapB(401);
		Mouse(1);
//		ch[2791] = 0;
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(0,5,1);
		KaguTest(30057,0);
		ch[3952] = 1;
	}
	else
	{
		ch[3952] = 1;
		PlayMovie("EP_1b.txt",0);
		LoadMapB(401);
		CharPos(0,173,-220,50);
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(0,-5,1);
		KaguTest(30057,0);
	}
	KaguTest(20066,0);
	Black(0,0,15);
	Wait(15);
	return 0;
	
	LoadMapB(998);
	Wait(10);
//	Mes("ＥＤ兼スタッフロール予定。");
//	Wait(60);
	
	switch(ch[455])
	{
	case 0:
		f = 1;
		break;
	case 1:
		f = 0;
		break;
	case 2:
		f = 2;
		break;
	}
	KaguTest(99993,0);
	if (!ch[420 + f])
	{
		SE(564);
		Mes("新しいコスチュームが追加されました。");
		Wait(60);
		Mes("クローゼットで着替えることが出来ます。");
		Wait(60);
	}
	KaguTest(99994,0);

	
	Black(0,100,30);
	Wait(30);
	TekiStop(0);
	// エンディングに続かせる
	Reset();
}
#EndScript

////////////////////////////////////////////////////////////////////////////////////////
// デバッグムービー
#Script:00699
int main()
{
	int a;
	int b;
	int x;
	int y;
	int z;
	int c;
	int d;
	int flag;
	int flag2501;
	
	KaguTest(70005,0);
	
	MapEvent(0);
	GetCharPos(0,x,y,z);
	KaguTest(20010,0);
	b = ch[420];

	SelStart(50);
	KaguTest(70004,0);
	if (ch[420])
	{
		SelText("連続再生モードオフ",97);
		SelText("連続再生モードオン★",96);
	}
	else
	{
		SelText("連続再生モードオフ★",97);
		SelText("連続再生モードオン",96);
	}
	SelText("パリン、登場！",1);
	SelText("ピノとの出会い",2);
	SelText("オープニングムービー",3);
	SelText("さらわれたプク",4);
	SelText("伝説のドリル！",5);
	SelText("モトロ登場！",6);
	SelText("プクの救出",7);
	SelText("ファントム勢ぞろい",8);
	SelText("オバケホーム廃墟にて",9);
	SelText("破壊竜の伝説",10);
	SelText("王子の待ち伏せ①",11);
	SelText("四天王ボブーとの戦い",12);
	SelText("ピエール救出",13);
	SelText("迷子のピノ",14);
	SelText("モトロ再び",15);
	SelText("王子の待ち伏せ②",16);
	SelText("四天王モスビーとの戦い",17);
	SelText("イワオ救出",18);
	SelText("邪魔するのは誰？",19);
	SelText("モグラ兄弟",20);
	SelText("モトロ三度！",21);
	SelText("王子の待ち伏せ③",22);
	SelText("四天王ラッシーとの戦い",23);
	SelText("チャッキー救出",24);
	SelText("さらわれたピノ",25);
	SelText("回り出す運命の歯車",26);
	SelText("二人のパリン",27);
	SelText("王子の待ち伏せ④",28);
	SelText("四天王クリームとの戦い",29);
	SelText("王子の策動",30);
	SelText("プクの独語",31);
	SelText("モトロＶＳ王子",32);
	SelText("トカロン復活　そして…",33);
	SelText("プクとの戦闘",34);
	SelText("プクの誤算",35);
	SelText("ピノとの再開",36);
	SelText("トカロンとの激闘",37);
	SelText("最後の戦い",38);
	SelText("死闘の果てに…",39);
	SelText("それから…",40);
	SelText("伝説の戦士",41);
	SelText("さよならの時",42);
	SelText("いつまでも…",43);
//	SelText("すたふろる",98);
//	SelText("一括再生",99);
	SelEnd();
	
	a = ch[50];
	
	if (a == 97)
	{
		KaguTest(70003,0);
		return 0;
	}
	if (a == 96)
	{
		KaguTest(70003,1);
		return 0;
	}
	
	if (a == -1)
	{
		MapEvent(1);
		return 0;
	}
	// フラグ全部リセット
	c = a;
	d = a+1;
	if (c == 99)
	{
		c = 1;
//		d = 43;
	}
	d = 43;
	int movi;
	int renzoku;
	KaguTest(70004,0);
	renzoku = ch[420];
	if (!ch[420])
	{
		d = c + 1;
	}
	movi = 1;
	Mouse(0);
	KaguTest(20066,-1);
	for (a = c;a < d;a++)
	{
		flag = ch[3961];
		flag2501 = ch[2501];
		KaguTest(20029,0);
		ch[3961] = flag;
//		ch[2501] = flag2501;
		KaguTest(20070,flag2501);
		ch[2300] = 1;
		ch[506] = 1;
		KaguTest(100000,0);
		Scop(1);
		switch(a)
		{
		case 1:
			ch[2300] = 0;
			movi = PlayMovie("open1_1.txt",1);
			break;
		case 2:
			ch[2300] = 0;
			movi = PlayMovie("open1_2.txt",1);
			break;
		case 3:
			LoadMapB(998);
			CharPos(0,-200000,0,0);
			SetWaku(1);
			BGM(0);
//			KaguTest(20065,0);
			Black(0,0,15);
			PlayAVI("op.avi",1);
			Black(0,100,0);
			KaguTest(20066,0);
			SetWaku(0);
			break;
		case 4:
			ch[2300] = 0;
			ch[2062] = 0;
			movi = PlayMovie("open2.txt",1);
			break;
		case 5:
			ch[2300] = 0;
			ch[2062] = 0;
			ch[508] = 1;
			movi = PlayMovie("nuketa.txt",1);
			break;
		case 6:
			movi = PlayMovie("isk_1_1.txt",1);
			break;
		case 7:
			movi = PlayMovie("isk_1_2.txt",1);
			KaguTest(100000,0);
			movi = PlayMovie("isk_1_3.txt",1);
			break;
		case 8:
			ch[2062] = 1;
			ch[1754] = 0;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 0;
			movi = PlayMovie("home_1.txt",1);
			break;
		case 9:
			ch[2062] = 1;
			ch[1754] = 0;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 0;
			movi = PlayMovie("home_2.txt",1);
			break;
		case 10:
			movi = PlayMovie("isk_2_1.txt",1);
			break;
		case 11:
			movi = PlayMovie("isk_3_1.txt",1);
			break;
		case 12:
			LoadMapB(105);
			movi = PlayMovie("isk_3_2.txt",1);
			break;
		case 13:
			movi = PlayMovie("isk_3_3.txt",1);
			break;
		case 14:
			movi = PlayMovie("mri_1_1.txt",1);
			break;
		case 15:
			movi = PlayMovie("mri_2_1.txt",1);
			break;
		case 16:
			movi = PlayMovie("mri_3_1.txt",1);
			break;
		case 17:
			movi = PlayMovie("mri_3_2.txt",1);
			break;
		case 18:
//			PlayMovie("mri_3_3.txt",1);
			movi = PlayMovie("mri_3_3a.txt",1);
			KaguTest(100000,0);
			if (movi)
			{
				movi = PlayMovie2("mri_3_3b.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("mri_3_3c.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("mri_3_3d.txt",1);
				KaguTest(100000,0);
			}
			movi = PlayMovie2("mri_3_3e.txt",1);
			break;
		case 19:
			movi = PlayMovie("dkt_1_1.txt",1);
			break;
		case 20:
			ch[2514] = 1;
			movi = PlayMovie("dkt_1_2.txt",1);
			KaguTest(100000,0);
			ch[2514] = 1;
			ch[2516] = 1;
			ch[2517] = 1;
			ch[2513] = 1;
			movi = PlayMovie("dkt_1_3.txt",1);
			break;
		case 21:
			movi = PlayMovie("dkt_2_1.txt",1);
			break;
		case 22:
			movi = PlayMovie("dkt_3_1.txt",1);
			break;
		case 23:
			movi = PlayMovie("dkt_3_2.txt",1);
			break;
		case 24:
			movi = PlayMovie("dkt_3_3.txt",1);
			break;
		case 25:
			ch[2062] = 1;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 2;
			ch[1754] = 1;
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2556] = 1;
			movi = PlayMovie("home_3.txt",1);
			break;
		case 26:
			ch[3981] = 1;
			ch[2527] = 1;
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("yam_1_1.txt",1);
			ch[3981] = 0;
			break;
		case 27:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("yam_2_1.txt",1);
			break;
		case 28:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("yam_3_1.txt",1);
			break;
		case 29:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("yam_3_2.txt",1);
			break;
		case 30:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("yam_3_3.txt",1);
			break;
		case 31:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("kdo_1_1.txt",1);
			break;
		case 32:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("kdo_2_1.txt",1);
			break;
		case 33:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			movi = PlayMovie("kdo_3_1.txt",1);
			if (movi)
			{
				ch[2062] = 1;
				ch[1754] = 3;
				ch[1750] = 2;
				ch[1751] = 2;
				ch[1752] = 2;
				ch[1753] = 2;
				ch[508] = 1;
				ch[512] = 1;
				ch[2328] = 1;
				ch[2329] = 1;
				ch[2317] = 1;
				movi = PlayMovie("kdo_3_5a.txt",1);
				KaguTest(100000,0);
				ch[2540] = 1;
			}
			if (movi)
			{
				movi = PlayMovie2("kdo_3_5x.txt",1);
				KaguTest(100000,0);
			}
			movi = PlayMovie2("kdo_3_5d.txt",1);
			break;
		case 34:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2527] = 1;
			movi = PlayMovie("kdo_3_2.txt",1);
			KaguTest(100000,0);
			movi = PlayMovie("kdo_3_3.txt",1);
			break;
		case 35:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2527] = 1;
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2527] = 1;
			ch[1513] = 1;
			ch[512] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 1;
			ch[1755] = 3;
			ch[2556] = 1;
			ch[2514] = 1;
			movi = PlayMovie("kdo_3_4a.txt",1);
			KaguTest(100000,0);
			if (movi)
			{
				ch[2062] = 1;
				ch[2556] = 1;
				movi = PlayMovie2("kdo_3_5b.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("kdo_3_5c.txt",1);
				KaguTest(100000,0);
			}
			PlayMovie2("kdo_3_4b.txt",1);
			break;
		case 36:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1754] = 3;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 2;
			ch[1754] = 1;
			ch[2527] = 1;
			movi = PlayMovie("GF_1.txt",1);
			break;
		case 37:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 3;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 3;
			ch[1754] = 1;
			ch[2527] = 1;
			KaguTest(60001,0);
			movi = PlayMovie("houdai0.txt",1);
			if (movi)
			{
				ch[2328] = 1;
				ch[2329] = 1;
				ch[2317] = 1;
				ch[2062] = 1;
				ch[1750] = 2;
				ch[1751] = 2;
				ch[1752] = 2;
				ch[1753] = 2;
				ch[1754] = 3;
				ch[508] = 1;
				ch[512] = 1;
				ch[2527] = 1;
				KaguTest(60001,1);
				movi = PlayMovie("houdai2.txt",1);
			}
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 3;
			ch[508] = 1;
			ch[512] = 1;
			ch[2527] = 1;
			KaguTest(60001,4);
			movi = PlayMovie("houdai3.txt",1);
			break;
		case 38:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 3;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 3;
			ch[1754] = 1;
			ch[2527] = 1;
			movi = PlayMovie("GF_2a.txt",1);
			KaguTest(100000,0);
			movi = PlayMovie2("GF_2b.txt",1);
			break;
		case 39:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 3;
			ch[508] = 1;
			ch[512] = 1;
			ch[1755] = 3;
			ch[1754] = 1;
			ch[2527] = 1;
			movi = PlayMovie("GF_3a.txt",1);
			KaguTest(100000,0);
			if (movi)
			{
				movi = PlayMovie2("GF_3b.txt",1);
				KaguTest(100000,0);
			}
			movi = PlayMovie2("GF_3c.txt",1);
			break;
		case 40:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 1;
			ch[1755] = 3;
			ch[508] = 1;
			ch[1538] = 1;
			ch[512] = 1;
			ch[3600] = 1;
			ch[2527] = 1;
			ch[2036] = 1;
			movi = PlayMovie("EP_1.txt",1);
			ch[2036] = 0;
			ch[3600] = 0;
			LoadMapB(401);
			break;
		case 41:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 3;
			ch[508] = 1;
			ch[1538] = 1;
			ch[512] = 1;
			ch[1755] = 3;
			ch[1754] = 1;
			ch[2527] = 1;
			movi = PlayMovie("EP_2.txt",1);
			break;
		case 42:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1750] = 2;
			ch[1751] = 2;
			ch[1752] = 2;
			ch[1753] = 2;
			ch[1754] = 3;
			ch[508] = 1;
			ch[1538] = 1;
			ch[512] = 1;
			ch[2062] = 1;
			ch[1754] = 1;
			ch[508] = 1;
			ch[1538] = 1;
			ch[1755] = 3;
			ch[1754] = 1;
			ch[2036] = 1;
			ch[2527] = 1;
			ch[2546] = 1;
			movi = PlayMovie("EP_3a.txt",1);
			if (ch[2501] == 6)
			{
				KaguTest(20070,0);
			}
			KaguTest(100000,0);
			if (movi)
			{
				movi = PlayMovie2("EP_3b.txt",1);
				KaguTest(100000,0);
			}
			// 頭装備はずす
			KaguTest(20008,0);
			if (ch[430])
			{
				Soubi(ch[430]);
			}
			ch[2300] = 0;

			if (movi)
			{
				movi = PlayMovie2("EP_4_3.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_10.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_4.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_7.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_9.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_5.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_8.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_6.txt",1);
				KaguTest(100000,0);
			}
			if (movi)
			{
				movi = PlayMovie2("EP_4_2.txt",1);
				KaguTest(100000,0);
			}
//			if (movi)
//			{
				movi = PlayMovie2("EP_4_1.txt",1);
				KaguTest(100000,0);
//			}

			SetWaku(1);
			KaguTest(99999,1);

			CharPos(0,-200000,0,0);
			Black(0,0,10);
			Wait(10);

			KaguTest(10006,0);
			KaguTest(10007,7);
			KaguTest2(10009,0,"bdend21.iti");
			ch[423] = 192;
			ch[424] = 112;
			ch[425] = 448;
			ch[426] = 368;
			ch[427] = 0;
			ch[428] = 0;
			ch[429] = 256;
			ch[430] = 256;
			ch[431] = 256;
			KaguTest(10010,30);
			Wait(30);
			Message(0,"","","","");
//			Wait(60);
			ch[420] = 0;
			KaguTest(10011,30);
			Wait(30);
			Black(0,100,15);
			Wait(15);
			Black(0,100,0);
			KaguTest(99998,0);
			LoadMapB(998);

//			movi = PlayMovie2("EP_5.txt",1);
			SetWaku(0);
			break;
		case 43:
			ch[2328] = 1;
			ch[2329] = 1;
			ch[2317] = 1;
			ch[2062] = 1;
			ch[1754] = 1;
			ch[2300] = 0;
			ch[508] = 1;
			ch[1538] = 1;
			ch[512] = 1;
			ch[1755] = 3;
			ch[1754] = 1;
			ch[2527] = 1;
			movi = PlayMovie("EP_5.txt",1);
			break;
		}
		if (!movi)
		{
			// 終了
			break;
		}
	}
	KaguTest(20073,0);
	Mouse(1);
	KaguTest(20066,0);

	KaguTest(70005,1);
	KaguTest(100000,0);
	
//	if (c == 43)
//	{
//		// 戦え
//		CharPos(59,0,0,0);
//	}
//	else
	{
		CharPos(0,x,y,z);
		LoadMap(b);
	}
	Black(0,0,30);
	MapEvent(1);
	return 0;
}
#EndScript

// 土全堀
//#Script:00698
//int main()
//{
//	CharPos(0,0,0,-500);
//	KaguTest(20004,0);
//	White(0,100,30);
//	Wait(30);
//	LoadMap(401);
//	Wait(30);
//	KaguTest(20004,0);
//	LoadMap(401);
//	CharPos(0,0,0,500);
//	White(0,0,30);
//}
//#EndScript

// 家具所持チェック＆販売家具変更チェック
#Script:00697
int main()
{
	// 家具変更時期
	// フラグ１６００に状態保存
	//  1 ボス１撃破
	//  2 モグレヌ破壊（高級家具ゲットチャンス）
	//  3 ボス２撃破
	//  4 モグ兄弟撃破
	//  5 偽パリン撃破
	int c[30];
	int d;
	int e;
	int kingyo;
	
	// 家具チェック
	KaguTest(20005,0);
	
//	ch[1700] = 0;
//	ch[1701] = 0;
//	ch[1702] = 0;
//	ch[1703] = 0;
//	ch[1704] = 0;
//	ch[1705] = 0;
//	ch[1706] = 0;
//	ch[1707] = 0;
//	ch[1708] = 0;
//	ch[1709] = 0;
	// 状態チェック
	if (ch[1600]==0 || (ch[1600]==5 && !ch[1513]))
	{
		ch[1600]=6;
		// 家具変更（初期化）
		c[0] = 0; //50:石像
		c[1] = 0; //51:秘伝の書   
		c[2] = 52; //52:柱
		c[3] = 53; //53:立て札     
		c[4] = 54; //54:ポスト
		c[5] = 55; //55:くずかご   
		c[6] = 56; //56:ポール     
		c[7] = 0; //57:鉢植え
		c[8] = 58; //58:ちゃぶ台   
		c[9] = 0; //59:こたつ     
		c[10] = 60; //60:テーブル   
		c[11] = 61; //61:木の椅子
		c[12] =	0; //62:肘掛椅子
		c[13] = 0; //63:ソファー
		c[14] = 0; //64:桐の箪笥
		c[15] = 65; //65:洋服箪笥
		c[16] = 0; //66:高級本棚
		c[17] = 67; //67:傘たて
		c[18] = 0; //68:下駄箱
		c[19] = 69; //69:帽子掛け
		c[20] = 70; //70:あひる
		c[21] = 0; //71:車の模型
		c[22] = 0; //72:くまさん
		c[23] = 0; //73:蓄音機
		c[24] = 0; //74:ラジカセ
		c[25] = 0; //75:コンポ
		c[26] = 76; //76:ゴミ袋
		c[27] = 0; //77:ベッド
		c[28] = 0; //78:金魚鉢
		c[29] = 0; //79:金魚鉢☆
		
		e = 0;
//		while(1)
		{
			d = rand() % 30;
			if (c[d])
			{
				ch[1700 + e] = c[d];
				c[d] = 0;
				e++;
				if (e == 10) break;
			}
		}
	}
	if (ch[1600]!=1 && ch[507] && !ch[1502])
	{
		ch[1600]=1;
		// 家具変更
		c[0] = 0; //50:石像
		c[1] = 0; //51:秘伝の書   
		c[2] = 0; //52:柱
		c[3] = 0; //53:立て札     
		c[4] = 54; //54:ポスト
		c[5] = 0; //55:くずかご   
		c[6] = 56; //56:ポール     
		c[7] = 57; //57:鉢植え
		c[8] = 0; //58:ちゃぶ台   
		c[9] = 59; //59:こたつ     
		c[10] = 60; //60:テーブル   
		c[11] = 61; //61:木の椅子
		c[12] =	62; //62:肘掛椅子
		c[13] = 63; //63:ソファー
		c[14] = 64; //64:桐の箪笥
		c[15] = 65; //65:洋服箪笥
		c[16] = 66; //66:高級本棚
		c[17] = 0; //67:傘たて
		c[18] = 68; //68:下駄箱
		c[19] = 69; //69:帽子掛け
		c[20] = 70; //70:あひる
		c[21] = 0; //71:車の模型
		c[22] = 72; //72:くまさん
		c[23] = 73; //73:蓄音機
		c[24] = 0; //74:ラジカセ
		c[25] = 0; //75:コンポ
		c[26] = 76; //76:ゴミ袋
		c[27] = 77; //77:ベッド
		c[28] = 0; //78:金魚鉢
		c[29] = 0; //79:金魚鉢☆

		e = 0;
//		while(1)
		{
			d = rand() % 30;
			if (c[d])
			{
				ch[1700 + e] = c[d];
				c[d] = 0;
				e++;
				if (e == 10) break;
			}
		}
	}
	if (ch[1600]!=2 && ch[1502] && !ch[1505])
	{
		ch[1600]=2;
		// 家具変更
		c[0] = 0; //50:石像
		c[1] = 0; //51:秘伝の書   
		c[2] = 52; //52:柱
		c[3] = 53; //53:立て札     
		c[4] = 54; //54:ポスト
		c[5] = 0; //55:くずかご   
		c[6] = 56; //56:ポール     
		c[7] = 0; //57:鉢植え
		c[8] = 58; //58:ちゃぶ台   
		c[9] = 59; //59:こたつ     
		c[10] = 60; //60:テーブル   
		c[11] = 0; //61:木の椅子
		c[12] =	0; //62:肘掛椅子
		c[13] = 0; //63:ソファー
		c[14] = 64; //64:桐の箪笥
		c[15] = 0; //65:洋服箪笥
		c[16] = 0; //66:高級本棚
		c[17] = 67; //67:傘たて
		c[18] = 68; //68:下駄箱
		c[19] = 0; //69:帽子掛け
		c[20] = 70; //70:あひる
		c[21] = 0; //71:車の模型
		c[22] = 72; //72:くまさん
		c[23] = 0; //73:蓄音機
		c[24] = 0; //74:ラジカセ
		c[25] = 0; //75:コンポ
		c[26] = 76; //76:ゴミ袋
		c[27] = 0; //77:ベッド
		c[28] = 0; //78:金魚鉢
		c[29] = 0; //79:金魚鉢☆

		e = 0;
//		while(1)
		{
			d = rand() % 30;
			if (c[d])
			{
				ch[1700 + e] = c[d];
				c[d] = 0;
				e++;
				if (e == 10) break;
			}
		}
	}
	if (ch[1600]!=3 && ch[1505] && !ch[1510])
	{
		ch[1600]=3;
		// 家具変更
		c[0] = 0; //50:石像
		c[1] = 0; //51:秘伝の書   
		c[2] = 0; //52:柱
		c[3] = 0; //53:立て札     
		c[4] = 54; //54:ポスト
		c[5] = 55; //55:くずかご   
		c[6] = 0; //56:ポール     
		c[7] = 57; //57:鉢植え
		c[8] = 58; //58:ちゃぶ台   
		c[9] = 0; //59:こたつ     
		c[10] = 60; //60:テーブル   
		c[11] = 61; //61:木の椅子
		c[12] =	62; //62:肘掛椅子
		c[13] = 0; //63:ソファー
		c[14] = 0; //64:桐の箪笥
		c[15] = 65; //65:洋服箪笥
		c[16] = 0; //66:高級本棚
		c[17] = 67; //67:傘たて
		c[18] = 68; //68:下駄箱
		c[19] = 69; //69:帽子掛け
		c[20] = 0; //70:あひる
		c[21] = 71; //71:車の模型
		c[22] = 0; //72:くまさん
		c[23] = 0; //73:蓄音機
		c[24] = 0; //74:ラジカセ
		c[25] = 0; //75:コンポ
		c[26] = 76; //76:ゴミ袋
		c[27] = 0; //77:ベッド
		c[28] = 78; //78:金魚鉢（金魚なし）
		c[29] = 0; //79:金魚鉢☆（金魚あり）
		
		e = 0;
//		while(1)
		{
			d = rand() % 30;
			if (c[d])
			{
				ch[1700 + e] = c[d];
				c[d] = 0;
				e++;
				if (e == 10) break;
			}
		}
	}
	if (ch[1600]!=4 && ch[1510] && !ch[1513])
	{
		ch[1600]=4;
		// 家具変更
		c[0] = 0; //50:石像
		c[1] = 0; //51:秘伝の書   
		c[2] = 52; //52:柱
		c[3] = 53; //53:立て札     
		c[4] = 0; //54:ポスト
		c[5] = 0; //55:くずかご   
		c[6] = 56; //56:ポール     
		c[7] = 0; //57:鉢植え
		c[8] = 0; //58:ちゃぶ台   
		c[9] = 59; //59:こたつ     
		c[10] = 0; //60:テーブル   
		c[11] = 0; //61:木の椅子
		c[12] =	0; //62:肘掛椅子
		c[13] = 63; //63:ソファー
		c[14] = 64; //64:桐の箪笥
		c[15] = 0; //65:洋服箪笥
		c[16] = 66; //66:高級本棚
		c[17] = 67; //67:傘たて
		c[18] = 0; //68:下駄箱
		c[19] = 69; //69:帽子掛け
		c[20] = 70; //70:あひる
		c[21] = 71; //71:車の模型
		c[22] = 72; //72:くまさん
		c[23] = 73; //73:蓄音機
		c[24] = 0; //74:ラジカセ
		c[25] = 0; //75:コンポ
		c[26] = 76; //76:ゴミ袋
		c[27] = 0; //77:ベッド
		c[28] = 0; //78:金魚鉢（金魚なし）
		c[29] = 0; //79:金魚鉢☆（金魚あり）
		
		e = 0;
//		while(1)
		{
			d = rand() % 30;
			if (c[d])
			{
				ch[1700 + e] = c[d];
				c[d] = 0;
				e++;
				if (e == 10) break;
			}
		}
	}
	if (ch[1600]!=5 && ch[1513])
	{
		ch[1600]=5;
		// 家具変更
		c[0] = 0; //50:石像
		c[1] = 0; //51:秘伝の書   
		c[2] = 52; //52:柱
		c[3] = 53; //53:立て札     
		c[4] = 54; //54:ポスト
		c[5] = 55; //55:くずかご   
		c[6] = 56; //56:ポール     
		c[7] = 57; //57:鉢植え
		c[8] = 58; //58:ちゃぶ台   
		c[9] = 59; //59:こたつ     
		c[10] = 60; //60:テーブル   
		c[11] = 61; //61:木の椅子
		c[12] =	62; //62:肘掛椅子
		c[13] = 63; //63:ソファー
		c[14] = 64; //64:桐の箪笥
		c[15] = 65; //65:洋服箪笥
		c[16] = 66; //66:高級本棚
		c[17] = 67; //67:傘たて
		c[18] = 68; //68:下駄箱
		c[19] = 69; //69:帽子掛け
		c[20] = 70; //70:あひる
		c[21] = 71; //71:車の模型
		c[22] = 72; //72:くまさん
		c[23] = 73; //73:蓄音機
		c[24] = 0; //74:ラジカセ
		c[25] = 0; //75:コンポ
		c[26] = 76; //76:ゴミ袋
		c[27] = 0; //77:ベッド
		c[28] = 0; //78:金魚鉢（金魚なし）
		c[29] = 0; //79:金魚鉢☆（金魚あり）
		
		e = 0;
//		while(1)
		{
			d = rand() % 30;
			if (c[d])
			{
				ch[1700 + e] = c[d];
				c[d] = 0;
				e++;
				if (e == 10) break;
			}
		}
	}

	if (ch[1756])
	{
		for (d = 0;d < 10;d++)
		{
			if (ch[1700 + d] == 78)
			{
				ch[1700 + d] = 0;
			}
		}
	}
}
#EndScript

/////////////////////////////////////////////////////////////////
// 強制カメラ用追加スクリプト

// 301:中央レバーオン
#Script:00700
int main()
{
	SaveCamera();
	TekiStop(1);
	Camera(Door2C(4) , -150 , -500 , 400 );
	CrossFade();
	Wait(20);

	Event(115);

	Wait(30);
	Camera(Door2C(3) , -150 , -500 , 400 );
	CrossFade();
	Wait(20);

	Event(102);

	Wait(30);
	RestoreCamera();
	Camera(-1,0,0,0);
	CrossFade();
	Wait(20);
	TekiStop(0);
		
	return 0;
}
#EndScript

// 301:中央レバーオフ
#Script:00701
int main()
{
	TekiStop(1);

	SaveCamera();
	Camera(Door2C(3) , -150 , -500 , 400 );
	CrossFade();
	Wait(20);

	Event(101);

	Wait(30);
	Camera(Door2C(4) , -150 , -500 , 400 );
	CrossFade();
	Wait(20);

	Event(114);

	Wait(30);
	RestoreCamera();
	Camera(-1,0,0,0);
	CrossFade();
	Wait(20);
	
	TekiStop(0);

	return 0;
}
#EndScript

// 301:左レバー
#Script:00702
int main()
{
	int x;
	int y;
	int z;
	int bt15;
	int ln;
	
	ln = Lift2C(60);
	
	GetCharPos(0,x,y,z);
	bt15 = Getbt15(ln);

	if (!bt15)
	{

		TekiStop(1);
		Wait(5);
		Lock();
		SaveCamera();
		Camera(ln , x - 700 , y - 400 , z + 550 );
		CrossFade();
		Unlock();
		Wait(20);

		Event(103);

		Wait(60);
		Lock();
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Unlock();
		Wait(20);
		
		TekiStop(0);
//	else
//	{
//		Event(103);
//	}

	}
	return 0;
}
#EndScript

// 301:右レバー
#Script:00703
int main()
{
	int x;
	int y;
	int z;
	int bt15;
	int ln;
	
	ln = Lift2C(61);
	
	GetCharPos(0,x,y,z);
	bt15 = Getbt15(ln);

	if (!bt15)
	{

		TekiStop(1);
		
		Wait(5);
		Lock();
		SaveCamera();
		Camera(ln , x + 700 , y - 400 , z + 550 );
		CrossFade();
		Unlock();
		Wait(20);

		Event(104);

		Wait(60);
		Lock();
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Unlock();
		Wait(20);

		TekiStop(0);
				
//	else
//	{
//		Event(104);
//	}
	return 0;

	}
}
#EndScript

// 301:火を消すと扉が開く
#Script:00704
int main()
{
	ch[3605] = 1;
	Wait(15);
	SE(950);
	Camera(Door2C(15),-150,-2730,490);
	CrossFade();
	Wait(20);
	Event(301);
	Wait(35);
	Camera(-1,0,0,0);
	CrossFade();
	Wait(15);
}
#EndScript

// 302:レバー引くとリフト動く
#Script:00705
int main()
{
	if (!Getbt15(Lift2C(7)))
	{
		SaveCamera();
		TekiStop(1);
		Wait(15);
		Camera(Lift2C(7),250,-935,400);
		CrossFade();
		Wait(20);
		Event(112);
		Wait(60);
		Camera(-1,0,0,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		TekiStop(0);
	}
}
#EndScript

// 302:２つ目柵明けスイッチ
#Script:00706
int main()
{
	Wait(5);

	SE(950);
	
	Lock();
		SaveCamera();
	Camera(0,975,-525,450);
	CrossFade();
	Unlock();
	Wait(20);

	Event(102);

	Wait(30);
	Lock();
		RestoreCamera();
	Camera(-1,0,0,0);
	CrossFade();
	Unlock();
	Wait(15);

	return 0;
}
#EndScript

// 304:敵倒したらリフト動く＆爆弾投げ軍団参上
#Script:00707
int main()
{
	Wait(15);
	TekiStop(1);
	SE(950);
	
	SaveCamera();
	ch[420] = 950;
	ch[421] = 1680;
	ch[422] = 801;
	ch[423] = 1641;
	ch[424] = 448;
	ch[425] = 320;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);

	// 爆弾野郎沸く
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,2);
	Wait(60);
	
	// リフトも動く
	SE(891);
	ch[361] = 1;
	Wait(30);

	RestoreCamera();
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 309:火飾台ヒント立て札
#Script:00708
int main()
{
	Message(0,"何か書いてある","","","");
	Message(0,"「熱い物は冷やさなければならない","s180怪盗Ｍ」","","");
}
#EndScript

//////////////////////////////////////////////////////////////////////////////////////////////////////
// プチ薬草クッキー
#Script:00750
int main()
{
	//薬草、ケアルの使用
	Recover(0,15,1.0,0.0,10.0);

	return 0;
}
#EndScript

//////////////////////////////////////////////////////////////////////////////////////////////////////
// 凄い薬草ケーキ
#Script:00751
int main()
{
	//薬草、ケアルの使用
	Recover(0,100,1.0,0.0,10.0);

	return 0;
}
#EndScript
//////////////////////////////////////////////////////////////////////////////////////////////////////
// 草チョコ
#Script:00752
int main()
{
	//薬草、ケアルの使用
	Recover(0,50,1.0,0.0,10.0);

	return 0;
}
#EndScript

// 0103:MP取得確認
#Script:00800
int main()
{
	ch[2219] = 1;
}
#EndScript

// 0202:ハート取得確認
#Script:00801
int main()
{
}
#EndScript

// 0202:安全帽取得確認
#Script:00802
int main()
{
}
#EndScript

// 0211:サンダイザーで扉開く
#Script:00803
int main()
{
	if (ch[301] && ch[302])
	{
		ch[300] = 1;
		Wait(15);
		SE(950);

		ch[420] = -21;
		ch[421] = -451;
		ch[422] = 370;
		ch[423] = -7;
		ch[424] = 598;
		ch[425] = 70;
		KaguTest(30019,1);
		CrossFade();
		Wait(25);
		Event(305);
		Wait(40);
		KaguTest(30019,0);
		CrossFade();
		ch[2067] = 1;
	}
}
#EndScript

// 211:モトロ落とした看板
#Script:00804
int main()
{
	Message(0,"何か書いてある","","","");
	Message(0,"「洞窟は落雷が無くて安心だ","s140怪盗Ｍ」","","");
	Message(0,"何が言いたいのかしら","","","");
}
#EndScript

// プレート間ワープ
#Script:00805
int main()
{
	int a;
	int b;
	b = 0;
	int x,y,z;
	int x2,y2,z2;
	int bb;
	bb = 0;

//	KaguTest(40002,0);

	MapEvent(0);

//	KaguTest(20010,0);
//
//	ch[2497] = 1;
//
	TekiStop(1);

	ch[420] = 0;
	KaguTest(30004,0);
	KaguTest(30005,0);
	x2 = ch[421];
	y2 = ch[422];
	z2 = ch[423];
	GetCharPos(0,x,y,z);
	x2 = x2 - x;
	y2 = y2 - y;
	z2 = z2 - z;

	Camera(0,x2 + x,y2 + y,z2 + z);
	ch[420] = x;
	ch[421] = y;
	ch[422] = z;
	KaguTest2(30026,1,"O_040");
	if (ch[420])
	{
		bb = 1;
	}
	else
	{
		bb = 0;
	}

	if (bb)
	{
		KaguTest2(30009,1404,"O_040");
	}
	else
	{
		KaguTest2(30009,1414,"O_040b");
	}
	SE(954);

	KaguTest(30003,1);
	Wait(15);
	Blur(2,250,45);
	Wait(15);
	Black(0,100,30);
	Wait(30);
	KaguTest(30003,0);
	
	// ワープ
	if (bb)
	{
		KaguTest2(30026,0,"O_040b");
	}
	else
	{
		KaguTest2(30026,0,"O_040");
	}	
	CharPos(0,ch[420],ch[421],ch[422] - 150);

	ch[420] = 0;
	KaguTest(30004,0);

	GetCharPos(0,x,y,z);
	Camera(0,x2+x,y2+y,z2+z+150);
	ch[421] = x2+x;
	ch[422] = y2+y;
	ch[423] = z2+z+150;
	KaguTest(30010,0);
	
	Black(0,0,30);
	Blur(2,0,45);

	if (bb)
	{
		KaguTest2(30009,1408,"O_040b");
	}
	else
	{
		KaguTest2(30009,1408,"O_040");
	}
	Wait(15);
	b = 54;
	Walk(0,-1,2);

	SE(954);
	
	Wait(15);
	
	SE(860);
	for(a = 0;a < 5;a++)
	{
		b -= 3;
		
		GetCharPos(0,x,y,z);
		
		CharPos(0,x,y,z + b);
		Wait(1);
	}
	ch[420] = 0;
	KaguTest(30004,1);

	Walk(0,-8,15);
	KaguTest(30008,20);
	Wait(15);

	TekiStop(0);
	
	Camera(-1,0,0,0);
	
	MapEvent(1);

}
#EndScript

// 103 鍵がかかっている
#Script:00806
int main()
{
	TekiStop(1);
	
	Message(0,"鍵がかかってるわ","","","");

	KaguTest(20001,38);
	if (ch[430])
	{
		SelStart(50);
		SelText("鍵を使う",1);
		SelText("鍵を使わない",2);
		SelEnd();
		
		if (ch[50]==1)
		{
		
			// DAO撤去
			KaguTest(30001,Door2C(10301));
			// 鍵１個消費
			ch[420] = 1;
			KaguTest(20006,38);
//			ch[3998]--;
			// ドアを開ける
			Event(499);
			
			Mes("鍵を使った。");
			
		}
		
	}
	
	TekiStop(0);
}
#EndScript

// 鍵使った
#Script:00807
int main()
{
//	Mes("ここでは使えない。");
}
#EndScript


// 104 鍵がかかっている1
#Script:00808
int main()
{
	TekiStop(1);

	Message(0,"鍵がかかってるわ","","","");

	KaguTest(20001,38);
	if (ch[430])
	{
		SelStart(50);
		SelText("鍵を使う",1);
		SelText("鍵を使わない",2);
		SelEnd();
		
		if (ch[50]==1)
		{
		
			// DAO撤去
			KaguTest(30001,Door2C(10401));
			// 鍵１個消費
			ch[420] = 1;
			KaguTest(20006,38);
//			ch[3998]--;
			// ドアを開ける
			Event(498);
			
			Mes("鍵を使った。");
		}
		
	}
	
	TekiStop(0);
}
#EndScript

// 104 鍵がかかっている1
#Script:00809
int main()
{
	TekiStop(1);
	
	Message(0,"鍵がかかってるわ","","","");

	KaguTest(20001,38);
	if (ch[430])
	{
		SelStart(50);
		SelText("鍵を使う",1);
		SelText("鍵を使わない",2);
		SelEnd();
		
		if (ch[50]==1)
		{
		
			// DAO撤去
			KaguTest(30001,Door2C(10402));
			// 鍵１個消費
			ch[420] = 1;
			KaguTest(20006,38);
//			ch[3998]--;
			// ドアを開ける
			Event(499);
			
			Mes("鍵を使った。");
		}
		
	}
	
	TekiStop(0);
}
#EndScript

// 202 鍵がかかっている
#Script:00810
int main()
{
	TekiStop(1);
	
	Message(0,"鍵がかかってるわ","","","");

	KaguTest(20001,38);
	if (ch[430])
	{
		SelStart(50);
		SelText("鍵を使う",1);
		SelText("鍵を使わない",2);
		SelEnd();
		
		if (ch[50]==1)
		{
		
			// DAO撤去
			KaguTest(30001,Door2C(20201));
			// 鍵１個消費
			ch[420] = 1;
			KaguTest(20006,38);
//			ch[3998]--;
			// ドアを開ける
			Event(499);
			
			Mes("鍵を使った。");
		}
		
	}
	
	TekiStop(0);
}
#EndScript

// 203 鍵がかかっている
#Script:00811
int main()
{
	TekiStop(1);
	
	Message(0,"鍵がかかってるわ","","","");

	KaguTest(20001,38);
	if (ch[430])
	{
		SelStart(50);
		SelText("鍵を使う",1);
		SelText("鍵を使わない",2);
		SelEnd();
		
		if (ch[50]==1)
		{
		
			// DAO撤去
			KaguTest(30001,Door2C(20301));
			// 鍵１個消費
			ch[420] = 1;
			KaguTest(20006,38);
//			ch[3998]--;
			// ドアを開ける
			Event(499);
			
			Mes("鍵を使った。");
		}
		
	}
	
	TekiStop(0);
}
#EndScript


// 601:騎乗スライム出てくる
#Script:00812
int main()
{
	SaveCamera();
	ch[420] = 5170;
	ch[421] = 3616;
	ch[422] = 110;
	ch[423] = 6898;
	ch[424] = 3184;
	ch[425] = -29;
	KaguTest(30019,1);
	CrossFade();
	
	Wait(15);
	// 落下中かチェック
	int x;
	int y;
	int z;
	GetCharPos(0,x,y,z);
	if (z < 100)
	{
		// 場所移動
		CharPos(0,5000,3600,0);
	}
	Wait(15);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,2);
	Wait(20);
	KaguTest(30015,3);
	Wait(50);
	KaguTest(30025,2);
	Look(0,ch[420]);

	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	KaguTest(30025,2);
	ch[420] = ch[420] + 1;
	ch[421] = 4;
	KaguTest(20044,1);
	ch[420] = ch[420] + 2;
	KaguTest(20044,1);
	
}
#EndScript

// 602:あたりに触れると羽スライムが飛ぶ訓練している様子を見る
#Script:00813
int main()
{
	SaveCamera();
	ch[420] = 9997;
	KaguTest2(30003,2,"tekiatari3");

	ch[420] = 1217;
	ch[421] = 7230;
	ch[422] = 767;
	ch[423] = 2595;
	ch[424] = 8718;
	ch[425] = -229;
	KaguTest(30093,30);
	KaguTest(30019,14);
	
	int c;
	int pt1;
	int pt2;
	int pt3;
	int pt4;
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	KaguTest(30015,3);
	KaguTest(30025,3);
	c = ch[420];
	ch[420] = -1;
	KaguTest(30051,c-4);
	KaguTest(30051,c-3);
	KaguTest(30051,c-2);
	KaguTest(30051,c-1);
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	KaguTest(30051,c+2);
	KaguTest(30051,c+3);
	
	KaguTest(30078,c-2);
	
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12004,c+3);
	pt4 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	KaguTest(12000,c+2);
	KaguTest(12000,c+3);

	Wait(15);
	// 落下中かチェック
	int x;
	int y;
	int z;
	GetCharPos(0,x,y,z);
	if (z < 290)
	{
		// 場所移動
		CharPos(0,1825,7250,300);
		Look(0,c);
	}
	Wait(15);
	
	// 敵上から落ちてくる
	KaguTest(30077,c-2);

	// 適当にエモ
	ch[420] = 7;
	ch[429] = 1;
	KaguTest(30036,c-4);

	Wait(40);
	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,c-2);
	Wait(30);

	ch[420] = 1715;
	ch[421] = 7557;
	ch[422] = 1307;
	ch[423] = 3274;
	ch[424] = 8609;
	ch[425] = 769;
	KaguTest(30093,30);
	Wait(30);
	
	//敵の飛ぶ練習見る
	Walk2(c+1,-8,0,60);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(c+2,-8,0,20);
	KaguTest(30039,0);
	Walk2(c+3,-8,0,20);
	KaguTest(30039,0);
	ch[420] = c+1;
	KaguTest(30063,c);	// 注視
	Wait(15);
	ch[421] = 40;
	ch[422] = 1;
	KaguTest(30037,c+1);
	ch[420] = 4;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c+1);
	Wait(30);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c+1);
	
	// 隊長はもやもや
	ch[420] = 4;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(45);
	
	// 次の奴は少し飛ぶ
	Walk2(c+2,-8,0,90);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(c+3,-8,0,20);
	KaguTest(30039,0);
	ch[420] = c+2;
	KaguTest(30063,c);	// 注視
	Wait(15);
	ch[421] = 40;
	ch[422] = 1;
	KaguTest(30037,c+2);
	ch[420] = 4;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c+2);
	Wait(15);
		// 浮遊
	ch[420] = 0;
	KaguTest(30041,c+2);
	Wait(30);
		// 落下
	ch[420] = 1;
	KaguTest(30041,c+2);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c+2);
		// 隊長はよろこぶ
	ch[420] = 7;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(45);
	Black(0,100,15);
	Wait(15);
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	Black(0,0,15);
	Wait(15);

//	// 最後の奴は飛ばない
//	Walk2(c+3,-8,0,60);
//	ch[429] = 0;
//	KaguTest(30039,0);
//	ch[420] = c+3;
//	KaguTest(30063,c);	// 注視
//	Wait(20);
//	
//	// 隊長はおこる
//	ch[420] = 9;
//	ch[429] = 1;
//	KaguTest(30036,c);
//	Wait(15);
//	Walk2(c,-12,0,90);
//	KaguTest(30039,0);
//	Wait(5);
//	ch[421] = 40;
//	ch[422] = 1;
//	KaguTest(30037,c);
//	ch[420] = 4;
//	ch[421] = 1;
//	ch[422] = 5;
//	KaguTest(12003,c);
//	Wait(15);
//		// 浮遊
//	ch[420] = 0;
//	KaguTest(30041,c);
//	Wait(10);
//		// 落下
//	ch[420] = 1;
//	KaguTest(30041,c);
//	ch[420] = 2;
//	ch[421] = 1;
//	ch[422] = 5;
//	KaguTest(12003,c);
//	Wait(30);

	KaguTest(30063,-1);	// 注視解除
	
//	//カメラを戻す
//	KaguTest(30019,0);
//	RestoreCamera();
//	CrossFade();
//	Wait(15);

	//敵を落下する位置へ
	CharPos(c+3,2750,8775,450);
	CharPos(c,2750,8975,450);
	
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = pt3;
	KaguTest(12002,c+2);
	ch[420] = pt4;
	KaguTest(12002,c+3);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	KaguTest(12005,c+3);
	
	ch[420] = 0;
	KaguTest(30051,c-4);
	KaguTest(30051,c-3);
	KaguTest(30051,c-2);
	KaguTest(30051,c-1);
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	KaguTest(30051,c+2);
	KaguTest(30051,c+3);
}
#EndScript


// 303:亀についてユーザーにわからせる
#Script:00815
int main()
{
	int x;
	int y;
	int z;
	
	int teki;

	TekiStop(1);

	GetCharPos(Door2C(52),x,y,z);
	SaveCamera();
	
	KaguTest(30025,50);
	teki = ch[420];

	CharPos(teki-1,-200000,0,0);
	CharPos(teki,1275,-150,0);
	CharPos(teki+1,1275,0,0);
	CharPos(teki+2,1425,0,0);
	CharPos(teki+3,1300,-500,0);
	CharPos(teki+4,1200,-500,0);
	CharPos(teki+5,1250,-325,0);
	CharPos(teki+6,850,-150,0);
	
	KaguTest(30038,teki);
	KaguTest(30038,teki+1);
	KaguTest(30038,teki+2);
	KaguTest(30038,teki+3);
	KaguTest(30038,teki+4);
	KaguTest(30038,teki+5);

	KaguTest(12000,teki);
	KaguTest(12000,teki+1);
	KaguTest(12000,teki+2);
	KaguTest(12000,teki+3);
	KaguTest(12000,teki+4);
	KaguTest(12000,teki+5);

	Look(teki,Door2C(52));
	Look(teki+1,teki);
	Look(teki+2,teki+1);
	Look(teki+5,teki+3);
	Look(teki+3,teki+5);
	Look(teki+4,teki+5);

	Camera(Door2C(52),x - 1500,y - 900,z + 450);
	
	Wait(30);	
	
	Mes("ファントム達が石版の向こう側に集まっている。");
	Wait(60);

	SelStart(50);
	SelText("様子をうかがう",1);
	SelText("無視する",2);
	SelEnd();
	
	if (ch[50] != 1)
	{
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		
		Wait(10);
		
		CharPos(teki,-200000,0,0);
		CharPos(teki+1,-200000,0,0);
		CharPos(teki+2,-200000,0,0);
		CharPos(teki+3,-200000,0,0);
		CharPos(teki+4,-200000,0,0);
		CharPos(teki+5,-200000,0,0);
//		CharPos(teki+6,-200000,0,0);
		CharPos(teki+6,1425,-150,0);
		TekiStop(0);
		return 0;
	}

	// 角が「！」スライムがハート
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,teki + 5);
	Wait(45);
	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,teki + 3);
	Wait(5);
	ch[429] = 1;
	KaguTest(30036,teki + 4);
	Wait(60);
	Look(teki+5,teki+4);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,teki + 5);
	Wait(45);
	ch[429] = 1;
	KaguTest(30036,teki + 3);
	KaguTest(30036,teki + 4);
	Wait(45);

	Look(teki + 3,teki);
	Look(teki + 4,teki);
	Look(teki + 5,teki);

	Wait(5);

	// 飛び乗る
	ch[421] = 15;
	Walk2(teki + 5,1,7,25);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[422] = 1;
	KaguTest(30037,teki + 5);
	Wait(10);
	Wait(15);
	Look(teki + 5,Door2C(52));
	Wait(15);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,teki + 5);
	Wait(15);
	Walk2(teki,5,0,570);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(5);
	Walk2(teki+1,0,-5,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(5);
	Walk2(teki+2,-5,0,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(10);
	Walk2(teki + 3,-1,4,40);
	Wait(20);
	Look(teki+1,teki);
	Look(teki+2,teki+1);
	Event(203);
	Wait(20);
	Walk2(teki + 3,-1,3,10);
	Wait(10);
	
	// 次
	Walk2(teki + 3,1,7,25);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[422] = 1;
	KaguTest(30037,teki + 3);
	Wait(10);
	Wait(15);
	Look(teki + 3,Door2C(52));
	Wait(15);
	Walk2(teki+1,5,0,450);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(5);
	Walk2(teki+2,0,-5,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(10);
	Walk2(teki + 4,1,4,40);
	Wait(20);
	Look(teki+2,teki+1);
	Wait(20);
	Walk2(teki + 4,1,3,10);
	Wait(10);

	// 次
	Walk2(teki + 4,1,7,25);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[422] = 1;
	KaguTest(30037,teki + 4);
	Wait(10);
	Wait(15);
	Look(teki + 4,Door2C(52));
	Wait(15);
	Walk2(teki+2,5,0,390);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(45);
	Walk2(teki+6,8,0,90);
	Look(teki+6,teki+3);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);
	ch[420] = 2011;
	ch[429] = 1;
	KaguTest(30036,teki + 6);
	Wait(40);
	Event(204);
	Wait(75);

	KaguTest(30038,0);

	RestoreCamera();
	Camera(-1,0,0,0);
	CrossFade();
	
	Wait(10);
	
	KaguTest(30054,0);
	CharPos(teki,-200000,0,0);
	CharPos(teki+1,-200000,0,0);
	CharPos(teki+2,-200000,0,0);
	CharPos(teki+3,-200000,0,0);
	CharPos(teki+4,-200000,0,0);
	CharPos(teki+5,-200000,0,0);
//	CharPos(teki+6,-200000,0,0);
	CharPos(teki+6,1425,-150,0);
	ch[420] = 3;
	KaguTest(12005,teki+6);
	
	Message(0,"何か仕掛けがあるみたいね","","","");
	
	TekiStop(0);

}
#EndScript

// 304:左スイッチ
#Script:00820
int main()
{
	int b;
	b = Door2C(1);
	
	KaguTest(30002,b);
	KaguTest(30002,b + 1);
	
	PostScr(823);
}
#EndScript

// 304:中央スイッチ
#Script:00821
int main()
{
	int b;
	b = Door2C(2);
	
	KaguTest(30002,b - 1);
	KaguTest(30002,b);
	KaguTest(30002,b + 1);

	PostScr(823);
}
#EndScript

// 304:右スイッチ
#Script:00822
int main()
{
	int b;
	b = Door2C(3);
	
	KaguTest(30002,b - 1);
	KaguTest(30002,b);

	PostScr(823);
}
#EndScript

// 304:スイッチ軍団確認１
#Script:00823
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	ln = Door2C(4);
	
	GetCharPos(ln,x,y,z);

	if (ch[201] == ch[202] && ch[201] == ch[203] && ch[263] == 0)
	{
		// 柵あける
		SaveCamera();
		TekiStop(1);
		
		Wait(10);
		
		SE(950);
		
		Black(0,100,10);
		Wait(8);
		
		Camera(ln , x, y + 1400, z + 350);
		CrossFade();
		Wait(15);
		Black(0,0,10);
		Wait(10);

		Event(104);

		Wait(45);
		RestoreCamera();
		Camera(-1,0,0,0);
		CrossFade();
		Wait(20);
		TekiStop(0);
		
		ch[263] = 1;
	}
}
#EndScript

// 204裏：鍵取った
#Script:00829
int main()
{
//	KaguTest(20002,38);
	
//	ch[3998]++;
	
//	ch[2248] = 1;
}
#EndScript

// 203裏：レバー恩
#Script:00830
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	ch[201] = 1;
	ln = Lift2C(1);
	
	GetCharPos(ln,x,y,z);

	Wait(5);
	Lock();
	SaveCamera();
	Camera(ln , x + 1400 , y - 200 , z + 500 );
	CrossFade();
	Unlock();
	Black(0,100,10);
	Wait(15);
	Black(0,0,10);
	Wait(10);

	Wait(30);
	SE(891);
	LiftEnable(1);

	Wait(40);
	Lock();
	RestoreCamera();
	Camera(-1,0,0,0);
	CrossFade();
	Unlock();
	Wait(20);

}
#EndScript

// 301裏：１番スイッチ
#Script:00831
int main()
{
	int b;
	b = Door2C(50);
	
	KaguTest(30002,b);
	KaguTest(30002,b + 1);
	KaguTest(30002,b + 5);
	
	PostScr(844);
}
#EndScript

// 301裏：2番スイッチ
#Script:00832
int main()
{
	int b;
	b = Door2C(51);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 1);
	
	PostScr(844);
}
#EndScript

// 301裏：3番スイッチ
#Script:00833
int main()
{
	int b;
	b = Door2C(52);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 1);
	KaguTest(30002,b + 4);
	
	PostScr(844);
}
#EndScript

// 301裏：4番スイッチ
#Script:00834
int main()
{
	int b;
	b = Door2C(53);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 1);
	
	PostScr(844);
}
#EndScript

// 301裏：5番スイッチ
#Script:00835
int main()
{
	int b;
	b = Door2C(54);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 3);
	
	PostScr(844);
}
#EndScript

// 301裏：6番スイッチ
#Script:00836
int main()
{
	int b;
	b = Door2C(55);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 5);
	KaguTest(30002,b + 3);
	
	PostScr(844);
}
#EndScript

// 301裏：7番スイッチ
#Script:00837
int main()
{
	int b;
	b = Door2C(56);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 4);
	KaguTest(30002,b + 4);
	
	PostScr(844);
}
#EndScript

// 301裏：8番スイッチ
#Script:00838
int main()
{
	int b;
	b = Door2C(57);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 3);
	KaguTest(30002,b + 5);
	
	PostScr(844);
}
#EndScript

// 301裏：9番スイッチ
#Script:00839
int main()
{
	int b;
	b = Door2C(58);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 3);
	KaguTest(30002,b + 1);
	
	PostScr(844);
}
#EndScript

// 301裏：10番スイッチ
#Script:00840
int main()
{
	int b;
	b = Door2C(59);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 1);
	
	PostScr(844);
}
#EndScript

// 301裏：11番スイッチ
#Script:00841
int main()
{
	int b;
	b = Door2C(60);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 4);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 1);
	
	PostScr(844);
}
#EndScript

// 301裏：12番スイッチ
#Script:00842
int main()
{
	int b;
	b = Door2C(61);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b + 1);
	
	PostScr(844);
}
#EndScript

// 301裏：13番スイッチ
#Script:00843
int main()
{
	int b;
	b = Door2C(62);
	
	KaguTest(30002,b);
	KaguTest(30002,b - 1);
	KaguTest(30002,b - 5);
	
	PostScr(844);
}
#EndScript

// 301裏：スイッチ軍団確認
#Script:00844
int main()
{
	int a;
	int b;

	b = ch[200];
	for (a = 1;a < 13;a++)
	{
		if (ch[200 + a] != b) break;
	}
	if (a < 13 || ch[264])
	{
		return 0;
	}
	
		SaveCamera();
		KaguTest(30005,0);
		
		TekiStop(1);

		Wait(5);
		ch[420] = 150;
		ch[421] = -1530;
		ch[422] = 333;
		ch[423] = 150;
		ch[424] = -3225;
		ch[425] = -7;
		KaguTest(30019,1);
		CrossFade();
		Wait(15);

		int ln;
		if (ch[2819])
		{
			ln = Takara2C(2851);
		}
		else
		{
			ln = Takara2C(2419);
		}
		CharPos(ln,150,-3225,-37);
		SE(566);
		KaguTest(30018,ln);
		Wait(60);

		KaguTest(30019,0);	
		RestoreCamera();
		CrossFade();
		Wait(15);
		
		ch[264] = 1;
		
		TekiStop(0);
}
#EndScript


// 302裏：リフト音レバー
#Script:00846
int main()
{
	int x;
	int y;
	int z;
	int ln;

	if (!ch[100])
	{
		TekiStop(1);
		Wait(30);

		ln = Lift2C(12);
	
//		GetCharPos(ln,x,y,z);

		SaveCamera();
//		KaguTest(30005,0);
//		x = ch[421];
//		y = ch[422];
//		z = ch[423];
//		Camera(ln,x,y,z);
		ch[420] = -706;
		ch[421] = 440;
		ch[422] = 218;
		ch[423] = -85;
		ch[424] = -422;
		ch[425] = -29;
		KaguTest(30093,30);
		KaguTest(30019,14);
		CrossFade();
		SE(950);
		Wait(35);

		ch[423] = 1756;
		ch[424] = 1;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		GetCharPos(Lift2C(12),ch[420],ch[421],ch[422]);
		KaguTest(30045,0);
		KaguTest(30045,10);
		KaguTest(30045,20);
		ch[423] = 1657;
		KaguTest(30045,0);
		SE(933);

		Wait(30);
		SE(891);
		LiftEnable2(Lift2C(12),1);

		Wait(40);
		KaguTest(30019,0);
		RestoreCamera();
//		Camera(-1,0,0,0);
		CrossFade();
		Wait(15);
		
		Mes("リフトが動くようになった。");

		TekiStop(0);
		
		ch[100] = 1;
	}
}
#EndScript

// 302裏：扉開ける
#Script:00847
int main()
{
	TekiStop(1);
	ch[300] = 1;

	SaveCamera();
	Wait(15);
	SE(950);
	ch[420] = 195;
	ch[421] = 1839;
	ch[422] = 845;
	ch[423] = 276;
	ch[424] = 792;
	ch[425] = 545;
	KaguTest(30093,20);
	ch[420] = 276;
	ch[421] = 792;
	ch[422] = 545;
	ch[423] = 276;
	ch[424] = 792;
	ch[425] = 545;
	KaguTest(30094,20);
	KaguTest(30019,15);
	CrossFade();
	Wait(20);
	ch[420] = 213;
	ch[421] = -458;
	ch[422] = 355;
	ch[423] = 425;
	ch[424] = -1994;
	ch[425] = -4;
	KaguTest(30093,30);
	KaguTest(30019,14);
	Wait(40);
	
	Event(108);
	
	Wait(40);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 302裏：リフトオンレバー
#Script:00848
int main()
{
	int x;
	int y;
	int z;
	int ln;

	if (!ch[101])
	{
		TekiStop(1);
		Wait(30);

		ln = Lift2C(14);
	
//		GetCharPos(ln,x,y,z);

		SaveCamera();
		KaguTest(30005,0);
//		x = ch[421];
//		y = ch[422];
//		z = ch[423];
//		Camera(ln,x,y,z);
		ch[420] = -87;
		ch[421] = -688;
		ch[422] = 267;
		ch[423] = -756;
		ch[424] = 139;
		ch[425] = 20;
		KaguTest(30093,30);
		KaguTest(30019,14);
		CrossFade();
		SE(950);
		Wait(35);

		ch[423] = 1756;
		ch[424] = 1;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		GetCharPos(Lift2C(14),ch[420],ch[421],ch[422]);
		KaguTest(30045,0);
		KaguTest(30045,10);
		KaguTest(30045,20);
		ch[423] = 1657;
		KaguTest(30045,0);
		GetCharPos(Lift2C(15),ch[420],ch[421],ch[422]);
		ch[423] = 1756;
		KaguTest(30045,0);
		KaguTest(30045,10);
		KaguTest(30045,20);
		ch[423] = 1657;
		KaguTest(30045,0);
		SE(933);

		Wait(30);
		SE(891);
		LiftEnable2(Lift2C(14),1);
		LiftEnable2(Lift2C(15),1);

		Wait(40);
		KaguTest(30019,0);
		RestoreCamera();
//		Camera(-1,0,0,0);
		CrossFade();
		Wait(15);

		Mes("リフトが動くようになった。");

		TekiStop(0);
		
		ch[101] = 1;
	}
}
#EndScript

// 302裏：リフトオフイベント
#Script:00849
int main()
{
//	if (!ch[2255])
	{
		LiftEnable2(Lift2C(12),0);
	}
//	if (!ch[2257])
	{
		LiftEnable2(Lift2C(14),0);
		LiftEnable2(Lift2C(15),0);
	}

//	KaguTest(20031,0);
//	ch[420] = 2;
//	KaguTest(20045,ch[421]);
//	KaguTest(20045,ch[421]+2);
	
	PostScr(996);
}
#EndScript

// 203裏：リフト無理
#Script:00854
int main()
{
	LiftEnable(0);
}
#EndScript

// 004 -> 013
// 005 -> 013
// 家具屋・道具屋から町へ
#Script:00855
int main()
{
	MapEvent(0);
//	Walk(0,-8,11);
//	Wait(11);
	Black(0,100,15);
	Wait(15);
	ch[3997] = 1;
	Event(2);
	Event(1001);
	Wait(5);
	Black(0,0,15);
//	Scop(0);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 013 -> 004
// 町から家具屋へ
#Script:00856
int main()
{
	MapEvent(0);
	Black(0,100,11);
	Walk(0,8,11);
	Wait(11);
	Event(6);
	Wait(5);
	Black(0,0,15);
//	Scop(0);
	// ポコがいたら処理する
	KaguTest(30020,16);
	if (ch[420] > -20000)
	{
		ch[420] = -337;
		ch[421] = -226;
		KaguTest(30070,16);
		ch[420] = -1;
		KaguTest(30021,-1);
	}
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
	KaguTest(30020,16);
	if (ch[420] > -20000)
	{
		ch[420] = -337;
		ch[421] = -226;
		KaguTest(30070,16);
		ch[420] = -1;
		KaguTest(30021,-1);
	}
}
#EndScript

// 013 -> 005
// 町から道具屋へ
#Script:00857
int main()
{
	MapEvent(0);
	Black(0,100,11);
	Walk(0,8,11);
	Wait(11);
	Event(7);
	Wait(5);
	Black(0,0,15);
//	Scop(0);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 012:階段跳ね返り
#Script:00858
int main()
{
	Message(0,"この先に用事はないわ","","","");
	
	Walk(8,0,11);
	Wait(11);
}
#EndScript

// 003 -> 002
// 003:パリンの部屋へ
#Script:00859
int main()
{
	MapEvent(0);
	Walk(8,0,5);
	Black(0,100,5);
	Wait(5);
	Event(4);
//	Scop(0);
	Camera(0,-290,221,265);
	ch[421] = -290;
	ch[422] = 221;
	ch[423] = 265;
	KaguTest(30010,0);
	Camera(-1,0,0,0);					
	Walk(0,5,18);
	Black(0,100,0);
	Wait(5);
	Black(0,0,13);
	Wait(13);
	MapEvent(1);
}
#EndScript

// 002 -> 003
#Script:00860
int main()
{
	MapEvent(0);
	
	if (ch[2002] && ch[2003] == 1)
	{
		// のぞきの容疑者を特定していない
		Message(0,"のぞきはまだ近くに","いるかもしれないわ","","");
		Message(0,"見つけ出して","とっちめてやらないと","","");

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(8,0,20);
		Wait(20);
		MapEvent(1);
		return 0;
	}
	
	Walk(-8,0,11);
	Black(0,100,5);
	Wait(5);
	Event(4);
//	Scop(0);

	Camera(0,498,220,302);
	ch[421] = 498;
	ch[422] = 220;
	ch[423] = 302;
	KaguTest(30010,0);
	Camera(-1,0,0,0);					
	Walk(5,0,25);
	Black(0,100,0);
	Wait(5);
	Black(0,0,15);
	Wait(20);
//	SetSavePos();
	MapEvent(1);
}
#EndScript

// 003 -> 012
#Script:00861
int main()
{
	MapEvent(0);
	Black(0,100,15);
	Wait(15);
	ch[3997] = 0;
	Event(3);
	Event(1000);
//	Scop(0);
	Wait(5);
	Black(0,0,15);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 002 -> 012
#Script:00862
int main()
{
	MapEvent(0);
	Black(0,100,15);
	Wait(15);
	ch[3997] = 0;
	Event(3);
	Event(1000);
//	Scop(0);
	Wait(5);
	Black(0,0,15);
	Walk(-5,0,20);
	Wait(20);
	
	// のぞきイベント中？
	if (ch[2002] && ch[2003] == 1)
	{
		// シリンダーの帽子を発見する
		// シリンダーの帽子を凝視
		ch[420] = -323;
		ch[421] = 193;
		ch[422] = 384;
		KaguTest(30019,13);
		ch[420] = 15;
		ch[421] = 30;
		ch[429] = 1;
		KaguTest(30053,0);
		Walk(0,-5,30);
		Wait(30);
		//パリン
		Message(0,"これ、どこかで見たような…","","","");
		Message(0,"あーっ！","シリンダーさんの帽子ね！","","");
		Message(0,"ってことはのぞきの犯人は","シリンダーさんってこと？","","");
		KaguTest(30019,0);
		KaguTest2(30011,0,"@O_073");

		Mes("『男物の帽子』を手に入れた。");
		KaguTest(20022,12);
		GetItem(12);
		Wait(60);

		Message(0,"いい度胸ね。","捕まえてとっちめてやるわ","","");
		ch[2003] = 2;
		ch[2009] = 1;
	}
	
	MapEvent(1);
}
#EndScript

// 012 -> 002
// 012:パリン部屋へ
#Script:00863
int main()
{
	MapEvent(0);
	Black(0,100,15);
	Wait(15);
	Event(333);
	Wait(5);
	Black(0,0,15);

//	Scop(0);

	Camera(0,377,356,435);
	ch[421] = 377;
	ch[422] = 356;
	ch[423] = 435;
	KaguTest(30010,0);
	Camera(-1,0,0,0);					
	Walk(5,0,20);
	Wait(20);
	MapEvent(1);
}
#EndScript


// 0101:ドリルしらべる
#Script:00864
int main()
{
	if (!ch[2300])
	{
		Mes("何かが地面に突き刺さっている。");
	}
}
#EndScript

// 麦わら帽子
#Script:00865
int main()
{
	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"誰かのむぎわら帽子が掛けてある。");
	KaguTest(10010,10);
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);

	Message(0,"サイズが合わなくてかぶれないわ","","","");
}
#EndScript

// かばん
#Script:00866
int main()
{
	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"鞄の中には秘密の道具が入っている。");
	KaguTest(10010,10);
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);
	
	SelStart(50);
	SelText("何か取り出す",1);
	SelText("何も取り出さない",2);
	SelEnd()
	
	if (ch[50] == 1)
	{
//		switch(rand() % (rand() % 7 + 1))
		switch(rand() % 3)
		{
		case 0:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"貯金箱が入っていた。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			Message(0,"まだあんまり貯まってないみたい","","","");
			
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"貯金箱を鞄に戻した。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			return 0;
		case 1:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"化粧品が入っていた。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			Message(0,"大人になるまで必要ないわ","","","");
			
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"化粧品を鞄に戻した。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			return 0;
		case 2:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"鉄下駄が入っていた。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			Message(0,"………","","","");
			
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"鉄下駄を鞄に戻した。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			return 0;
//		case 3:
//			KaguTest(10006,0);
//			KaguTest(10007,0);
//			KaguTest2(10008,0,"クッキーが入っていた。");
//			KaguTest(10010,10);
////			GetItem(4);
////			SE(899);
//			Wait(10);
//			
//			Message(0,"","","","");
//			
//			KaguTest(10011,10);
//			Wait(10);
//			return 0;
//		case 4:
//			KaguTest(10006,0);
//			KaguTest(10007,0);
//			KaguTest2(10008,0,"チョコレートが入っていた。");
//			KaguTest(10010,10);
////			GetItem(5);
////			SE(899);
//			Wait(10);
//			
//			Message(0,"","","","");
//			
//			KaguTest(10011,10);
//			Wait(10);
//			return 0;
////		case 6:
////			KaguTest(10006,0);
////			KaguTest(10007,0);
////			KaguTest2(10008,0,"ネコミミが入っていた。");
////			KaguTest(10010,10);
////			Wait(10);
////			
////			Message(0,"","","","");
////			
////			KaguTest(10011,10);
////			Wait(10);
////			KaguTest(20001,40);
////			if (!ch[430])
////			{
////				GetItem(40);
////				SE(256);
////			}
////			else
////			{
////				Message(0,"もう持ってるわ","","","");
////
////				KaguTest(10006,0);
////				KaguTest(10007,0);
////				KaguTest2(10008,0,"ネコミミを鞄に戻した。");
////				KaguTest(10010,10);
////				Wait(10);
////				
////				Message(0,"","","","");
////				
////				KaguTest(10011,10);
////				Wait(10);
////			}
////			return 0;
//		case 5:
//			KaguTest(10006,0);
//			KaguTest(10007,0);
//			KaguTest2(10008,0,"ケーキが入っていた。");
//			KaguTest(10010,10);
////			GetItem(20);
////			SE(899);
//			Wait(10);
//			
//			Message(0,"","","","");
//			
//			KaguTest(10011,10);
//			Wait(10);
//			return 0;
		}
		
		// それ以外の場合
		switch(rand() % 3)
		{
		case 0:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"貯金箱が入っていた。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			Message(0,"まだあんまり貯まってないみたい","","","");
			
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"貯金箱を鞄に戻した。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			return 0;
		case 1:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"化粧品が入っていた。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			Message(0,"大人になるまで必要ないわ","","","");
			
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"化粧品を鞄に戻した。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			return 0;
		case 2:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"鉄下駄が入っていた。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			
			Message(0,"………","","","");
			
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"鉄下駄を鞄に戻した。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			return 0;
		}
	}
}
#EndScript

// 洗濯物
#Script:00867
int main()
{
	int smcl;
	int ukky;
	int tyugoku;
	int paja;
	int meido;
	int hudangi;
	int kigaeru;
	int seihuku;
	int kimono;

	int nasu;
	int dokata;
	int buruma;

	int yuko;
	int suku;
	
	KaguTest(99993,0);
	ukky = ch[420];
	paja = ch[421];
	tyugoku = ch[422];
	smcl = ch[423];
	meido = ch[424];
	seihuku = ch[425];
	hudangi = 0;
	kigaeru = 0;
	nasu = ch[427];
	dokata = ch[428];
	buruma = ch[429];
	yuko = ch[430];
	suku = ch[431];
	if (ch[2089])
	{
		kimono = 1;
	}
	else
	{
		kimono = 0;
	}
	
	if ((!smcl && !kimono) || ch[2501] == 6)
	{
		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"クローゼットがある。");
		KaguTest(10010,10);
		Wait(10);
		
		Message(0,"","","","");
		
		KaguTest(10011,10);
		Wait(10);

		if (ch[2501] == 6)
		{
			Message(0,"大した服が入ってないわね","","","");
		}
		else
		{
			Message(0,"変わった服は入ってないわ","","","");
		}
		
		return 0;
	}

	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"クローゼットがある。");
	KaguTest(10010,10);
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);

	SelStart(50)
	if (suku)
	{
		if (ch[2501]==12)
		{
			// 着物着てる
			hudangi = 1;
		}
		else
		{
			// 着物以外着てる
			SelText("スク水（おまけ）に着替える",13);
		}

	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (yuko)
	{
		if (ch[2501]==11)
		{
			// 着物着てる
			hudangi = 1;
		}
		else
		{
			// 着物以外着てる
			SelText("ひょう（おまけ）に着替える",12);
		}

	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (nasu)
	{
		if (ch[2501]==8)
		{
			// 着物着てる
			hudangi = 1;
		}
		else
		{
			// 着物以外着てる
			SelText("ナース（おまけ）に着替える",9);
		}

	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (dokata)
	{
		if (ch[2501]==9)
		{
			// 着物着てる
			hudangi = 1;
		}
		else
		{
			// 着物以外着てる
			SelText("作業着（おまけ）に着替える",10);
		}

	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (buruma)
	{
		if (ch[2501]==10)
		{
			// 着物着てる
			hudangi = 1;
		}
		else
		{
			// 着物以外着てる
			SelText("体操着（おまけ）に着替える",11);
		}

	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (kimono)
	{
		if (ch[2501]==7)
		{
			// 着物着てる
			hudangi = 1;
		}
		else
		{
			// 着物以外着てる
			SelText("着物に着替える",8);
		}
	}
	if (ukky)
	{
		if (ch[2501]==1)
		{
			// 猿着てる
			hudangi = 1;
		}
		else
		{
			// 猿以外着てる
			SelText("おさる服に着替える",1);
		}
	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (paja)
	{
		if (ch[2501]==2)
		{
			// パジャマ着てる
			hudangi = 1;
		}
		else
		{
			// パジャマ以外着てる
			SelText("パジャマに着替える",2);
		}
	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (tyugoku)
	{
		if (ch[2501]==3)
		{
			// チャイナドレス着てる
			hudangi = 1;
		}
		else
		{
			// チャイナドレス以外着てる
			SelText("チャイナドレスに着替える",3);
		}
	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (meido)
	{
		if (ch[2501] == 4)
		{
			// メイド服着てる
			hudangi = 1;
		}
		else
		{
			// メイド服以外着てる
			SelText("ゴスロリに着替える",6);
		}
	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (seihuku)
	{
		if (ch[2501] == 5)
		{
			// 制服着てる
			hudangi = 1;
		}
		else
		{
			// 制服以外着てる
			SelText("制服に着替える",7);
		}
	}
	else
	{
		SelText("？？？？に着替える",55);
	}
	if (hudangi)
	{
		SelText("普段着に着替える",4);
	}
	SelText("着替えない",5);
	SelEnd();
	
	if (ch[50] == 1)
	{
		// 猿に変身
		KaguTest(20070,1);
//		ch[2501] = 1;
		kigaeru = 1;
	}
	if (ch[50] == 2)
	{
		// パジャマに着替える
		KaguTest(20070,2);
//		ch[2501] = 2;
		kigaeru = 1;
	}
	if (ch[50] == 3)
	{
		// チャイナドレスに着替える
		KaguTest(20070,3);
//		ch[2501] = 3;
		kigaeru = 1;
	}
	if (ch[50] == 4)
	{
		// 普段着に着替える
		KaguTest(20070,0);
//		ch[2501] = 0;
		kigaeru = 1;
	}
	if (ch[50] == 6)
	{
		// メイド服に着替える
		KaguTest(20070,4);
//		ch[2501] = 4;
		kigaeru = 1;
	}
	if (ch[50] == 7)
	{
		// 制服に着替える
		KaguTest(20070,5);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 8)
	{
		// 制服に着替える
		KaguTest(20070,7);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 9)
	{
		// なすに着替える
		KaguTest(20070,8);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 10)
	{
		// どかたに着替える
		KaguTest(20070,9);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 11)
	{
		// ぶるまに着替える
		KaguTest(20070,10);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 12)
	{
		// ぶるまに着替える
		KaguTest(20070,11);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 13)
	{
		// ぶるまに着替える
		KaguTest(20070,12);
//		ch[2501] = 5;
		kigaeru = 1;
	}
	if (ch[50] == 55)
	{
		Message(0,"まだ手に入れてないみたいね","","","");
		
	}

	if (!kigaeru)
	{
		// 着替えない
		return 0;
	}
	
	// 着替える
	Black(0,100,15);
	Wait(20);
	SE(565);

	int nozoki;
	nozoki = 0;
	// のぞきクエストチェック
	if (!ch[2007] && ch[3960] && !ch[2004] && !ch[2002])
	{
		nozoki = 1;
	}
	
	int x;
	int y;
	int z;
	GetCharPos(58,x,y,z);
	
	if (nozoki && x > -20000 && z > -500)
	{
		// のぞきクエスト開始
		ch[2002] = 1;
		ch[2003] = 1;
		ch[2007] = 1;
		nozoki = 1;
		Wait(30);
		SE(723);
		Wait(45);
		ch[2006] = 0;
		ch[2008] = 0;
		ch[2009] = 0;
		
		ch[3984] = 0;
		ch[3987] = -1;	// シリンダーは配置しない
		ch[3990] = 0;
	}
	else
	{
		nozoki = 0;
		Wait(75);
	}

	ReloadChar();
	LoadMapB(2);
//	Scop(0);
	Black(0,0,15);
	Wait(15);
	
	if (nozoki)
	{
		// のぞきが出た
		ch[420] = 8;
		ch[421] = 30;
		ch[429] = 1;
		KaguTest(30053,0);
		Wait(30);

		//パリン
		Message(0,"なんの音だろ？","","","");

		SE(724);
		Wait(15);

		//パリン
		Message(0,"……………………","","","");
		Message(0,"…もしかして、のぞき！？","","","");
	}
}
#EndScript

// ぬいぐるみ
#Script:00868
int main()
{
	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"お気に入りのぬいぐるみが置いてある。");
	KaguTest(10010,10);
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);

//	ch[50] = 0;
//	if (!ch[1757])
//	{
//		SelStart(50);
//		SelText("何か一つ持っていく",1);
//		SelText("何も持っていかない",2);
//		SelEnd();
//	}
//	
//	if (ch[50] == 1)
//	{
//		Mes("『あひる』を手に入れた。");
//		GetItem(70);
//		ch[1757] = 1;
//		SE(899);
//		Wait(30);
//	}
	
	
}
#EndScript

// 本棚
#Script:00869
int main()
{
	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"色々な本が並んでいる。");
	KaguTest(10010,10);
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);
	
	SelStart(50);
	SelText("何か読んでみる",1);
	SelText("何も読まない",2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		// 何か本を読む
		switch( rand() % 1)
		{
		case 0:
			KaguTest(10006,0);
			KaguTest(10007,0);
			KaguTest2(10008,0,"s090世界の町s170第一巻");
			KaguTest2(10008,1,"");
			KaguTest2(10008,2,"ティースs080働き者達の町。付近に大きな鉱山がある。");
			KaguTest2(10008,3,"s080最近では運搬用トロッコの旧路線を利用した");
			KaguTest2(10008,4,"s080旅客用の鉄道が開通し、諸外国からの関心も");
			KaguTest2(10008,5,"s080非常に高まっている。");
			KaguTest2(10008,6,"s080オバケが出るとの噂もあり、世界怖いもの百景の");
			KaguTest2(10008,7,"s080一つとしても有名である。");
			KaguTest(10010,10);
			Wait(10);
			
			Message(0,"","","","");
			
			KaguTest(10011,10);
			Wait(10);
			break;
		}
	}
}
#EndScript

// 机
#Script:00870
int main()
{
	string kabegami;
	KaguTest(20001,2);
	if (ch[430])
	{
		// 壁紙チェンジ
		while(1)
		{
			SelStart(50);
			if (ch[2031])
			{
				// 壁紙１
				// 鼻眼鏡クエスト御褒美
				SelText("やねがたくさん",1);
			}
			if (ch[2021])
			{
				// 壁紙２
				// プラチナメダルクエスト御褒美
				SelText("るんるるるん",2);
			}
			if (ch[2019])
			{
				// 壁紙３
				// わらしべクエスト御褒美
				SelText("しょうじょマンガ",3);
			}
			if (ch[2004])
			{
				// 壁紙４
				// のぞきクエスト御褒美
				SelText("カートゥンスタイル",4);
			}
			if (ch[2027])
			{
				// 壁紙５
				// アフロクエスト御褒美
				SelText("なかよくおひるね",5);
			}
			if (ch[2033])
			{
				// 壁紙６
				// ファラオクエスト御褒美
				SelText("いろいろそうび",6);
			}
			if (ch[2011])
			{
				// 壁紙７
				// ビラ貼りクエスト御褒美
				SelText("わかきひの…",7);
			}
			if (ch[2016])
			{
				// 壁紙８
				// バイトクエスト御褒美
				SelText("ねむくなるこうぎ",8);
			}
			if (ch[2029])
			{
				// 壁紙９
				// ソンブレロクエスト御褒美
				SelText("リターンザホーム",9);
			}
			SelText("戻る",11);
			SelEnd();
			
			if (ch[50] >= 1 && ch[50] <= 9)
			{
				// 壁紙変更する
				// 画像表示してイエスノー確認
				KaguTest(10006,0);
				KaguTest(10007,7);
				if (ch[50] == 1)
				{
					KaguTest2(10009,0,"kb001s.bmp");
					kabegami = "kb001";
				}
				if (ch[50] == 2)
				{
					KaguTest2(10009,0,"kb002s.bmp");
					kabegami = "kb002";
				}
				if (ch[50] == 3)
				{
					KaguTest2(10009,0,"kb003s.bmp");
					kabegami = "kb003";
				}
				if (ch[50] == 4)
				{
					KaguTest2(10009,0,"kb004s.bmp");
					kabegami = "kb004";
				}
				if (ch[50] == 5)
				{
					KaguTest2(10009,0,"kb005s.bmp");
					kabegami = "kb005";
				}
				if (ch[50] == 6)
				{
					KaguTest2(10009,0,"kb006s.bmp");
					kabegami = "kb006";
				}
				if (ch[50] == 7)
				{
					KaguTest2(10009,0,"kb007s.bmp");
					kabegami = "kb007";
				}
				if (ch[50] == 8)
				{
					KaguTest2(10009,0,"kb008s.bmp");
					kabegami = "kb008";
				}
				if (ch[50] == 9)
				{
					KaguTest2(10009,0,"kb009s.bmp");
					kabegami = "kb009";
				}
				
				ch[423] = 240;
				ch[424] = 250;
				ch[425] = 400;
				ch[426] = 410;
				ch[427] = 0;
				ch[428] = 0;
				ch[429] = 256;
				ch[430] = 256;
				ch[431] = 256;

				KaguTest(10010,10);
				Wait(10);
				
				SelStart(50);
				SelText("この壁紙に変更する",1);
				SelText("壁紙選択に戻る",2);
				SelEnd();
				
				KaguTest(10011,10);
				Wait(11);
				
				if (ch[50] == 1)
				{
					// 壁紙変更
					Kabe(kabegami);
					Mes("デスクトップの壁紙を変更しました。");
					break;
				}
			}
			else
			{
				// キャンセル
				break;
			}
		}
	}
	else
	{
		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"きれいに片付けられている。");
		KaguTest(10010,10);
		Wait(10);
		
		Message(0,"","","","");
		
		KaguTest(10011,10);
		Wait(10);
	}
}
#EndScript

// 写真
#Script:00871
int main()
{
	KaguTest(10006,0);
	KaguTest(10007,0);
	KaguTest2(10008,0,"写真が飾ってある。");
	KaguTest(10010,10);

	Message(0,"","","","");
	
	KaguTest(10011,10);
	Wait(10);
}
#EndScript

// 町空き家
// 012 -> 006
#Script:00872
int main()
{
	MapEvent(0);
	if (ch[2057] && ch[2300])
	{
		// 入れる
		Message(0,"あれ？何か書いてある","","","");
		Message(0,"「壁紙を全て集めたようだな。","合言葉を答えよ。」？","","");
		string txt;
		txt = Type(600);
		if (strcmp(txt,"やるしかないわね") == 0)
		{
			// 正解
			TekiStop(1);
			Black(0,100,15);
			Wait(15);
			Event(113);
			int x;
			int y;
			int z;
			int i;
			
			for (i = 58;i < 66;i++)
			{
				GetCharPos(i,x,y,z);
				if (x > -20000)
				{
					ch[420] = 2;
					KaguTest(12005,i);
					// 全員待機させる
					ch[420] = 2;
					ch[421] = 1;
					ch[422] = 5;
					KaguTest(12003,i);
					ch[420] = -1;
					Look(i,18);
					KaguTest(12002,i);
				}
			}
			Wait(5);
			Black(0,0,15);
			TekiStop(0);
		}
		else
		{
			// 駄目
			Message(0,"……………………","","","");
			Message(0,"合言葉が違うみたいね","","","");
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,11);					
			Wait(11);					
		}
	}
	else
	{
		Message(0,"鍵がかかっていて入れないわ","","","");

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}

		Walk(0,-8,11);					
		Wait(11);					
	}
	MapEvent(1);					
}
#EndScript

// ドリル持たせてドリル撤去
#Script:00873
int main()
{
	ch[2300] = 1;
	Scop(1);

	ch[420] = 0;
	ch[421] = 1000;
	KaguTest(30011,0);
	KaguTest(30012,0);
	KaguTest(30013,-1000);
	
	KaguTest(20011,100);
	KaguTest(20012,1);
}
#EndScript

// 初回ゲームオーバー
#Script:00874
int main()
{
//	Black(0,100,30);
//	KaguTest(20013,16);
//	Wait(30);
//	ch[2302] = 1;
//	LoadMap(101);
//	ResetFade();
	
//	Kaifuku();
//	Scop2(19,1,"O_043.it3");
	
//	PlayMovie("nuketa.txt",0);
//	Scop2(19,1,"O_043.it3");

//	ch[420] = 350;
//	KaguTest2(30003,1,"Box01");
//	ch[2302] = 0;
}
#EndScript

// ちょっと待ったあたり除去
#Script:00875
int main()
{
	ch[420] = 350;
	KaguTest2(30003,0,"Box01");
}
#EndScript

// モトロ旅の荷物持つ
#Script:00876
int main()
{
	Scop2(19,1,"O_043.it3");
}
#EndScript

// エンディング全オバケ会話チェック
#Script:00877
int main()
{
	if (!ch[416]) return 0;
	if (!ch[418]) return 0;
	if (!ch[417]) return 0;
	if (!ch[419]) return 0;
	if (!ch[402]) return 0;
	if (!ch[406]) return 0;
	if (!ch[407]) return 0;
	if (!ch[411]) return 0;
	if (!ch[401]) return 0;

//	ch[1539] = 1;
}
#EndScript

// 初ひーるめか
#Script:00878
int main()
{
	ch[1540] = 1;

	TekiStop(1);
//	SaveCamera();
//
//	ch[420] = 1325;
//	ch[421] = 375;
//	ch[422] = 750;
//	ch[423] = 1650;
//	ch[424] = 1150;
//	ch[425] = 220;
//	KaguTest(30019,1);	// カメラセット
//	CrossFade();
//	Wait(30);
//
//	KaguTest(10006,2);
//	ch[423] = 100;
//	KaguTest(10007,4);
//	KaguTest2(10008,0,"ヒールポイントで回復しよう");
//	KaguTest2(10008,1,"ダメージを受けている状態でこれに乗ると");
//	KaguTest2(10008,2,"不思議な力でＨＰが回復します");
//	KaguTest(10010,10);
//	
//	Wait(10);
//	
//	Message(0,"","","","");
//	
//	KaguTest(10011,10);
//
//	KaguTest(30019,0);	// カメラ解除
//	RestoreCamera();
//	CrossFade();
//	Wait(15);

	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_08.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);

	TekiStop(0);
}
#EndScript

// 動かせないレバー
#Script:00879
int main()
{
	Mes("レバーは固定されている。");
}
#EndScript

// 敵発生あたり1
#Script:00880
int main()
{
	Lock();
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,99);
	KaguTest(30016,89);
	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");
//	Wait(30);

	Unlock();
}
#EndScript

// 敵発生あたり2
#Script:00881
int main()
{
	Lock();
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,98);
	KaguTest(30016,88);
	ch[420] = 9998;
	KaguTest2(30003,2,"tekiatari2");
//	Wait(30);

	Unlock();
}
#EndScript

// 敵発生あたり3
#Script:00882
int main()
{
	Lock();
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,97);
	KaguTest(30016,87);
	ch[420] = 9997;
	KaguTest2(30003,2,"tekiatari3");
//	Wait(30);

	Unlock();
}
#EndScript

// 敵発生あたり4
#Script:00883
int main()
{
	Lock();
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,96);
	KaguTest(30016,86);
	ch[420] = 9996;
	KaguTest2(30003,2,"tekiatari4");
//	Wait(30);

	Unlock();
}
#EndScript

// 104:あたりに触れたら魚人出てくる
#Script:00884
int main()
{
	ch[300] = 1;
	int pt1;
	int c1;
	TekiStop(1);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c1 = ch[420];
	KaguTest(12004,c1);
	pt1 = ch[420];
	
	ch[420] = 2;
	KaguTest(12005,c1);
	
	// 敵にカメラ向ける
	Camera(c1,-1750,618,137);
	CrossFade();
	// パリンの顔を敵に向ける
	ch[420] = -2030;
	ch[421] = 2358;
	ch[422] = 321;
	KaguTest(30019,13);
	// !噴出し
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
//	Message(c1,"止まれ！","","","");
	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(45);
	// 敵下りてくる
	Walk2(c1,0,-8,15);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(25);
	KaguTest(30019,0);
	// 正面に立つ
	Camera(c1,-1750,618,537);
	Walk2(c1,8,-8,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(5);
	ch[421] = 40;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(25);
	// 間合いを詰める
	Look(0,c1);
	Look(c1,0);
	Walk2(c1,0,-5,15);
	ch[429] = 0;
	KaguTest(30039,0);
	Camera(c1,-1487,167,672);
	Look(0,c1);
	Look(c1,0);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c1);
	ch[420] = 3;
	KaguTest(12005,c1);
//	Message(c1,"ここから先には","行かせないぞ","","");
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(45);

	// モード戻す	
	Camera(-1,0,0,0);
	CrossFade();
	Wait(15);
	
	TekiStop(0);
	return 0;
}
#EndScript

// 104:魚沸く
#Script:00886
int main()
{
	TekiStop(1);
	ch[301] = 1;
	SaveCamera();
	ch[420] = 589;
	ch[421] = 747;
	ch[422] = 539;
	ch[423] = -206;
	ch[424] = 1868;
	ch[425] = 71;
	KaguTest(30019,1);
	CrossFade()
	Wait(30);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,2);
	Wait(20);
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	TekiStop(0);
	return 0;
}
#EndScript

// 204裏:赤羽発生
#Script:00887
int main()
{
	ch[250] = 1;
	KaguTest(30021,-10);
	return 0;
}
#EndScript

// 204裏：浮遊発生
#Script:00888
int main()
{
	ch[211] = 1;
	KaguTest(30021,-10);
	return 0;
}
#EndScript

// 204裏：浮遊発生
#Script:00889
int main()
{
	ch[212] = 1;
	KaguTest(30021,-11);
	return 0;
}
#EndScript

// 204裏：浮遊発生
#Script:00890
int main()
{
	ch[213] = 1;
	KaguTest(30021,-12);
	return 0;
}
#EndScript

// 103:リフト説明
#Script:00891
int main()
{
}
#EndScript

//310 -> 304 ///////////////////////////////////3/28new!
#Script:00892
int main()
{
	if (ch[2497])
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(-8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		MapEvent(0);

		Walk(8,0,11);
		
		Wait(11);
		Event(110);

		Walk(5,0,20);
		
		Wait(20);
		MapEvent(1);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
}

#EndScript
			
//310 -> 303 改め 310 -> ミニマップ///////////////////////////////////3/28new!
#Script:00893
int main()
{
	if (ch[2497])
	{
		MapEvent(0);
		Walk(8,0,11);
		Wait(11);
		Event(100);
		Walk(5,0,15);
		Wait(15);
		MapEvent(1);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		MapEvent(0);
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(-8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}

//	if (ch[2497])
//	{
//		Walk(8,0,11);
//	}
//	else
//	{
//		Walk(-8,0,11);
//	}
//		
//	Wait(11);
//	Event(100);
//
//	if (ch[2497])
//	{
//		Walk(5,0,20);
//	}
//	else
//	{
//		Walk(-5,0,20);
//	}
//	
//	Wait(20);
//	MapEvent(1);
}
#EndScript		

// 0310:ワープゾーン（0101<->0310）
#Script:00894
int main()
{
	ch[2306] = 1;
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	KaguTest2(40000,0,"301");
	//Walk(8,0,11);
	Wait(40);
	Event(194);
	Blur(2,0,30);
	Walk(0,-5,30);
	Wait(30);
//	SetSavePos();
	MapEvent(1);
}
#EndScript	


/////////////////////////
// ダンジョン１．５まわり
//

// 0501 -> 0502
#Script:00895
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(111);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 0502 -> 0501
#Script:00896
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 0502 -> 0503 改め 502 -> ミニマップ
#Script:00897
int main()
{
	if (ch[2497])
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		int a;
		a = ch[2262];
	
		KaguTest(40002,0);

		// クリア
		TekiStop(1);
		MapEvent(0);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2262] < 1)
		{
			ch[2262]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
		KaguTest(10011,1);
		Wait(1);
		TekiStop(0);
		MapEvent(1);
//		KaguTest(20025,0);
		PostScr(1192);
		
	}
}
#EndScript

// 0503 -> 0502
#Script:00898
int main()
{
	if (!ch[2497])
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		int a;
		a = ch[2277];
		
		KaguTest(40002,0);
		// クリア
		TekiStop(1);
		MapEvent(0);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2277] < 1)
		{
			ch[2277]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
		KaguTest(10011,10);
		Wait(10);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
//		KaguTest(20025,0);
		PostScr(1192);
		
		if (!a)
		{
			ch[429] = 2;
			PostScr(1052);
		}
		
	}
}
#EndScript

// 0503 -> 0504
#Script:00899
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(111);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 0504 -> 0503
#Script:00900
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	ch[3899] = rand() % 2;
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 0504 -> 0505 あらため 504 -> ミニマップ
#Script:00901
int main()
{
	int a;
	a = ch[2271];

	KaguTest(40002,0);

	TekiStop(1);
	MapEvent(0);
//	Walk(0,8,15);

		// 評価表示
	KaguTest(10500,120);
	if (ch[2271] < 1)
	{
		ch[2271]=1;
	}
	
	Wait(90);
	
	Message(0,"","","","");
	
	// ミニフィールドへ戻る
//	Black(0,100,30);
//	Wait(30);
	KaguTest(10011,1);
	Wait(1);
//	KaguTest(20025,0);
//	KaguTest(10100,0);
//	KaguTest(99999,0);
//	TekiStop(0);
//	MapEvent(1);
	PostScr(1192);

//	if (!a)
//	{
//		ch[429] = 2;
//		PostScr(1052);
//	}

//	MapEvent(0);
//	Walk(0,8,11);
//	Wait(11);
//	Event(111);
//	Walk(0,5,20);
//	Wait(20);
//	MapEvent(1);
}
#EndScript

// 0505 -> 0504
#Script:00902
int main()
{
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-8,11);
	Wait(11);
	MapEvent(1);
}
#EndScript

// 0501 -> ミニフィールド
#Script:00903
int main()
{
	if (ch[2497])
	{
		// 裏マップ
//		if (ch[2278] < 1)
//		{
//			// 初回クリアなので家具持ってるかチェック
//			KaguTest(20001,66);
//			if (!ch[430])
//			{
//				TekiStop(1);
//				MapEvent(0);
//				Message(0,"まだピエールに頼まれた家具を","見つけてないわ","","");
//				KaguTest(30058,0);
//				while(ch[420])
//				{
//					Walk(ch[421],ch[422],ch[423]);
//					Wait(ch[423]);
//					KaguTest(30058,0);
//				}
//				Walk(0,8,20);
//				Wait(20);
//				MapEvent(1);
//				TekiStop(0);
//				return 0;
//			}
//			
//		}

		KaguTest(40002,0);
		// クリア
		TekiStop(1);
		MapEvent(0);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2278] < 1)
		{
			ch[2278]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
		
		if (!ch[2628])
		{
			//PlayMovie("pie1.txt",0);
			ch[2628] = 1;
		}
		
		KaguTest(10011,10);
		Wait(10);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
//		KaguTest(20025,0);
		PostScr(1192);
	}
	else
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}

}
#EndScript

// 0012 -> 0501（仮おき）
#Script:00904
int main()
{
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(111);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 0501裏：あたり触れたら中ボス＆扉閉め
#Script:00905
int main()
{
	int c;
	int pt;
	
	MapEvent(0);
	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");
	
	TekiStop(1);

	SaveCamera();
	
	// パリンは直進
	Walk(0,-3,135);
	ch[429] = 0;
	KaguTest(30039,0);
	
	//敵発生
	KaguTest(30017,60);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,50);
	KaguTest(30025,50);
	c = ch[420];
	ch[420] = 0;
	KaguTest(30063,c);
	KaguTest(12004,c);
	pt = ch[420];
	KaguTest(12000,c);
	KaguTest(30030,c);
	ch[420] = 1;
	KaguTest(30097,c);
	ch[420] = 0;
	KaguTest(30103,c);
	ch[420] = -1;
	KaguTest(30064,c);
	Wait(1);
	
	// カメラをキャラ視点に
//	if (1)
//	{
		ch[420] = c;
		ch[421] = 0;
		ch[422] = -13;
		KaguTest(30094,0);
		KaguTest(30019,16);
		CrossFade();
		Wait(30);
//	}
//	else
//	{
//		ch[420] = 327;
//		ch[421] = 345;
//		ch[422] = 718;
//		ch[423] = -442;
//		ch[424] = 2756;
//		ch[425] = -4;
//		KaguTest(30019,1);
//		CrossFade();
//		Wait(30);
//	}
	// キャラの背後に移動
	Walk2(c,10,0,30);
	ch[420] = 0;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	Wait(30);
	ch[420] = 2;
	KaguTest(12003,c);
	Wait(15);
	Walk2(c,10,0,20);
	ch[420] = 0;
	KaguTest(12003,c);
	Wait(20);
	ch[420] = 2;
	KaguTest(12003,c);
	Wait(25);
	// 飛び掛る
	Walk2(c,1,-40,80);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = 9;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	Wait(5);

	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(10);

	// 注視するキャラ交代
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	ch[420] = c;
	KaguTest(30063,0);
	KaguTest(12007,c);

	Look(c,0);
	Wait(10);
	Look(c,0);
	ch[421] = 50;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(20);
	// カメラセット
	ch[420] = 47;
	ch[421] = 2491;
	ch[422] = 488;
	ch[423] = -4;
	ch[424] = 327;
	ch[425] = -129;
	KaguTest(30019,1);
	CrossFade();
	Look(c,0);
	Wait(5);
	ch[420] = 2;
	KaguTest(30064,c);
	Look(c,0);
	ch[421] = 50;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(25);
	Look(c,0);
	ch[420] = 10;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);

	KaguTest(30063,-1);
	KaguTest(12007,-1);
	Event(305);
//	Wait(20);

	// 後始末
	KaguTest(30019,0);
	ch[420] = 3;
	KaguTest(12005,c);
	ch[420] = pt;
	KaguTest(12002,c);
	ch[420] = 0;
	KaguTest(30097,c);

	TekiStop(0);
	MapEvent(1);
}
#EndScript

//0501裏：中ボス倒した
#Script:00906
int main()
{
	//扉開ける
	int x;
	int y;
	int z;
	int ln;
	
	ln = Door2C(11);
	GetCharPos(ln,x,y,z);

	SaveCamera();	
	
	SE(950);//ピンポン音
	
	Wait(20);

	TekiStop(1);
	Lock();
	Camera(ln,x,y+1400,z+450);
	CrossFade();
	Unlock();

	Wait(15);
	Event(306);
	Wait(40);

	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(10);
	
	ch[101] = 1;
	TekiStop(0);
}
#EndScript

//0501:ボタンの仕組み教える場所
#Script:00907
int main()
{
	int x;
	int y;
	int z;
	int ln;

	ln = Door2C(11);
	GetCharPos(ln,x,y,z);

	SaveCamera();

	TekiStop(1);

	if (ch[2])
	{
		// 扉は開いている
		Wait(20);
		Lock();
		Camera(ln,x,y-1000,z+400);
		CrossFade();
		Unlock();
		Wait(15);
		Event(307);
		Wait(40);
		Lock();
		Camera(-1,0,0,0);
		RestoreCamera();
		CrossFade();
		Unlock();
		Wait(15);
	}
	else
	{
		// 扉は閉じている
		Wait(20);
		SE(950);
		Camera(ln,x,y-1000,z+400);
		Wait(15);
		Event(306);
		Wait(40);
		Camera(-1,0,0,0);
		RestoreCamera();
		Wait(10);
		ch[300] = 1;
	}

	TekiStop(0);
}
#EndScript

//0502:一つ目の扉開く
#Script:00908
int main()
{
	int x;
	int y;
	int z;
	int ln;

	ln = Door2C(10);
	GetCharPos(ln,x,y,z);

	SaveCamera();	

	TekiStop(1);

	{
		// 扉は閉じている
		SE(950);
		ch[261] = 1;
		Camera(ln,x,y-1200,z+300);
		Wait(15);
		Event(602);
		Wait(40);
		Camera(-1,0,0,0);
		RestoreCamera();
		Wait(10);
	}

	TekiStop(0);
}
#EndScript

// 0502:レバー引くと敵出てくる
#Script:00909
int main()
{
	int c;
	
	TekiStop(1);

	Wait(15);
	ch[2104] = 1;
	KaguTest(30106,13);
	KaguTest(30105,ch[420]);
	ch[423] = 1761;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	KaguTest(30019,0);
	Wait(5);
	KaguTest(20072,0);
	
	Wait(40);
	ch[2104] = 0;
	
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,50);
	KaguTest(30025,50);
	c = ch[420];
	Look(c,0);
	ch[420] = 2100;
	ch[421] = 13831;
	ch[422] = 59;
	ch[423] = 2100;
	ch[424] = 12375;
	ch[425] = -204;
	KaguTest(30093,15);
	KaguTest(30019,14);
	Wait(10);

	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,51);
	Look(c+1,0);
	Wait(30);

	Look(0,c);
	ch[420] = 7;
	ch[429] = 1;
	KaguTest(30036,c);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(10);
	ch[420] = 7;
	ch[429] = 1;
	KaguTest(30036,c+1);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(10);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(10);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(10);
	ch[420] = 9;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	KaguTest(30019,0);
	
	ch[253] = 1;
	
	TekiStop(0);
	return 0;
}
#EndScript

//0502:敵倒したら扉開く
#Script:00910
int main()
{
	int x;
	int y;
	int z;
	int ln;

	ln = Door2C(11);
	GetCharPos(ln,x,y,z);
	SaveCamera();

	Wait(20);
	
	TekiStop(1);

	SE(950);	
	Lock();
	Camera(ln,x,y-1000,z+400);
	CrossFade();
	Unlock();
	
	Wait(10);

	Event(606);
	
	Wait(30);
	
	Lock();
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Unlock();
	
	Wait(10);
	
	TekiStop(0);
	
	ch[262] = 1;
	ch[333] = 1;
}
#EndScript

// 0502裏：ボタン押したら扉開く・離したら閉じる
#Script:00911
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	ln = Door2C(10);
	GetCharPos(ln,x,y,z);

	TekiStop(1);

	SaveCamera();
	Lock();
	Camera(ln,x-1500,y-300,z+600);
	CrossFade();
	Unlock();

	{
		// 扉閉じている
		Wait(20);
		SE(950);
//		Wait(15);
		Event(602);
		Wait(30);
	}
	
	Lock();
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Unlock();
	
	Wait(10);
	
	ch[262] = 1;
	
	TekiStop(0);
}
#EndScript

// 0502裏：レバー引いたら扉開く
#Script:00912
int main()
{
	TekiStop(1);

	// カメラ
	SaveCamera();
	Blur(3,120,20);
	KaguTest(30033,50);
	Wait(7);
	ch[420] = 1312;
	ch[421] = 12826;
	ch[422] = 274;
	ch[423] = 1318;
	ch[424] = 12160;
	ch[425] = -29;
	KaguTest(30093,20);
	KaguTest(30033,100);
	ch[420] = 1318;
	ch[421] = 12160;
	ch[422] = -29;
	KaguTest(30094,20);
	KaguTest(30019,15);
	Wait(20);
	
	ch[420] = 1515;
	ch[421] = 12388;
	ch[422] = 290;
	ch[423] = 1182;
	ch[424] = 11412;
	ch[425] = -4;
	KaguTest(30093,20);
	KaguTest(30019,14);
	Wait(20);
	ch[420] = 1519;
	ch[421] = 11280;
	ch[422] = 450;
	ch[423] = -68;
	ch[424] = 11213;
	ch[425] = -4;
	KaguTest(30093,20);
	Wait(20);
	ch[420] = -589;
	ch[421] = 11465;
	ch[422] = 320;
	ch[423] = -653;
	ch[424] = 9249;
	ch[425] = -79;
	KaguTest(30093,20);
	Wait(15);
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,1);
	Wait(5);
	ch[420] = -664;
	ch[421] = 8219;
	ch[422] = 494;
	ch[423] = -1038;
	ch[424] = 5337;
	ch[425] = -29;
	KaguTest(30093,20);
	Wait(20);
	ch[420] = -1000;
	ch[421] = 6650;
	ch[422] = 492;
	ch[423] = -1038;
	ch[424] = 5337;
	ch[425] = -29;
	KaguTest(30093,30);
	Wait(20);
	Blur(3,0,20);
	Wait(25);
		
	Event(605);
	Wait(40);

	KaguTest(30019,0);	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
	ch[260] = 1;
}
#EndScript

// 204:隠し砂場に行くと敵が大量に降ってくる
#Script:00913
int main()
{
	int c;
	int pt1;
	int pt2;
	int pt3;
	int pt4;
	int pt5;
	int pt6;
	int pt7;
	int pt8;
	int pt9;
	int pt10;
	int i;
	int x;
	int y;
	int z;
	int ax;
	int ay;
	int az;
	
	// 敵アタリ消しておく
	ch[420] = 9998;
	KaguTest2(30003,2,"tekiatari2");
	
	// 準備
	ch[420] = 100000;
	ch[427] = 14;
	KaguTest(30015,2);
	KaguTest(30015,3);
	KaguTest(30015,4);
	KaguTest(30025,4);
	c = ch[420];
	for (i = 0;i < 10;i++)
	{
		GetCharPos(c+i,x,y,z);
		KaguTest(12006,c+i);
		CharPos(c+i,x,y,z);
	}
	
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12004,c+3);
	pt4 = ch[420];
	KaguTest(12004,c+4);
	pt5 = ch[420];
	KaguTest(12004,c+5);
	pt6 = ch[420];
	KaguTest(12004,c+6);
	pt7 = ch[420];
	KaguTest(12004,c+7);
	pt8 = ch[420];
	KaguTest(12004,c+8);
	pt9 = ch[420];
	KaguTest(12004,c+9);
	pt10 = ch[420];
	for (i = 0;i < 10;i++)
	{
		KaguTest(12000,c+i);
	}
		// 表示グループ統一
	ch[420] = -1;
	for (i = 0;i < 10;i++)
	{
		KaguTest(30051,c+i);
	}
		// カメラ座標取得
	KaguTest(30005,0);
	x = ch[421];
	y = ch[422];
	z = ch[423];
	KaguTest(30068,0);
	ax = ch[423];
	ay = ch[424];
	az = ch[425];
	
		// カメラをまず隊長に向ける
	ch[420] = 224;
	ch[421] = -635;
	ch[422] = -591;
	ch[423] = -703;
	ch[424] = -694;
	ch[425] = -429;
	KaguTest(30093,20);
	ch[420] = -703;
	ch[421] = -694;
	ch[422] = -429;
	KaguTest(30094,20);
	KaguTest(30019,15);
	Wait(30);
	
		// 隊長剣ふる
	ch[420] = 7;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(10);
	ch[420] = 7;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	ch[420] = 80;
	ch[421] = -425;
	KaguTest(30070,c);
	Wait(30);
		
		// 扉が現れて閉まる
	KaguTest(30070,0);
	ch[420] = -685;
	ch[421] = -1203;
	ch[422] = -659;
	ch[423] = 79;
	ch[424] = -425;
	ch[425] = -970;
	KaguTest(30093,20);
	KaguTest(30019,14);
	Wait(30);
	CharPos(Door2C(1),150,-350,-975);
	ch[420] = 150;
	ch[421] = -350;
	ch[422] = -975;
	ch[423] = 1012;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	Wait(15);
	Event(401);
	Wait(30);

	// 子分ふってくる
		// 子分のルーチンを跳ねルーチンに
	for (i = 1;i < 10;i++)
	{
		ch[420] = 98;
		KaguTest(12004,c+i);
		ch[420] = c+i;
		ch[421] = 15;
		KaguTest(20044,29);
	}
		// カメラ向ける
	ch[420] = -374;
	ch[421] = -1280;
	ch[422] = 370;
	ch[423] = 21;
	ch[424] = -282;
	ch[425] = 4;
	KaguTest(30093,30);
	Wait(15);
	KaguTest(12000,c+1);
	KaguTest(12000,c+2);
	Wait(25);
		// 飛び降りる
	Walk2(c+1,0,-24,15);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(3);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(6);
	Walk2(c+2,0,-24,15);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(3);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+2);
	Wait(20);
		// カメラ戻す
	ch[420] = x;
	ch[421] = y;
	ch[422] = z;
	ch[423] = ax;
	ch[424] = ay;
	ch[425] = az;
	KaguTest(30093,20);
	KaguTest(30019,14);
	Wait(20);
	KaguTest(30019,0);
	CrossFade();
	
	// 後始末
		// 出現座標セット
	CharPos(c,-99450,-741,-445);
	CharPos(c+3,-99736,-558,0);
	CharPos(c+4,-100037,-620,0);
	CharPos(c+5,-100018,-570,0);
	CharPos(c+6,-99564,-581,0);
	CharPos(c+7,-100190,-556,0);
	CharPos(c+8,-100076,-820,0);
	CharPos(c+9,-99700,-568,0);
		// モード戻す
	for(i = 0;i < 10;i++)
	{
		ch[420] = 3;
		KaguTest(12005,c+i);
		ch[420] = c+i;
		ch[421] = 15;
		KaguTest(20044,26);
	}
		// パターン戻す
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt4;
	KaguTest(12002,c+3);
	ch[420] = pt5;
	KaguTest(12002,c+4);
	ch[420] = pt6;
	KaguTest(12002,c+5);
	ch[420] = pt7;
	KaguTest(12002,c+6);
	ch[420] = pt8;
	KaguTest(12002,c+7);
	ch[420] = pt9;
	KaguTest(12002,c+8);
	ch[420] = pt10;
	KaguTest(12002,c+9);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c+1);
	KaguTest(30090,c+2);
}
#EndScript

// 0503:扉一つ目開く
#Script:00914
int main()
{
	int x;
	int y;
	int z;
	int ln;

	TekiStop(1);
	SE(950);
	
	//ドア開放
	if (!ch[260])
	{
		ln = Door2C(301);
		GetCharPos(ln,x,y,z);
		SaveCamera();
		
		Black(0,100,10);
		Wait(10);
		
		Lock();
		Camera(ln,x+900,y-750,z+900);
		CrossFade();
		Unlock();
		
		Wait(5);
		TekiStop(0);
		Wait(5);
		Black(0,0,10);
		Wait(15);
		Event(602);
		Wait(40);
		TekiStop(1);
		
		
//		ln = Door2C(311);
//		GetCharPos(ln,x,y,z);

//		Black(0,100,10);
//		Wait(10);
//		Lock();
//		Camera(ln,x+900,y-500,z+400);
//		CrossFade();
//		Unlock();
		
//		Wait(10);
//		Black(0,0,10);
//		Wait(15);
//		Event(603);
//		Wait(40);
		
		Black(0,100,10);
		Wait(10);
		Lock();
		Camera(-1,0,0,0);
		RestoreCamera();
		CrossFade();
		Unlock();
		
		Wait(10);
		Black(0,0,10);
		Wait(10);
		
		ch[260] = 1;
	}
	
	TekiStop(0);
}
#EndScript

// 0503:二つ目の扉開く
#Script:00915
int main()
{
	int x;
	int y;
	int z;
	int ln;

	SaveCamera();
	TekiStop(1);
	
	{
		// 扉閉じている
		ch[1] = 1;

		SE(950);
		
		ln = Door2C(302);
		GetCharPos(ln,x,y,z);

		Black(0,100,10);
		Wait(10);
		Lock();
		Camera(ln,x,y-1200,z+300);
		CrossFade();
		Unlock();
		
		Wait(10);
		Black(0,0,10);
		Wait(15);
		Event(605);
		Event(606);
		Wait(40);

		Black(0,100,10);
		Wait(10);		
		Lock();
		Camera(-1,0,0,0);
		RestoreCamera();
		CrossFade();
		Unlock();
		
		Wait(10);
		Black(0,0,10);
		Wait(10);
		
		ch[262] = 1;
	}

	TekiStop(0);
}
#EndScript

// 0503裏：宝箱開くと敵振ってくる
#Script:00916
int main()
{
	ch[300]=1;
	KaguTest(30023,90);
	KaguTest(30015,91);
}
#EndScript

// 0503:中ボス倒すと扉開く
#Script:00917
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	ch[301]=1;
	Wait(25);
	SE(950);
	
	TekiStop(1);
	
	ln = Door2C(302);
	GetCharPos(ln,x,y,z);
	
	SaveCamera();
	
	Lock();
//	Camera(ln,x,y+1200,z+300);
//	CrossFade();
	Unlock();
	
//	Wait(10);
//	Wait(40);
	
	ln = Door2C(304);
	GetCharPos(ln,x,y,z);
	
	Lock();
	Camera(ln,x,y-1200,z+300);
	CrossFade();
	Unlock();
	
	Wait(10);
	Event(615);
	Event(614);
	Wait(40);
	
	Lock();
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Unlock();
	
	Wait(10);
	TekiStop(0);
}
#EndScript

// 0503:あたりに触れると中ボス発生
#Script:00918
int main()
{
	int c;
	int pt;
	int time;
	
	ch[300]=1;
	TekiStop(1);
	
	SaveCamera();
	
	Camera(0,750,14330,370);
	CrossFade();
	Wait(10);
	Event(613);
	Event(612);
	Wait(10);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	
	ch[420] = 750;
	ch[421] = 14000;
	KaguTest(30070,0);
	ch[420] = 0;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,0);
	Wait(10);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,0);

	ch[420] = 677;
	ch[421] = 15069;
	ch[422] = 297;
	ch[423] = -169;
	ch[424] = 13530;
	ch[425] = 71;
	KaguTest(30093,20);
	ch[420] = -169;
	ch[421] = 13530;
	ch[422] = 71;
	KaguTest(30094,20);
	KaguTest(30019,15);
	Camera(-1,0,0,0);
	CrossFade();
	Wait(20);

	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,50);
	KaguTest(30025,50);
	c = ch[420];
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(12004,c);
	pt = ch[420];
	ch[420] = -1;
	KaguTest(12002,c);
	ch[420] = 0;
	KaguTest(30041,c);
	ch[420] = 1;
	KaguTest(30097,c);
	ch[424] = 750;
	ch[425] = 13500;
	ch[426] = 35;
	KaguTest(30061,0);
	KaguTest(30060,c);
	Walk2(c,ch[421],ch[422],ch[423]);
	time = ch[423];
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = 8;
	ch[421] = 1;
	ch[422] = 0;
	KaguTest(12003,c);
	
	ch[420] = 740;
	ch[421] = 14595;
	ch[422] = 320;
	ch[423] = 754;
	ch[424] = 13545;
	ch[425] = 20;
	KaguTest(30093,time);
	ch[420] = 754;
	ch[421] = 13545;
	ch[422] = 20;
	KaguTest(30094,time);

	Wait(7);
	ch[420] = 1;
	KaguTest(30041,c);
	ch[422] = 1;
	ch[421] = 50;
	KaguTest(30037,c);
	Wait(time-17);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	Wait(10);
	Look(c,0);
	Look(0,c);
	Wait(15);
	
	KaguTest(30019,0);
	ch[420] = 0;
	KaguTest(30097,c);
	ch[420] = 3;
	KaguTest(12005,c);
	ch[420] = pt;
	KaguTest(12002,c);
	CrossFade();
	Wait(10);
	TekiStop(0);

	return 0;
}
#EndScript

//0503裏：あたり９９番での敵発生
#Script:00919
int main()
{
	KaguTest(30025,71);
	KaguTest(30027,71);
	KaguTest(30027,72);
	KaguTest(30027,73);
	KaguTest(30027,74);
	KaguTest(30027,75);
	CharPos(ch[420],2100,10200,200);
	CharPos(ch[420]+1,2100,9600,200);
	CharPos(ch[420]+2,1050,9900,200);
	CharPos(ch[420]+3,1500,9600,200);
	CharPos(ch[420]+4,1500,10200,200);
	KaguTest(30024,71);
	KaguTest(30024,72);
	KaguTest(30024,73);
	KaguTest(30024,74);
	KaguTest(30024,75);
	SE(952);
	
	KaguTest2(30003,2,"tekiatari1");
}
#EndScript

//0503裏：あたり９８番での敵発生
#Script:00920
int main()
{
	KaguTest(30025,71);
	KaguTest(30027,71);
	KaguTest(30027,72);
	KaguTest(30027,73);
	KaguTest(30027,74);
	KaguTest(30027,75);
	CharPos(ch[420],2700,5100,200);
	CharPos(ch[420]+1,3000,5100,200);
	CharPos(ch[420]+2,2850,4350,200);
	CharPos(ch[420]+3,2700,3600,200);
	CharPos(ch[420]+4,3000,3600,200);
	KaguTest(30024,71);
	KaguTest(30024,72);
	KaguTest(30024,73);
	KaguTest(30024,74);
	KaguTest(30024,75);
	SE(952);
	
	KaguTest2(30003,2,"tekiatari2");
}
#EndScript

//0503裏：あたり９７番での敵発生
#Script:00921
int main()
{
	KaguTest(30025,71);
	KaguTest(30027,71);
	KaguTest(30027,72);
	KaguTest(30027,73);
	KaguTest(30027,74);
	KaguTest(30027,75);
	CharPos(ch[420],-300,600,200);
	CharPos(ch[420]+1,300,600,200);
	CharPos(ch[420]+2,0,1200,200);
	CharPos(ch[420]+3,-300,1500,200);
	CharPos(ch[420]+4,300,1500,200);
	KaguTest(30024,71);
	KaguTest(30024,72);
	KaguTest(30024,73);
	KaguTest(30024,74);
	KaguTest(30024,75);
	SE(952);
	
	KaguTest2(30003,2,"tekiatari3");
}
#EndScript

//0503裏：あたり９６番での敵発生
#Script:00922
int main()
{
	KaguTest(30025,71);
	KaguTest(30027,71);
	KaguTest(30027,72);
	KaguTest(30027,73);
	KaguTest(30027,74);
	KaguTest(30027,75);
	CharPos(ch[420],-2700,2100,200);
	CharPos(ch[420]+1,-2700,3300,200);
	CharPos(ch[420]+2,-2700,2700,200);
	CharPos(ch[420]+3,-2400,3900,200);
	CharPos(ch[420]+4,-3000,3900,200);
	KaguTest(30024,71);
	KaguTest(30024,72);
	KaguTest(30024,73);
	KaguTest(30024,74);
	KaguTest(30024,75);
	SE(952);
	
	KaguTest2(30003,2,"tekiatari4");
}
#EndScript

//0504:リフト無効化
#Script:00923
int main()
{
	LiftEnable(0);
	KaguTest(30026,10);
	KaguTest(30026,11);
	KaguTest(30026,12);
}
#EndScript

//0504:浮石浮かせる
#Script:00924
int main()
{
	TekiStop(1);
	
	Wait(30);
	SE(950);
	Black(0,100,10);
	Wait(10);

	SaveCamera();
	
	Lock();
	ch[420] = -250;
	ch[421] = 1200;
	ch[422] = 300;
	ch[423] = 750;
	ch[424] = 1200;
	ch[425] = -100;
	KaguTest(30019,1);
	CrossFade();
	Unlock();
	
	Wait(15);
	Black(0,0,10);
	TekiStop(0);
	Wait(20);
	
	Event(605);
	Wait(10);
	Event(606);
	Wait(10);
	Event(607);
	Wait(50);

	Black(0,100,10);
	Wait(10);

	TekiStop(1);
	Lock();
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Unlock();
	
	Wait(10);
	Black(0,0,10);
	Wait(10);
	
	TekiStop(0);
	
	ch[420] = 900;
	ch[421] = 2000;
	ch[422] = 150;
	KaguTest(30055,1);
}
#EndScript

// 0504裏：道を塞いでいる柵が開く
#Script:00925
int main()
{
	int x;
	int y;
	int z;
	int ln;
	int c;
	int pt1;
	int pt2;
	int pt3;

	TekiStop(1);
	Wait(10);
	SE(950);
	Wait(10);
	
	// 食虫植物設定
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);	// 出現
	KaguTest(30025,1);	// キャラ番号取得
	c = ch[420];
	ch[420] = 1;
	KaguTest(30097,c);	// nokabe
	KaguTest(30097,c+1);
	KaguTest(30097,c+2);
	KaguTest(12004,c);	// pt取得
	pt1 = ch[420];
	KaguTest(12004,c+1);	// pt取得
	pt2 = ch[420];
	KaguTest(12004,c+2);	// pt取得
	pt3 = ch[420];
	KaguTest(12000,c);	// ＮＰＣ化
	KaguTest(12000,c+1);	// ＮＰＣ化
	KaguTest(12000,c+2);	// ＮＰＣ化
	
	SaveCamera();
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	
	Camera(ln,x,y + 1400,x + 500);
	CrossFade();

	Wait(15);
	Event(603);
	Wait(40);

	// 食虫植物動く
	Walk2(c,6,2,60);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(10);
	Walk2(c+1,-5,3,60);
	KaguTest(30039,0);
	Wait(15);
	Walk2(c+2,-6,2,30);
	KaguTest(30039,0);
	Wait(30);
	Walk2(c+2,-2,4,30);
	KaguTest(30039,0);
	Wait(10);
	ch[420] = 8;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(10);
	KaguTest(30036,c+1);
	Wait(10);
	ch[420] = 7;
	KaguTest(30036,c+2);
	Wait(30);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();

	Wait(15);
	
	// 食虫植物規定位置へ
	CharPos(c,-293,-221,0);
	CharPos(c+1,114,91,0);
	CharPos(c+2,333,-197,0);
		// 向き
	ch[420] = 240;
	ch[421] = 374;
	KaguTest(30070,c);
	ch[420] = -166;
	ch[421] = 505;
	KaguTest(30070,c+1);
	ch[420] = 495;
	ch[421] = -231;
	KaguTest(30070,c+2);
	
	TekiStop(0);
	ch[260] = 1;
	
	// 食虫植物解除
	ch[420] = 3;
	KaguTest(12005,c);	// 敵化
	KaguTest(12005,c+1);	// 敵化
	KaguTest(12005,c+2);	// 敵化
	ch[420] = pt1;
	KaguTest(12002,c);	// ＰＴ設定
	ch[420] = pt2;
	KaguTest(12002,c+1);	// ＰＴ設定
	ch[420] = pt3;
	KaguTest(12002,c+2);	// ＰＴ設定
	ch[420] = 0;
	KaguTest(30097,c);	// nokabe解除
	KaguTest(30097,c+1);	// nokabe解除
	KaguTest(30097,c+2);	// nokabe解除
}
#EndScript

// 0504:ヒント立て札
#Script:00926
int main()
{
	Message(0,"何か書いてある","","","");
	Message(0,"「燃えやすいので注意","s100怪盗Ｍ」","","");
	
	Message(0,"何のことだろ？","","","");
}
#EndScript

// 0504:火がつくと敵が沸く
#Script:00927
int main()
{
	ch[300] = 1;

//	Mes("きた。");
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30016,70);
	KaguTest(30016,71);
	KaguTest(30016,72);
	ch[260] = 1;
}
#EndScript

// 501:ふた
#Script:00928
int main()
{
//	if (!ch[2497])
//	{
//		KaguTest2(30010,0,"futa");
//	}
//	else if (ch[2497])
	{
		KaguTest2(30011,0,"futa");
	}
	
}
#EndScript

// 401 -> 012
#Script:00929
int main()
{
	// かぶりものチェック
	int kabu;
	kabu = 0;
	if (ch[3962])
	{
		// アフロかぶってる
		WaitD(0);
		Message(0,"ポコのアフロが気になるわ","","","");
		kabu = 1;
	}
	if (ch[3963])
	{
		// ソンブレロかぶってる
		WaitD(0);
		if (ch[2034])
		{
			//パリン
			Message(0,"ピエールにフランソワを","返してあげなくちゃ","","");
		}
		else
		{
			//パリン
			Message(0,"ピエールのとこの","フランソワを探してあげなくちゃ","","");
		}
		kabu = 1;
	}
	if (ch[3964])
	{
		// ファラオかぶってる
		WaitD(0);
		Message(0,"イワオが気になるわ","","","");
		Message(0,"削ってあげようかな","","","");
		kabu = 1;
	}
	if (ch[3965])
	{
		// 鼻眼鏡つけてる
		WaitD(0);
		Message(0,"チャッキーがあのままだと","ホームが危険よね","","");
		Message(0,"なんとかしなくちゃ","","","");
		kabu = 1;
	}
	if (kabu)
	{
		// 何かかぶってた
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		return 0;
	}


	if (!ch[2300])
	{
		// ドリルまだ
		// ストッパー
		WaitD(0);
		Message(0,"ピノが何かしようと","してるみたいね","","");
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
		return 0;
	}

	if (ch[1538])
	{
		// バッドエンド？
		if (ch[1792] != 522133279)
		{
			// すたっふロールへ？
			//ピノ
			ch[400] = 18;
			Look(18,0);
			KaguTest(12000,18);
			Camera(18,-730,-1589,370);
			ch[421] = -730;
			ch[422] = -1589;
			ch[423] = 370;
			KaguTest(30010,0);
//			Camera(-1,0,0,0);
//			ch[420] = -56;
//			ch[421] = -1589;
//			ch[422] = 370;
//			ch[423] = -34;
//			ch[424] = -533;
//			ch[425] = 70;
//			KaguTest(30019,1);
			CrossFade();
			ch[420] = -1;
			Message(18,"姉たま！","","","");

			//※呼びかけて走り寄ってくるピノ
			Look(0,18);
			Walk2(18,0,-16,91);
			ch[429] = 0;
			Camera(-1,0,0,0);
			KaguTest(30039,0);
			ch[420] = -730;
			ch[421] = -1155;
			ch[422] = 465;
			ch[423] = -5;
			ch[424] = -1812;
			ch[425] = 70;
			KaguTest(30093,90);
			KaguTest(30019,14);
			Look(18,0);
			Look(0,18);
			CharPos(0,23,-1886,0);
			Wait(20);
			Look(18,0);
			Look(0,18);
			Wait(20);
			Look(18,0);
			Look(0,18);
			Wait(20);
			Look(18,0);
			Look(0,18);
			Wait(20);
			Look(18,0);
			Look(0,18);
			Wait(10);
			Look(18,0);
			Look(0,18);

			//ピノ
			ch[420] = 18;
			Message(18,"街へ戻るでしゅか？","","","");

			//パリン
			Message(0,"そのつもりだけど……","どうしたの？","","");

			//ピノ
			Message(18,"闇の霧が晴れてないから","まだ外へ出ちゃダメだって","兄たまに言われてるでしゅ","");
			Message(18,"退屈だからピノも","一緒に街へ行くでしゅ","","");

			//パリン
			Message(0,"いいわよ、行こっか","","","");

			//ピノ
			Message(18,"でしゅ！","","","");
			ch[420] = -1;

			ch[420] = -14;
			ch[421] = -1198;
			ch[422] = 525;
			ch[423] = 18;
			ch[424] = -2101;
			ch[425] = 250;
			KaguTest(30093,100);
			//※２人、並んで街の方向へ歩き出す。
			//　そのまま画面ブラックアウト。
			Walk2(18,0,-5,100);
			ch[429] = 0;
			KaguTest(30039,0);
			Walk(0,-5,100);
			Wait(30);
			Black(0,100,60);
			Wait(60);
			KaguTest(30019,0);

			ch[420] = 22;
			KaguTest(12002,18);

			//⇒スタッフロール・バッドエンドバージョンへ
			Mouse(0);
//			Black(0,100,15);
//			Wait(15);
			ch[2300] = 0;
			{
//				LoadMapB(998);
//				SetWaku(1);
//				Black(0,0,0);
//				Mes("バッドエンドスタッフロール予定。");
//				SetWaku(0);

				KaguTest(20066,0);
				PlayMovie("EP_6.txt",0);
				Black(0,100,0);
//				BGM(0);
			}
//			Wait(90);
//			LoadMapB(998);
//			Black(0,100,0);
//			ch[2005] = 1;
//			KaguTest(99999,1);
//			KaguTest(99982,0);
//			ch[298] = 1;
//			KaguTest(99990,0);
//			KaguTest(99998,0);

//			Black(0,100,30);
//			Wait(30);
			TekiStop(0);
			// 終わり
			MapEvent(1);
//			SetWaku(0);
			Reset();
			Mouse(1);
			
			return 0;
		}
		else
		{
			// モトロに話していない
			MapEvent(0);
			WaitD(0);
			Message(0,"今、街に戻る用事はないわ","","","");
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(0,5,20);
			Wait(20);
			MapEvent(1);
		}
		return 0;
	}
	
	if (ch[2300] && !ch[2001])
	{
		ch[2001] = 1;
		MapEvent(0);
		Walk(0,-8,15);
		White(0,100,15);
		Wait(15);
		Event(351);
		Event(1000);
		Wait(5);
		CharPos(15,-150,1940,100);
//		Walk(0,-8,60);
		CharPos(0,-115,2815,250);
		White(0,0,15);
		Wait(15);
//		Wait(60);

		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,0);
		ch[420] = 15;
		KaguTest(30063,0);
		ch[400] = 115;
		ch[424] = -156;
		ch[425] = 2600;
		ch[420] = 1;
		ch[426] = 12;
		KaguTest(30060,15);
		Walk2(15,ch[421]/2,ch[422]/2,ch[423]*2);
		Wait(ch[423]*2);

		//シリンダー
		Message(15,"おや、パリンちゃん、","そのドリルはどうしたんだい？","","");
		//パリン
		Message(0,"いいでしょ、マイドリルよ","","","");
		//シリンダー
		Message(15,"ふむ、ずいぶん古い代物だな。","なかなかシブい趣味をしてるね","","");
		Message(15,"俺は発破職人だけど","機械をいじるのも得意なんだ","","");
		Message(15,"もしよかったら色々と","ドリルのパーツをゆずってあげよう","","");
		//パリン
		Message(0,"ほんと？","","","");
		//シリンダー
		Message(15,"ああ、デートしてくれたら","タダでゆずってもいいよ","","");
		//パリン
		Message(0,"…お金は払うわ","","","");
		//シリンダー
		Message(15,"はっはっ、今度、お茶しながら","ドリルについて語り合わないかい？","","");

		KaguTest(30063,-1);
		
		MMV("teet.mmv");
		MapEvent(1);	
		ch[400] = -1;
		ch[420] = 15;
		ch[421] = 0;
		KaguTest(20044,0);
		ch[421] = 1;
		KaguTest(20044,0);
		ch[421] = 2;
		KaguTest(20044,15);
		ch[421] = 3;
		KaguTest(20044,19);
		ch[421] = 4;
		KaguTest(20044,12);
		ch[421] = 5;
		KaguTest(20044,1);
		return 0;
	}
	
	if (ch[2526] && !ch[2529])
	{
		ch[2529] = 1;
		MapEvent(0);
		Walk(0,-8,15);
		White(0,100,15);
		Wait(15);
		Event(351);
		Event(1000);
		Wait(5);
		CharPos(13,-150,1940,100);
//		Walk(0,-8,20);
		CharPos(0,-115,2815,250);
		White(0,0,15);
		Wait(15);
//		Black(0,0,20);
//		Wait(20);

		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,0);
		ch[420] = 13;
		KaguTest(30063,0);
		ch[400] = 113;
		ch[424] = -156;
		ch[425] = 2600;
		ch[420] = 1;
		ch[426] = 12;
		KaguTest(30060,13);
		Walk2(13,ch[421],ch[422],ch[423]);
		Wait(ch[423]);

		//プレーン
		ch[400] = 13;
		Message(13,"あらあら、パリンちゃん。","ウワサで聞いたわよ","","");
		//パリン
		Message(0,"何のこと？","","","");
		//プレーン
		Message(13,"とぼけてもムダよ","","","");
		Message(13,"あなたのせいで","ショートケーキが値上がりしたんだから","","");
		//パリン
		Message(0,"？？？","","","");
		KaguTest(30063,-1);
		
		MMV("teet.mmv");
		MapEvent(1);	
		ch[400] = -1;
		ch[420] = 13;
		ch[421] = 0;
		KaguTest(20044,0);
		ch[421] = 1;
		KaguTest(20044,0);
		ch[421] = 2;
		KaguTest(20044,15);
		ch[421] = 3;
		KaguTest(20044,19);
		ch[421] = 4;
		KaguTest(20044,12);
		ch[421] = 5;
		KaguTest(20044,1);
		return 0;
	}

	MapEvent(0);
	White(0,100,11);
	Walk(0,-8,11);
	Wait(11);
	
	ch[3997] = 0;
	Event(351);
	Event(1000);
	Wait(5);
	White(0,0,15);
	CharPos(0,-115,2815,250);
	MMV("teet.mmv");
	
//	Scop(0);

	Walk(0,-5,20);
	Wait(20);
	
	MapEvent(1);	
}
#EndScript

// ミニマップ、マップ間移動制御スクリプト
#Script:00930
int main()
{
	ch[398] = 0;

//	ch[1760]
	int a;
	int b;
	int c;
	string sname;

	KaguTest(99997,0);
	a = ch[420];
	c = a;

	// マップ内トラップ変数初期化
	ch[2497]=0;	
	
	ch[2102] = 0;		// 103ドア
	
	// マップ内トラップ変数初期化ここまで
	if (ch[512])
	{
		ch[510] = 1;	// ミニマップに着た事があるをチェック
	}

// デバッグ
	if (ch[3982] == 3)
	{
		// ステージテスト中
	}
// 通常時
	else
	{
		ch[445] = a;
	}
// デバッグここまで

	switch(ch[445])
	{
	case 0:
		// オバケホーム
		a = 0;
		break;
	case 1:
	case 2:
	case 3:
	case 4:
	case 5:
		// ポテト遺跡系
		a = 1;
		break;
	case 6:
	case 7:
	case 8:
	case 9:
	case 10:
		// ラディスの森系
		a = 2;
		break;
	case 11:
	case 12:
	case 13:
	case 14:
	case 15:
		// スピナ洞窟系
		a = 3;
		break;
	case 16:
	case 17:
	case 18:
	case 19:
	case 20:
		// ピメントマウンテン系
		a = 4;
		break;
	case 21:
	case 22:
	case 23:
	case 24:
	case 25:
	case 26:
	case 27:
		// エッグプラント系
		a = 5;
		break;
	case 28:
	case 29:
	case 30:
	case 31:
	case 32:
	case 33:
	case 34:
		// 家　または　何も無いステージ
		a = 6;
		break;
	}
	
	b = a + 25;
	
	if (!ch[512] && ch[1545] && a != 0 && a != 6)
	{
		// オバケホームに急げ
		Message(0,"寄り道してる暇は無いわ。","オバケホームに急がなくちゃ","","");
		return 0;
	}
	
	if (a == 0)
	{
		// オバケホーム
		ch[50] = 1;
		
		if (ch[50] == 1) 
		{

			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			if (ch[2546])
			{
				LoadMapB(401);
			}
			else
			{
				Event(500);
			}
			
			ch[1107] = 2275;
			if (!ch[512] && ch[2062])
			{
				// 壊されたイベント
//				ch[3982] = 4;
				ResetFade();
				ch[512]=1;
				SetWaku(0);
				Mouse(0);
				PlayMovie("home_1.txt",0);
				Black(0,100,0);
				Wait(5);
//				Black(0,0,15);
				Walk(0,-5,1);
				KaguTest(30057,0);
				Mouse(1);
//				BGM(5);
				LoadMap(401);
				CharPos(0,-150,1100,0);
				Wait(5);
				Walk(0,-5,1);
				KaguTest(30057,0);
				Black(0,100,0);
				Black(0,0,30);
				ResetFade();
				ch[3983] = 0;
				MapEvent(1);

				return 0;
			}
//			if (!ch[1516] && ch[528])
//			{
//				ResetFade();
//				PostScr(407);
//				return 0;
//			}

			if (ch[2265] && !ch[2524])
			{
				// スポンサーイベント
				Black(0,100,0);
				Camera(0,-2600,-50,370);
				ch[421] = -2600;
				ch[422] = -50;
				ch[423] = 370;
				KaguTest(30010,0);
				Camera(-1,0,0,0);
				Wait(5);
				CharPos(17,-50,1200,0);
				ch[400] = 117;
				Walk2(17,0,12,35);
				ch[429] = 0;
				KaguTest(30039,0);
				Walk(0,-5,20);
				KaguTest(30057,0);
				Wait(5);
				Black(0,0,15);
				Wait(15);
				ch[420] = 15;
				ch[421] = 30;
				ch[429] = 1;
				KaguTest(30053,0);
				PostScr(62);
				return 0;
			}

			if (ch[2546])
			{
				// お別れムービー
				int tobu;
				KaguTest(99993,0);	// クリアフラグチェック
				if (ch[420] || ch[421] || ch[422])
				{
					tobu = 1;
				}
				else
				{
					tobu = 0;
				}
				Mouse(0);
				Black(0,100,15);
				Wait(15);
//				ch[2300] = 0;
				ch[2036] = 1;
				int movi;
//				KaguTest(20066,0);
//				movi = PlayMovie("EP_3.txt",tobu);
				movi = PlayMovie("EP_3a.txt",tobu);
				KaguTest(100000,0);
				if (movi)
				{
					movi = PlayMovie2("EP_3b.txt",tobu);
					KaguTest(100000,0);
				}
//				if (ch[2501] == 6)
				{
					KaguTest(20070,0);
//					ch[2501] = 0;
				}
				// 頭装備はずす
				ch[2300] = 0;	// ドリルはずす
				KaguTest(20008,0);
				if (ch[430])
				{
					Soubi(ch[430]);
				}
				// コスチュームで装備品変えてみる
//				if (ch[2501] == 0)
//				{
//					// ノーマルパリン：ゴーグル
//					Soubi(41);
//				}
//				if (ch[2501] == 1)
//				{
//					// さるパリン：さる帽子持ってたら装備
//					KaguTest(20001,56);
//					if (ch[430])
//					{
//						Soubi(56);
//					}
//				}
//				if (ch[2501] == 2)
//				{
//					// ぱじゃまパリン：ナイトキャップ持ってたら装備
//					KaguTest(20001,57);
//					if (ch[430])
//					{
//						Soubi(57);
//					}
//				}
//				if (ch[2501] == 3)
//				{
//					// ちゃいなパリン：おだんご持ってたら装備
//					KaguTest(20001,61);
//					if (ch[430])
//					{
//						Soubi(61);
//					}
//				}
//				if (ch[2501] == 4)
//				{
//					// ゴスロリパリン：ヘッドドレス持ってたら装備
//					KaguTest(20001,37);
//					if (ch[430])
//					{
//						Soubi(37);
//					}
//				}
//				if (ch[2501] == 5)
//				{
//					// 制服パリン：ネコミミ持ってたら装備
//					KaguTest(20001,40);
//					if (ch[430])
//					{
//						Soubi(40);
//					}
//				}
				SetWaku(1);

				if (movi)
				{
					movi = PlayMovie2("EP_4_3.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_10.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_4.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_7.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_9.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_5.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_8.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_6.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_2.txt",tobu);
					KaguTest(100000,0);
				}
				if (movi)
				{
					movi = PlayMovie2("EP_4_1.txt",tobu);
					KaguTest(100000,0);
				}

				PlayMovie2("EP_5b.txt",tobu);

				KaguTest(99999,1);
//				LoadMapB(998);

				CharPos(0,-200000,0,0);
				Black(0,0,10);
				Wait(10);

				KaguTest(10006,0);
				KaguTest(10007,7);
				KaguTest2(10009,0,"bdend21.iti");
				ch[423] = 192;
				ch[424] = 112;
				ch[425] = 448;
				ch[426] = 368;
				ch[427] = 0;
				ch[428] = 0;
				ch[429] = 256;
				ch[430] = 256;
				ch[431] = 256;
//				SE(399);
				KaguTest(10010,30);
				Wait(30);
				Message(0,"","","","");
				ch[420] = 0;
				KaguTest(10011,30);
				Wait(30);
				Black(0,100,15);
				Wait(15);
				Black(0,100,0);
				KaguTest(99998,0);
				LoadMapB(998);

				// マルチ
//				if (ch[1792] == 522133279)
				if (ch[3961])
				{
					// クレイジー
					KaguTest(100000,0);
					PlayMovie("EP_5.txt",tobu);
				}

				BGM(0);
				Mouse(1);
				SetWaku(1);
				LoadMapB(998);
				Black(0,100,0);
				Black(0,0,10);
				KaguTest(99993,0);
				int f;
				switch(ch[455])
				{
				case 0:
					f = 1;
					break;
				case 1:
					f = 0;
					break;
				case 2:
					f = 2;
					break;
				}
				if (ch[3961]==1)
				{
					f = 5;
				}
				if (ch[3961]==2)
				{
					f = 10;
				}
				SetWaku(1);
				CharPos(0,-200000,0,0);
				Black(0,0,15);
				Wait(15);
				if (!ch[420 + f])
				{
					SE(564);
					KaguTest2(10008,0,"新しいコスチュームが追加されました。");
					KaguTest2(10008,1,"クローゼットで着替えることが出来ます。");
					KaguTest(20000,90);
					Wait(105);
				}
				if (f < 2 && !ch[421] && !ch[420])
				{
					// ハードモード追加
					SE(516);
					KaguTest2(10008,0,"Ｈａｒｄモードが追加されました。");
					KaguTest2(10008,1,"");
					KaguTest(20000,90);
					Wait(105);
				}
				if (f == 2 && !ch[422] && ch[421])
				{
					// ハードモード追加
					SE(516);
					KaguTest2(10008,0,"Ｐｌｅａｓｕｒｅモードが追加されました。");
					KaguTest2(10008,1,"");
					KaguTest(20000,90);
					Wait(105);
				}
				if (f == 5 && !ch[425])
				{
					// ハードモード追加
					SE(516);
					KaguTest2(10008,0,"Ｃｒａｚｙモードが追加されました。");
					KaguTest2(10008,1,"");
					KaguTest(20000,90);
					Wait(105);
				}
				if (!ch[426])
				{
					// アイテム辞典追加
					SE(515);
					KaguTest2(10008,0,"タイトルにアイテム辞典が追加されました。");
					KaguTest2(10008,1,"");
					KaguTest(20000,90);
					Wait(105);
				}
				if (!ch[3960])
				{
					// 二週目用クエスト追加
					SE(514);
					KaguTest2(10008,0,"サブクエストが追加されました。");
					KaguTest2(10008,1,"");
					KaguTest(20000,90);
					Wait(105);
				}

				KaguTest2(10008,0,"クリアデータをロードすると一部の");
				KaguTest2(10008,1,"データを引き継いでプレイできます。");
				KaguTest(20000,90);
				Wait(105);

				ch[2005] = 1;
				KaguTest(99994,0);
				KaguTest(99999,1);
				KaguTest(99982,0);
				ch[298] = 1;
				KaguTest(99990,0);
				KaguTest(99998,0);
				LoadMapB(998);
				CharPos(0,-200000,0,0);
				
//				if (!ch[3960])
//				{
//					Black(0,0,15);
//					Wait(15);
////					KaguTest(10006,0);
////					KaguTest(10007,0);
////					KaguTest2(10008,0,"クリアデータをロードすると");
////					KaguTest2(10008,1,"一部のデータを引き継いで");
////					KaguTest2(10008,2,"プレイすることが出来ます");
////					KaguTest(10010,10);
////					Wait(120);
////					KaguTest(10011,10);
//				}

				Black(0,100,30);
				Wait(30);
				TekiStop(0);
				// 終わり
				MapEvent(1);
				SetWaku(0);
//				KaguTest(20066,0);
				SetWaku(0);
				Reset();
				
				return 0;
			}

			TekiStop(1);

			Black(0,100,0);
			Camera(0,-2600,-50,370);
			ch[421] = -2600;
			ch[422] = -50;
			ch[423] = 370;
			KaguTest(30010,0);
			Camera(-1,0,0,0);
			Wait(5);
			Walk(0,-5,20);
			KaguTest(30057,0);
			Wait(5);
			Black(0,0,15);
			Wait(15);
			MMV("home.mmv");
			
			TekiStop(0);
			MapEvent(1);
			ch[1760] = c;

			return 0;
		}
	}
	if (a == 1)
	{
		// ポテト遺跡
		ch[50] = ch[445];
		
		if (ch[50] == 1)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(501);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,111);
			
			if (!ch[1543])
			{
				Mouse(0);
				PlayMovie("isk_1_1.txt",0);
				Black(0,100,0);
				Wait(5);
//				Black(0,0,15);
				Walk(0,5,1);
				KaguTest(30057,0);
				Mouse(1);
//				BGM(17);
				CharPos(19,-200000,0,0);
				Black(0,0,30);
				ch[1543] = 1;
				Wait(15);
//				MMV(StageMMV(b));
				Walk(0,5,1);
				KaguTest(30057,0);
				TekiStop(0);
				MapEvent(1);
				return 0;
			}

			TekiStop(1);

			Black(0,0,15);
			
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
			
//			MMV(StageMMV(b));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 2)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(512);

			TekiStop(1);

			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,102);
			
			if (!ch[2504])
			{
				ch[2504] = 1;
				Mouse(0);
				PlayMovie("isk_2_1.txt",0);
				Mouse(1);
//				BGM(17);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,5,1);
				KaguTest(30057,0);
				Wait(1);

//				MMV(StageMMV(b));
				
				TekiStop(0);
				MapEvent(1);

				return 0;
			}
			
			Black(0,0,15);
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
			
//			MMV(StageMMV(b));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 3)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(511);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,105);

			if (!ch[2505])
			{
				ch[2505] = 1;
				Mouse(0);
				PlayMovie("isk_3_1.txt",0);
				Mouse(1);
//				BGM(17);
				CharPos(17,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,5,1);
				KaguTest(30057,0);
				Wait(1);

				KaguTest(10600,ch[1107]-2260);
				MMV(StageMMV(ch[420]));

//				MMV(StageMMV(ch[1107]-2260));
				MapEvent(1);
				return 0;
			}

			Black(0,0,15);
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);

			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));

//			MMV(StageMMV(ch[1107]-2260));
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 4)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1511);

			TekiStop(1);

			if (!ch[2625])
			{
//				PlayMovie("poko0.txt",0);
				ch[2625] = 1;
//				LoadMap(109);
				CharPos(0,0,850,0);
			}

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1102);
			
			Walk(0,-5,20);
			KaguTest(30057,0);
			Wait(20);
//			MMV(StageMMV(ch[1107]-2260));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 5)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1501);

			TekiStop(1);

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1112);
			
			Walk(0,-5,20);
			KaguTest(30057,0);
			Wait(20);
//			MMV(StageMMV(ch[1107]-2260));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
	}
	if (a == 2)
	{
		// ラディスの森

		ch[50] = ch[445] - 5;
		
		if (ch[50] == 1)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(502);
//			if (!ch[1500])
//			{
//				KaguTest2(30010,0,"futa");
//			}

			TekiStop(1);

			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,501);
			
			if (!ch[2506])
			{
				ch[2506] = 1;
				Mouse(0);
				PlayMovie("mri_1_1.txt",0);
				Black(0,100,0);
				Mouse(1);
//				BGM(21);
				CharPos(18,-200000,0,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,5,1);
				KaguTest(30057,0);
				Wait(1);
//				MMV(StageMMV(b));

				TekiStop(0);
				MapEvent(1);
				return 0;
			}
			
			Black(0,0,15);
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
			
//			MMV(StageMMV(b));

			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 2)
		{			
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(521);
			MapEvent(0);
			
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,503);
			if (!ch[2507])
			{
				ch[2507] = 1;
				Mouse(0);
				PlayMovie("mri_2_1.txt",0);
				Mouse(1);
				KaguTest(20031,1);
				ch[420] = 0;
				KaguTest(20045,ch[421]);
//				BGM(20);
				CharPos(19,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,8,1);
				KaguTest(30057,0);
				Wait(1);
//				MMV(StageMMV(ch[1107]-2260));

				TekiStop(0);
				MapEvent(1);
				return 0;
			}
			
			Black(0,0,15);
			Walk(0,8,15);
			KaguTest(30057,0);
			KaguTest(20031,1);
			ch[420] = 0;
			KaguTest(20045,ch[421]);
			Wait(15);

//			MMV(StageMMV(ch[1107]-2260));
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 3)
		{			
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(522);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,505);
			if (!ch[2508])
			{
				ch[2508] = 1;
				Mouse(0);
				PlayMovie("mri_3_1.txt",0);
				Mouse(1);
//				BGM(20);
				CharPos(12,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,8,1);
				KaguTest(30057,0);
				Wait(1);

				KaguTest(10600,ch[1107]-2260);
				MMV(StageMMV(ch[420]));

//				MMV(StageMMV(ch[1107]-2260));

				TekiStop(0);
				MapEvent(1);
				return 0;
			}

			Walk(0,8,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);

			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));

//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 4)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1502);
			MapEvent(0);

			if (!ch[2627])
			{
				//PlayMovie("pie0.txt",0);
				LoadMap(506);
				CharPos(0,0,1075,0);
				ch[2627] = 1;
			}
			
			Black(0,0,15);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1504);

			Walk(0,-8,15);
			KaguTest(30057,0);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 5)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1521);
			MapEvent(0);
			
			Black(0,0,15);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1502);

			Walk(0,-8,15);
			KaguTest(30057,0);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
	}
	if (a == 3)
	{
		//スピナ洞窟

		ch[50] = ch[445] - 10;
		
		if (ch[50] == 1)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(503);
			
//			if (ch[512] && !ch[1500])
//			{
//				// 石版フラッシュ
//				ResetFade();
//				PlayMovie("pflush0.txt",0);
////				LoadMap(401);
//				LoadMap(208);
//				Black(0,100,0);
//				ResetFade();
//				Wait(30);
						
//				ch[1500] = 1;
//				ch[442]=1;
//				ch[3983]=0;
				
//				MapEvent(1);

//				KaguTest(10100,0);
//				KaguTest(99999,0);
//				TekiStop(0);
//				MapEvent(1);
//				return 0;
//			}
//			if (ch[1542] && !ch[1502])
//			{
//				// 石版壊し
//				Black(0,100,15);
//				Wait(15);
//				
//				KaguTest(99998,0);
////				Event(531);
//				KaguTest(40001,201);
//				ch[1760] = c;
//			
//				MapEvent(1);
//				Event(301);
//				return 0;
//			}

			ch[1760] = c;
			TekiStop(1);

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,201);

			if (!ch[2514])
			{
				// 岩でふさがれるムービー
				Mouse(0);
				PlayMovie("dkt_1_1.txt",0);
				Mouse(1);
//				BGM(23);
				ch[2514] = 1;
				LoadMap(208);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(-5,0,1);
				KaguTest(30057,0);
				Wait(1);
//				MMV(StageMMV(b));
				
				TekiStop(0);
				MapEvent(1);
				
				return 0;
			}
			
			Black(0,0,15);
			Walk(-5,0,20);
			KaguTest(30057,0);
			Wait(20);
//			MMV(StageMMV(b));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 2)
		{
			// 203から
			if (ch[2498] > 990)
			{
				ch[2498] = 990;
			}

			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			KaguTest(99998,0);
			Event(531);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,203);
			
			if (!ch[2518])
			{
				Mouse(0);
				PlayMovie("dkt_2_1.txt",0);
				ch[420] = 216;
				ch[421] = -111;
				ch[422] = 10;
				ch[423] = 90;
				ch[424] = -30;
				KaguTest2(30020,0,"O_028but.it3");
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,5,1);
				KaguTest(30057,0);
				Mouse(1);
//				BGM(23);
			}
			else
			{
				ch[420] = 216;
				ch[421] = -111;
				ch[422] = 10;
				ch[423] = 90;
				ch[424] = -30;
				KaguTest2(30020,0,"O_028but.it3");
			}
			ch[102] = 1;

//			ch[420] = 216;
//			ch[421] = -111;
//			ch[422] = 10;
//			ch[423] = 90;
//			ch[424] = -30;
//			KaguTest2(30020,0,"O_028buk.it3");
////			KaguTest2(30014,3,"@O_028cbox");
			
			if (!ch[2518])
			{
				ch[2518] = 1;
				
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,5,1);
				KaguTest(30057,0);
//				MMV(StageMMV(ch[1107]-2260));
				Wait(15);

				TekiStop(0);
				MapEvent(1);
				return 0;
			}
			
//			if (ch[2518] && !ch[2534])
//			{
//				// レバーの色を変える
//				ch[420] = 30;
//				ch[421] = 30;
//				ch[422] = 30;
//				KaguTest(20049,93);
//				KaguTest(20050,0);
//			}

			Walk(0,5,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 3)
		{			
			MapEvent(0);
			
			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(532);
			Camera(-1,0,0,0);

			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,206);
			
			if (!ch[2519])
			{
				Mouse(0);
				PlayMovie("dkt_3_1.txt",0);
				Mouse(1);
//				BGM(23);
				CharPos(17,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(-1,0,15);
				KaguTest(30057,0);

				KaguTest(10600,ch[1107]-2260);
				MMV(StageMMV(ch[420]));

//				MMV(StageMMV(ch[1107]-2260));
				
				ch[2519] = 1;
				MapEvent(1);
				return 0;
			}

			Black(0,0,15);
			Walk(-5,0,15);
			KaguTest(30057,0);
			Wait(15);

			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));

//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 4)
		{
			// 205裏から
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1503);
			ch[1760] = c;
			
			if (!ch[2629])
			{
				//PlayMovie("kyuta0.txt",0);
				LoadMap(210);
				CharPos(0,1200,0,0);
				ch[2629] = 1;
			}

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1205);

			Walk(-5,0,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 5)
		{
			// 202裏から
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1531);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1202);

			Walk(0,-5,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
	}
	if (a == 4)
	{
		// ピメントマウンテン

		ch[50] = ch[445] - 15;

		if (ch[50] == 1)
		{
			//
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
				
			KaguTest(99998,0);
			Event(506);
			Event(301);

//			if (ch[1508])
			{
				// ストッパー消す
				KaguTest2(30014,0,"@stopper");
				KaguTest2(30014,3,"@CAstopperA");
			}
//			else
//			{
//				// ストッパー出す
//				KaguTest2(30014,1,"@stopper");
//				KaguTest2(30014,2,"@CAstopperA");
//			}

			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,601);
			
			if (!ch[2520] && ch[2527])
			{
				// ムービー
				ch[3981] = 1;
				Mouse(0);
				PlayMovie("yam_1_1.txt",0);
				Black(0,100,0);
				Mouse(1);
//				BGM(26);
				ch[3981] = 0;
				CharPos(19,-200000,0,0);
				CharPos(17,-200000,0,0);
				TekiStop(1);
				LoadMap(601);
				Event(350);
//				MapEvent(1);
//				LoadMap(601);
//				CharPos(0,4725,-1250,-600);
//				Black(0,0,15);
//				Walk(-1,0,1);
//				KaguTest(30057,0);
////			MMV(StageMMV(b));
//				TekiStop(1);
//				
//				MapEvent(1);
//				TekiStop(0);
//				Wait(5);
//				TekiStop(1);
//				ch[2520] = 1;
				return 0;
			}

			Black(0,0,15);
			Walk(-5,0,20);
			KaguTest(30057,0);
			Wait(20);
//			MMV(StageMMV(b));
			TekiStop(1);
			
			MapEvent(1);

			// 敵ストップ解除は後
			TekiStop(0);
			Wait(5);
			TekiStop(1);
			
			return 0;
		}
		if (ch[50] == 2)
		{			
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(561);
			if (ch[2533])
			{
				Event(156);
			}
			else
			{
				Event(155);
			}
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,604);

			if (!ch[2521])
			{
				Mouse(0);
				PlayMovie("yam_2_1.txt",0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,-5,1);
				KaguTest(30057,0);
				Mouse(1);
//				BGM(26);
				Black(0,0,15);
				Wait(15);
				ch[2521] = 1;
//				MMV(StageMMV(ch[1107]-2260));

				MapEvent(1);
				return 0;
			}
			
			if (ch[2521] && !ch[2534])
			{
				// レバーの色をかえる
				KaguTest(20050,0);
			}

			Walk(0,-5,15);
			KaguTest(30057,0);

			if (!ch[2533] && ch[2534])
			{
				ch[2533] = 1;
				ch[420] = 250;
				ch[421] = -150;
				KaguTest(30070,14);
				ch[400] = 114;
				ch[420] = 100;
				KaguTest(30103,14);
				PostScr(1152);
			}

			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 3)
		{			
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(562);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,606);

			if (!ch[2535])
			{
				Mouse(0);
				PlayMovie("yam_3_1.txt",0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				KaguTest(30057,0);
				Mouse(1);
//				BGM(26);
				CharPos(12,-200000,0,0);
				ch[2535] = 1;
			}

			Walk(0,5,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);

			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));

//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 4)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
				
			KaguTest(99998,0);
			Event(1506);
			ch[1760] = c;

			if (!ch[2631])
			{
				//PlayMovie("iwao0.txt",0);
//				LoadMap(605);
//				CharPos(0,0,8450,5400);
				ch[2631] = 1;
			}

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1605);

			Walk(0,-5,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 5)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
				
			KaguTest(99998,0);
			Event(1561);
			Event(155);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1603);

			Walk(0,5,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
	}
	if (a == 5)
	{
		// エッグプラント

		ch[50] = ch[445] - 20;

		if (ch[50] == 1)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(505);

			TekiStop(1);
			
//			if (ch[1516] && !ch[1507])
//			{
//				ResetFade();
//				PlayMovie("pflush2.txt",0);
//				Black(0,100,0);
//				ResetFade();
//				
//				Wait(15);
//				
//				ch[1507] = 1;
//				ch[1508] = 1;
//				ch[3983] = 0;
//				ch[442] = 1;
//				
//				MapEvent(1);
//				
//				KaguTest(10100,0);
//				KaguTest(99999,0);
//				TekiStop(0);
//				MapEvent(1);
//				return 0;
//			}
//			if (ch[1509] && !ch[1510])
//			{
//				ResetFade();
//				PlayMovie("skowa2.txt",0);
//				Black(0,100,0);
//				ResetFade();
//				ch[1510] = 1;
//				ch[1511] = 1;
//				LoadMap(309);
//				
//				Wait(15);
//			
//				MapEvent(1);
//				Black(0,0,30);
//				TekiStop(0);
//				return 0;
//			}
			
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,301);

			if (!ch[2536])
			{
				Mouse(0);
				PlayMovie("kdo_1_1.txt",0);
				Mouse(1);
//				BGM(29);
				ch[2536] = 1;
				CharPos(17,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(0,5,5);
				KaguTest(30057,0);
				Wait(5);

				KaguTest(10600,ch[1107]-2260);
				MMV(StageMMV(ch[420]));

//				MMV(StageMMV(b));
				TekiStop(0);
				MapEvent(1);
				
				return 0;
			}
			
			Black(0,0,15);
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
//			MMV(StageMMV(b));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 2)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(551);
			ch[1760] = c;
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,304);

			if (!ch[2537])
			{
				Mouse(0);
				PlayMovie("kdo_2_1.txt",0);
				Mouse(1);
//				BGM(29);
				LoadMap(311);
				ch[2537] = 1;
				CharPos(17,-200000,0,0);
				CharPos(19,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(5,0,5);
				KaguTest(30057,0);
				Wait(5);

				KaguTest(10600,ch[1107]-2260);
				MMV(StageMMV(ch[420]));

//				MMV(StageMMV(b));
				TekiStop(0);
				MapEvent(1);
				
				return 0;
			}

			Walk(5,0,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 3)
		{			
			// エッグボス
			MapEvent(0);

			// デバッグ
//			if (ch[3982] == 3)
//			{
//			}
//			else
//			{
//				KaguTest(99991,620);
//				Wait(120);
//			}
			//デバッグここまで

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(552);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,306);

			if (!ch[2538])
			{
				Mouse(0);
				PlayMovie("kdo_3_1.txt",0);
				Mouse(1);
//				BGM(29);
				ch[2538] = 1;
				LoadMap(310);
//				CharPos(17,-200000,0,0);
				Black(0,100,0);
				Wait(5);
				Black(0,0,15);
				Walk(5,0,5);
				KaguTest(30057,0);
				Wait(5);
//				MMV(StageMMV(b));
				TekiStop(0);
				MapEvent(1);

//				Mes("バリア破壊操作予定。");
//				Wait(60);
//				ch[300] = 1;
//				ch[301] = 1;
//				ch[302] = 1;
//				ch[303] = 1;
//				Event(504);
				return 0;
			}

			if (ch[2540])
			{
				KaguTest2(30014,0,"@crroot");
			}

			Walk(5,0,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 4)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1505);
			ch[1760] = c;
			
//			if (!ch[2633])
//			{
//				PlayMovie("puku0.txt",0);
//				LoadMap(305);
//				CharPos(0,-5150,2475,0);
				ch[2633] = 1;
//			}
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1305);
			Walk(5,0,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);

//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			KaguTest2(30014,0,"@crroot");
			return 0;
		}
		if (ch[50] == 5)
		{
			MapEvent(0);
			ch[2497] = 1;

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(1551);
			Walk(5,0,15);
			ch[1760] = c;
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1302);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);

			
			return 0;
		}
		if (ch[50] == 6)
		{			
			MapEvent(0);

			// デバッグ
//			if (ch[3982] == 3)
//			{
//			}
//			else
//			{
//				KaguTest(99991,620);
//				Wait(120);
//			}
			//デバッグここまで

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			ch[2497] = 1;
			Event(1552);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,1308);
			Walk(0,5,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);
//			MMV(StageMMV(ch[1107]-2260));
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));

			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 7)
		{			
			// グレートファング
			MapEvent(0);

			// デバッグ
//			if (ch[3982] == 3)
//			{
//			}
//			else
//			{
//				KaguTest(99991,620);
//				Wait(120);
//			}
			//デバッグここまで

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(553);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,307);
			Walk(-5,0,15);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(15);

			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));

//			MMV(StageMMV(ch[1107]-2260));

			MapEvent(1);
			
			return 0;
		}
	}
	if (a == 6)
	{
		// 家
		ch[50] = ch[445] - 27;
		ch[2497] = 0;
		
		if (ch[50] == 1)
		{
			// 家１
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(571);

			TekiStop(1);

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,21);
			
			Walk(-5,0,20);
			KaguTest(30057,0);
			Wait(20);
			
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			
			TekiStop(0);
			MapEvent(1);
	
			return 0;
		}
		if (ch[50] == 2)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(572);

			TekiStop(1);

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,22);

//			if (ch[2521] && !ch[2534])
			if (!ch[2534])
			{
				ch[400] = 114;
				ch[420] = 1000;
				ch[421] = -635;
				KaguTest(30070,14);
			}
			
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
			
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 3)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(573);
			Black(0,0,15);
			ch[1760] = c;

			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,23);

			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);

			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 4)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(574);
//			KaguTest(20066,0);

			TekiStop(1);

			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,24);
			
			if (ch[1538] && !ch[2546])
			{
				int tobu;
				KaguTest(99993,0);	// クリアフラグチェック
				if (ch[420] || ch[421] || ch[422])
				{
					tobu = 1;
				}
				else
				{
					tobu = 0;
				}
				ch[2546] = 1;
				Mouse(0);
				ch[1759] = 0;
				KaguTest(20065,-1);
				PlayMovie("EP_2.txt",tobu);
				TekiStop(0);
				MapEvent(1);
				LoadMapB(999);
				KaguTest(99985,0);
				PostScr(930);
				return 0;
				
//				Mouse(1);
//				Black(0,0,15);
//				KaguTest(10600,ch[1107]-2260);
//				MMV(StageMMV(ch[420]));
//				
//				TekiStop(0);
//				MapEvent(1);
//				return 0;
			}
			
			Walk(-5,0,20);
			KaguTest(30057,0);
			Black(0,0,15);
			Wait(20);
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		// 何も無いステージ（池）
		if (ch[50] == 5)
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(575);
			
			// ボス設定？
			int x;
			int y;
			int z;
			GetCharPos(58,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,58);
				ch[420] = 98;
				KaguTest(12002,58);
				ch[420] = 0;
				KaguTest(12009,58);
				ch[420] = 58;
				ch[421] = 15;
				KaguTest(20044,40);
				ch[421] = 2;
				KaguTest(20044,8);
			}
			// はと設定？
			GetCharPos(59,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,59);
				ch[420] = 98;
				KaguTest(12002,59);
				ch[420] = 0;
				KaguTest(12009,59);
				ch[420] = 59;
				ch[421] = 15;
				KaguTest(20044,40);
				ch[421] = 2;
				KaguTest(20044,8);
			}


			TekiStop(1);

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,25);
			
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 6)//（噴水）
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(576);

			// ボス設定？
			int x;
			int y;
			int z;
			GetCharPos(58,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,58);
				ch[420] = 98;
				KaguTest(12002,58);
				ch[420] = 0;
				KaguTest(12009,58);
				ch[420] = 58;
				ch[421] = 15;
				KaguTest(20044,40);
				ch[421] = 2;
				KaguTest(20044,6);
			}
			GetCharPos(59,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,59);
				ch[420] = 98;
				KaguTest(12002,59);
				ch[420] = 0;
				KaguTest(12009,59);
				ch[420] = 59;
				ch[421] = 15;
				KaguTest(20044,40);
				ch[421] = 2;
				KaguTest(20044,0);
			}
			GetCharPos(60,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,60);
				ch[420] = 98;
				KaguTest(12002,60);
				ch[420] = 0;
				KaguTest(12009,60);
				ch[420] = 60;
				ch[421] = 15;
				KaguTest(20044,40);
				ch[421] = 2;
				KaguTest(20044,4);
			}

			TekiStop(1);

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,26);
			
			if (ch[2056])
			{
				Walk(0,5,20);
				KaguTest(30057,0);
				Wait(20);
			}
			else
			{
				Walk(0,5,1);
				KaguTest(30057,0);
			}
			
			// ピノイベント
			if (!ch[2056])
			{
				// ピノイベントまだ
				PostScr(1451);
				return 0;
			}
			
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
		if (ch[50] == 7)//（公園）
		{
			MapEvent(0);

			Black(0,100,15);
			Wait(15);
			
			KaguTest(99998,0);
			Event(577);
			// ボス設定？
			int x;
			int y;
			int z;
			GetCharPos(60,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,60);
				ch[420] = 22;
				KaguTest(12002,60);
//				ch[420] = 0;
//				KaguTest(12009,60);
//				ch[420] = 60;
//				ch[421] = 15;
//				KaguTest(20044,40);
//				ch[421] = 2;
//				KaguTest(20044,106);
			}

			TekiStop(1);

			Black(0,0,15);
			ch[1760] = c;
			
			// クリア評価用のフラグとかセットアップ
			KaguTest(40001,27);
			
			Walk(0,5,20);
			KaguTest(30057,0);
			Wait(20);
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
			
			TekiStop(0);
			MapEvent(1);
			
			return 0;
		}
	}

//	ch[399] = 1;

	return 0;
}
#EndScript

// 105 ボスムービー
#Script:00931
int main()
{
	if (!ch[507])
	{
		KaguTest(20065,43);
		Mouse(0);
		PlayMovie("isk_3_2.txt",ch[509]);
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(0,5,1);
		KaguTest(30057,0);
		Mouse(1);
//		BGM(19);
		ch[509] = 1;
	}
	else
	{
		Walk(0,5,11);
		Wait(11);
//		Black(0,100,30);
//		Wait(30);
		Event(600);
		BGM(43);
		Wait(30);
		
	}
	SetSavePos2(109,0,0,0);
	ch[1095] = 109;

	// ムービーで本体が呼ばれてるらしい。救援措置	
	KaguTest(20020,0);
	CharPos(28,-200000,0,0);
	CharPos(ch[425],0,0,0);
	CharPos(ch[425] + 1,0,0,0);
	CharPos(0,0,-500,0);
	if (!ch[507])
	{
		CharPos(6,0,1850,120);
	}
	KaguTest(10600,ch[1107]-2260);
//	MMV(StageMMV(ch[420]));
	MMV("boss01.mmv");

//	if (ch[507])
	{
		Black(0,0,30);
		Wait(30);
	}
}
#EndScript

// 103:あたりに触れたら敵反応する
#Script:00932
int main()
{
	ch[300] = 1;
	TekiStop(1);
	SaveCamera();
	
	// カメラをスカートスライムに向ける
	ch[420] = 1667;
	ch[421] = -897;
	ch[422] = 125;
	ch[423] = 1500;
	ch[424] = 420;
	ch[425] = 220;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	// スカートスライム出現
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,3);
	if(!ch[380])
	{
		ch[420] = 100000;
		ch[427] = 7;
		KaguTest(30015,2);
		KaguTest(30025,2);
		Look(ch[420],0);
		Look(ch[420]+1,0);
	}
	Walk(0,5,5);
	Wait(45);
	// スカートスライム支持
	KaguTest(30025,3);
	ch[422] = ch[420];
	ch[420] = 750;
	ch[421] = -425;
	KaguTest(30070,ch[422]);
	KaguTest(30025,3);
	Walk2(ch[420],-3,-3,10);
	Wait(15);
	ch[421] = ch[420];
	ch[420] = 15;
	ch[428] = 0;
	ch[429] = 1;
	KaguTest(30036,ch[421]);
	Wait(45);

	// カメラをきのこスライムに向ける
	ch[420] = 1986;
	ch[421] = -515;
	ch[422] = 0;
	ch[423] = 836;
	ch[424] = -537;
	if (ch[380])
	{
		ch[422] = 320;
		ch[425] = 0;
	}
	else
	{
		ch[425] = 745;
	}
	KaguTest(30019,1);
	CrossFade();
	if(ch[380])
	{
		ch[420] = 100000;
		ch[427] = 7;
		KaguTest(30015,2);
		KaguTest(30025,2);
		Look(ch[420],0);
		Look(ch[420]+1,0);
	}
	Wait(30);
	// きのこスライム飛び降りる
	KaguTest(30025,2);
	
	if (ch[380])
	{
		Wait(30);
	}
	else
	{
		Walk2(ch[420],8,0,20);
		ch[421] = 30;
		ch[422] = 1;
		KaguTest(30037,ch[420]);
		Wait(20);
		// きのこスライム飛び降りる
		Walk2(ch[420]+1,8,-8,20);
		ch[422] = 1;
		KaguTest(30037,ch[420]+1);
		Wait(50);
	}
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	KaguTest(30025,1);
	ch[423] = ch[420];
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,ch[423]);
	KaguTest(30025,2);
	ch[423] = ch[420];
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,ch[423]);
	KaguTest(30090,ch[423]+1);
	KaguTest(30025,3);
	ch[423] = ch[420];
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,ch[423]);
	Wait(30);
	
	TekiStop(0);
}
#EndScript

// ファイア拾う
#Script:00933
int main()
{
	TekiStop(1);
	ch[420] = 400;
	Event(1201);
	KaguTest2(30025,0,"@ksk05_121");
	KaguTest(20068,3);
	GetItem(3);
	Mes("『火のパーツ』を手に入れた。");
	SE(956);
//	Soubi(3);
	Wait(60);
	ch[2151]=1;

	if (!ch[2105])
	{
		ch[2105] = 1;
		// チュートリアル表示
		KaguTest(10006,0);
		KaguTest(10007,7);
		KaguTest2(10009,0,"tute_14.bmp");
		ch[423] = 180;
		ch[424] = 42;
		ch[425] = 460;
		ch[426] = 438;
		ch[427] = 0;
		ch[428] = 0;
		ch[429] = 320;
		ch[430] = 452;
		ch[431] = 512;
		SE(399);
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		ch[420] = 0;
		KaguTest(10011,10);
		Wait(10);
	}
	
	TekiStop(0);
}
#EndScript

// 208 -> ミニマップ or 208 -> クリア
#Script:00934
int main()
{
	if (ch[2497])
	{
		// クリア
		if (ch[2280] < 1)
		{
			// 初回クリアなので家具持ってるかチェック
//			KaguTest(20001,70);
//			if (!ch[430])
//			{
//				TekiStop(1);
//				MapEvent(0);
//				Message(0,"まだチャッキーに頼まれた家具を","見つけてないわ","","");
//				KaguTest(30058,0);
//				while(ch[420])
//				{
//					Walk(ch[421],ch[422],ch[423]);
//					Wait(ch[423]);
//					KaguTest(30058,0);
//				}
//				Walk(0,8,20);
//				Wait(20);
//				MapEvent(1);
//				TekiStop(0);
//				return 0;
//			}
			
		}

		KaguTest(40002,0);

		TekiStop(1);
	//	Walk(0,-8,15);

			// 評価表示
		KaguTest(10500,120);

		if (ch[2280] < 1)
		{
			ch[2280] = 1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);

		if (!ch[2630])
		{
			//PlayMovie("kyuta1.txt",0);
			ch[2630] = 1;
		}

		KaguTest(10011,10);
		Wait(10);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
//		KaguTest(20025,0);
		PostScr(1192);
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(-8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	
}
#EndScript

// 206ラッシー
#Script:00935
int main()
{
	if (!ch[1505] && !ch[440])
	{
		MapEvent(0);
		Event(600);
		Mouse(0);
		KaguTest(20065,25);
		PlayMovie("dkt_3_2.txt",ch[1504]);
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(-5,0,1);
		KaguTest(30057,0);
		Mouse(1);
//		BGM(25);
		ResetFade();

		KaguTest(20020,0);
//		CharPos(ch[425],-1000,277,-782);
		CharPos(ch[425]+1,-1000,277,-782);
		KaguTest(30028,ch[425]);
		KaguTest(30028,ch[425]+1);
		
//		BGM(25);
		Black(0,0,30);
		
		ch[1504] = 1;

		ch[440] = 1;

		MapEvent(1);
	}
	else
	{
		Event(600);
		KaguTest(20020,0);
		CharPos(0,0,0,0);
//		CharPos(ch[425],-1000,277,-782);
		CharPos(ch[425]+1,-1000,277,-782);
		KaguTest(30028,ch[425]);
		KaguTest(30028,ch[425]+1);

		BGM(25);
		Black(0,0,30);
		Wait(30);
	}
	
	SetSavePos2(210,0,0,0);
	KaguTest(10600,ch[1107]-2260);
//	MMV(StageMMV(ch[420]));
	MMV("boss03.mmv");
}
#EndScript

// ギブアップ実行時用ミニマップに戻るスクリプト
#Script:00936
int main()
{
	Black(0,100,30);
	Wait(30);
	
	KaguTest(10100,0);
	KaguTest(99999,0);
	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 109 -> 105
#Script:00937
int main()
{
	if (ch[2497])
	{
		// 裏マップ
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		
		Walk(0,8,11);
		Black(0,100,11);
		Wait(11);
		Event(120);

		MapEvent(1);
		
		// ムービーチェック
		PostScr(931);
	}
}
#EndScript

// 503:サンダー拾う
#Script:00938
int main()
{
	TekiStop(1);
	ch[420] = 400;
	Event(1201);
	ch[420] = -1150;
	ch[421] = -975;
	KaguTest2(30025,0,"@ito");
	KaguTest(20068,14);
	GetItem(14);
	Mes("『雷のパーツ』を手に入れた。");
	SE(956);
	Wait(40);
	ch[2150]=1;
	

	if (!ch[2105])
	{
		ch[2105] = 1;
		// チュートリアル表示
		KaguTest(10006,0);
		KaguTest(10007,7);
		KaguTest2(10009,0,"tute_14.bmp");
		ch[423] = 180;
		ch[424] = 42;
		ch[425] = 460;
		ch[426] = 438;
		ch[427] = 0;
		ch[428] = 0;
		ch[429] = 320;
		ch[430] = 452;
		ch[431] = 512;
		SE(399);
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		ch[420] = 0;
		KaguTest(10011,10);
		Wait(10);
	}

	TekiStop(0);
}
#EndScript

// 309 -> ミニマップ
#Script:00939
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}

		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

#Script:00940
int main()
{
	// モグレヌ探せ指令受けてない
	Message(0,"木が邪魔で通れそうにないわ","","","");
//	Mes("木が邪魔で通れそうにない。");

	return 0;
}
#EndScript

#Script:00941
int main()
{
	// ロード後初
//	KaguTest(10006,0);	//発言初期化
	
//	if (!ch[507])
//	{
//		KaguTest2(10008,0,"ポテト遺跡に");
//		KaguTest2(10008,1,"兄たまを助けに行かなきゃ。");
//	}
//	if (ch[507] && !ch[512])
//	{
//		KaguTest2(10008,0,"オバケホームに急がないと。");
//	} 
//	if (ch[512] && !ch[1500])
//	{
//		KaguTest2(10008,0,"ファントムはスピナ洞窟に");
//		KaguTest2(10008,1,"逃げていったみたいね。");
//	}
//	if (ch[1500] && !ch[1542])
//	{
//		KaguTest2(10008,0,"モグレヌはラディスの森にいるらしいわ。");
//	}
//	if (ch[1542] && !ch[1505])
//	{
//		KaguTest2(10008,0,"次はスピナ洞窟ね。");
//	}
//	if (ch[1505] && !ch[1516])
//	{
//		KaguTest2(10008,0,"とりあえず、オバケホームに帰ろっと。");
//	}
//	if (ch[1516] && !ch[1507])
//	{
//		KaguTest2(10008,0,"エッグプラント大空洞に行ってみなくちゃ。");
//	}
//	if (ch[1507] && !ch[1513])
//	{
//		KaguTest2(10008,0,"モグロウはピメントマウンテンに");
//		KaguTest2(10008,1,"いるらしいわ。");
//	}
//	if (ch[1513] && !ch[1510])
//	{
//		KaguTest2(10008,0,"エッグプラント大空洞で");
//		KaguTest2(10008,1,"モグレヌとモグロウが待ってるわ。");
//	}
//	if (ch[1510])
//	{
//		KaguTest2(10008,0,"エッグプラント大空洞に");
//		KaguTest2(10008,1,"ピノを助け出しに行かなくちゃ。");
//	}
	
//	KaguTest(10012,0);
}
#EndScript

// 0502:木箱発生
#Script:00942
int main()
{
	// 木箱粉砕＆木箱発生
	Blur(2,200,40);
	SE(954);
	Wait(40);
	Blur(2,0,20);
	Walk(0,-5,20);

	ch[420] = 3899;
	ch[421] = -150;
	ch[422] = 1725;
	ch[423] = 400;
	KaguTest(30029,0);
	
	// カメラ
	TekiStop(1);
	SaveCamera();
	Camera(ch[424],-150,3150,400);
	Wait(45);
	Camera(-1,0,0,0);
//	RestoreCamera();
	CrossFade();
	TekiStop(0);
}
#EndScript

// 0012:おばけホーム説明
#Script:00943
int main()
{
	Message(0,"この先にはオバケ達が住んでるわ","","","");
	Message(0,"オバケ達と遊ぶのもいいかもしれないわね","","","");
	ch[397] = 1;
}
#EndScript

// 0111:せんとうちゅー
#Script:00944
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	MapEvent(0);
	ln = Door2C(4);
	SaveCamera();

	Walk(0,8,15);
	
	Camera(ln,-150,4825,720);
	CrossFade();
	Wait(15);
	Event(204);
	Wait(7);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(5);
	ch[420] = -150;
	ch[421] = 3450;
	KaguTest(30070,0);
	Wait(37);
	ch[420] = -150;
	ch[421] = 5450;
	KaguTest(30070,0);
	Wait(15);
	Camera(58,-150,4825,920);
	CrossFade();
	Wait(15);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,58);
	Wait(60);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	MapEvent(1);

	TekiStop(1);
	if (!ch[2062])
	{
		TekiStop(1);
		// チュートリアル表示
		KaguTest(10006,0);
		KaguTest(10007,7);
		KaguTest2(10009,0,"tute_04.bmp");
		ch[423] = 180;
		ch[424] = 42;
		ch[425] = 460;
		ch[426] = 438;
		ch[427] = 0;
		ch[428] = 0;
		ch[429] = 320;
		ch[430] = 452;
		ch[431] = 512;
		SE(399);
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		ch[420] = 0;
		KaguTest(10011,10);
		Wait(10);
		TekiStop(0);
	}
	TekiStop(0);

}
#EndScript

// クリアボーナス
#Script:00945
int main()
{
	KaguTest(20025,0);
	ch[299] = 1;
	ch[420] = 50;
	ch[421] = 50;
	ch[422] = 50;
	KaguTest(30046,0);
	
	KaguTest(20010,0)
	if (ch[420] == 999)
	{
		KaguTest(30032,700);
	}
	else
	{
		KaguTest(30033,150);
	}
	Wait(20);
	
//	if (ch[1107] == 2285)
//	{
//		// ブラックビーンボーナス
//		Mes("『覇者の面』を手に入れた。");
//		GetItem(48);
//		KaguTest(20022,48);
//		Wait(90);
//		return 0;
//	}
	

//	switch(ch[1792])
//	{
//	case 0:
//		Mes("『ラジカセ』を手に入れた。");
//		GetItem(74);
//		KaguTest(20022,74);
//		break;
//	case 1:
//		Mes("「下駄箱」を手に入れた");
//		GetItem(68);
//		KaguTest(20022,68);
//		break;
//	case 2:
//		Mes("「本棚」を手に入れた");
//		GetItem(59);
//		KaguTest(20022,59);
//		break;
//	case 3:
//		Mes("「コンポ」を手に入れた");
//		GetItem(75);
//		KaguTest(20022,75);
//		break;
//	case 4:
//		Mes("「テーブル」を手に入れた");
//		GetItem(60);
//		KaguTest(20022,60);
//		break;
//	case 5:
//		Mes("「帽子掛け」を手に入れた");
//		GetItem(69);
//		KaguTest(20022,69);
//		break;
//	case 6:
//		Mes("「ソファー」を手に入れた");
//		GetItem(63);
//		KaguTest(20022,63);
//		break;
//	case 7:
//		Mes("「高級本棚」を手に入れた");
//		GetItem(66);
//		KaguTest(20022,66);
//		break;
//	case 8:
//		Mes("「傘たて」を手に入れた");
//		GetItem(67);
//		KaguTest(20022,67);
//		break;
//	case 9:
//		Mes("「洋服箪笥」を手に入れた");
//		GetItem(65);
//		KaguTest(20022,65);
//		break;
//	case 10:
//		Mes("「あひる」を手に入れた");
//		GetItem(70);
//		KaguTest(20022,70);
//		break;
//	case 11:
//		Mes("「ぬいぐるみ」を手に入れた");
//		GetItem(72);
//		KaguTest(20022,72);
//		break;
//	case 12:
//		Mes("「ちゃぶ台」を手に入れた");
//		GetItem(58);
//		KaguTest(20022,58);
//		break;
//	case 13:
//		Mes("「桐の箪笥」を手に入れた");
//		GetItem(64);
//		KaguTest(20022,64);
//		break;
//	case 14:
//		Mes("「石像」を手に入れた");
//		GetItem(50);
//		KaguTest(20022,50);
//		break;
//	case 15:
//		Mes("「秘伝の書」を手に入れた");
//		GetItem(51);
//		KaguTest(20022,51);
//		break;
//	case 16:
//	case 17:
//	case 18:
//	case 19:
//	case 20:
//	case 21:
//		Mes("「ＭＰアップ」を手に入れた");
//		GetItem(17);
//		KaguTest(20022,17);
//		Wait(45);
//		KaguTest(20032,1);
//		Mes("ＭＰの最大値が１０上がった。");
//		KaguTest(20002,17);
//		break;
//	}

	GetCharPos(0,ch[420],ch[421],ch[422]);
	ch[422] = ch[422] - 100;
	ch[423] = 1881;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	KaguTest(30045,20);
	KaguTest(30045,40);

	Wait(40);
	
	Mes("『金のメダル』を手に入れた。");
	KaguTest(20022,79);
//	GetItem(79);

//	ch[1792]++;
	
	Wait(90);
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,0);
	KaguTest(30032,0);
	KaguTest(30033,100);
	Wait(20);

	ch[299] = 0;
}
#EndScript

// 506 -> 505:モスビー or 506裏 -> ミニマップ
#Script:00946
int main()
{
	if (ch[2497])
	{
		// 裏マップ
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		MapEvent(0);
		Walk(0,8,11);
		Black(0,100,11);
		Wait(11);
		Event(110);

		if (!ch[1542])
		{
			// ムービー
			Black(0,100,0);
			Mouse(0);
			KaguTest(20065,22);
			PlayMovie("mri_3_2.txt",ch[1544]);
			Black(0,100,0);
			Wait(5);
//			Black(0,0,15);
			Walk(0,5,1);
			KaguTest(30057,0);
			KaguTest(12011,ch[425]);
			ch[420] = 2;
			KaguTest(12012,ch[425]);
			Mouse(1);
//			BGM(22);
			KaguTest(20020,0);
			CharPos(40,-200000,0,0);
			CharPos(ch[425],0,0,300);
			CharPos(0,0,-1600,0);
			Black(0,100,0);
	//		Mes("モスビー出現ムービー");
			ch[1544] = 1;

			// 仮用		
			Wait(15);
			Event(600);
//			BGM(19);
		}
		else
		{
	//		Walk(0,5,11);
	//		Wait(11);
			KaguTest(30057,0);
			MapEvent(1);
			Event(600);
			Wait(3);
			
			BGM(22);
		}

		// ムービー救援
		KaguTest(20020,0);
		CharPos(40,-200000,0,0);
		CharPos(ch[425],0,0,300);
		CharPos(0,0,-1600,0);
		KaguTest(12011,ch[425]);
		ch[420] = 2;
		KaguTest(12012,ch[425]);
		
		SetSavePos2(506,0,600,0);
		MapEvent(1);
		
	//	if (ch[1542])
	//	{
			Black(0,0,30);
			Wait(30);
	//	}
		KaguTest(10600,ch[1107]-2260);
//		MMV(StageMMV(ch[420]));
		MMV("boss02.mmv");
	}
	
}
#EndScript

// 505:モスビー倒した後
#Script:00947
int main()
{
//	Wait(60);
	// クリア表示
	MapEvent(0);
	TekiStop(1);

	KaguTest(40002,0);

//	White(0,0,30);
//	Wait(30);
	
	ch[1501] = 1;
	
	// デバッグ
	if (ch[3982] == 1)
	{
		//純粋ボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		LoadMapB(206);

		Event(600);
		KaguTest(20020,0);
		CharPos(0,0,0,0);
//		CharPos(ch[425],-1000,277,-782);
		CharPos(ch[425]+1,-1000,277,-782);
		KaguTest(30028,ch[425]);
		KaguTest(30028,ch[425]+1);

		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	if (ch[3982] == 2)
	{
		//シナリオボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
//		PlayMovie("mri_3_3.txt",1);
		Mouse(0);
		int movi;
		
		movi = PlayMovie("mri_3_3a.txt",1);
		KaguTest(100000,0);
		if (movi)
		{
			PlayMovie2("mri_3_3b.txt",1);
			KaguTest(100000,0);
		}
		if (movi)
		{
			PlayMovie2("mri_3_3c.txt",1);
			KaguTest(100000,0);
		}
		if (movi)
		{
			PlayMovie2("mri_3_3d.txt",1);
			KaguTest(100000,0);
		}
		PlayMovie2("mri_3_3e.txt",1);
		Mouse(1);
		ch[1542] = 1;
		ch[1501] = 1;
		Wait(10);
//		PlayMovie("skowa0.txt",1);
		ch[1502] = 1;
		ch[1503] = 1;
		Wait(10);
		Mouse(0);
		PlayMovie("dkt_3_2.txt",1);
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(-5,0,1);
		KaguTest(30057,0);
		Mouse(1);
		ch[1504] = 1;
		Wait(10);

		LoadMapB(206);

		Event(600);
		KaguTest(20020,0);
		CharPos(0,0,0,0);
//		CharPos(ch[425],-1000,277,-782);
		CharPos(ch[425]+1,-1000,277,-782);
		KaguTest(30028,ch[425]);
		KaguTest(30028,ch[425]+1);

		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	// デバッグここまで
	
	// 評価表示
//	BGM(0);
	KaguTest(10500,120);
		
	if (ch[2263] < 1)
	{
		ch[2263]=1;
	}
		
	Wait(90);
		
	Message(0,"","","","");
	
	
	// ボス倒したことがある場合はそのまま退出
	if (ch[1542])
	{
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,5);
		Wait(5);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		return 0;
	}	
	
	TekiStop(0);

	White(0,100,30);
	Wait(30);
	KaguTest(10011,5);
	Wait(5);
//	Camera(-1,0,0,0);
//	PlayMovie("mri_3_3.txt",0);
	Mouse(0);
	int movi;
//	KaguTest(20066,0);
	KaguTest(20065,-7);
	movi = PlayMovie("mri_3_3a.txt",0);
	KaguTest(100000,0);
	if (movi)
	{
		movi = PlayMovie2("mri_3_3b.txt",0);
		KaguTest(100000,0);
	}
	if (movi)
	{
		movi = PlayMovie2("mri_3_3c.txt",0);
		KaguTest(100000,0);
	}
	if (movi)
	{
		movi = PlayMovie2("mri_3_3d.txt",0);
		KaguTest(100000,0);
	}
	PlayMovie2("mri_3_3e.txt",0);
	Mouse(1);
//	CharPos(17,-50895,-412,15);
//	SetSavePos();

	ch[1542]=1;
	ResetFade();
	Black(0,100,0);

	KaguTest(20066,0);

//	Mes("モグレヌ発見ムービー（仮）");
//	Wait(30);
	
	KaguTest(10100,0);
	ch[298] = 1;
	KaguTest(99999,0);
	
	KaguTest(99990,0);
	Black(0,100,15);
	Wait(15);
	ch[298] = 0;
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,1);
	Wait(10);
	Black(0,0,15);

	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 601 -> 602
#Script:00948
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(111);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 602 -> 603
#Script:00949
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(111);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 603 -> ミニマップへ（クリア）
#Script:00950
int main()
{
	int a;
	a = ch[2266];

	KaguTest(40002,0);
	// クリア
	TekiStop(1);
	MapEvent(0);
//	Walk(0,-8,15);
		// 評価表示
	KaguTest(10500,120);

	if (ch[2266] < 1)
	{
		ch[2266]=1;
	}
	
	Wait(90);
	
	Message(0,"","","","");

	// ミニフィールドへ戻る
	Black(0,100,30);
	Wait(30);
	KaguTest(10011,10);
	Wait(10);
	KaguTest(10100,0);
	KaguTest(99999,0);
	TekiStop(0);
	MapEvent(1);
	
	if (!a)
	{
		ch[429] = 4;
		PostScr(1052);
	}
}
#EndScript

// 604 -> 605
#Script:00951
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(111);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 605 -> ミニマップ
#Script:00952
int main()
{
	if (ch[2497])
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
			string st1,st2;
			SelStart(50);
			st1 = StageName(ch[1107]-2260) + "を出る";
			st2 = StageName(ch[1107]-2260) + "を出ない";
			SelText(st1,1);
			SelText(st2,2);
			SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		int a;
		a = ch[2272];
	
		KaguTest(40002,0);
		// クリア
		TekiStop(1);
		MapEvent(0);
//		Walk(0,8,15);
	//		Black(0,50,15);
	//		Wait(15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2272] < 1)
		{
			ch[2272]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,10);
		Wait(10);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
		if (!a)
		{
			ch[429] = 4;
			PostScr(1052);
		}
		
	}
}
#EndScript

// 601 -> ミニマップ
#Script:00953
int main()
{
	if (ch[2497])
	{
		if (ch[2282] < 1)
		{
			// 初回クリアなので家具持ってるかチェック
//			KaguTest(20001,58);
//			if (!ch[430])
//			{
//				TekiStop(1);
//				MapEvent(0);
//				Message(0,"まだイワオさんに頼まれた家具を","見つけてないわ","","");
//				KaguTest(30058,0);
//				while(ch[420])
//				{
//					Walk(ch[421],ch[422],ch[423]);
//					Wait(ch[423]);
//					KaguTest(30058,0);
//				}
//				Walk(8,0,20);
//				Wait(20);
//				MapEvent(1);
//				TekiStop(0);
//				return 0;
//			}
			
		}

		KaguTest(40002,0);
		// クリア
		TekiStop(1);
		MapEvent(0);
//		Walk(-8,0,15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2282] < 1)
		{
			ch[2282]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
		
		// ミニフィールドへ戻る
		Black(0,100,30);
		Wait(30);
		
		if (!ch[2632])
		{
			//PlayMovie("iwao1.txt",0);
			ch[2632] = 1;
		}
		
		KaguTest(10011,10);
		Wait(10);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
			string st1,st2;
			SelStart(50);
			st1 = StageName(ch[1107]-2260) + "を出る";
			st2 = StageName(ch[1107]-2260) + "を出ない";
			SelText(st1,1);
			SelText(st2,2);
			SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(-8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
}
#EndScript	

// 604 -> ミニマップ
#Script:00954
int main()
{
	TekiStop(1);
	
		WaitD(0);
	ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}

		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 606 -> ミニマップ
#Script:00955
int main()
{
	TekiStop(1);
	
		WaitD(0);
	ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);

		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}

		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 606：落ちあたり発生
#Script:00956
int main()
{
	KaguTest2(30013,100000,"fall_atari_ue");

	return 0;
}
#EndScript

//
// 210 -> ミニマップ or 210 -> 205
#Script:00957
int main()
{
	if (ch[2497])
	{
		KaguTest(40002,0);
		MapEvent(0);
		TekiStop(1);

		Walk(-8,0,11);
		Wait(11);
		Event(100);
		Walk(-5,0,15);
		Wait(15);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
		
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
	
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(-8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	
}
#EndScript

// 210 -> 206
#Script:00958
int main()
{
	if (ch[2497])
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(-8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		
		Walk(-8,0,15);
		Black(0,100,15);
		Wait(15);
		Event(110);

		MapEvent(1);
		
		// ムービーチェック
		PostScr(935);
	}
}
#EndScript

// 506 -> ミニマップ or 506裏 -> 504裏
#Script:00959
int main()
{
	if (ch[2497])
	{
		// 裏マップ
		KaguTest(40002,0);

		MapEvent(0);
		Walk(0,-8,11);
		Wait(11);
		Event(111);
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{

		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	
}
#EndScript

// 606:リフト用レバー
#Script:00960
int main()
{
	int x;
	int y;
	int z;
	int bt15;
	int ln;

	ln = Lift2C(1);

	GetCharPos(ln,x,y,z);
	bt15 = Getbt15(ln);

	if (!bt15)
	{
	// スイッチ入れる
		Wait(5);

		TekiStop(1);
		Lock();
		SaveCamera();
		Camera(ln , x - 800 , y - 1400 , z + 650 );
		CrossFade();
		Unlock();

		Wait(10);

		ch[100] = 1;
		Event(102);

		Wait(95);

		Lock();
		RestoreCamera();
		Camera(-1 , 0 , 0 , 0 );
		CrossFade();
		Unlock();
		TekiStop(0);
	}
}
#EndScript

// 501:入り口
#Script:00961
int main()
{
	MapEvent(0);

	Black(0,100,15);
	Walk(0,8,15);
	Wait(15);
	Wait(30);
	CharPos(0,0,-200,0);
	ch[3703] = 1;
	LoadMap(501);
	Black(0,0,15);
	Walk(0,8,15);
	Wait(15);
	KaguTest(10600,ch[1107]-2260);
	MMV(StageMMV(ch[420]));

//	Event(308);

	MapEvent(1);
}
#EndScript

// 208 -> 201
#Script:00962
int main()
{
	ch[2147] = 1;

	MapEvent(0);
	TekiStop(1);

	Walk(-8,0,11);
	Wait(11);
	Event(120);
	Camera(0,0,0,0);
	ch[421] = -150;
	ch[422] = -3175;
	ch[423] = 110;
	KaguTest(30010,0);
	Camera(-1,0,0,0);
	Walk(0,5,20);
	Wait(20);

	KaguTest(10600,ch[1107]-2260);
	MMV(StageMMV(ch[420]));
	
	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 109 -> 104
#Script:00963
int main()
{
	if (!ch[2497])
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);

		MapEvent(0);		
		Walk(0,-8,11);
		Wait(11);
		Event(110);
		Walk(0,-5,20);
		Wait(20);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 202:レバー引いたら扉開ける
#Script:00964
int main()
{
	int ln,x,y,z;
	
	ln = Door2C(10);
	
	GetCharPos(ln,x,y,z);

	Wait(20);
	SE(950);
	
	SaveCamera();
	Camera(ln,x,y - 1200,z + 350);
	CrossFade();

	Wait(15);
	Event(498);
	ch[263] = 1;
	Wait(40);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(10);
}
#EndScript

// 204:アイス拾う
#Script:00965
int main()
{
	TekiStop(1);
	ch[420] = 400;
	Event(1201);
	ch[420] = 1500;
	ch[421] = 0;
	KaguTest2(30025,0,"@magicpot");
	KaguTest(20068,15);
	GetItem(15);
	Mes("『氷のパーツ』を手に入れた。");
	SE(956);
	Wait(40);
	ch[2112]=1;
	

	if (!ch[2105])
	{
		ch[2105] = 1;
		// チュートリアル表示
		KaguTest(10006,0);
		KaguTest(10007,7);
		KaguTest2(10009,0,"tute_14.bmp");
		ch[423] = 180;
		ch[424] = 42;
		ch[425] = 460;
		ch[426] = 438;
		ch[427] = 0;
		ch[428] = 0;
		ch[429] = 320;
		ch[430] = 452;
		ch[431] = 512;
		SE(399);
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		ch[420] = 0;
		KaguTest(10011,10);
		Wait(10);
	}

	TekiStop(0);
}
#EndScript

// 204:レバー二つ引くと扉開く
#Script:00966
int main()
{
	int x,y,z;
	int ln;

	TekiStop(1);
	Wait(10);
	SE(950);

	KaguTest(30005,0);
	x = ch[421];
	y = ch[422];
	z = ch[423];
	
	SaveCamera();
	Camera(Door2C(10),x,y,z);
	CrossFade();
	Wait(15);
	
	Event(102);
	Wait(50);
	Camera(-1,0,0,0);
	Wait(15);

	ch[265] = 1;
	TekiStop(0);
}
#EndScript

// 203:箱の位置リセット
#Script:00967
int main()
{
	int x,y,z;
	int w;
	w = 0;

	TekiStop(1);

	ch[421] = 0;
	KaguTest(30034,0);
	GetCharPos(ch[420],x,y,z);
	if (x > -205 || x < -245 || y > 3095 || y < 3045)
	{
		w = 1;
	}
	GetCharPos(ch[420]+1,x,y,z);
	if (x > -205 || x < -245 || y > 2645 || y < 2605)
	{
		w = 1;
	}

	MapEvent(0);	
	
	if (w || !ch[71])
	{
		Blur(2,200,40);
		SE(954);
		Wait(40);
	
		// 箱を戻す
		CharPos(ch[420],-225,3075,2175);
		CharPos(ch[420] + 1,-225,2625,2175);
		
		Blur(2,0,30);
	}
	
	Walk(0,5,30);

	if (w)
	{
		if (ch[71])
		{
			Mes("箱の位置が元に戻った。");
		}
		else
		{
			ch[71] = 1;
			Mes("箱が現れた。");
		}
	}
	else
	{
		Mes("何も起きなかった。");
	}
	Wait(30);
	MapEvent(1);
	
	TekiStop(0);
}
#EndScript

// 601:ストッパー
#Script:00968
int main()
{
//	if (ch[1508] || ch[2497])
	{
		// ストッパー消す
		KaguTest2(30014,0,"@stopper");
		KaguTest2(30014,3,"@CAstopperA");
	}
//	else
//	{
//		// ストッパー出す
//		KaguTest2(30014,1,"@stopper");
//		KaguTest2(30014,2,"@CAstopperA");
//	}
}
#EndScript

// 308:メガフレ死
#Script:00969
int main()
{
	Wait(180);
	KaguTest(30035,500);
}
#EndScript

// 309 -> 301
#Script:00970
int main()
{
	Walk(0,8,11);
	Wait(11);
	Event(120);
//	KaguTest(20031,0);
//	ch[420] = 0;
//	KaguTest(20045,ch[421]);
	Walk(0,5,15);
	Wait(15);
	KaguTest(10600,ch[1107]-2260);
	MMV(StageMMV(ch[420]));
}
#EndScript

// 305裏：プレートに乗ったら箱でる。もしくは箱位置修正
#Script:00971
int main()
{
	int x;
	int y;
	int z;
	string txt;
	int w;
	w = 0;
	
	MapEvent(0);
	Blur(2,200,40);
	SE(954);
	Wait(40);
	
	if (!ch[300])
	{
		// まだ箱出してない
		ch[421] = 0;
		KaguTest(30034,0);
		CharPos(ch[420],-900,900,-262);
		txt = "箱が現れた。";
		w = 1;
		ch[300] = 1;
	}
	else
	{
		if (ch[301])
		{
			// スイッチ押した
			txt = "何も起こらなかった。";
		}
		else
		{
			// 箱位置直す
			ch[421] = 0;
			KaguTest(30034,0);
			GetCharPos(ch[420],x,y,z);
			if (x < -905 || x > -895 || y < 895 || y > 905)
			{
				// 箱位置直す
				CharPos(ch[420],-900,900,-262);
				txt = "箱が元の位置に戻った。";
				w = 1;
			}
			else
			{
				txt = "何も起こらなかった。";
			}
		}
	}
	Blur(2,0,30);
	Walk(0,-5,30);
	
	if (w)
	{
		// 箱見せる
		ch[420] = 619;
		ch[421] = 3017;
		ch[422] = 514;
		ch[423] = -819;
		ch[424] = 1006;
		ch[425] = -191;
		KaguTest(30019,1);
		CrossFade();
		Wait(30);
		Mes(txt);
		Wait(30);
		KaguTest(30019,0);
		CrossFade();
	}
	else
	{
		// このまま終わる
		Mes(txt);
	}
	Wait(15);
	MapEvent(1);
}
#EndScript

// 301裏:メテオ拾う
#Script:00972
int main()
{
	// ありえない
	return 0;
	
	TekiStop(1);
	ch[420] = 400;
	Event(1201);
	ch[420] = 150;
	ch[421] = 1200;
	KaguTest(30011,0);
	KaguTest(20068,27);
	GetItem(27);
	Mes("『土のパーツ』を手に入れた。");
	SE(956);
	Wait(40);
	ch[2114]=1;
	
	TekiStop(0);
}
#EndScript

// 603:溶岩地帯の足場崩れる1
#Script:00973
int main()
{
	Event(621);
	ch[420] = 36;
	KaguTest(30042,721);
	ch[21] = 1;
	
	ch[420] = 1162;
	ch[421] = -1461;
	ch[422] = -20;
	ch[423] = 724;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[422] = -50;
	KaguTest(30045,15);
	ch[420] = 1167;
	ch[421] = -1316;
	ch[422] = -60;
	KaguTest(30045,5);
}
#EndScript

// 603:溶岩地帯の足場崩れる2
#Script:00974
int main()
{
	Event(622);
	ch[420] = 36;
	KaguTest(30042,722);
	ch[22] = 1;

	ch[420] = 1303;
	ch[421] = -1193;
	ch[422] = -20;
	ch[423] = 724;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[422] = -50;
	KaguTest(30045,15);
	ch[420] = 1500;
	ch[421] = -1169;
	ch[422] = -60;
	KaguTest(30045,5);
}
#EndScript

// 603:溶岩地帯の足場崩れる3
#Script:00975
int main()
{
	Event(623);
	ch[420] = 36;
	KaguTest(30042,723);
	ch[23] = 1;

	ch[420] = 1988;
	ch[421] = -1167;
	ch[422] = -20;
	ch[423] = 724;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[422] = -50;
	KaguTest(30045,12);
	ch[420] = 2257;
	ch[421] = -1196;
	ch[422] = -60;
	KaguTest(30045,5);
}
#EndScript

// 603:溶岩地帯の足場崩れる4
#Script:00976
int main()
{
	Event(624);
	ch[420] = 41;
	KaguTest(30042,724);
	ch[24] = 1;

	ch[420] = 3202;
	ch[421] = -364;
	ch[422] = -20;
	ch[423] = 724;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[422] = -50;
	KaguTest(30045,15);
	ch[420] = 3120;
	ch[421] = -11;
	ch[422] = -60;
	KaguTest(30045,5);
}
#EndScript

// 610:トロッコ走る
#Script:00977
int main()
{
	if (ch[3974] == 25)
	{
		if (ch[3966] > 0)
		{
			ch[3966] = 1;
		}
	}
	else
	{
		ch[3974] = 0;
		ch[3966] = 0;
	}
	if (ch[2497])
	{
		Camera(Door2C(2),4195,10925,2025);
		Wait(10);
		ch[420] = 3975;
		ch[421] = 9900;
		ch[422] = 1450;
		ch[423] = 352;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,0);
		Wait(26);
		Event(211);
		Wait(15);
		Camera(-1,0,0,0);
		KaguTest(30043,-1);
	}
	else
	{
		Camera(Door2C(1),4675,-4200,6175);
		Wait(10);
		ch[420] = 4415;
		ch[421] = -3085;
		ch[422] = 5700;
		ch[423] = 352;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,0);
		Wait(26);
		Event(211);
		Wait(15);
		Camera(-1,0,0,0);
		KaguTest(30043,0);
	}
	if (ch[420])
	{
		Event(625);
		ch[420] = 16;
		KaguTest(30042,725);
		ch[25] = 1;
//		ch[420] = 1600;
//		KaguTest(30042,11);

		if (ch[2497])
		{
			KaguTest(30044,2);	// トロッコイベント呼び出す
		}
		else
		{
			KaguTest(30044,1634);	// トロッコイベント呼び出す
		}
		
		Camera(0,4650,-4200,6200);
		CrossFade();
		Camera(-1,0,0,0);
	}
}
#EndScript

// 102裏：あたりに触れると扉閉まって敵発生
#Script:00978
int main()
{
	int c1;
	int c2;
	int c3;
	int c4;
	int c5;
	
	MapEvent(0);
	
	KaguTest(30025,1);
	c1 = ch[420];
	KaguTest(30025,2);
	c2 = ch[420];
	KaguTest(30025,3);
	c3 = ch[420];
	KaguTest(30025,4);
	c4 = ch[420];
	KaguTest(30025,5);
	c5 = ch[420];

	TekiStop(1);
	ch[423] = 450;
	ch[424] = -2500;
	ch[420] = 100000;
	ch[427] = 5;
	KaguTest(30015,1);
	Look(c1,0);
	KaguTest(30048,0);
	Event(201);
	if (ch[421] < 0)
	{
		if (ch[422] > 20)
		{
			Walk(ch[420],ch[421],20);
			Wait(20);
		}
		else
		{
			Walk(ch[420],ch[421],ch[422]);
			Wait(ch[422]);
		}
	}
	else
	{
		Wait(20);
	}
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	Camera(c1,450,-2650,520);
	CrossFade();
	Wait(15);
//	Message(c1,"そこまでだ！","","","");
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(45);
	
	Look(0,c1);
	Walk(0,8,35);
	Wait(35);
//	Message(c1,"もう逃げられないぞ。","お前はもう完全に包囲されている","","");
	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(45);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,3);
	Camera(-1,0,0,0);
	ch[420] = 450;
	ch[421] = -2650;
	ch[422] = 520;
	ch[423] = 875;
	ch[424] = -1450;
	ch[425] = 70;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	Look(0,c2);
	Walk2(c2,-8,0,20);
	Wait(20);
	Look(c2,0);
	Wait(15);
	ch[420] = 450;
	ch[421] = -2650;
	ch[422] = 520;
	ch[423] = 125;
	ch[424] = -1450;
	ch[425] = 70;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	Look(0,c3);
	Walk2(c3,8,0,20);
	Wait(20);
	Look(c3,0);
	Wait(15);
//	ch[420] = 450;
//	ch[421] = -1050;
//	ch[422] = 460;
//	ch[423] = 450;
//	ch[424] = -2430;
//	ch[425] = 70;
//	KaguTest(30019,1);
//	CrossFade();
//	Wait(15);
//	ch[420] = 100000;
//	ch[427] = 0;
//	KaguTest(30015,4);
//	KaguTest(30015,5);
//	Look(0,c5);
//	Wait(15);
//	Look(0,c4);
	Wait(15);
	KaguTest(30019,0);
	CrossFade();
	Look(0,c1);
	Message(0,"やるしかないわね","","","");
	TekiStop(0);
	
	MapEvent(1);
}
#EndScript

// 102裏：敵倒すと扉開く
#Script:00979
int main()
{
	ch[300] = 1;
	TekiStop(1);
	SE(950);
	Wait(30);
	Camera(Door2C(1),450,-1050,460);
	CrossFade();
	Wait(30);
	Event(203);
	Wait(45);
	Camera(-1,0,0,0);
	TekiStop(0);
}
#EndScript

// 104:あたりに触れると敵を観察
#Script:00980
int main()
{
	TekiStop(1);
	ch[302] = 1;
	int y;

	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,3);

	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	ch[420] = 900;
	ch[421] = -2250;
	KaguTest(30070,0);
	Look(58,59);
	Look(59,58);
	KaguTest(30038,58);
	KaguTest(30038,59);
	Wait(30);
	
	KaguTest(30020,0);
	y = ch[421];

	SaveCamera();
	
	if (y > -2250)
	{
		// くもがわ
		ch[420] = 1913;
		ch[421] = -2769;
		ch[422] = -803;
		ch[423] = 504;
		ch[424] = -2229;
		ch[425] = -1154;
		KaguTest(30019,1);
		CrossFade();
		KaguTest(30061,0);
		ch[424] = 750;
		ch[425] = -1535;
		ch[426] = 12;
		KaguTest(30060,0);
		Walk(ch[421],ch[422],ch[423]);
	}
	else
	{
		// 入り口側
		ch[420] = 1913;
		ch[421] = -1731;
		ch[422] = -803;
		ch[423] = 504;
		ch[424] = -2271;
		ch[425] = -1154;
		KaguTest(30019,1);
		CrossFade();
		KaguTest(30061,0);
		ch[424] = 750;
		ch[425] = -2855;
		ch[426] = 12;
		KaguTest(30060,0);
		Walk(ch[421],ch[422],ch[423]);
	}
	Wait(30);
	ch[420] = 900;
	ch[421] = -2250;
	KaguTest(30070,0);

	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,58);
	Wait(40);
	ch[420] = 900;
	ch[421] = -2250;
	KaguTest(30070,0);

	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,59);
	Wait(ch[423]/2 + 50);
	ch[420] = 900;
	ch[421] = -2250;
	KaguTest(30070,0);

	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	Message(0,"何かありそうね","","","");

	TekiStop(0);
}
#EndScript

// 610 -> ミニマップ
#Script:00981
int main()
{
	TekiStop(1);

	if (ch[2497])
	{
		int a;
		a = ch[2281];
	
		KaguTest(40002,0);
		ch[1096] = 17;
//		Wait(1000);
		// クリア
		TekiStop(1);
		MapEvent(0);
//		Walk(0,8,15);
			// 評価表示
		KaguTest(10500,120);

		if (ch[2281] < 1)
		{
			ch[2281]=1;
		}
		
		Wait(90);
		
		Message(0,"","","","");
//		Mes("これこれこれこれ？");
		
		// ミニフィールドへ戻る
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,10);
		Wait(10);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		
		if (!a)
		{
			ch[429] = 4;
			PostScr(1052);
		}
	}

}
#EndScript

// 610 -> 604
#Script:00982
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Black(0,100,10);
	Wait(10);
	ch[420] = ch[1000 + (ch[1096] * 2)];
	KaguTest(20043,2047);
	ch[1000 + (ch[1096] * 2)] = ch[1000 + (ch[1096] * 2)] - ch[420];
	Event(111);
	Walk(0,5,20);
	Black(0,0,10);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 街：犬（番犬プチ）しゃべる
#Script:00983
int main()
{
	int qnuke;
	qnuke = 0;

	ch[400] = 58;
	if (ch[2007] && !ch[2018])
	{
		// クエスト中
		ch[400] = 58;
		if (ch[2002])
		{
			// のぞきクエスト
			ch[420] = ch[2006];
			KaguTest(20043,8);
//			if (!ch[420])
			{
				ch[420] = ch[2006];
				KaguTest(20052,8);
				ch[2006] = ch[420];

				//番犬プチ
				Message(58,"わんわんっ！","","","");

				//パリン
				Message(0,"わぉん？","","","");

				//番犬プチ
				Message(58,"うぉん！","","","");
			}
			
			if (ch[2003] == 2 && ch[2006] == 15)
			{
				// ファン以外の全員から話を聞いた
				ch[2003] = 3;
			}
		}
		if (ch[2010])
		{
			// ビラ貼りクエスト中
			qnuke = 1;
		}
		if (ch[2020])
		{
			// プラチナメダルクエスト中
			qnuke = 1;
		}
		
		if (!qnuke)
		{
			ch[400] = -1;
			return 0;
		}
	}

//	if (ch[2018])
	if (ch[2501] != 6)
	{
		// わらしべクエスト中
		KaguTest(20001,31);
		if (ch[430])
		{
			//番犬プチ
			Message(58,"うぉんうぉん！","","","");

			//パリン
			Message(0,"何よ、わたしと勝負する気？","","","");
			Message(0,"今度は新必殺の","スペシャルパリンキックを","お見舞いするわよ","");

			//番犬プチ
			Message(58,"きゅぅぅん…","","","");

			//パリン
			Message(0,"ちがうの？","","","");
			Message(0,"あ、ひょっとして","このランプステーキが","食べたいのかな？","");

			//番犬プチ
			Message(58,"うぉん！","","","");

			//パリン
			Message(0,"昨日の敵は今日の友ね。","いいわ、あげるわよ","","");

			//番犬プチ
			Message(58,"うぉぉん！","","","");

			//パリン
			Message(0,"ん、これをお礼にくれるの？","お前、なかなか礼儀正しい","ヤツだったのね","");

			//システム
			Mes("『金貨』を手に入れた。");
			KaguTest(20022,32);
			KaguTest(20002,31);
			GetItem(32);
			Wait(60);
			ch[400] = -1;
			return 0;
		}
	}

	if (!ch[2552])
	{
		//引越し後 !ch[2552]
		Message(58,"わん、わん","","","");
		Message(0,"わん","","","");
		ch[420] = 13;
		ch[429] = 1;
		KaguTest(30036,58);
		ch[420] = 13;
		KaguTest(30036,0);
	}
	if (ch[2552] && !ch[1545])
	{
		//兄たま誘拐後 !ch[1545]
		Message(58,"グルルルルル…","","","");
		Message(0,"嫌われたみたいね","","","");
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,58);
	}
	if (ch[1545] && !ch[2330])
	{
		//王子と四天王登場後 !ch[2330]
		Message(58,"グルルルルル…","","","");
		Message(0,"嫌われたみたいね","","","");
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,58);
	}
	if (ch[2330] && !ch[507])
	{
		//襲撃後・３オバケ発見後 !ch[507]
		Message(58,"グルルルルル…","","","");
		Message(0,"まだ嫌われてるみたいね","","","");
	}
	if (ch[507] && !ch[1542])
	{
		//ボブー戦終了後 !ch[1542]
		Message(58,"わん？","","","");
		Message(0,"わん？","","","");
		ch[420] = 8;
		ch[429] = 1;
		KaguTest(30036,58);
	}
	if (ch[1542] && !ch[1505])
	{
		//モスビー戦終了後 !ch[1505]
		Message(58,"わん、わん","","","");
		Message(0,"わん","","","");
	}
	if (ch[1505] && !ch[1513])
	{
		//ラッシー戦終了後(ホーム復興イベント) !ch[1513]
		Message(58,"わん","","","");
		Message(0,"機嫌直してくれたみたいね","","","");
		ch[420] = 7;
		ch[429] = 1;
		KaguTest(30036,58);
	}
	if (ch[1513] && !ch[1571])
	{
		//クリーム戦終了後 !ch[1571]
		Message(58,"わん","","","");
		Message(0,"わん","","","");
		ch[420] = 7;
		ch[429] = 1;
		KaguTest(30036,58);
		ch[420] = 7;
		ch[429] = 1;
		KaguTest(30036,0);
	}
	if (ch[1571] && !ch[1538])
	{
		//王子戦終了後 !ch[1538]
		Message(58,"わん、わん","","","");
		Message(0,"わん","","","");
		ch[420] = 13;
		ch[429] = 1;
		KaguTest(30036,58);
		ch[420] = 13;
		KaguTest(30036,0);
	}
	if (ch[1538])
	{
		//仲直り後 ch[1538]
		// この時点では街にこれない
	}
	ch[400] = -1;
}
#EndScript

// 503裏：行き止まり立て札
#Script:00984
int main()
{
//	Mes("「この先行き止まり」と書かれている。");
	Message(0,"「この道は間違いなのである","s150怪盗Ｍ」","","");
}
#EndScript

// 504裏：浮遊コウモリ復活
#Script:00985
int main()
{
	if (ch[200])
	{
		KaguTest(30021,50);
		
	}
	else
	{
		int x;
		int y;
		int z;
		int ax;
		int ay;
		int az;
		
		GetCharPos(0,ax,ay,az);
		KaguTest(30005,0);
		x = ch[421];
		y = ch[422];
		z = ch[423];
				
		ch[420] = 1943;
		ch[421] = 2890;
		ch[422] = 608;
		ch[423] = 339;
		ch[424] = 3344;
		ch[425] = 221;
		KaguTest(30019,1);
		CrossFade();
		Wait(25);

		// コウモリ出てくる
		ch[420] = 100000;
		ch[427] = 0;
		KaguTest(30015,50);
		ch[200] = 1;

		Wait(30);
		ch[420] = x;
		ch[421] = y;
		ch[422] = z;
		ch[423] = ax;
		ch[424] = ay;
		ch[425] = az;
		KaguTest(30019,1);
		CrossFade();
		Wait(15);
		KaguTest(30019,0);
	}
}
#EndScript

// 503裏：レバー引くと扉開く
#Script:00986
int main()
{
	int x;
	int y;
	int z;
	int ln;

	TekiStop(1);
	SE(950);
	
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	
	SaveCamera();
	Camera(ln,x,y + 1400,z + 450);
	CrossFade();
	Wait(15);
	
	Event(602);
	Wait(40);

	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
	
	ch[100] = 1;
}
#EndScript

// 502裏：プレート乗ったら箱出るor箱戻る
#Script:00987
int main()
{
	int x,y,z;
	int c;
	
	TekiStop(1);
	MapEvent(0);
	
	ch[421] = 0;
	KaguTest(30034,1);
	c = ch[420];
	
	Blur(2,200,40);
	SE(954);
	Wait(40);
	
	SaveCamera();
		
	CharPos(c,-375,10425,-450);
	CharPos(c+1,-825,10425,-450);
	CharPos(c+2,-975,10425,-450);
	CharPos(c+3,-975,10425,0);
	KaguTest(30078,c+1);
	KaguTest(30078,c+2);

	Blur(2,0,30);
	Walk(-5,0,30);

	ch[420] = -216;
	ch[421] = 8706;
	ch[422] = 317;
	ch[423] = -611;
	ch[424] = 10414;
	ch[425] = -279;
	KaguTest(30093,30);
	KaguTest(30019,14);

	Wait(30);
	Walk(0,2,2);

	Wait(45);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(10);

	MapEvent(1);
	TekiStop(0);

	ch[420] = -825;
	ch[421] = 10425;
	ch[422] = -150;
	KaguTest(30055,0);
}
#EndScript

//501裏：ＨＰアップ宝箱
#Script:00988
int main()
{
	TekiStop(1);
	ch[100] = 1;

	Wait(45);
	KaguTest(20032,0);
	Mes("ＨＰの最大値が上がった。");
	Wait(30);
	KaguTest(20002,16);

	KaguTest(20010,0);
	if (ch[420] == 501 && ch[2497])
	{
		ch[420] = 100000;
		ch[427] = 0;
		KaguTest(30015,97);
		KaguTest(30016,87);
	}
	
	TekiStop(0);
}
#EndScript

// 502裏：滝浦レバー引くと扉開く
#Script:00989
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	TekiStop(1);
	
	ln = Door2C(15);
	GetCharPos(ln,x,y,z);
	
	SaveCamera();
	Camera(ln,x,y + 1600,z + 450);	
	CrossFade();
	
	SE(950);
	Wait(15);
	
	Event(607);
	Wait(40);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(10);
	
	ch[261] = 1;
	
	TekiStop(0);
}
#EndScript

// HPアップ取った
#Script:00990
int main()
{
	TekiStop(1);
	Wait(45);
	KaguTest(20032,0);
	Mes("ＨＰの最大値が上がった。");
	Wait(45);
	KaguTest(20002,16);
	TekiStop(0);
}
#EndScript

// MPアップ取った
#Script:00991
int main()
{
	TekiStop(1);
//	KaguTest(20010,0);
//	if (ch[420] == 501 && ch[2497])
//	{
//		ch[420] = 100000;
//		ch[427] = 0;
//		KaguTest(30015,97);
//		KaguTest(30016,87);
//		
//		if (ch[2117])
//		{
//			TekiStop(0);
//			return 0;
//		}
//		ch[2117] = 1;
//	}


//	Wait(45);
//	KaguTest(20032,1);
//	Mes("ＭＰの最大値が上がった。");
//	Wait(45);
//	KaguTest(20002,17);

	TekiStop(0);
}
#EndScript

// 111:岩チュートリアル
#Script:00992
int main()
{
	// 岩ちゅー
	TekiStop(1);

	Message(0,"何か書いてある","","","");

	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_05.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	ch[2116] = 1;

	TekiStop(0);
}
#EndScript

// 204裏：レバー引くと扉開く
#Script:00993
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	TekiStop(1);
	Wait(10);
	
	SE(950);
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	
	SaveCamera();
	Camera(ln,x-1400,y,z+450);
	CrossFade();
	Wait(15);
	Event(102);
	Wait(45);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(10);
	
	TekiStop(0);
	
	ch[260] = 1;
}
#EndScript

// 110 -> 111
#Script:00994
int main()
{
	KaguTest(40002,0);
	
	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(120);
	Walk(0,5,15);
	Wait(15);
	KaguTest(10600,ch[1107]-2260);
	MMV(StageMMV(ch[420]));
	MapEvent(1);
}
#EndScript

// 204裏：レバーよっつ引いたら扉開く
#Script:00995
int main()
{
	int x;
	int y;
	int z;
	int ln;

	if (ch[100] && ch[101] && ch[102] && ch[103])
	{
		ln = Door2C(2);
		GetCharPos(ln,x,y,z);

		TekiStop(1);		
		Wait(10);
		SE(950);
		Black(0,100,10);

		Wait(10);
		SaveCamera();
		Camera(ln,x-1400,y,z+600);
		Wait(15);
		Black(0,0,10);
		Wait(10);
		
		Event(107);
		
		Wait(45);
		ch[420] = 100000;
		ch[427] = 7;
		KaguTest(30015,1);
		KaguTest(30025,1);
		int c;
		int time;
		c = ch[420];
		ch[420] = 2;
		KaguTest(12005,c);
		KaguTest(12005,c+1);
		ch[424] = 2300;
		ch[425] = 130;
		ch[426] = 12;
		KaguTest(30061,0);
		KaguTest(30060,c);
		Walk2(c,ch[421],ch[422],ch[423]);
		ch[429] = 0;
		KaguTest(30039,0);
		time = ch[423];
		ch[426] = 12;
		KaguTest(30061,0);
		KaguTest(30060,c+1);
		Walk2(c+1,ch[421],ch[422],ch[423]-10);
		ch[429] = 0;
		KaguTest(30039,0);
		
		Wait(time);
		Look(c,c+1);
		ch[423] = ch[423] - 10 - time;
		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,c);
		Wait(ch[423]);
		Look(c+1,c);
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,c+1);
		Wait(30);
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,c);
		Wait(30);

		Camera(-1,0,0,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		TekiStop(0);
		ch[420] = 3;
		KaguTest(12005,c);
		KaguTest(12005,c+1);
		ch[261] = 1;
	}
}
#EndScript

// 203裏：フォースカメラ解除
#Script:00996
int main()
{
	int i;

	ch[420] = 99700;
	KaguTest2(30003,2,"@R");
	
	for (i = 1;i < 5;i++)
	{
		ch[420] = 99800 + i;
		KaguTest2(30003,2,"@R");
	}
}
#EndScript

// 201裏：あたりに触れると敵現れる
#Script:00997
int main()
{
//	TekiStop(1);
	ch[420] = 350;
	KaguTest2(30003,2,"Box01");
	
	SaveCamera();
	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,1);
	KaguTest(30025,1);
	int c;
	c = ch[420];
	ch[420] = -1;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	Walk2(c,12,2,45);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = c;
	ch[421] = 4;
	KaguTest(20044,1);
	ch[421] = 5;
	KaguTest(20044,20);
	ch[420] = 197;
	ch[421] = 1789;
	ch[422] = 383;
	ch[423] = -162;
	ch[424] = 979;
	ch[425] = 345;
	KaguTest(30019,1);
	CrossFade();
	Wait(35);
	Look(c,0);
	Walk2(c+1,-12,2,45);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = c+1;
	ch[421] = 4;
	KaguTest(20044,1);
	ch[421] = 5;
	KaguTest(20044,20);
	ch[420] = c;
	ch[421] = 0;
	KaguTest(20044,2);
	ch[420] = 103;
	ch[421] = 1789;
	ch[422] = 383;
	ch[423] = 462;
	ch[424] = 979;
	ch[425] = 345;
	KaguTest(30019,1);
	CrossFade();
	Wait(35);
	ch[420] = c+1;
	ch[421] = 0;
	KaguTest(20044,2);
	Look(c+1,0);
	Wait(10);
	ch[420] = 3;
	KaguTest(12005,c+1);
	KaguTest(12005,c);

	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[420] = 0;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
//	TekiStop(0);
}
#EndScript

// 0202裏：木箱・鉄箱・箱発生
#Script:00998
int main()
{
	int x;
	int y;
	int z;

	if (!ch[313])
	{
		Blur(2,200,40);
		SE(954);
		Wait(40);
	}
	Blur(2,0,20);
	Walk(-5,0,20);
	
	if (ch[313])
	{
		Mes("何もおきなかった。");
		Wait(20);
		return 0;
	}

	// 箱移動
	KaguTest(20020,1);
	KaguTest(30047,ch[425] + 2);
	CharPos(ch[425] + 2,450,-2175,0);
	CharPos(ch[425] + 3,450,-2175,160);
	CharPos(ch[425] + 4,675,-2250,450);
		
	// カメラ
	TekiStop(1);
	SaveCamera();
	GetCharPos(ch[425]+3,x,y,z);
	Camera(ch[425]+3,x - 1300,y,z + 450);
	Wait(45);
	if (!ch[13])
	{
		ch[13] = 1;
		Mes("箱が現れた。");
	}
	else
	{
		Mes("箱が元の位置に戻った。");
	}
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 202裏：ボタンの上に箱置いたら扉開く
#Script:00999
int main()
{
	if (!ch[311] || !ch[312])
	{
		return 0;
	}

	ch[313] = 1;

	int x;
	int y;
	int z;
	int ln;
	
	TekiStop(1);
	Wait(20);
	ln = Door2C(4);
	
	GetCharPos(ln,x,y,z);
	
	SaveCamera();
	Camera(ln,x,y+1400,z+350);
	CrossFade();
	Wait(15);
	
//	if (ch[11])
//	{
//		Event(106);
//		ch[11] = 0;
//	}
//	else
//	{
		Event(105);
//		ch[11] = 1;
//	}
	Wait(45);

	if (!ch[12])
	{
		ch[420] = 100000;
		ch[427] = 0;
		KaguTest(30016,79);
		ch[12] = 1;
	}
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	KaguTest(30025,2);
	int c;
	c = ch[420];
	KaguTest(20020,1);
	GetCharPos(ch[425] + 2,x,y,z);
	CharPos(c,(x + 100000) * (-1),y,z);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,2);
	ch[420] = 3601;
	ch[421] = -200000;
	ch[422] = 0;
	ch[423] = 0;
	KaguTest(30029,0);
	ch[11] = 1;
	
	TekiStop(0);
}
#EndScript

// 201裏:レバー引いたら扉開く
#Script:01000
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	TekiStop(1);
	ln = Door2C(1);
	
	Wait(10);
	Black(0,100,10);
	Wait(7);
	
	GetCharPos(ln,x,y,z);
	SaveCamera();
	Camera(ln,x,y + 1400,z+750);
	CrossFade();
	Wait(7);
	Black(0,0,10);
	Wait(15);
	
	Event(102);
	
	Wait(45);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);

	TekiStop(0);
	
	ch[260] = 1;
}
#EndScript

// 203裏：レバー引くと扉開く
#Script:01001
int main()
{
	int x;
	int y;
	int z;
	int ln;

	TekiStop(1);
	Wait(10);
	SE(950);
	
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	SaveCamera();
	
	Camera(ln,x,y+1400,z+350);
	CrossFade();
	Wait(15);
	
	Event(103);
	if (!ch[301])
	{
		Ksk(1);
	}
	
	Wait(30);
	
	int c;
	KaguTest(30025,1);
	c = ch[420];
	KaguTest(30077,c);
	KaguTest(30077,c+1);
	KaguTest(30077,c+2);
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	ch[420] = 1050;
	ch[421] = 1675;
	KaguTest(30070,c);
	KaguTest(30070,c+1);
	KaguTest(30070,c+2);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c);
	KaguTest(30037,c+1);
	KaguTest(30037,c+2);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c);
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	Walk2(c,0,-20,10);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(20);
	Look(c+1,c);
	Look(c+2,c);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+1);
	KaguTest(30037,c+2);
	Wait(10);
	ch[420] = 2009;
	ch[429] = 1;
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	Wait(45);
	ch[420] = 9;
	ch[429] = 1;
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	ch[420] = 1050;
	ch[421] = 1750;
	KaguTest(30070,c+1);
	KaguTest(30070,c+2);
	Wait(30);
	ch[424] = 1050;
	ch[425] = 1750;
	ch[426] = 8;
	KaguTest(30061,0);
	KaguTest(30060,c+1);
	Walk2(c+1,ch[421],ch[422],ch[423]);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(20);
	KaguTest(30061,0);
	KaguTest(30060,c+2);
	Walk2(c+2,ch[421],ch[422],ch[423]);
	KaguTest(30039,0);
	Wait(ch[423] - 20);
	Walk2(c+1,0,10,20);
	Wait(20);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[260] = 1;
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c);
	KaguTest(30090,c+1);
	KaguTest(30090,c+2);
	TekiStop(0);
}
#EndScript

// 603:あたりに触れると敵が溶岩から出てくる
#Script:01002
int main()
{
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	int c;
	c = ch[420];
	ch[420] = 518;
	KaguTest(30100,c);
	KaguTest(30100,c+1);
	KaguTest(30100,c+2);
}
#EndScript

// 305裏：ボタン押したら扉開く
#Script:01003
int main()
{
	TekiStop(1);
	Wait(15);
	SE(950);
	
	SaveCamera();
	ch[420] = -395;
	ch[421] = 158;
	ch[422] = -373;
	ch[423] = 400;
	ch[424] = -563;
	ch[425] = -567;
	KaguTest(30093,20);
	KaguTest(30019,14);
	CrossFade();
	Blur(3,100,20);
	Wait(20);
	ch[420] = 333;
	ch[421] = -567;
	ch[422] = 207;
	ch[423] = 421;
	ch[424] = -1613;
	ch[425] = -92;
	KaguTest(30093,20);
	Wait(20);
	ch[420] = 150;
	ch[421] = -3517;
	ch[422] = 282;
	ch[423] = 150;
	ch[424] = -4566;
	ch[425] = -17;
	KaguTest(30093,25);
	Blur(3,0,20);
	Wait(30);

	Event(302);
	
	Wait(40);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);

	TekiStop(0);
}
#EndScript

// 304裏：掘削すると正面の敵が驚いて退く
#Script:01004
int main()
{
	ch[420] = -1255;
	ch[421] = 467;
	ch[422] = 253;
	ch[423] = -464;
	ch[424] = 454;
	ch[425] = 70;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	
	int c;
	int pt;
	KaguTest(30025,1);
	c = ch[420];
	KaguTest(12004,c);
	pt = ch[420];
	KaguTest(12000,c);
	
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(15);
	
	Walk2(c,36,0,15);
	ch[429] = 1;
	KaguTest(30039,0);
	ch[420] = 17;
	ch[421] = 1;
	ch[422] = 2;
	KaguTest(12003,c);
	Wait(3);
	ch[421] = 50;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(27);

	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	ch[420] = 3;
	KaguTest(12005,c);
	ch[420] = pt;
	KaguTest(12002,c);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c);
}
#EndScript

//305裏：敵倒すと敵発生
#Script:01005
int main()
{
	ch[420] = 100000;
	ch[427] = 0;
	ch[422] = ch[429];
	ch[423] = ch[429] + 3;
	KaguTest(30049,0);
	ch[429] = ch[423] + 1;
	ch[100 + ch[428]] = 1;
	ch[428] = ch[428] + 1;
}
#EndScript

//305裏：一通り敵倒すと扉開く
#Script:01006
int main()
{
	int x;
	int y;
	int z;
	int ln;
	
	Wait(30);
	
	TekiStop(1);
	SaveCamera();

	ln = Door2C(5);
	GetCharPos(ln,x,y,z);
	
	Camera(ln,x,y - 1400,z + 350);
	CrossFade();
	Wait(15);
	Event(134);
	Wait(45);

	ln = Door2C(4);
	GetCharPos(ln,x,y,z);
	Camera(ln,x-900,y+1200,z+350);
	CrossFade();
	Wait(15);
	Event(133);
	
	Wait(45);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
	ch[100 + ch[428]] = 1;
}
#EndScript

// 303裏：全ての火飾台が点いたら扉開ける
#Script:01007
int main()
{
	TekiStop(1);
	SaveCamera();
	Wait(25);
	SE(950);
	ch[420] = -350;
	ch[421] = -225;
	ch[422] = 485;
	ch[423] = 877;
	ch[424] = -225;
	ch[425] = 45;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	
	Event(307);
	
	Wait(40);
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[309] = 1;
	TekiStop(0);
}
#EndScript

// 301裏：あたりに触れると閉じ込められて敵発生
#Script:01008
int main()
{
	ch[300] = 1;
	MapEvent(0);
	
	ch[420] = 48;
	ch[421] = 3266;
	ch[422] = 158;
	ch[423] = -971;
	ch[424] = 2817;
	ch[425] = -42;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	
	CharPos(0,150,3300,0);
	
	int c;
	int pt1;
	int pt2;
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,3);
	KaguTest(30025,3);
	c = ch[420];
	ch[420] = 36;
	ch[421] = 0;
	KaguTest(30115,c);

	KaguTest(12004,c);
	pt1 = ch[420];
	ch[420] = 2;
	KaguTest(12005,c);
	Wait(30);
	KaguTest(12000,c);
	
	Look(c,0);
	Wait(30);
	
	ch[420] = -48;
	ch[421] = 3266;
	ch[422] = 158;
	ch[423] = 971;
	ch[424] = 2817;
	ch[425] = -42;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,4);
	ch[420] = 36;
	ch[421] = 0;
	KaguTest(30115,c+1);

	KaguTest(12004,c+1);
	pt2 = ch[420];
	ch[420] = 2;
	KaguTest(12005,c+1);
	Wait(30);

	KaguTest(12000,c+1);

	Look(c+1,0);
	Wait(30);
	
	ch[420] = 93;
	ch[421] = 3229;
	ch[422] = 258;
	ch[423] = 138;
	ch[424] = 2180;
	ch[425] = -41;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	
	Event(101);
	
	Wait(40);

	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	// 敵の設定を直す
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	ch[420] = 1;
	KaguTest(30116,c);
	KaguTest(30116,c+1);
	KaguTest(30117,c);
	KaguTest(30117,c+1);
	
	KaguTest(30090,c);
	KaguTest(30090,c+1);
	
	// 沸く敵処理
//	ch[420] = 100000;
//	ch[427] = 7;
//	KaguTest(30015,1);
//	KaguTest(30015,2);
//	KaguTest(30015,5);
//	KaguTest(30025,5);
//	c = ch[420];
//	ch[420] = 26;
//	ch[421] = 002;
//	KaguTest(30115,c);
//	ch[421] = 003;
//	KaguTest(30115,c+1);
//	ch[421] = 004;
//	KaguTest(30115,c+2);
//	ch[421] = 005;
//	KaguTest(30115,c+3);
//	ch[421] = 006;
//	KaguTest(30115,c+4);
//	ch[421] = 007;
//	KaguTest(30115,c+5);
//	ch[421] = 008;
//	KaguTest(30115,c+6);
//	ch[421] = 009;
//	KaguTest(30115,c+7);

	MapEvent(1);
}
#EndScript

// 301裏：敵倒すと扉開く
#Script:01009
int main()
{
	Wait(30);
	SE(950);

	TekiStop(1);

//	Camera(0,150,3225,260);
	ch[420] = 93;
	ch[421] = 3229;
	ch[422] = 258;
	ch[423] = 138;
	ch[424] = 2180;
	ch[425] = -41;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	Event(103);
	
	Wait(45);
//	Camera(-1,0,0,0);
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	TekiStop(0);
	ch[301] = 1;
}
#EndScript

// 301裏：レバー元に戻す
#Script:01010
int main()
{
	TekiStop(1);
	Wait(10);
	Camera(0,150,-75,500);
	CrossFade();
	Wait(15);

	int b;
	b = Door2C(50);

	Wait(10);
	
	if (!ch[200])
	{
		KaguTest(30002,b);
	}
	if (ch[201])
	{
		KaguTest(30002,b+1);
	}
	if (!ch[202])
	{
		KaguTest(30002,b+2);
	}	
	if (ch[203])
	{
		KaguTest(30002,b+3);
	}
	if (!ch[204])
	{
		KaguTest(30002,b+4);
	}	
	if (ch[205])
	{
		KaguTest(30002,b+5);
	}
	if (ch[206])
	{
		KaguTest(30002,b+6);
	}
	if (ch[207])
	{
		KaguTest(30002,b+7);
	}
	if (!ch[208])
	{
		KaguTest(30002,b+8);
	}	
	if (ch[209])
	{
		KaguTest(30002,b+9);
	}
	if (!ch[210])
	{
		KaguTest(30002,b+10);
	}	
	if (ch[211])
	{
		KaguTest(30002,b+11);
	}
	if (!ch[212])
	{
		KaguTest(30002,b+12);
	}	

	Wait(25);

	Mes("レバーが元に戻った。");
	Camera(-1,0,0,0);
	CrossFade();
	Wait(10);
	TekiStop(0);
}
#EndScript

// ミニフィールド：ノードチェック
#Script:01011
int main()
{
	if (!ch[1545])	// 兄たまはまだ助けていない
	{
		KaguTest2(30021,0,"@CDL28");
		KaguTest2(30021,0,"@CDL29");
		KaguTest2(30014,1,"@LDC28");
		KaguTest2(30014,1,"@LDC29");
	}
	return 0;
}
#EndScript

// 605：崩落
#Script:01012
int main()
{
	Event(621);
	ch[420] = 100;
	KaguTest(30042,721);
	ch[21] = 1;

	ch[420] = 5685;
	ch[421] = -430;
	ch[422] = 1750;
	ch[423] = 724;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[420] = 5608;
	ch[421] = -412;
	ch[422] = 1740;
	KaguTest(30045,1);
	ch[420] = 5531;
	ch[421] = -436;
	ch[422] = 1730;
	KaguTest(30045,2);
	ch[420] = 5470;
	ch[421] = -488;
	ch[422] = 1720;
	KaguTest(30045,3);
	ch[420] = 5449;
	ch[421] = -566;
	ch[422] = 1710;
	KaguTest(30045,4);
	ch[420] = 5474;
	ch[421] = -645;
	ch[422] = 1700;
	KaguTest(30045,5);
	ch[420] = 5533;
	ch[421] = -729;
	ch[422] = 1700;
	KaguTest(30045,6);
}
#EndScript

// 605：崩落
#Script:01013
int main()
{
	Event(622);
	ch[420] = 100;
	KaguTest(30042,722);
	ch[22] = 1;

	ch[420] = 5231;
	ch[421] = 906;
	ch[422] = 2011;
	ch[423] = 724;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[420] = 5187;
	ch[421] = 822;
	ch[422] = 2005;
	KaguTest(30045,1);
	ch[420] = 5164;
	ch[421] = 757;
	ch[422] = 2000;
	KaguTest(30045,2);
	ch[420] = 5215;
	ch[421] = 718;
	ch[422] = 1981;
	KaguTest(30045,3);
	ch[420] = 5299;
	ch[421] = 675;
	ch[422] = 1970;
	KaguTest(30045,4);
	ch[420] = 5398;
	ch[421] = 739;
	ch[422] = 1965;
	KaguTest(30045,5);
	ch[420] = 5485;
	ch[421] = 818;
	ch[422] = 1965;
	KaguTest(30045,6);
}
#EndScript

// 605：崩落
#Script:01014
int main()
{
	if (ch[455] == 1) return 0;

	Event(623);
	ch[420] = 120;
	KaguTest(30042,723);
	ch[23] = 1;

	ch[420] = 727;
	ch[421] = 4252;
	ch[422] = 4140;
	ch[423] = 734;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 100;
	ch[428] = 1;
	KaguTest(30045,0);
	ch[422] = ch[422] - 30 - rand() % 400;
	KaguTest(30045,35);
	ch[420] = 672;
	ch[421] = 4203;
	ch[422] = 4140;
	KaguTest(30045,1);
	ch[422] = ch[422] - 30 - rand() % 400;
	KaguTest(30045,36);
	ch[420] = 612;
	ch[421] = 4181;
	ch[422] = 4140;
	KaguTest(30045,2);
	ch[422] = ch[422] - 30 - rand() % 400;
	KaguTest(30045,37);
	ch[420] = 543;
	ch[421] = 4141;
	ch[422] = 4140;
	KaguTest(30045,3);
	ch[422] = ch[422] - 30 - rand() % 400;
	KaguTest(30045,38);
	ch[420] = 509;
	ch[421] = 4112;
	ch[422] = 4140;
	KaguTest(30045,4);
	ch[422] = ch[422] - 30 - rand() % 400;
	KaguTest(30045,39);
}
#EndScript

// 605：落ちあたり触れた１
#Script:01015
int main()
{
	ch[420] = 20;
	KaguTest(30042,821);
	KaguTest(30042,822);
	ch[21] = 0;
	ch[22] = 0;
	ch[31] = 1;
	ch[32] = 1;
}
#EndScript

// 605：落ちあたり触れた２
#Script:01016
int main()
{
	ch[420] = 20;
	KaguTest(30042,823);
	ch[23] = 0;
	ch[33] = 1;
}
#EndScript

// 102:こうもりチュートリアル
#Script:01017
int main()
{
	// こうもりちゅー
//	SaveCamera();

//	ch[420] = 1575;
//	ch[421] = -1150;
//	ch[422] = 525;
//	ch[423] = 1575;
//	ch[424] = 450;
//	ch[425] = 75;
//	KaguTest(30019,1);	// カメラセット
//	CrossFade();
//	Wait(30);
//
//	KaguTest(10006,2);
//	ch[423] = 20;
//	KaguTest(10007,4);
//	KaguTest2(10008,0,"ターゲットアタックを使ってみよう");
//	KaguTest2(10008,1,"敵にターゲットリングが表示されている状態で");
//	KaguTest2(10008,2,"ジャンプ中に攻撃ボタンとジャンプボタンを同時押しすると");
//	KaguTest2(10008,3,"敵に向かって自動で追撃する");
//	KaguTest2(10008,4,"「ターゲットアタック」を行うことができます。");
//	KaguTest2(10008,5,"「ターゲットアタック」後、再びジャンプすることができるので");
//	KaguTest2(10008,6,"敵がいる限り何度でも「ターゲットアタック」を行うことができます。");
//	KaguTest(10010,10);
//	
//	Wait(10);
//	Message(0,"","","","");
//	KaguTest(10011,10);
//	Wait(15);
//
//	KaguTest(30019,0);	// カメラ解除
//	RestoreCamera();
//	CrossFade();
//	Wait(15);

	KaguTest(30021,10);

	Message(0,"何か書いてある","","","");

	KaguTest(30021,10);

	ch[2104] = 1;
	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_10.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);

	KaguTest(30021,10);

	Wait(10);

	KaguTest(30021,10);

	Wait(10);
	
	TekiStop(1);
	
	if (!ch[2123])
	{
		// 実際にしてみせる
		Message(0,"どういうことかしら","","","");
		Message(0,"実際にやってみようかな","","","");
		
		Camera(0,1675,328,1070);
		ch[420] = 2300;
		ch[421] = 1200;
		ch[423] = 7;
		KaguTest(30065,0);
		Look(0,66);
		Wait(10);

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"最初にジャンプ。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(30067,5);
		Wait(15);
		KaguTest(30066,1);

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"敵のターゲットマークが変わっていたら、攻撃ボタン。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		TekiStop(0);
		KaguTest(30066,0);
		KaguTest(20038,35);
		Wait2(20);
		KaguTest(30066,1);
//		Message(0,"これがターゲットアタックね","","","");

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"攻撃が当たれば、もう一度ジャンプできる。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(30066,0);
		KaguTest(30067,5);
		Wait(15);
		KaguTest(30066,1);

		KaguTest(10006,0);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ジャンプの後は、攻撃ボタンでターゲットアタック。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);

		KaguTest(30066,0);
		KaguTest(20038,35);
		Wait2(60);
		Message(0,"ターゲットアタックがヒットすれば","空中ジャンプができるから","もう一度ターゲットアタックができるのね","");
		Message(0,"ということは、敵がいる限り","空中ジャンプ→攻撃を","続けられるみたいだわ","");
		Camera(-1,0,0,0);
	}
	
	ch[2104] = 0;
	ch[2123] = 1;

	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 104:箱チュートリアル
#Script:01018
int main()
{
	// 箱ちゅー
	TekiStop(1);
//	SaveCamera();

//	ch[420] = 1650;
//	ch[421] = -2250;
//	ch[422] = -165;
//	ch[423] = 675;
//	ch[424] = -2250;
//	ch[425] = -855;
//	KaguTest(30019,1);	// カメラセット
//	CrossFade();
//	Wait(30);
//
//	KaguTest(10006,2);
//	ch[423] = 0;
//	KaguTest(10007,4);
//	KaguTest2(10008,0,"箱を動かしてみよう");
//	KaguTest2(10008,1,"木箱や枠付きの箱に触れると箱をつかみます。");
//	KaguTest2(10008,2,"箱をつかんだ状態で移動すると");
//	KaguTest2(10008,3,"箱を押したり引いたりすることができます。");
//	KaguTest2(10008,4,"ジャンプや攻撃で手をはなします。");
//	KaguTest(10010,10);
//	
//	Wait(10);
//	Message(0,"","","","");
//	KaguTest(10011,10);
//	Wait(10);
//
//	KaguTest(30019,0);	// カメラ解除
//	RestoreCamera();
//	CrossFade();
//	Wait(15);

	Message(0,"何か書いてある","","","");

	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_09.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
	ch[2124] = 1;

	TekiStop(0);
}
#EndScript

// 104:ジャンプターゲットチュートリアル
#Script:01019
int main()
{
	// ジャンプちゅー
	TekiStop(1);
//	SaveCamera();

//	ch[420] = 750;
//	ch[421] = 375;
//	ch[422] = 850;
//	ch[423] = 0;
//	ch[424] = 1425;
//	ch[425] = 120;
//	KaguTest(30019,1);	// カメラセット
//	CrossFade();
//	Wait(30);
//
//	KaguTest(10006,2);
//	ch[423] = 0;
//	KaguTest(10007,4);
//	KaguTest2(10008,0,"ジャンプターゲットって何？");
//	KaguTest2(10008,1,"星のターゲットが見える時にジャンプすると");
//	KaguTest2(10008,2,"その場所に向かってジャンプします。");
//	KaguTest2(10008,3,"（Ｂｅｇｉｎｅｒモードのみ）");
//	KaguTest(10010,10);
//	
//	Wait(10);
//	Message(0,"","","","");
//	KaguTest(10011,10);
//	Wait(10);
//
//	KaguTest(30019,0);	// カメラ解除
//	RestoreCamera();
//	CrossFade();
//	Wait(15);

	Message(0,"何か書いてある","","","");

	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_10.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
	ch[2125] = 1;

	TekiStop(0);
}
#EndScript

// 104:木箱チュートリアル
#Script:01020
int main()
{
	// 木箱ちゅー
	TekiStop(1);
//	SaveCamera();
//
//	ch[420] = -1800;
//	ch[421] = 1300;
//	ch[422] = 625;
//	ch[423] = -1800;
//	ch[424] = 2175;
//	ch[425] = 100;
//	KaguTest(30019,1);	// カメラセット
////	CrossFade();
//	Wait(30);
//
//	KaguTest(10006,2);
//	ch[423] = 0;
//	KaguTest(10007,4);
//	KaguTest2(10008,0,"木箱を壊してみよう");
//	KaguTest2(10008,1,"ジャンプして落下中に攻撃ボタンを押すことで");
//	KaguTest2(10008,2,"下に向けて攻撃します。");
//	KaguTest2(10008,3,"この方法で何度か箱を攻撃すると");
//	KaguTest2(10008,4,"箱を壊すことができます。");
//	KaguTest(10010,10);
//	
//	Wait(10);
//	Message(0,"","","","");
//	KaguTest(10011,10);
//	Wait(10);
//
//	KaguTest(30019,0);	// カメラ解除
////	RestoreCamera();
////	CrossFade();
//	Wait(15);

	Message(0,"何か書いてある","","","");

	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_11.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
	ch[2126] = 1;

	TekiStop(0);
}
#EndScript

// 102:土チュートリアル
#Script:01021
int main()
{
	// 土ちゅー
	TekiStop(1);
//	SaveCamera();
//
//	ch[420] = 1575;
//	ch[421] = -1150;
//	ch[422] = 525;
//	ch[423] = 1575;
//	ch[424] = 450;
//	ch[425] = 75;
//	KaguTest(30019,1);	// カメラセット
//	CrossFade();
//	Wait(30);
//
//	KaguTest(10006,2);
//	ch[423] = 20;
//	KaguTest(10007,4);
//	KaguTest2(10008,0,"ターゲットアタックを使ってみよう");
//	KaguTest2(10008,1,"敵にターゲットリングが表示されている状態で");
//	KaguTest2(10008,2,"ジャンプ中に攻撃ボタンとジャンプボタンを同時押しすると");
//	KaguTest2(10008,3,"敵に向かって自動で追撃する");
//	KaguTest2(10008,4,"「ターゲットアタック」を行うことができます。");
//	KaguTest2(10008,5,"「ターゲットアタック」後、再びジャンプすることができるので");
//	KaguTest2(10008,6,"敵がいる限り何度でも「ターゲットアタック」を行うことができます。");
//	KaguTest(10010,10);
//	
//	Wait(10);
//	Message(0,"","","","");
//	KaguTest(10011,10);
//	Wait(15);
//
//	KaguTest(30019,0);	// カメラ解除
//	RestoreCamera();
//	CrossFade();
//	Wait(15);

	Message(0,"何か書いてある","","","");

	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_07.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
	ch[2127] = 1;

	TekiStop(0);
}
#EndScript

// 104:ジャンプターゲットチュートリアル抹消チェック
#Script:01022
int main()
{
	if (ch[455] != 1)
	{
		ch[420] = 150;
		ch[421] = 450;
		
		KaguTest(30011,0);
		KaguTest(30052,0);
	}
}
#EndScript

// 605 -> 604
#Script:01023
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 604 -> 610
#Script:01024
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	
	ch[420] = 42;
	KaguTest(12008,1);
	
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 603 -> 602
#Script:01025
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 602 -> 601
#Script:01026
int main()
{
	KaguTest(40002,0);
	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// 601 -> 601イベントボックス移動
#Script:01027
int main()
{
	if (ch[2520])
	{
		MapEvent(0);
		Walk(-8,2,11);
		Black(0,100,11);
		Wait(11);
	}
	else
	{
		ch[2520] = 1;
		Black(0,100,0);
	}
	CharPos(0,2535,-614,-600);
	ch[3753] = 1;
	LoadMap(601);
	Wait(15);
	Walk(-5,2,15);
	Black(0,0,15);
	Wait(15);
	KaguTest(10600,ch[1107]-2260);
	MMV(StageMMV(ch[420]));
//	Event(237);
	TekiStop(0);
	ch[300] = 1;
	MapEvent(1);
}
#EndScript

// 603:ブラーオン
#Script:01028
int main()
{
	if (ch[2497])
	{
		Blur(5,120,60);
	}
	else
	{
		Blur(5,90,60);
	}
	ch[300] = 1;
}
#EndScript

// 603:ブラーオフ
#Script:01029
int main()
{
	Blur(5,0,60);
	ch[300] = 0;
}
#EndScript

// 610:踏み切りおろす
#Script:01030
int main()
{
	Event(825);
	ch[420] = 16;
	KaguTest(30042,925);
}
#EndScript

// 604:レバー引いたら橋降りる
#Script:01031
int main()
{
	TekiStop(1);
	Wait(10);
	SE(950);
	
	SaveCamera();
	
	ch[420] = 3270;
	ch[421] = 4275;
	ch[422] = 690;
	ch[423] = 4050;
	ch[424] = 5175;
	ch[425] = 150;
	if (ch[2497])
	{
		ch[423] = -1 * ch[423];
		ch[420] = ch[423] - 780;
	}
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	
	Event(102);
	Wait(15);
	SE(959);
	Wait(100);
	Event(103);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(20);
	
	TekiStop(0);

	if (ch[2497])
	{
		// 掘削ポイント掘削
		Ksk(23);
	}

	ch[300] = 1;
}
#EndScript

// 610:トロッコレバー
#Script:01032
int main()
{
	if (!ch[25])
	{
		Mes("硬すぎて動かせない。");
	}
	else
	{
		Mes("壊れていて動かせない。");
	}
}
#EndScript

// 601:扉開ける
#Script:01033
int main()
{
	int x;
	int y;
	int z;
	int bt15;
	int ln;
	int a;
	a = 0;
	
	if (!ch[262])
	{
		TekiStop(1);
		Wait(10);
		SaveCamera();
		a = 1;

		CrossFade();
		Blur(3,100,20);
		ch[420] = 6239;
		ch[421] = 4821;
		ch[422] = 477;
		ch[423] = 4929;
		ch[424] = 5384;
		ch[425] = 70;
		KaguTest(30093,20);
		KaguTest(30019,14);
		Wait(20);
		ch[420] = 4900;
		ch[421] = 5605;
		ch[422] = 477;
		ch[423] = 3476;
		ch[424] = 5543;
		ch[425] = 70;
		KaguTest(30093,20);
		Wait(20);
		Event(238);
		Wait(40);
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Blur(3,0,20);
		Wait(15);
		ch[262] = 1;
//		Blur(3,0,20);
	}
	TekiStop(0);
	return 0;
	
	ln = Lift2C(1);
	GetCharPos(ln,x,y,z);
	
	bt15 = Getbt15(ln);
	
	if (!bt15)
	{
		if (x < 4000)
		{
			Black(0,100,15);
			Wait(15);
			KaguTest(30019,0);
		}
		if (!a)
		{
			TekiStop(1);
			Wait(10);
			SaveCamera();
		}
		// リフト動かせる
		Camera(ln,x + 700,y - 700,z + 600);
		ch[421] = x + 700;
		ch[422] = y - 700;
		ch[423] = z + 600;
		KaguTest(30010,0);
		CrossFade();
		Blur(3,100,30);
		Wait(5);
		Camera(-1,0,0,0);
		ch[420] = x + 700;
		ch[421] = y - 700;
		ch[422] = z + 600;
		ch[423] = x;
		ch[424] = y;
		ch[425] = z;
		KaguTest(30019,1);
		Black(0,0,15);
		Wait(20);
		Event(232);
		if (x > 4000)
		{
			// 戻る
			ch[420] = 6434;
			ch[421] = 4937;
			ch[422] = 609;
			ch[423] = 5084;
			ch[424] = 5469;
			ch[425] = 70;
			KaguTest(30093,20);
			KaguTest(30019,14);
			Wait(20);
			ch[420] = 2948;
			ch[421] = 5595;
			ch[422] = 395;
			ch[423] = 1706;
			ch[424] = 5502;
			ch[425] = 70;
			KaguTest(30093,40);
			Wait(40);
			ch[420] = 1177;
			ch[421] = 6196;
			ch[422] = 831;
			ch[423] = 1104;
			ch[424] = 4623;
			ch[425] = 420;
			KaguTest(30093,20);
			Wait(20);
			ch[420] = -248;
			ch[421] = 3715;
			ch[422] = 1436;
			ch[423] = 1252;
			ch[424] = 3992;
			ch[425] = 870;
			KaguTest(30093,20);
			Wait(20);
			ch[420] = 1387;
			ch[421] = 3679;
			ch[422] = 1586;
			ch[423] = 2310;
			ch[424] = 4429;
			ch[425] = 1145;
			KaguTest(30093,20);
			Wait(20);
			ch[420] = 1875;
			ch[421] = 4014;
			ch[422] = 1437;
			ch[423] = 2525;
			ch[424] = 4633;
			ch[425] = 895;
			KaguTest(30093,20);
			Wait(30);
			Blur(3,0,15);
			Wait(20);
		}
		else
		{
			// 来る
			ch[420] = 3385;
			ch[421] = 3988;
			ch[422] = 1416;
			ch[423] = 2337;
			ch[424] = 4117;
			ch[425] = 1170;
			KaguTest(30093,20);
			KaguTest(30019,14);
			Wait(15);
			ch[420] = 2275;
			ch[421] = 3949;
			ch[422] = 1430;
			ch[423] = 1143;
			ch[424] = 4265;
			ch[425] = 820;
			KaguTest(30093,20);
			Wait(20);
			ch[420] = 1171;
			ch[421] = 3662;
			ch[422] = 1559;
			ch[423] = 1123;
			ch[424] = 4647;
			ch[425] = 370;
			KaguTest(30093,20);
			Wait(20);
			ch[420] = 155;
			ch[421] = 5093;
			ch[422] = 568;
			ch[423] = 1564;
			ch[424] = 5481;
			ch[425] = 70;
			KaguTest(30093,25);
			Wait(25);
			ch[420] = 3177;
			ch[421] = 5547;
			ch[422] = 344;
			ch[423] = 4696;
			ch[424] = 5576;
			ch[425] = 70;
			KaguTest(30093,25);
			Wait(25);
			ch[420] = 5500;
			ch[421] = 5404;
			ch[422] = 344;
			ch[423] = 6881;
			ch[424] = 4770;
			ch[425] = 70;
			KaguTest(30093,25);
			Wait(30);
			Blur(3,0,15);
			Wait(20);
		}
		
		if (x > 4000)
		{
			Black(0,100,15);
			Wait(15);
		}

		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		if (x > 4000)
		{
			Black(0,0,15);
		}
		TekiStop(0);
	}
	KaguTest(30019,0);
}
#EndScript

// 601:プレートのると箱振ってくる
#Script:01034
int main()
{
	int hako1;
	int hako2;
	int hako3;
	int x,y,z;

	TekiStop(1);
	MapEvent(0);
	
	if (ch[260])
	{
		// 既に扉あいてる
		Mes("何もおきなかった。");
		Walk(-5,0,30);
		Wait(30);
		TekiStop(0);
		MapEvent(1);
		return 0;
	}
	
	ch[421] = 0;
	KaguTest(30034,1);
	
	Blur(2,200,40);
	SE(954);
	Wait(40);
	Blur(2,0,30);
	Walk(-5,0,30);

	ch[420] = 15;
	ch[421] = 3150;
	ch[422] = 2100;
	ch[423] = 1950;
	KaguTest(30029,0);
	hako1 = ch[424];
	ch[420] = 14;
	ch[421] = 2175;
	ch[422] = 1875;
	ch[423] = 2400;
	KaguTest(30029,0);
	hako2 = ch[424];
	ch[420] = 13;
	ch[421] = 3150;
	ch[422] = 2175;
	ch[423] = 2110;
	KaguTest(30029,0);
	hako3 = ch[424];
	
	SaveCamera();
	
	Wait(20);
	
	GetCharPos(hako1,x,y,z);
//	ch[421] = x;
//	ch[422] = y - 1000;
//	ch[423] = z + 400;
//	KaguTest(30010,0);
	Camera(hako1,x,y - 1000,z + 400);
	CrossFade();
	Wait(45);
	GetCharPos(hako2,x,y,z);
	ch[421] = x;
	ch[422] = y - 1000;
	ch[423] = z + 400;
	KaguTest(30010,0);
	Camera(hako2,x,y - 1000,z + 400);
	CrossFade();
	Wait(45);
//	GetCharPos(hako3,x,y,z);
//	ch[421] = x;
//	ch[422] = y - 1000;
//	ch[423] = z + 400;
//	KaguTest(30010,0);
//	Camera(hako3,x,y - 1000,z + 400);
//	CrossFade();
//	Wait(45);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	if (ch[16])
	{
		Mes("新しい箱が現れた。");
	}
	else
	{
		Mes("箱が現れた。");
		ch[16] = 1;
		
		// 赤スライム三人衆発生
		ch[420] = 100000;
		ch[427] = 0;
		KaguTest(30016,99);
	}

	Wait(15);
	
	TekiStop(0);
	MapEvent(1);
}
#EndScript

//601:全てのボタンが押されていたら扉開く
#Script:01035
int main()
{
	int x,y,z;
	int ln;

	if (ch[10] && ch[11] && ch[12])
	{
		// OK
		TekiStop(1);
		Wait(20);
		ln = Door2C(1);
		
		SE(950);
		
		GetCharPos(ln,x,y,z);
		SaveCamera();
		Camera(ln,x,y-1200,z+400);
		CrossFade();
		Wait(30);
		Event(234);
		Wait(45);
		Camera(-1,0,0,0);
		CrossFade();
		Wait(15);
		TekiStop(0);
		
		ch[260] = 1;
		
		ch[421] = -200000;
		ch[422] = 0;
		ch[423] = 0;
		ch[420] = 15;
		KaguTest(30029,0);
		ch[420] = 14;
		KaguTest(30029,0);
		ch[420] = 13;
		KaguTest(30029,0);

	}
}
#EndScript

//602:レバー引かれたら扉開く
#Script:01036
int main()
{
	int x,y,z;
	int ln;

	{
		// OK
		TekiStop(1);
		
		Wait(10);
		SE(950);
		
		SaveCamera();

		ch[420] = 1671;
		ch[421] = 11993;
		ch[422] = -36;
		ch[423] = 1814;
		ch[424] = 11101;
		ch[425] = -279;
		KaguTest(30093,20);
		ch[420] = 1814;
		ch[421] = 11101;
		ch[422] = -279;
		KaguTest(30094,20);
		KaguTest(30019,15);
		CrossFade();
		Blur(3,100,30);
		Wait(17);
		ch[420] = 1175;
		ch[421] = 11404;
		ch[422] = 93;
		ch[423] = 1662;
		ch[424] = 10106;
		ch[425] = -279;
		KaguTest(30093,20);
		KaguTest(30019,14);
		Wait(17);
		ch[420] = 2214;
		ch[421] = 8343;
		ch[422] = 842;
		ch[423] = 3640;
		ch[424] = 8825;
		ch[425] = 820;
		KaguTest(30093,35);
		Wait(32);
		ch[420] = 4314;
		ch[421] = 9215;
		ch[422] = 1452;
		ch[423] = 4481;
		ch[424] = 10471;
		ch[425] = 820;
		KaguTest(30093,20);
		Blur(3,0,20);
		Wait(30);

		Event(234);
		Wait(45);

		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		TekiStop(0);
		
		ch[261] = 1;
	}
}
#EndScript

// 604裏：火つけたら扉開く
#Script:01037
int main()
{
	if (!ch[301] || !ch[302] || !ch[303])
	{
		ch[321] = 1;
		// 次の火の場所教える
		TekiStop(1);
		SaveCamera();
		Wait(25);
		int basyo;
		if (!ch[304])
		{
			basyo = 4;
		}
		if (!ch[303])
		{
			basyo = 3;
		}
		if (!ch[302])
		{
			basyo = 2;
		}
		if (!ch[301])
		{
			basyo = 1;
		}
	
		if (basyo == 1)
		{
			// 最初の飾台
//			ch[420] = -1140;
//			ch[421] = 4995;
//			ch[422] = 549;
//			ch[423] = -2233;
//			ch[424] = 7077;
//			ch[425] = 245;
			ch[420] = -1809;
			ch[421] = 5969;
			ch[422] = 610;
			ch[423] = -2234;
			ch[424] = 7074;
			ch[425] = 270;
			KaguTest(30093,45);
			KaguTest(30019,14);
			Blur(1,100,15);
			Wait(45);
			Blur(1,0,15);
			Wait(30);
			KaguTest(30019,0);
			RestoreCamera();
			CrossFade();
			Wait(15);
			Message(0,"あそこに飾台があるみたいね","","","");
		}
		if (basyo == 2)
		{
			// 次の飾台
//			ch[420] = -422;
//			ch[421] = 4628;
//			ch[422] = 689;
//			ch[423] = 1078;
//			ch[424] = 6192;
//			ch[425] = 70;
			ch[420] = 250;
			ch[421] = 5095;
			ch[422] = 461;
			ch[423] = 1033;
			ch[424] = 6109;
			ch[425] = 95;
			KaguTest(30093,45);
			KaguTest(30019,14);
			Blur(1,100,15);
			Wait(45);
			Blur(1,0,15);
			Wait(30);
			KaguTest(30019,0);
			RestoreCamera();
			CrossFade();
			Wait(15);
			Message(0,"次の飾台はあっちみたいね","","","");
		}
		if (basyo == 3)
		{
			// 最後っぽい飾台
//			ch[420] = 801;
//			ch[421] = 2805;
//			ch[422] = 668;
//			ch[423] = 3226;
//			ch[424] = 2071;
//			ch[425] = -54;
			ch[420] = 2343;
			ch[421] = 3120;
			ch[422] = 411;
			ch[423] = 3144;
			ch[424] = 2121;
			ch[425] = 46;
			KaguTest(30093,45);
			KaguTest(30019,14);
			Blur(1,100,15);
			Wait(45);
			Blur(1,0,15);
			Wait(30);
			KaguTest(30019,0);
			RestoreCamera();
			CrossFade();
			Wait(15);
			Message(0,"次の飾台はあっちみたいね","","","");
		}
		if (basyo == 4)
		{
			// 扉はまだ開かない
			ch[420] = -162;
			ch[421] = 1426;
			ch[422] = 351;
			ch[423] = -121;
			ch[424] = -106;
			ch[425] = -4;
			KaguTest(30019,1);
			CrossFade();
			Wait(65);
			KaguTest(30019,0);
			RestoreCamera();
			CrossFade();
			Wait(15);
			Message(0,"どこかにまだ","飾台が残ってるみたいね","","");
		}
		TekiStop(0);
	
		return 0;
	}

	int x,y,z;
	int ln;
	
	TekiStop(1);
	Wait(10);
	SE(950);
	SaveCamera();
	ln = Door2C(1);
	
	GetCharPos(ln,x,y,z);
	Camera(ln,x,y+1400,z+400);
	ch[421] = x;
	ch[422] = y + 1400;
	ch[423] = z + 400;
	KaguTest(30010,0);
	CrossFade();
	Wait(15);
	
	Event(233);
	
	Wait(45);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	TekiStop(0);
	
	ch[262] = 1;
}
#EndScript

// 604裏：敵倒したら扉開く
#Script:01038
int main()
{
	Event(234);
//	SE(950);
	ch[322] = 1;
}
#EndScript

// 604裏：あたりに触れたら敵出す
#Script:01039
int main()
{
	int map;
	TekiStop(1);
	KaguTest(20010,0);
	map = ch[420];
	
	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");

	Camera(Door2C(2),-3181,93,320);
	CrossFade();
	Wait(20);
	Look(0,Door2C(2));
	Event(302);
	Wait(30);

	Camera(-1,0,0,0);
	ch[420] = -2688;
	ch[421] = 1211;
	ch[422] = 260;
	ch[423] = -3214;
	ch[424] = -37;
	ch[425] = -54;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	
	TekiStop(1);

	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,50);
	KaguTest(30015,51);
	KaguTest(30015,52);
	KaguTest(30025,50);
	Look(0,ch[420]);

	Wait(30);
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 601裏：敵倒したら扉開く
#Script:01040
int main()
{
	int x,y,z;
	int ln;

	Wait(15);
	TekiStop(1);
	SE(950);

	SaveCamera();
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	Camera(ln,x+1600,y,z+400);
	CrossFade();
	Wait(15);

	Event(234);
	Wait(45);
	ch[268] = 1;
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 605裏：604裏：落ちアタリ触れたら敵復活
#Script:01041
int main()
{
	// 10番と11番復活
	KaguTest(30021,10);
	KaguTest(30021,11);
}
#EndScript

// 607:レバーの色を変える
#Script:01042
int main()
{
//	ch[420] = 30;
//	ch[421] = 30;
//	ch[422] = 30;
//	KaguTest(20049,93);
	KaguTest(20050,0);
}
#EndScript

// 603:レバー引くとミニサップ発生
#Script:01043
int main()
{
	TekiStop(1);
	Wait(15);
	
	SaveCamera();

	ch[420] = 5700;
	ch[421] = -1669;
	ch[422] = 450;
	ch[423] = 5700;
	ch[424] = -2918;
	ch[425] = 70;
	KaguTest(30093,15);
	KaguTest(30019,14);
	CrossFade();
	Wait(30);
	
	Event(232);
	
	Wait(30);
	
	// 敵発生＆目が光る？
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	KaguTest(30025,2);
	int c;
	int pt1;
	int pt2;
	int pt3;
	c = ch[420];
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	KaguTest(12000,c+2);
	ch[420] = -1;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	KaguTest(30051,c+2);
	Look(0,c);
	
	Walk2(c,0,14,60);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,3);
	Walk2(c+1,0,14,45);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,4);
	Walk2(c+2,0,14,45);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(15);
	Walk2(c+1,8,6,30);
	KaguTest(30039,0);
	Wait(30);
	Look(c+1,0);
	Walk2(c+2,-8,6,30);
	KaguTest(30039,0);
	Wait(30);
	Look(c+2,0);
	Wait(15);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(20);
	
	ch[301] = 1;
	ch[303] = 1;
	ch[265] = 1;

	ch[420] = 0;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	KaguTest(30051,c+2);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = pt3;
	KaguTest(12002,c+2);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	TekiStop(0);
}
#EndScript

// 605:リフト監視
#Script:01044
int main()
{
	// NULL敵探す
	ch[420] = 1;
	ch[421] = 0;
	KaguTest(30110,32);
	int c;
	c = ch[420];
	KaguTest(12006,c);
	ch[420] = c;
	ch[421] = 1;
	KaguTest(20044,450);
	ch[420] = 0;
	KaguTest2(30023,c,"@RopewayRoot1");
//	ch[420] = 1;
//	KaguTest2(30023,c,"@RopewayRoot1");
	ch[420] = 2;
	KaguTest2(30023,c,"@RopewayRoot2");
}
#EndScript

// 603:プロミネ拾う
#Script:01045
int main()
{
	TekiStop(1);
	ch[420] = 400;
	Event(1201);
	ch[420] = -1650;
	ch[421] = 225;
	KaguTest(30011,0);
	KaguTest(20068,25);
	GetItem(25);
	Mes("「爆熱のパーツ」を手に入れた。");
	SE(956);
	Wait(40);
	ch[2188]=1;
	
	TekiStop(0);
}
#EndScript

// 604裏：レバー横の掘削ポイント壊すと敵発生
#Script:01046
int main()
{
	Wait(10);
	ch[420] = -5500;
	ch[421] = 2575;
	KaguTest(30088,45)
	if (ch[422])
	{
		Camera(0,-5500,2575,370);
		CrossFade();
		Wait(15);
	}
	TekiStop(1);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	Wait(20);
	TekiStop(0);
	Camera(-1,0,0,0);
	CrossFade();
}
#EndScript

// 604裏：あたりに触れたらしいたけスライム落ちる＆こうもりに乗って復帰
#Script:01047
int main()
{
	int pt[4];
	int c;
	int i;
	int x;
	int y;
	int z;

	TekiStop(1);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	KaguTest(30025,2);
	c = ch[420];
	for (i = 0;i < 4;i++)
	{
		KaguTest(12004,c + i);
		pt[i] = ch[420];
		KaguTest(12000,c + i);
		ch[420] = 0;
		KaguTest(30041,c + i);
	}

	ch[420] = -5277;
	ch[421] = 3788;
	ch[422] = 328;
	ch[423] = -4177;
	ch[424] = 3564;
	ch[425] = 1020;
	KaguTest(30093,20);
	KaguTest(30019,14);
	CrossFade();
	Wait(15);
	// 落下中かチェック
	GetCharPos(0,x,y,z);
	if (z < 250)
	{
		// 場所移動
		CharPos(0,-4650,3650,300);
	}
	Wait(5);
	Look(0,c+1);

	// 敵！	
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c+1);
	Wait(15);
	KaguTest(30036,c+3);
	Wait(45);
	
	// 敵飛び降りる
	Walk2(c+1,-17,5,30);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(2);
	ch[420] = 1;
	KaguTest(30041,c+1);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(13);
	Walk2(c+3,-13,5,30);
	Wait(2);
	ch[420] = 1;
	KaguTest(30041,c+3);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+3);

	ch[420] = -6025;
	ch[421] = 3525;
	ch[422] = 753;
	ch[423] = -4687;
	ch[424] = 3535;
	ch[425] = 370;
	KaguTest(30093,30);
	Wait(30);
		// パリン「…」
	ch[420] = 2009;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(90);

	// スライム移動
	GetCharPos(c,x,y,z);
	CharPos(c+1,x,y,z);
	GetCharPos(c+2,x,y,z);
	CharPos(c+3,x,y,z);
	
	// ＰＴ戻す
	for (i = 0;i < 4;i++)
	{
		ch[420] = pt[i];
		KaguTest(12002,c + i);
		ch[420] = 2;
		KaguTest(12005,c + i);
		ch[420] = 1;
		KaguTest(30041,c + i);
	}
	Wait(30);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	
//	TekiStop(0);
//	Wait(5);
	
	// bttmp設定
		// スライム側
	ch[420] = c + 1;
	ch[421] = 2;
	KaguTest(20044,101);
	ch[421] = 4;
	KaguTest(20044,1);
	ch[420] = c + 3;
	ch[421] = 2;
	KaguTest(20044,101);
	ch[421] = 4;
	KaguTest(20044,1);
		// コウモリ側
	ch[420] = c;
	ch[421] = 2;
	KaguTest(20044,100);
	ch[421] = 3;
	KaguTest(20044,0);
	ch[420] = c+2;
	ch[421] = 2;
	KaguTest(20044,100);
	ch[421] = 3;
	KaguTest(20044,0);
	
	KaguTest(30019,0);
	CrossFade();
	TekiStop(0);

	for (i = 0;i < 4;i++)
	{
		ch[420] = 3;
		KaguTest(12005,c + i);
	}
	
}
#EndScript

// 604裏：敵倒したら扉悪
#Script:01048
int main()
{
	SaveCamera();
	Wait(20);
	SE(950);
	Camera(Door2C(2),-3181,93,320);
	CrossFade();
	Wait(20);
	Event(235);
	Wait(30);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
}
#EndScript

// 205:玉アタリ消す
#Script:01049
int main()
{
	KaguTest2(30014,3,"@ballA");
}
#EndScript

// 203:落ちたらフォースカメラ切る
#Script:01050
int main()
{
	KaguTest(30056,-1);
}
#EndScript

// ミニフィールド:地面設定
#Script:01051
int main()
{
	if (ch[2522] && !ch[1538])
	{
//		KaguTest2(30014,3,"egg1");
					// 進行状況に応じて地面設定変更
		if (!ch[3200])
		{
			KaguTest2(30014,3,"poboss");
			KaguTest2(30014,3,"funsui");
		}
		if (!ch[3201])
		{
			KaguTest2(30014,3,"mori2");
			KaguTest2(30014,3,"spin1");
		}
		if (!ch[3202])
		{
			KaguTest2(30014,3,"moriboss");
			KaguTest2(30014,3,"poura1");
		}
		if (!ch[3203])
		{
			KaguTest2(30014,3,"spin2");
			KaguTest2(30014,3,"ie2");
			KaguTest2(30014,3,"yama1");
		}
		if (!ch[3204])
		{
			KaguTest2(30014,3,"poura2");
		}
		if (!ch[3205])
		{
			KaguTest2(30014,3,"spinboss");
			KaguTest2(30014,3,"moriura1");
			KaguTest2(30014,3,"ie3");
		}
		if (!ch[3206])
		{
			KaguTest2(30014,3,"yama2");
		}
		if (!ch[3207])
		{
			KaguTest2(30014,3,"moriura2");
		}
		if (!ch[3208])
		{
			KaguTest2(30014,3,"yamaboss");
			KaguTest2(30014,3,"spinura1");
		}
		if (!ch[3209])
		{
			KaguTest2(30014,3,"spinura2");
		}
		if (!ch[3210])
		{
//			KaguTest2(30014,3,"egg1");
			KaguTest2(30014,3,"ie4");
		}
		if (!ch[3211])
		{
			KaguTest2(30014,3,"egg2");
			KaguTest2(30014,3,"yamaura1");
		}
		if (!ch[3212])
		{
			KaguTest2(30014,3,"yamaura2");
		}
		if (!ch[3213])
		{
			KaguTest2(30014,3,"eggboss");
		}
		if (!ch[3214])
		{
			KaguTest2(30014,3,"great");
		}
		if (!ch[3215])
		{
			KaguTest2(30014,3,"eggura1");
//			KaguTest2(30014,3,"ie4");
		}
		if (!ch[3216])
		{
			KaguTest2(30014,3,"eggura2");
		}
		if (!ch[3217])
		{
			KaguTest2(30014,3,"hakai");
		}
		if (!ch[3223])
		{
			KaguTest2(30014,3,"ie4_1");
		}
		if (!ch[3224])
		{
			KaguTest2(30014,3,"ie4_2");
		}
		if (!ch[3225])
		{
			KaguTest2(30014,3,"ie4_3");
		}
//		if (!ch[2527])
//		{
//			KaguTest2(30014,3,"yama1");
//		}
	}
	ch[295] = 1;
}
#EndScript

//ミニフィールド：新しい通路発見
#Script:01052
int main()
{
	ch[397] = 1;
	return 0;
}
#EndScript

// 601:アタリに触れると羽スライム出てくる
#Script:01053
int main()
{
	int c;
	int pt[8];
	int i;
	int j;
	TekiStop(1);

	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");
	
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c = ch[420];
	
	// 敵動く
	for (i = 0;i < 8;i++)
	{
		KaguTest(12004,c + i);
		pt[i] = ch[420];
		KaguTest(12000,c + i);
		KaguTest(30078,c + i);
		if (i == 0)
		{
			Walk2(c+i,12,0,120);
		}
		else
		{
			Walk2(c+i,12,0,150);
		}
		j = i / 4;
		ch[429] = 1;
		KaguTest(30039,j);
		ch[429] = 0;
		ch[420] = 5;
		ch[421] = 1;
		ch[422] = 0;
		KaguTest(12003,c + i);
		ch[420] = -1;
		KaguTest(30051,c + i);
	}

	// カメラ
	ch[420] = -598;
	ch[421] = -97;
	ch[422] = 444;
	ch[423] = -1592;
	ch[424] = 1776;
	ch[425] = 170;
	KaguTest(30093,30);
	KaguTest(30019,14);
	Wait(30);
	ch[423] = -836;
	ch[424] = 1900;
	KaguTest(30093,90);
	Wait(80);
	
	CharPos(0,-150,0,0);

	KaguTest(30077,c);
	ch[420] = 6;
	ch[421] = 1;
	ch[422] = 0;
	KaguTest(12003,c);
	Look(c,0);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(30);
	
	for (i = 1;i < 8;i++)
	{
		KaguTest(30077,c + i);
		ch[420] = 6;
		ch[421] = 1;
		ch[422] = 0;
		KaguTest(12003,c + i);
		if (i != 0)
		{
			Look(c + i,0);
			ch[420] = 15;
			ch[429] = 1;
			KaguTest(30036,c + i);
		}
	}
	Wait(30);
	
	for (i = 0;i < 8;i++)
	{
		ch[420] = pt[i];
		KaguTest(12002,c + i);
		ch[420] = 3;
		KaguTest(12005,c + i);
		ch[420] = 0;
		KaguTest(30051,c + i);
	}

	ch[420] = 44;
	ch[421] = -761;
	ch[422] = 285;
	ch[423] = -158;
	ch[424] = -38;
	ch[425] = 70;
	KaguTest(30019,1);	
	CrossFade();
	TekiStop(0);
	Wait(7);
	for (i = 0;i < 8;i++)
	{
		ch[421] = 6;
		KaguTest(20048,c+i);
		if (ch[420])
		{
			ch[420] = c + i;
			KaguTest(20044,-1);
		}
	}
	KaguTest(30019,0);
}
#EndScript

// 302:落ちアタリに触れたらリフトを初期位置に戻す
#Script:01054
int main()
{
	ch[420] = 30;
	KaguTest(30042,555);
}
#EndScript

// 012:ティースの街初回
#Script:01055
int main()
{
	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_02.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);

	MMV("teet.mmv");
	ch[2236] = 1;
}
#EndScript

// 203:立て札
#Script:01056
int main()
{
	Message(0,"何か書いてある","","","");
	Message(0,"「落ちるな危険","s050怪盗Ｍ」","","");
	Message(0,"……何か間違ってる気がする","","","");
}
#EndScript

// 308裏：ブラックビーン倒した
#Script:01057
int main()
{
//	Wait(60);
	// クリア表示
	MapEvent(0);
	TekiStop(1);

	KaguTest(40002,0);

	// ボスラッシュ中？
	if (ch[2092])
	{
		KaguTest(10500,120);

		Wait(90);
		
		Message(0,"","","","");
		KaguTest(10011,5);
		Wait(10);

		KaguTest(20023,0);
		Mes("ボスラッシュ制覇！");
		SE(819);
		Wait(60);
		ch[2093] = 1;
		


		

		int nyuu;
		nyuu=0;
		if(ch[455]<2)
		{
			if(!GetCf(5))
			{
				nyuu=1;
			}
			KaguTest(99992,5);
		}
		if(ch[455]==2 && !ch[3961])
		{
			if(!GetCf(7))
			{
				nyuu=1;
			}
			KaguTest(99992,7);
		}
		if(ch[455]==2 && ch[3961]==1)
		{
			if(!GetCf(6))
			{
				nyuu=1;
			}
			KaguTest(99992,6);
		}
		if(ch[455]==2 && ch[3961]==2)
		{
			if(!GetCf(9))
			{
				nyuu=1;
			}
			KaguTest(99992,9);
		}

		if(nyuu)
		{
			SE(564);
			Mes("新しいコスチュームが追加されました。");
			Wait(60);
			Mes("クローゼットで着替えることが出来ます。");
			Wait(60);
		}
		Black(0,100,30);
		Wait(30);
		
		KaguTest(100000,0);
		LoadMap(6);
		CharPos(0,0,-300,0);
		int x;
		int y;
		int z;
		int i;
		
		for (i = 58;i < 66;i++)
		{
			GetCharPos(i,x,y,z);
			if (x > -20000)
			{
				ch[420] = 2;
				KaguTest(12005,i);
				// 全員待機させる
				ch[420] = 2;
				ch[421] = 1;
				ch[422] = 5;
				KaguTest(12003,i);
				ch[420] = -1;
				Look(i,18);
				KaguTest(12002,i);
			}
		}
		Wait(5);
		Look(0,18);
		Look(18,0);
		Black(0,0,30);
		Wait(30);
		MapEvent(1);
		return 0;
	}

	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
		LoadMap(207);
		CharPos(0,0,0,0);
		Black(0,0,15);
		Wait(15);
		
		KaguTest(10500,120);

		Wait(90);
		
		Message(0,"","","","");
		KaguTest(10011,5);

		Mes("ボスラッシュ制覇！");
		SE(819);
	
		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
		LoadMap(207);
		CharPos(0,0,0,0);
		Black(0,0,15);
		Wait(15);
		
		Mes("ボスラッシュ制覇！");
		Blur(2,0,0);
		return 0;
	}
	// デバッグここまで
	
	TekiStop(0);
	
	MapEvent(1);
	
	PostScr(1083);
	return 0;
}
#EndScript

// 家具説明：ポコ用
#Script:01058
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"オバケホームで見たことあるような……");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：ピエール用
#Script:01059
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"そこはかとなく高級な感じがするわ");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：チャッキー用
#Script:01060
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"これは子供向けみたいね");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：イワオ用
#Script:01061
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"何ていうか……");
	KaguTest2(10008,1,"変わった趣味よね");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：意味不明ポコ
#Script:01062
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"オバケホームで見たことあるような……");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：意味不明チャッキー
#Script:01063
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"チャッキーにあげたら喜ぶかな？");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：プレーンおばさん
#Script:01064
int main()
{
	// ここにはこないはずだ
}
#EndScript

// 家具説明：シリンダーおじさん
#Script:01065
int main()
{
	// ここにはこないはずだ
//	Message(0,"裏に「シリンダー」って書いてある。","シリンダーおじさんのかな？","","");
}
#EndScript

// 家具説明：ハイパボリックおじいさん
#Script:01066
int main()
{
	// ここにはこないはずだ
//	Message(0,"おじいさんにあげたら喜ぶかな？","","","");
}
#EndScript

// ソンブレロ
#Script:01067
int main()
{
	// ソンブレロ
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ピエールもたまには");
	KaguTest2(10008,1,"フランス以外の国を知るべきよね");
	
	KaguTest(10012,0);
}
#EndScript

// ピエール家具：鉢植え
#Script:01068
int main()
{
	// 植木鉢
	// ここにはこないはずだ
//	Message(0,"ディスカウントショップに","似たものがあった気がするわ","","");
}
#EndScript

// メダル説明
#Script:01069
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"集めているコレクターにあげよう");
	
	KaguTest(10012,0);
}
#EndScript

// 401:王冠出す
#Script:01070
int main()
{
	MapEvent(0);
	Wait(10);
	KaguTest(20067,0);
	MapEvent(1);
	if (!ch[420])
	{
		// 駄目だ
		return 0;
	}

	// OK
	ch[300] = 1;

	SaveCamera();
	ch[420] = -823;
	ch[421] = -284;
	ch[422] = 695;
	ch[423] = -1344;
	ch[424] = 678;
	ch[425] = 370;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2118);
	CharPos(ln,-1350,675,300);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
}
#EndScript

// 003:大家の部屋のメダルの宝箱
#Script:01071
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);

	SaveCamera();
	ch[420] = -290;
	ch[421] = 325;
	ch[422] = 346;
	ch[423] = 559;
	ch[424] = -130;
	ch[425] = 30;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2604);
	CharPos(ln,542,-131,0);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// クリア過去ベストＳランク以上更新時の花火
#Script:01072
int main()
{
	ch[299] = 1;
	ch[420] = 50;
	ch[421] = 50;
	ch[422] = 50;
	KaguTest(30046,0);
	KaguTest(20010,0)
	if (ch[420] == 999)
	{
		KaguTest(30032,700);
	}
	else
	{
		KaguTest(30033,150);
	}
	Wait(20);

	GetCharPos(0,ch[420],ch[421],ch[422]);
	ch[422] = ch[422] - 100;
	ch[423] = 1881;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	KaguTest(30045,20);
	KaguTest(30045,40);
	Wait(120);

	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,0);
	KaguTest(30032,0);
	KaguTest(30033,100);
	Wait(20);
	ch[299] = 0;
}
#EndScript

// 104:メダルの宝箱
#Script:01073
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);

	SaveCamera();
	ch[420] = -97;
	ch[421] = -1318;
	ch[422] = 872;
	ch[423] = 327;
	ch[424] = -105;
	ch[425] = 286;
	KaguTest(30093,10);
	KaguTest(30019,14);
	CrossFade();
	Wait(10);
	ch[420] = 288;
	ch[421] = -1470;
	ch[422] = 700;
	ch[423] = 450;
	ch[424] = -450;
	ch[425] = 345;
	KaguTest(30093,10);
	Wait(20);

	int ln;
	ln = Takara2C(2605);
	CharPos(ln,450,-450,300);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 102裏:メダルの宝箱
#Script:01074
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);

	SaveCamera();
	ch[420] = 450;
	ch[421] = -760;
	ch[422] = 370;
	ch[423] = 450;
	ch[424] = -1800;
	ch[425] = 30;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2606);
	CharPos(ln,450,-1800,0000);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 502裏:メダルの宝箱
#Script:01075
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = 510;
	ch[421] = 1075;
	ch[422] = 436;
	ch[423] = 842;
	ch[424] = -161;
	ch[425] = 70;
	KaguTest(30093,15);
	KaguTest(30019,14);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2607);
	CharPos(ln,850,-150,0000);
	SE(566);
	KaguTest(30018,ln);
	Wait(45);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 503裏:メダルの宝箱
#Script:01076
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = -2725;
	ch[421] = 8000;
	ch[422] = 220;
	ch[423] = -3675;
	ch[424] = 8400;
	ch[425] = -120;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2608);
	CharPos(ln,-3675,8400,-150);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 202裏：メダルの宝箱
#Script:01077
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = -1446;
	ch[421] = 5008;
	ch[422] = 430;
	ch[423] = -1050;
	ch[424] = 4200;
	ch[425] = 0;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2609);
	CharPos(ln,-1050,4200,0);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 204裏:メダルの宝箱
#Script:01078
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = -1350;
	ch[421] = -300;
	ch[422] = 370;
	ch[423] = -1350;
	ch[424] = 750;
	ch[425] = 30;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2610);
	CharPos(ln,-1350,750,0);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 604:メダルの宝箱
#Script:01079
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = -450;
	ch[421] = 1825;
	ch[422] = 370;
	ch[423] = -450;
	ch[424] = 750;
	ch[425] = 30;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2611);
	CharPos(ln,-450,750,0);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 605裏:メダルの宝箱
#Script:01080
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = -5625;
	ch[421] = 3525;
	ch[422] = 3070;
	ch[423] = -4575;
	ch[424] = 3525;
	ch[425] = 2730;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2612);
	CharPos(ln,-4575,3525,2700);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 305:メダルの宝箱
#Script:01081
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = 50;
	ch[421] = -1125;
	ch[422] = -230;
	ch[423] = 1125;
	ch[424] = -1125;
	ch[425] = -570;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2613);
	CharPos(ln,1125,-1125,-600);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 301裏:メダルの宝箱
#Script:01082
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = 150;
	ch[421] = -925;
	ch[422] = 333;
	ch[423] = 150;
	ch[424] = 150;
	ch[425] = -7;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2614);
	CharPos(ln,150,150,-37);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 308裏：ブラックビーン倒して覇者の面とった
#Script:01083
int main()
{
	// 評価表示
//	Wait(75);
	ch[2243] = 1;
	
	KaguTest(10500,120);
	
	if (ch[2285] < 1)
	{
		ch[2285]=1;
	}
	
	Wait(90);
	
	Message(0,"","","","");

	Black(0,100,30);
	Wait(30);
	
	if (!ch[2634])
	{
//		PlayMovie("puku1.txt",0);
		ch[2634] = 1;
	}
	
	KaguTest(10011,5);
	Wait(5);
	KaguTest(10100,0);
	KaguTest(99999,0);
	TekiStop(0);
	MapEvent(1);
}
#EndScript

// アフロ
#Script:01084
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ポコに似合いそうね");
	
	KaguTest(10012,0);
}
#EndScript

// ファラオ
#Script:01085
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"イワオがつけると");
	KaguTest2(10008,1,"どんな感じかな？");
	
	KaguTest(10012,0);
}
#EndScript

// 鼻眼鏡
#Script:01086
int main()
{
	KaguTest(10006,0);//発言初期化

	KaguTest2(10008,0,"そういえばチャッキーが");
	KaguTest2(10008,1,"「大人になりたい」とか");
	KaguTest2(10008,2,"言ってたような……");

	KaguTest(10012,0);
}
#EndScript

// 白金のメダル使った
#Script:01087
int main()
{
	KaguTest(10006,0);//発言初期化

	KaguTest2(10008,0,"集めているコレクターにあげよう");
//	if (!ch[2115])
//	{
//		KaguTest2(10008,1,"おじいさんにあげるのは");
//		KaguTest2(10008,2,"勿体無い気がするわ");
//	}
//	else
//	{
//		KaguTest2(10008,1,"じーちゃんよりもさらにすごい");
//		KaguTest2(10008,2,"変態的なメダルマニアにあげよう");
//	}

	KaguTest(10012,0);
}
#EndScript

// 黒色の鍵使った
#Script:01088
int main()
{
	Message(0,"この鍵があれば","エッグプラントの秘密の通路にいけるみたいね","","");
}
#EndScript

// 銀メダル
#Script:01089
int main()
{
	KaguTest(20025,0);
	ch[299] = 1;
	ch[420] = 50;
	ch[421] = 50;
	ch[422] = 50;
	KaguTest(30046,0);
	KaguTest(20010,0);
	if (ch[420] == 999)
	{
		KaguTest(30032,700);
	}
	else
	{
		KaguTest(30033,150);
	}

	Wait(20);
	
	GetCharPos(0,ch[420],ch[421],ch[422]);
	ch[422] = ch[422] - 100;
	ch[423] = 1881;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);

	Wait(40);
	
	Mes("『銀のメダル』を手に入れた。");
	KaguTest(20022,76);
//	GetItem(76);

//	ch[1792]++;
	
	Wait(90);
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,0);
	KaguTest(30032,0);
	KaguTest(30033,100);
	Wait(20);
	ch[299] = 0;
}
#EndScript

// 銅メダル
#Script:01090
int main()
{
	KaguTest(20025,0);
	ch[299] = 1;
	ch[420] = 50;
	ch[421] = 50;
	ch[422] = 50;
//	KaguTest(30046,0);
	KaguTest(20010,0);
	if (ch[420] == 999)
	{
		KaguTest(30032,700);
	}
	else
	{
		KaguTest(30033,150);
	}
	Wait(20);
	
//	Wait(40);
	
	Mes("『銅のメダル』を手に入れた。");
	KaguTest(20022,77);
//	GetItem(77);

//	ch[1792]++;
	
	Wait(90);
//	ch[420] = 100;
//	ch[421] = 100;
//	ch[422] = 100;
//	KaguTest(30046,0);
	KaguTest(30032,0);
	KaguTest(30033,100);
	Wait(20);
	ch[299] = 0;
}
#EndScript

// 502:鍵前立て札
#Script:01091
int main()
{
	Message(0,"何かかいてある","","","");
	Message(0,"「ターゲットアタックだ","s080怪盗Ｍ」","","");
}
#EndScript

// 201:鍵前立て札
#Script:01092
int main()
{
	TekiStop(1);
	Message(0,"何かかいてある","","","");
	Message(0,"「腕に覚えのある人は","s010お金を入れてみよう","s100怪盗Ｍ」","");
	TekiStop(0);
}
#EndScript

// 602:あたりに触れると敵現れる
#Script:01093
int main()
{
	ch[420] = 2748;
	ch[421] = 3963;
	ch[422] = 176;
	ch[423] = 2682;
	ch[424] = 4943;
	ch[425] = 641;
	KaguTest(30093,20);
	KaguTest(30019,14);

	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,1);
	KaguTest(30025,1);
	int c;
	c = ch[420];
	ch[420] = -1;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(12005,c+1);

	Walk2(c,12,-4,45);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = c;
	ch[421] = 4;
	KaguTest(20044,1);
	ch[421] = 5;
	KaguTest(20044,-10);

	Walk2(c+1,-2,12,45);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = c+1;
	ch[421] = 4;
	KaguTest(20044,1);
	ch[421] = 5;
	KaguTest(20044,-10);
	
	Wait(15);
	// 落下中かチェック
	int x;
	int y;
	int z;
	GetCharPos(0,x,y,z);
	if (z < 140)
	{
		// 場所移動
		CharPos(0,2495,4465,150);
	}
	Wait(20);

	ch[420] = 2569;
	ch[421] = 3632;
	ch[422] = 612;
	ch[423] = 2678;
	ch[424] = 4939;
	ch[425] = 205;
	KaguTest(30093,20);

	ch[420] = c;
	ch[421] = 0;
	KaguTest(20044,2);
	ch[420] = c+1;
	ch[421] = 0;
	KaguTest(20044,2);
	Wait(10);
	Look(c,0);
	Look(c+1,0);
	
	Wait(20);
	KaguTest(30019,0);
	CrossFade();

	ch[420] = 0;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
	ch[420] = 3;
	KaguTest(12005,c+1);
	KaguTest(12005,c);
}
#EndScript

// 302:鍵前立て札
#Script:01094
int main()
{
	Message(0,"何か書いてある","","","");
	Message(0,"「消える前に次の足場に移動だ","s160怪盗Ｍ」","","");
}
#EndScript

// 201裏：メイド服自販機
#Script:01095
int main()
{
	int leftgp;
	int paygp;
	
	TekiStop(1);
	
	KaguTest(99993,0);
	if (ch[424])
	{
		Message(0,"もう使えないみたいね","","","");
		TekiStop(0);
		return 0;
	}
	
	if (ch[3975] == 0)
	{
		ch[3975] = 100;
	}
	ch[3976] = ch[3975];
	Message(0,"服の自動販売機みたいね","","","");

	KaguTest(20035,99999);
	string str;
	str = "￥" + ch[420] + "で買う";
	SelStart(50);
	SelText(str,1);
	SelText("買わない",2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		// 金チェック
		if (GetGP() < ch[420])
		{
			// 買えない
			Message(0,"お金が足りないわ","","","");
			TekiStop(0);
			return 0;
		}
		
		// 宝箱出す
		SE(893);
		SetGP(GetGP() - ch[420]);
		ch[2502] = 1;

		Wait(15);

		SaveCamera();

		// クリアフラグチェック
		KaguTest(99993,0);
		if (!ch[424])
		{
			// クリアフラグ立てる
			KaguTest(99992,3);

			// 着替え場所に移動する
			ch[424] = -510;
			ch[425] = 1950;
			ch[426] = 16;
			KaguTest(30061,0);
			KaguTest(30060,0);
			Walk(ch[421],ch[422],ch[423]);
			KaguTest(30039,0);
			Wait(ch[423]);
			ch[424] = -725;
			KaguTest(30061,0);
			KaguTest(30060,0);
			Walk(ch[421],ch[422],ch[423]);
			KaguTest(30039,0);
			Wait(ch[423]);

			// 着替える
			Black(0,100,15);
			Wait(20);
			KaguTest(20070,4);
			ReloadChar();
			SE(565);
			Wait(75);
			Walk(5,0,15);
			Black(0,0,15);
			Wait(15);

			// メッセージ
			SE(564);
			KaguTest2(10008,0,"新しいコスチュームが追加されました。");
			KaguTest2(10008,1,"クローゼットで着替えることが出来ます。");
			KaguTest(20000,60);
			Wait(60);
		}

//		ch[420] = 350;
//		ch[421] = 1950;
//		ch[422] = 520;
//		ch[423] = -750;
//		ch[424] = 1950;
//		ch[425] = 180;
//		KaguTest(30019,1);
//		CrossFade();
//		Wait(15);

//		int ln;
//		ln = Takara2C(2503);
//		CharPos(ln,-750,1950,150);
//		SE(566);
//		KaguTest(30018,ln);
//		Wait(60);

//		KaguTest(30019,0);	
//		RestoreCamera();
//		CrossFade();
	}
	
	TekiStop(0);
	return 0;
}
#EndScript

// 201裏：メイド服取った
#Script:01096
int main()
{
	TekiStop(1);
	// クリアフラグチェック
	KaguTest(99993,0);
	if (!ch[424])
	{
		Wait(60);
		// クリアフラグ立てる
		KaguTest(99992,3);
		// アイテム消去
		KaguTest(20002,36);
		// メッセージ
		SE(564);
		Mes("新しいコスチュームが追加されました。");
		Wait(60);
		Mes("クローゼットで着替えることが出来ます。");
	}
	TekiStop(0);
}
#EndScript

// ミニフィールド初回：セーブ説明
#Script:01097
int main()
{
	KaguTest(99986,0)
	Black(0,0,20);
	Wait(20);
	KaguTest(10006,2);
	ch[423] = 0;
	KaguTest(10007,4);
	KaguTest2(10008,0,"セーブしてみよう。");
	KaguTest2(10008,1,"フィールドでは、通常のシステムメニューに");
	KaguTest2(10008,2,"セーブとロードの項目が追加されます。");
	KaguTest2(10008,3,"システムメニューボタンか画面右上のボタンで");
	KaguTest2(10008,4,"システムメニューを開くことができます。");
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	KaguTest(10011,10);
	Wait(10);
}
#EndScript

// オバケホーム：焚き火アタリ解除
#Script:01098
int main()
{
	KaguTest2(30014,3,"@takibiA");
}
#EndScript

// 102:レバー引いたら扉開いてファントム現れる
#Script:01099
int main()
{
	int ln;
	int pt1;
	int pt2;
	int pt3;
	int c1;
	int c2;
	int c3;
	KaguTest(30025,1);
	c1 = ch[420];
	KaguTest(30025,2);
	c2 = ch[420];
	KaguTest(30025,3);
	c3 = ch[420];
	KaguTest(12004,c1);
	pt1 = ch[420];
	KaguTest(12004,c2);
	pt2 = ch[420];
	KaguTest(12004,c3);
	pt3 = ch[420];
	ch[420] = 2;
	KaguTest(12005,c1);
	KaguTest(12005,c2);
	KaguTest(12005,c3);

	ch[301] = 1;
	TekiStop(1);
	Wait(15);
	SE(950);
	SaveCamera();
	ln = Door2C(1);
	Camera(ln,925,-705,-1680);
	CrossFade();
	Wait(30);
	Event(106);
	Wait(45);
	// 敵出てくる
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	ch[420] = 17;
	KaguTest(30064,c1);
	Walk2(c1,-10,0,70);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(15);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	ch[420] = 17;
	KaguTest(30064,c2);
	Walk2(c2,-10,0,55);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(15);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,3);
	ch[420] = 17;
	KaguTest(30064,c3);
	Walk2(c3,-10,0,40);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(40);
	KaguTest(30061,0);
	ch[424] = 2500;
	ch[425] = 600;
	ch[426] = 12;
	KaguTest(30060,c2);
	Walk2(c2,ch[421],ch[422],ch[423] + 5);
	ch[429] = 0;
	KaguTest(30039,0);
	KaguTest(30061,0);
	ch[424] = 2500;
	ch[425] = 300;
	ch[426] = 12;
	KaguTest(30060,c3);
	Walk2(c3,ch[421],ch[422],ch[423] + 10);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423] + 10);

	// 終わる
	ch[420] = 3;
	KaguTest(12005,c1);
	KaguTest(12005,c2);
	KaguTest(12005,c3);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	TekiStop(0);
	return 0;
}
#EndScript

// 610:こうもり全倒しごほうび
#Script:01100
int main()
{
	if (ch[2497])
	{
		// 裏マップ
		if (ch[1000 + ch[1096] * 2] == 16383)
		{
			// 敵全部倒してるごほうび発生
			Wait(15);
			SaveCamera();
			ch[420] = 5340;
			ch[421] = -3490;
			ch[422] = 6220;
			ch[423] = 3825;
			ch[424] = -3025;
			ch[425] = 5730;
			KaguTest(30019,1);
			CrossFade();
			Wait(15);

			int ln;
			ln = Takara2C(2310);
			CharPos(ln,3825,-3025,5700);
			SE(566);
			KaguTest(30018,ln);
			Wait(60);

			KaguTest(30019,0);	
			RestoreCamera();
			CrossFade();
			Wait(15);
		}
	}
	else
	{
		// 表マップ
		ch[420] = ch[1000 + ch[1096] * 2];
		KaguTest(20043,2047);
		if (ch[420] == 2047)
		{
			// 敵全部倒してるごほうび発生
			Wait(15);
			SaveCamera();
			ch[420] = 3900;
			ch[421] = 10150;
			ch[422] = 1810;
			ch[423] = 4450;
			ch[424] = 10850;
			ch[425] = 1515;
			KaguTest(30019,1);
			CrossFade();
			Wait(15);

			int ln;
			ln = Takara2C(2309);
			CharPos(ln,4450,10850,1485);
			SE(566);
			KaguTest(30018,ln);
			Wait(60);

			KaguTest(30019,0);	
			RestoreCamera();
			CrossFade();
			Wait(15);
		}
	}
}
#EndScript

// 607:レバー引いたらエレベーター来る
#Script:01101
int main()
{
	if (ch[300] == 1)
	{
		ch[302] = 2;
		// エレベーター
		// 上にいる
		Wait(10);
		ch[421] = -323;
		ch[422] = 395;
		ch[423] = 6450;
		KaguTest2(30018,1,"@p_null");
		CrossFade();
		Wait(30);
		Event(154);
//		SE(390);
		ch[402] = 1;
		Wait(90);
		ch[402] = 0;
		Black(0,100,15);
		Wait(7);
		SE(287);
		Wait(8);
		Event(156);
		KaguTest2(30018,0,"");
		CrossFade();
		Wait(15);
		Black(0,0,15);
		Wait(15);
		return 0;
	}
	if (ch[300] == 0)
	{
		// 下にいる
		ch[300] = 2;
		Wait(10);
		ch[421] = -265;
		ch[422] = 210;
		ch[423] = 2300;
		KaguTest2(30018,1,"@p_null");
		CrossFade();
		Wait(30);
		Event(153);
//		SE(390);
		ch[402] = 1;
		Wait(90);
		ch[402] = 0;
		Black(0,100,15);
		Wait(7);
		SE(287);
		Wait(8);
		Event(155);
		KaguTest2(30018,0,"");
		CrossFade();
		Wait(15);
		Black(0,0,15);
		Wait(15);
	}
}
#EndScript

// 607 -> 603
#Script:01102
int main()
{
	MapEvent(0);
	if (ch[2497])
	{
		Walk(0,8,15);
		Wait(15);
		ch[1000 + (ch[1096] * 2)] = 0;
		Event(110);
		Walk(0,5,20);
		Wait(20);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}
#EndScript

// 607 -> 610
#Script:01103
int main()
{
	MapEvent(0);
	if (!ch[2497])
	{
	
		Walk(0,-8,15);
		Wait(15);
		Event(120);

		ch[420] = 42;
		KaguTest(12008,1);
	
		Walk(0,-5,20);
		Wait(20);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}
#EndScript

// 507 -> 502
#Script:01104
int main()
{
	MapEvent(0);
	if (ch[2497])
	{
		Walk(0,-8,15);
		Wait(15);
		Event(110);
		Walk(0,-5,20);
		Wait(20);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}
#EndScript

// 507 -> 503
#Script:01105
int main()
{
	MapEvent(0);
	if (!ch[2497])
	{
		Walk(0,8,15);
		Wait(15);
		Event(111);
		Walk(0,5,20);
		Wait(20);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}
#EndScript

// 211 -> 202
#Script:01106
int main()
{
	MapEvent(0);
	if (ch[2497])
	{
		Walk(0,-8,15);
		Wait(15);
		Event(110);
		Walk(0,-5,20);
		Wait(20);

		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}
#EndScript

// 211 -> 203
#Script:01107
int main()
{
	int x;
	int y;
	int z;
	int ax;
	int ay;
	int az;
	
	MapEvent(0);
	if (!ch[2497])
	{
		Walk(0,8,15);
		Wait(15);
		Event(111);
		Walk(0,5,20);
		Wait(20);

		KaguTest(30005,0);
		x = ch[421];
		y = ch[422];
		z = ch[423];
		KaguTest(30068,0);
		ax = ch[423];
		ay = ch[424];
		az = ch[425];

		ch[420] = -90;
		ch[421] = -853;
		ch[422] = 300;
		ch[423] = -128;
		ch[424] = -13;
		ch[425] = 121;
		KaguTest(30093,10);
		ch[420] = -128;
		ch[421] = -13;
		ch[422] = 121;
		KaguTest(30094,10);
		KaguTest(30019,15);
		Wait(10);

		ch[420] = 1821;
		ch[421] = -45;
		ch[422] = 782;
		ch[423] = 1146;
		ch[424] = 607;
		ch[425] = 946;
		KaguTest(30093,30);
		KaguTest(30019,14);
		Wait(50);

		ch[420] = -1702;
		ch[421] = -159;
		ch[422] = 2467;
		ch[423] = -1545;
		ch[424] = 623;
		ch[425] = 1946;
		KaguTest(30093,30);
		Wait(60);

		ch[420] = 217;
		ch[421] = 566;
		ch[422] = 2885;
		ch[423] = 964;
		ch[424] = 964;
		ch[425] = 2446;
		KaguTest(30093,30);
		Wait(60);
		
		ch[420] = -40;
		ch[421] = -853;
		ch[422] = 300;
		ch[423] = -78;
		ch[424] = 37;
		ch[425] = 121;
		KaguTest(30093,30);
		Wait(20);
		ch[420] = x;
		ch[421] = y;
		ch[422] = z;
		ch[423] = ax;
		ch[424] = ay;
		ch[425] = az;
		KaguTest(30093,10);
		KaguTest(30019,14);
		Wait(10);

		KaguTest(30019,0);
		KaguTest(30033,100);
		CrossFade();
		Wait(10);

		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	MapEvent(1);
}
#EndScript

// 211:立て札億
#Script:01108
int main()
{
	if (!ch[102] && ch[2518])
	{
		ch[420] = 216;
		ch[421] = -111;
		ch[422] = 10;
		ch[423] = 90;
		ch[424] = -30;
		KaguTest2(30020,0,"O_028but.it3");
	}
}
#EndScript

// ミニフィールド：ラジカセ置いたらポテトボス行けるようになる
#Script:01109
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,2,"poboss");
	KaguTest2(30014,2,"funsui");
	
	// 遷移計算呼び出し
	ch[420] = 1175;
	ch[421] = -1175;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -1600;
	ch[421] = -765;
	ch[422] = 75;
	ch[423] = 240;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3200] = 1;
	
	// カメラ位置
	KaguTest(99996,3);
	KaguTest(30033,125);
	Wait(30);
	KaguTest2(30014,0,"@ClearORoot");
	Black(0,0,15);
	Wait(15);
	
	WaitC(115);
	KaguTest(99984,820);
	KaguTest(30033,125);
	WaitC(150);
	
	// ポコの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,890,510,25);
	Look(0,16);
	Look(16,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(60);
}
#EndScript

// ミニフィールド：ソファー置いたら森２と洞窟１行けるようになる
#Script:01110
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"mori2");
//	KaguTest2(30014,2,"funsui");
	KaguTest2(30014,2,"spin1");
	
	// 遷移計算呼び出し
	ch[420] = -1600;
	ch[421] = 100;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = 1730;
	ch[421] = 1325;
	ch[423] = 180;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3201] = 1;

	// カメラ位置
	KaguTest(99996,7);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(105);
	KaguTest(99996,11);
	KaguTest(30033,125);
	WaitC(150);
	
	// ピエールの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,450,-860,25);
	Look(0,6);
	Look(6,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(383);
}
#EndScript

// ミニフィールド：下駄箱置いたら森ボスとポテト裏１行けるようになる
#Script:01111
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"moriboss");
	KaguTest2(30014,2,"poura1");
	
	// 遷移計算呼び出し
	ch[420] = -2100;
	ch[421] = 150;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = 1635;
	ch[421] = -1175;
	ch[423] = 210;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3202] = 1;

	// カメラ位置
	KaguTest(99996,8);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	KaguTest(99996,4);
	KaguTest(30033,125);
	WaitC(150);
	
	// ポコの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,890,510,25);
	Look(0,16);
	Look(16,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(60);
}
#EndScript

// ミニフィールド：帽子掛け置いたら洞窟２と家２行けるようになる
#Script:01112
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"spin2");
	KaguTest2(30014,2,"yama1");
	KaguTest2(30014,2,"ie2");
	
	// 遷移計算呼び出し
	ch[420] = 2350;
	ch[421] = 1550;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -475;
	ch[421] = -1275;
	ch[423] = 240;
	KaguTest(99988,1);
	ch[420] = -2575;
	ch[421] = -525;
	ch[423] = 320;
	KaguTest(99988,2);
	KaguTest(99987,3);
	
	ch[3203] = 1;

	// カメラ位置
	KaguTest(99996,12);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	KaguTest(99996,29);
	KaguTest(30033,125);
	WaitC(150);
	KaguTest(99996,16);
	KaguTest(30033,125);
	WaitC(150);
	
	// ピエールの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,450,-860,25);
	Look(0,6);
	Look(6,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(383);
}
#EndScript

// ミニフィールド：テーブル置いたらポテト裏２行けるようになる
#Script:01113
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"poura2");
	
	// 遷移計算呼び出し
	ch[420] = 1715;
	ch[421] = -1700;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3204] = 1;

	// カメラ位置
	KaguTest(99996,5);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// ピエールの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,15);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,450,-860,25);
	Look(0,6);
	Look(6,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(383);
}
#EndScript

// ミニフィールド：ちゃぶ台置いたら洞窟ボス、森裏１行けるようになる
#Script:01114
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"spinboss");
	KaguTest2(30014,2,"moriura1");
	KaguTest2(30014,2,"ie3");
	
	// 遷移計算呼び出し
	ch[420] = 2900;
	ch[421] = 1200;
	ch[422] = 43;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -2625;
	ch[421] = 175;
	ch[423] = 210;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3205] = 1;

	// カメラ位置
//	KaguTest(99996,13);
	KaguTest(99984,265);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	KaguTest(99996,9);
	KaguTest(30033,125);
	WaitC(150);
	
//	KaguTest(99996,30);
//	KaguTest(30033,125);
//	Wait(150);

	// イワオの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-990,-530,25);
	Look(0,7);
	Look(7,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(384);
}
#EndScript

// ミニフィールド：石像置いたら山２、家３行けるようになる
#Script:01115
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"yama2");
	
	// 遷移計算呼び出し
	ch[420] = -2850;
	ch[421] = -1075;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
//	ch[420] = 3275;
//	ch[421] = 1465;
//	ch[423] = 210;
//	KaguTest(99988,1);
	KaguTest(99987,1);
	
	ch[3206] = 1;

	// カメラ位置
	KaguTest(99996,17);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(165);
//	KaguTest(99996,30);
//	KaguTest(30033,125);
//	Wait(150);
	
	// イワオの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-990,-530,25);
	Look(0,7);
	Look(7,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(384);
}
#EndScript

// ミニフィールド：本棚置いたら森裏２行けるようになる
#Script:01116
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"moriura2");
	
	// 遷移計算呼び出し
	ch[420] = -2695;
	ch[421] = 720;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3207] = 1;

	// カメラ位置
	KaguTest(99996,10);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// ポコの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,890,510,25);
	Look(0,16);
	Look(16,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(60);
}
#EndScript

// ミニフィールド：洋服箪笥置いたら山ボス、洞窟裏１行けるようになる
#Script:01117
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"yamaboss");
	KaguTest2(30014,2,"spinura1");
	
	// 遷移計算呼び出し
	ch[420] = -3450;
	ch[421] = -830;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = 2350;
	ch[421] = 585;
	ch[423] = 210;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3208] = 1;

	// カメラ位置
	KaguTest(99996,18);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	KaguTest(99996,14);
	KaguTest(30033,125);
	WaitC(150);
	
	// チャッキーの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-900,465,25);
	Look(0,11);
	Look(11,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(385);
}
#EndScript

// ミニフィールド：傘たて置いたら洞窟裏２行けるようになる
#Script:01118
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"spinura2");
	
	// 遷移計算呼び出し
	ch[420] = 3065;
	ch[421] = 575;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3209] = 1;

	// カメラ位置
	KaguTest(99996,15);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// チャッキーの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-900,465,25);
	Look(0,11);
	Look(11,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(385);
}
#EndScript

// ミニフィールド：鉢植えおいたらエッグ１行けるようになる
#Script:01119
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
//	KaguTest2(30014,2,"egg1");
	KaguTest2(30014,2,"ie4");
	
	// 遷移計算呼び出し
//	ch[420] = 588;
//	ch[421] = 880;
//	ch[422] = 75;
//	ch[423] = 90;
//	KaguTest(99988,0);
	ch[420] = -3850;
	ch[421] = 700;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3210] = 1;

	// カメラ位置
//	KaguTest(99996,21);
	KaguTest(99996,31);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);

	// ピエールの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,450,-860,25);
	Look(0,6);
	Look(6,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(383);
}
#EndScript

// ミニフィールド：アヒル置いたらエッグ２、山裏１行けるようになる
#Script:01120
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"egg2");
	KaguTest2(30014,2,"yamaura1");
	
	// 遷移計算呼び出し
	ch[420] = 100;
	ch[421] = 1385;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -4025;
	ch[421] = -1175;
	ch[423] = 210;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3211] = 1;

	// カメラ位置
	KaguTest(99996,22);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	KaguTest(99996,19);
	KaguTest(30033,125);
	WaitC(150);
	
	// チャッキーの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-900,465,25);
	Look(0,11);
	Look(11,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(385);
}
#EndScript

// ミニフィールド：コンポ置いたら山裏２行けるようになる
#Script:01121
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"yamaura2");
	
	// 遷移計算呼び出し
	ch[420] = -3950;
	ch[421] = -650;
	ch[422] = 0;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3212] = 1;

	// カメラ位置
	KaguTest(99996,20);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// ポコの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,890,510,25);
	Look(0,16);
	Look(16,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(60);
}
#EndScript

// ミニフィールド：桐の箪笥置いたらエッグボス行けるようになる
#Script:01122
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"eggboss");
	
	// 遷移計算呼び出し
	ch[420] = -225;
	ch[421] = 2150;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3213] = 1;

	// カメラ位置
	KaguTest(99996,23);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// イワオの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-990,-530,25);
	Look(0,7);
	Look(7,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(384);
}
#EndScript

// ミニフィールド：エッグボス倒したイベントでグレートファング行けるようになる
#Script:01123
int main()
{
	// マナエフェクト

	// あたり設定
	Mouse(0);
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"great");
	
	// 遷移計算呼び出し
	ch[420] = -270;
	ch[421] = 1100;
	ch[422] = 75;
	ch[423] = 60;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3214] = 1;

	// カメラ位置
	KaguTest(99996,27);
	KaguTest(30033,125);
	ch[3979] = 0;
	KaguTest(99991,420);
	Wait(15);
	Black(0,0,15);
	Wait(15);
	
	WaitC(105);
	KaguTest(99996,-1);
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);

	KaguTest(99998,0);
	KaguTest(99999,0);
	
	Mouse(1);
	
//	KaguTest2(30014,1,"@ClearORoot");
}
#EndScript

// ミニフィールド：高級本棚置いたらエッグ裏１行けるようになる
#Script:01124
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"eggura1");
//	KaguTest2(30014,2,"ie4");
	
	// 遷移計算呼び出し
//	ch[420] = -3850;
//	ch[421] = 700;
//	ch[422] = 75;
//	ch[423] = 90;
//	KaguTest(99988,0);
	ch[420] = -735;
	ch[421] = 2200;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3215] = 1;

	// カメラ位置
//	KaguTest(99996,31);
//	KaguTest(30033,125);
//	Wait(30);
//	Black(0,0,15);
	
//	Wait(120);
	KaguTest(99996,24);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	WaitC(105);
	
	// ピエールの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,450,-860,25);
	Look(0,6);
	Look(6,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(383);
}
#EndScript

// ミニフィールド：秘伝書置いたらエッグ裏２行けるようになる
#Script:01125
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"eggura2");
	
	// 遷移計算呼び出し
	ch[420] = -1350;
	ch[421] = 650;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3216] = 1;

	// カメラ位置
	KaguTest(99984,508);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// イワオの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-990,-530,25);
	Look(0,7);
	Look(7,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(384);
}
#EndScript

// ミニフィールド：ぬいぐるみ置いたらブラックビーン行けるようになる
#Script:01126
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"hakai");

	// 遷移計算呼び出し
	ch[420] = -250;
	ch[421] = 3700;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3217] = 1;

	// カメラ位置
	KaguTest(99996,26);
	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(135);
	
	// チャッキーの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-900,465,25);
	Look(0,11);
	Look(11,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(385);
}
#EndScript

// ミニフィールド：霧晴れ分岐
#Script:01127
int main()
{
	// ch[3979]で分岐先チェック
	// （ch[3979] + 3199)番のフラグが立つように呼び出す
	PostScr(1108 + ch[3979]);
	
//	if (ch[3979] == 127)
//	{
//		// スポンサーイベント終わった
//		ch[2527] = 1;
//	}
}
#EndScript

// 共通イベント：クリアポイント家具配置
#Script:01128
int main()
{
	int kagu;	// 配置する家具
	int bbb;
	int daikesu;	// 台を消すかどうか
	kagu = 4;
	daikesu = 0;

	KaguTest(20010,0);
	bbb = ch[420];
	ch[420] = 0;
	if (bbb >= 200 && bbb < 400)
	{
		kagu = 5;
	}
	if (bbb >= 600 && bbb < 700)
	{
		kagu = 5;
	}
	
	switch(bbb)
	{
	case 115:
		if (!ch[1539])
		{
			kagu = 49;
		}
		break;
	case 116:
		if (ch[2497])
		{
			if (!ch[2276])
			{
				kagu = 60;
			}
		}
		else
		{
			if (!ch[2260])
			{
				kagu = 74;
			}
		}
		break;
	case 110:
		if (!ch[2287])
		{
			kagu = 73;
		}
		break;
	case 508:
		if (ch[2497])
		{
			if (!ch[2278])
			{
				kagu = 78;
			}
		}
		else
		{
			if (!ch[2262])
			{
				kagu = 63;
			}
		}
		break;
	case 509:
		if (ch[2497])
		{
			if (!ch[2277])
			{
				kagu = 59;
			}
		}
		else
		{
			if (!ch[2271])
			{
				kagu = 68;
			}
		}
		break;
	case 212:
		if (ch[2497])
		{
			if (!ch[2280])
			{
				kagu = 71;
			}
		}
		else
		{
			if (!ch[2264])
			{
				kagu = 69;
			}
		}
		break;
	case 213:
		if (ch[2497])
		{
			if (!ch[2279])
			{
				kagu = 67;
			}
		}
		else
		{
			if (!ch[2273])
			{
				kagu = 58;
			}
		}
		break;
	case 611: // 603 610m
		if (ch[2497])
		{
			if (!ch[2281])
			{
				kagu = 75;
			}
		}
		else
		{
			if (!ch[2266])
			{
				kagu = 50;
			}
		}
		break;
	case 612: // 605 601m
		if (ch[2497])
		{
			if (!ch[2282])
			{
					kagu = 66;
			}
		}
		else
		{
			if (!ch[2272])
			{
				kagu = 65;
			}
		}
		break;
	case 313:
		daikesu = 1;
		if (ch[2497])
		{
			if (!ch[2284])
			{
				kagu = 72;
			}
		}
		else
		{
			if (!ch[2268])
			{
				kagu = 70;
			}
		}
		break;
	case 314:
		daikesu = 1;
		if (ch[2497])
		{
			if (!ch[2283])
			{
				kagu = 51;
			}
		}
		else
		{
			if (!ch[2269])
			{
				kagu = 64;
			}
		}
		break;
	case 105: // ボスサップ
		if (!ch[507])
		{
			kagu = 31;
			ch[420] = 1;
		}
		break;
	case 505: // モスビー
		if (!ch[1542])
		{
			kagu = 31;
			ch[420] = 1;
		}
		break;
	case 206: // ラッシー
		if (!ch[1505])
		{
			kagu = 31;
			ch[420] = 1;
		}
		break;
	case 606: // 偽パリン
		if (!ch[1513])
		{
			kagu = 31;
			ch[420] = 1;
		}
		break;
	case 306: // ロッキー
		if (!ch[1571])
		{
			kagu = 31;
			ch[420] = 1;
		}
		break;
	}

	KaguTest(20036,kagu);
	ch[420] = bbb;
	if (daikesu)
	{
		KaguTest(20063,0);
	}
}
#EndScript

// 共通イベント：クリアポイント到達
#Script:01129
int main()
{
	int kagu;	// 配置する家具
	int scr;
	int norcam;
	int over;
	int map;
	string iname;
	iname = "『クッキー』を手に入れた。";
	kagu = 4;
	scr = 0;
	norcam = 0;
	over = 0;

	KaguTest(20010,0);

	if (ch[420] >= 200 && ch[420] < 400)
	{
		kagu = 5;
		iname = "『チョコレート』を手に入れた。";
	}
	if (ch[420] >= 600 && ch[420] < 700)
	{
		kagu = 5;
		iname = "『チョコレート』を手に入れた。";
	}
	map = ch[420];
	
	switch(ch[420])
	{
	case 115:
		scr = 1209;
		if (!ch[1539])
		{
			kagu = 49;
			iname = "『鉢植え』を取り戻した。";
			ch[1539] = 1;
		}
		break;
	case 116:
		if (ch[2497])
		{
			scr = 31;
			if (!ch[2276])
			{
				kagu = 60;
				iname = "『テーブル』を取り戻した。";
			}
		}
		else
		{
			scr = 36;
			if (!ch[2260])
			{
				kagu = 74;
				iname = "『ラジカセ』を取り戻した。";
			}
		}
		break;
	case 110:
		scr = 19;
		if (!ch[2287])
		{
			kagu = 73;
			iname = "『蓄音機』を取り戻した。";
		}
		break;
	case 508:
		norcam = 1;
		if (ch[2497])
		{
			scr = 903;
			if (!ch[2278])
			{
				kagu = 78;
				iname = "『金魚鉢』を取り戻した。";
			}
		}
		else
		{
			scr = 897;
			if (!ch[2262])
			{
				kagu = 63;
				iname = "『ソファー』を取り戻した。";
			}
		}
		break;
	case 509:
		norcam = 1;
		if (ch[2497])
		{
			scr = 898;
			if (!ch[2277])
			{
				kagu = 59;
				iname = "『本棚』を取り戻した。";
			}
		}
		else
		{
			scr = 901;
			if (!ch[2271])
			{
				kagu = 68;
				iname = "『下駄箱』を取り戻した。";
			}
		}
		break;
	case 212:
		if (ch[2497])
		{
			scr = 934;
			if (!ch[2280])
			{
				kagu = 71;
				iname = "『車の模型』を取り戻した。";
			}
		}
		else
		{
			scr = 504;
			if (!ch[2264])
			{
				kagu = 69;
				iname = "『帽子掛け』を取り戻した。";
			}
		}
		break;
	case 213:
		if (ch[2497])
		{
			scr = 505;
			if (!ch[2279])
			{
				kagu = 67;
				iname = "『傘たて』を取り戻した。";
			}
		}
		else
		{
			scr = 510;
			if (!ch[2273])
			{
				kagu = 58;
				iname = "『ちゃぶ台』を取り戻した。";
			}
		}
		break;
	case 611:
		if (ch[2497])
		{
			scr = 981;
			if (!ch[2281])
			{
				kagu = 75;
				iname = "『コンポ』を取り戻した。";
			}
		}
		else
		{
			scr = 950;
			if (!ch[2266])
			{
				kagu = 50;
				iname = "『石像』を取り戻した。";
			}
		}
		break;
	case 612:
		if (ch[2497])
		{
			scr = 953;
			if (!ch[2282])
			{
				kagu = 66;
				iname = "『高級本棚』を取り戻した。";
			}
		}
		else
		{
			scr = 952;
			if (!ch[2272])
			{
				kagu = 65;
				iname = "『洋服箪笥』を取り戻した。";
			}
		}
		break;
	case 313:
		if (ch[2497])
		{
			scr = 513;
			if (!ch[2284])
			{
				kagu = 72;
				iname = "『ぬいぐるみ』を取り戻した。";
			}
		}
		else
		{
			scr = 518;
			if (!ch[2268])
			{
				kagu = 70;
				iname = "『あひる』を取り戻した。";
			}
		}
		break;
	case 314:
		if (ch[2497])
		{
			scr = 519;
			if (!ch[2283])
			{
				kagu = 51;
				iname = "『秘伝の書』を取り戻した。";
			}
		}
		else
		{
			scr = 522;
			if (!ch[2269])
			{
				kagu = 64;
				iname = "『桐の箪笥』を取り戻した。";
			}
		}
		break;
	case 105: // ボスサップ
		scr = 50;
		if (!ch[507])
		{
			kagu = 16;
			iname = "『命の珠』を手に入れた。";
		}
		break;
	case 505: // モスビー
		scr = 947;
		if (!ch[1542])
		{
			kagu = 16;
			iname = "『命の珠』を手に入れた。";
		}
		break;
	case 206: // ラッシー
		scr = 405;
		if (!ch[1505])
		{
			kagu = 16;
			iname = "『命の珠』を手に入れた。";
		}
		break;
	case 606:
		scr = 412;
		if (!ch[2267])
		{
//			GetItem(49);
			kagu = 16;
			iname = "『命の珠』を手に入れた。";
		}
		break;
	case 306: // ロッキー
		scr = 1145;
		if (!ch[1571])
		{
			kagu = 16;
			iname = "『命の珠』を手に入れた。";
		}
		break;
	}
	KaguTest(20040,1887);
	ch[420] = 0;
	ch[421] = 0;
	ch[422] = 0;
	ch[423] = 0;
	ch[424] = 0;
	ch[425] = 0;
	if (norcam)
	{
		KaguTest(30102,1);
	}
	else
	{
		KaguTest(30102,0);
	}
	KaguTest(30019,10);

	WaitD(0);
	if (kagu)
	{
		KaguTest(20022,kagu);
		if (map != 306 || ch[1571])
		{
			BGM(0);
		}
		KaguTest(20037,0);
		Mes(iname);
//		if (kagu == 16)
//		{
//			Wait(90);
//			Mes("ＨＰの最大値が１０上がった");
//			KaguTest(20002,16);
//			KaguTest(20032,0);
//		}
//		else
//		{
			KaguTest(20001,kagu);
			if (kagu != 16 && ch[430] > 2)
			{
				over = 1;
			}

			GetItem(kagu);
//		}

		if (over)
		{
			Wait(30);
			Mes("荷物が一杯で持てなかった。");
			Wait(45);
		}
		else
		{
			Wait(45);
		}
	}
	int count;
	count = 0;
	ch[420] = 0;
	while(!ch[420] && count < 5)
	{
		KaguTest(30101,0);
		Wait(15);
		count++;
	}
	KaguTest(20025,0);
	KaguTest(30085,0);
	
	PostScr(scr);
}
#EndScript

// 111 -> ミニマップ
#Script:01130
int main()
{
	if (!ch[2497])
	{
		TekiStop(1);

		// 初チュートリアル中？
		if (!ch[2286])
		{
			MapEvent(0);
			Message(0,"まだプクを見つけてないわ","","","");
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			return 0;
		}
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		Walk(0,-8,11);
		Wait(11);
		Event(110);
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
	}
}
#EndScript

// 111 -> 112
#Script:01131
int main()
{
	if (ch[2497])
	{
		// 裏マップ
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		Walk(0,8,11);
		Wait(11);
		Event(120);
		Walk(0,5,20);
		Wait(20);
		MapEvent(1);
	}
}
#EndScript

// 113 -> 112
#Script:01132
int main()
{
	if (!ch[2497])
	{
		// 表マップ
	}
	else
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		Walk(0,-8,11);
		Wait(11);
		Event(110);
//		Ksk(7);
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
	}
}
#EndScript

// 113 -> ミニマップ
#Script:01133
int main()
{
	if (ch[2497])
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);

			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}

			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);

		MapEvent(0);
		
		if (ch[512])
		{
			Walk(0,8,11);
			Wait(11);
			Event(120);
//			Walk(0,5,20);
//			Wait(20);
		}
		else
		{
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			PostScr(1193);
		}
		
		TekiStop(0);
		MapEvent(1);
		
	}
}
#EndScript

// 608 -> 605
// 311 -> 305
#Script:01134
int main()
{
	KaguTest(20010,0)
	
	if (ch[420] == 608)
	{
		KaguTest(40002,0);
		MapEvent(0);
		Walk(0,-8,11);
		Wait(11);
		Event(110);
		Walk(0,-5,20);
		Wait(20);
		MapEvent(1);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
	}
	else
	{
		if (ch[2497])
		{
			WaitD(0);
			ch[50] = 0;
			string st1,st2;
			SelStart(50);
			st1 = StageName(ch[1107]-2260) + "を出る";
			st2 = StageName(ch[1107]-2260) + "を出ない";
			SelText(st1,1);
			SelText(st2,2);
			SelEnd();
			
			if (ch[50] == 1)
			{
				MapEvent(0);
				Walk(-8,0,30);
				Black(0,100,30);
				Wait(30);
				
				KaguTest(10100,0);
				KaguTest(99999,0);
				TekiStop(0);
				MapEvent(1);
			}
			else
			{
				MapEvent(0);

				KaguTest(30058,0);
				while(ch[420])
				{
					Walk(ch[421],ch[422],ch[423]);
					Wait(ch[423]);
					KaguTest(30058,0);
				}

				Walk(8,0,15);
				Wait(15);
				MapEvent(1);
				TekiStop(0);
			}
		}
		else
		{
			KaguTest(40002,0);
			MapEvent(0);
			Walk(8,0,11);
			Wait(11);
			Event(110);
			Walk(5,0,20);
			Wait(20);
			MapEvent(1);
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
		}
	}
}
#EndScript

// 608 -> ミニフィールド
// 311 -> ミニフィールド
#Script:01135
int main()
{
	TekiStop(1);

	KaguTest(20010,0);
	
	if (ch[420] == 608)
	{
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		if (ch[2497])
		{
			KaguTest(40002,0);
			MapEvent(0);
			Walk(8,0,11);
			Wait(11);
			Event(100);
			Walk(5,0,20);
			Wait(20);
			MapEvent(1);
			KaguTest(10600,ch[1107]-2260);
			MMV(StageMMV(ch[420]));
		}
		else
		{
			WaitD(0);
			ch[50] = 0;
			string st1,st2;
			SelStart(50);
			st1 = StageName(ch[1107]-2260) + "を出る";
			st2 = StageName(ch[1107]-2260) + "を出ない";
			SelText(st1,1);
			SelText(st2,2);
			SelEnd();
			
			if (ch[50] == 1)
			{
				MapEvent(0);
				Walk(-8,0,30);
				Black(0,100,30);
				Wait(30);
				
				KaguTest(10100,0);
				KaguTest(99999,0);
				TekiStop(0);
				MapEvent(1);
			}
			else
			{
				MapEvent(0);
				KaguTest(30058,0);
				while(ch[420])
				{
					Walk(ch[421],ch[422],ch[423]);
					Wait(ch[423]);
					KaguTest(30058,0);
				}
				Walk(8,0,20);
				Wait(20);
				MapEvent(1);
				TekiStop(0);
			}
		}
	}
}
#EndScript

// 0021 -> ミニフィールド
#Script:01136
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(8,0,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(-8,0,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 0022 -> ミニフィールド
#Script:01137
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 0023 -> ミニフィールド
#Script:01138
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 0024 -> ミニフィールド
#Script:01139
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
//		Walk(8,0,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(-8,0,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 0025 -> ミニフィールド
#Script:01140
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 0026 -> ミニフィールド
#Script:01141
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 0027 -> ミニフィールド
#Script:01142
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		MapEvent(0);
		Walk(0,-8,30);
		Black(0,100,30);
		Wait(30);
		
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
	}
	else
	{
		MapEvent(0);
		KaguTest(30058,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30058,0);
		}
		Walk(0,8,20);
		Wait(20);
		MapEvent(1);
		TekiStop(0);
	}
}
#EndScript

// 312 -> ミニフィールド
#Script:01143
int main()
{
	WaitD(0);
	ch[50] = 0;
	string st1,st2;
	SelStart(50);
	st1 = StageName(ch[1107]-2260) + "を出る";
	st2 = StageName(ch[1107]-2260) + "を出ない";
	SelText(st1,1);
	SelText(st2,2);
	SelEnd();
	
	if (!ch[2497])
	{
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(8,0,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(-8,0,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(-1,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(1,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
}
#EndScript

// 0306:ロッキー戦
#Script:01144
int main()
{
	if (!ch[300])
	{
		ch[50] = 1;
		if (ch[2539])
		{
			// 王子戦に飛ぶか選択できる
			WaitD(0);
			SelStart(50);
			SelText("ロッキー戦へ",1);
			SelText("王子戦へ",2);
			SelEnd();
		}
		
		if (ch[50] == 2)
		{
			// 王子戦に飛ぶ
			Black(0,100,30);
			Wait(30);

			LoadMapB(306);
			KaguTest2(30014,0,"@tokaron");
			KaguTest2(30014,0,"@monyo");
			KaguTest2(30014,0,"@magicbelt1");
			KaguTest2(30014,0,"@magicbelt2");
			SetSavePos2(306,-3150,-3375,-1125);
			CharPos(12,-200000,0,0);
			CharPos(78,0,675,0);
			CharPos(0,0,-300,0);
			BGM(31);

			Event(160);
			LiftEnable(0);
			ch[300] = 1;
			ch[301] = 1;
			Black(0,0,15);
			Wait(15);
		//	Mes("王子戦闘予定");
		//	Wait(60);
		//	White(0,100,15);
		//	Wait(15);
		//	Event(106);
			MMV("boss06.mmv");
			
			return 0;
		}
	
		if (!ch[1571])
		{
			// リフト位置関連フラグ
//			ch[2502] = 1;

			Black(0,100,30);
			Wait(30);
			Lock();
//			Scop2(58,1,"scop.it3");


//			PlayMovie("nise.txt",ch[1570]);
			Mouse(0);
			KaguTest(20065,45);
			PlayMovie("kdo_3_2.txt",ch[1570]);
			Black(0,100,0);
			Wait(5);
//			Black(0,0,15);
			Walk(0,5,1);
			KaguTest(30057,0);
			Mouse(1);
//			BGM(19);//仮で洞窟ボスの曲
			ch[1570] = 1;

			LoadMapB(306);
			SetSavePos2(306,-3150,-3375,-1125);
//			BGM(19);
			CharPos(0,0,-600,0);

			TekiStop(1);
	//		LiftEnable(0);
			Black(0,100,0);
			MapEvent(0);
			ResetFade();
			Black(0,0,30);	

	//		CharPos(10,-500001,0,0);
	//		CharPos(58,0,0,0);

			Unlock();
	//		LoadMap(306);


			//Mes("イベント「偽パリン戦」");
			
			// リフトの移動
			Event(160);

			// 偽パリン戦やったフラグ	
			ch[1570] = 1;
			// 二度実行防止フラグ
			ch[300] = 1;

			// ゲームオーバー時用のリフト位置フラグ
//			ch[2502] = 0;

			MapEvent(1);

			CharPos(10,-500001,0,0);
	// モンスター_MONSHITO取得して配置
		KaguTest(20020,0);
	//		CharPos(ch[425],0,-300,0);
			CharPos(ch[425],0,700,0);
			KaguTest(30028,ch[425]);

//			Scop2(ch[425],1,"scop.it3");

//			KaguTest2(30013,50001,"fall_atari_ue");
			TekiStop(0);
		}
		else
		{
			TekiStop(1);
			
			Black(0,100,30);
			Wait(30);
			CharPos(0,0,-600,0);

			KaguTest(20020,0);
	//		CharPos(ch[425],0,-300,20);
			CharPos(ch[425],0,700,0);
			KaguTest(30028,ch[425]);
			
//			Scop2(ch[425],1,"scop.it3");
			ch[300] = 1;

//			KaguTest2(30013,50001,"fall_atari_ue");
			BGM(45);
			
			Look(ch[425],0);
			Look(0,ch[425]);

			TekiStop(0);
			Black(0,0,30);
			
			Event(160);
		}
		MMV("boss05.mmv");
	}

//	SetSavePos2(306,0,-1050,-450);

	LiftEnable(0);
}
#EndScript

// 0306:王子倒した
#Script:01145
int main()
{
//	Mes("偽パリン倒した");

//	Wait(100);
	// クリア表示
	MapEvent(0);
	TekiStop(1);

	KaguTest(40002,0);

//	White(0,0,30);
//	Wait(30);
	
	// デバッグ
	if (ch[3982] == 1)
	{
		// 純粋ボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
		LoadMapB(307);
		CharPos(18,235,75,6555);
		CharPos(0,2100,0,6535);
		ch[301] = 1;
		
		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	if (ch[3982] == 2)
	{
		// シナリオボスラッシュ中
//		ch[1790]++;
//		ch[1791] = 100;
		KaguTest(20051,0);
		Scop(0);
		Scop(1);
		
//		PlayMovie("nise2.txt",1);
		ch[1513] = 1;
		ch[1509] = 1;
		Wait(10);
//		PlayMovie("skowa2.txt",1);
		ch[1510] = 1;
		ch[1511] = 1;
		Wait(10);
//		PlayMovie("lasboss.txt",1);
		ch[1514] = 1;
		Wait(10);
		
		LoadMapB(307);
		CharPos(18,235,75,6555);
		CharPos(0,2100,0,6535);
		ch[301] = 1;
		
		Black(0,0,30);
		Wait(30);
		SetSavePos2(207,0,0,0);	// 死んだら手巣とマップに戻れ
//		BGM(7);
		return 0;
	}
	// デバッグここまで
	// 評価表示
//	BGM(0);
	KaguTest(10500,120);
		
	if (ch[2292] < 1)
	{
		ch[2292]=1;
	}
		
	Wait(90);
		
	Message(0,"","","","");
	

	// ボス倒したことがある場合はそのまま退出
	if (ch[1571])
	{
		Black(0,100,30);
		Wait(30);
		KaguTest(10011,5);
		Wait(5);
		KaguTest(10100,0);
		KaguTest(99999,0);
		TekiStop(0);
		MapEvent(1);
		return 0;
	}	
	
	TekiStop(0);

	White(0,100,30);
	Wait(30);
	KaguTest(10011,5);
	Wait(5);
//	PlayMovie("nise2.txt",0);
	Mouse(0);
//	PlayMovie("kdo_3_4.txt",0);
	int movi;
	KaguTest(20065,-7);
	movi = PlayMovie("kdo_3_4a.txt",0);
	KaguTest(100000,0);
	if (movi)
	{
		movi = PlayMovie2("kdo_3_5b.txt",0);
		KaguTest(100000,0);
	}
	if (movi)
	{
		movi = PlayMovie2("kdo_3_5c.txt",0);
		KaguTest(100000,0);
	}
	PlayMovie2("kdo_3_4b.txt",0);
	KaguTest(20066,0);
	
	Mouse(1);

	ResetFade();
	Black(0,100,0);
	
	ch[1571] = 1;

//	Mes("モグロウ発見ムービー（仮）");
	Wait(30);
	
	KaguTest(10100,0);
	ch[298] = 1;
	KaguTest(99999,0);
	ch[298] = 1;
	
	ch[3214] = 1;
	KaguTest(99990,0);
	ch[3214] = 0;
	
	Black(0,100,15);
	Wait(15);
	ch[298] = 0;
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,1);
	Wait(10);
	Black(0,0,15);

	TekiStop(0);
	MapEvent(1);
	
	PostScr(1123);
}
#EndScript

//112 -> 111 ///////////////////////////////////2/6new!
#Script:01146
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,-8,11);
	Wait(11);
	Event(110);
	Walk(0,-5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

//112 -> 113 ///////////////////////////////////2/6new!
#Script:01147
int main()
{
	KaguTest(40002,0);

	MapEvent(0);
	Walk(0,8,11);
	Wait(11);
	Event(120);
	Walk(0,5,20);
	Wait(20);
	MapEvent(1);
}
#EndScript

// ミニフィールド：蓄音機置いたら家４に続く道１が開く
#Script:01148
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"ie4_1");
	
	// 遷移計算呼び出し
	ch[420] = -3980;
	ch[421] = -300;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -250;
	ch[421] = 2550;
	ch[422] = -50;
	ch[423] = 240;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3223] = 1;

	// カメラ位置
	ch[420] = -3980;
	ch[421] = -2425;
	ch[422] = 2175;
	ch[423] = -3980;
	ch[424] = -300;
	ch[425] = 75;
	KaguTest(30019,2);
	
//	KaguTest(99996,62);
//	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(115);
	KaguTest(30019,0);
	KaguTest(99984,437);
	KaguTest(30033,125);
	WaitC(150);
	
	// ポコの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(30019,0);
	KaguTest(99998,0);
//	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,890,510,25);
	Look(0,16);
	Look(16,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(60);
}
#EndScript

// ミニフィールド：金魚鉢置いたら家４に続く道２が開く
#Script:01149
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"ie4_2");
	
	// 遷移計算呼び出し
	ch[420] = -4000;
	ch[421] = -200;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -250;
	ch[421] = 2830;
	ch[422] = 30;
	ch[423] = 240;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3224] = 1;

	// カメラ位置
	ch[420] = -4000;
	ch[421] = -2325;
	ch[422] = 2175;
	ch[423] = -4000;
	ch[424] = -200;
	ch[425] = 75;
	KaguTest(30019,2);
	
//	KaguTest(99996,62);
//	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(115);
	KaguTest(30019,0);
	KaguTest(99984,441);
	KaguTest(30033,125);
	WaitC(150);
	
	// イワオの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(30019,0);
	KaguTest(99998,0);
//	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-990,-530,25);
	Look(0,7);
	Look(7,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(384);
}
#EndScript

// ミニフィールド：車の模型置いたら家４に続く道３が開く
#Script:01150
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"ie4_3");
	
	// 遷移計算呼び出し
	ch[420] = -3800;
	ch[421] = 100;
	ch[422] = 75;
	ch[423] = 90;
	KaguTest(99988,0);
	ch[420] = -200;
	ch[421] = 3100;
	ch[422] = -50;
	ch[423] = 240;
	KaguTest(99988,1);
	KaguTest(99987,2);
	
	ch[3225] = 1;

	// カメラ位置
	ch[420] = -4000;
	ch[421] = -1975;
	ch[422] = 2175;
	ch[423] = -4000;
	ch[424] = 150;
	ch[425] = 75;
	KaguTest(30019,2);
	
//	KaguTest(99996,62);
//	KaguTest(30033,125);
	Wait(30);
	Black(0,0,15);
	Wait(15);
	
	WaitC(115);
	KaguTest(30019,0);
	KaguTest(99984,445);
	KaguTest(30033,125);
	WaitC(150);

	// チャッキーの家に戻る＆会話続き
	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(30019,0);
	KaguTest(99998,0);
//	KaguTest(30033,100);
	LoadMap(401);
	WaitC(15);
	CharPos(0,-900,465,25);
	Look(0,11);
	Look(11,0);
	WaitC(5);

	ch[294] = 1;
	
	PostScr(385);
}
#EndScript

// もぐら叩き終了
#Script:01151
int main()
{
	int go;
	int best;
	int syokai;
	string str;
	go = 0;
	best = 0;
	syokai = 0;

	// ホイッスル
	SE(548);
	ch[3982] = 0;
	Wait(60);
	Black(0,100,30);
	Wait(30);
	ch[2144] = 0;
	ch[2497] = 0;
	LoadMap(23);
	KaguTest2(10010,0,"minigm");
	CharPos(0,0,-150,0);
	Camera(4,345,775,370);
	Look(0,4);
	Look(4,0);
	Look(2,0);
	Look(1,0);
	CrossFade();
	Wait(15);
	Camera(-1,0,0,0);
	Black(0,0,30);
	Wait(30);
	
	ch[2061] = 0;
	
	int gonum;
	if (ch[455] == 1)
	{
		// ビギナー
		gonum = 40;
	}
	if (ch[455] == 0)
	{
		// ノーマル
		gonum = 50;
	}
	if (ch[455] == 2)
	{
		// ハード以上
		gonum = 60;
	}

	if (ch[2313] < gonum)
	{
		// 過去に合格していない
		go = 1;
	}
	if (ch[2145] > ch[2313] - 1 && ch[2313] > 0)
	{
		// 自己ベスト
		best = 1;
	}
	if (ch[2313] == 0)
	{
		syokai = 1;
	}
	if (ch[2145] > ch[2313] - 1)
	{
		ch[2313] = ch[2145] + 1;
	}
	
	ch[400] = 4;
	
	if (!ch[2526])
	{
		if (ch[2145] >= gonum)
		{
			// イベントミニゲーム時
			ch[400] = 4;
			ch[2290] = 1;

			//パリン
			Message(0,"どんなもんよ","","","");
			//ペケ
			Message(4,"このゲームをクリアするとは","びっくりしたんダナー","","");
			Message(4,"久々にいろいろと","楽しめた気がするんダナー","","");
			//パリン
			Message(0,"スポンサーの件、","引き受けてもらうわよ","","");
			//ペケ
			Message(4,"仕方ない、わかったんダナー","","","");
			Message(4,"さっそく、ホームへ行って","みんなにスポンサーとして","挨拶してくるんダナー","");
			
			ch[400] = 104;

			ch[2526] = 1;

			KaguTest(30005,0);
			Camera(4,ch[421],ch[422],ch[423]);
			KaguTest(30062,0);
			ch[420] = 4;
			KaguTest(30063,0);
			ch[400] = 104;
			ch[424] = 0;
			ch[425] = -1875;
			ch[420] = 1;
			ch[426] = 12;
			KaguTest(30060,4);
			Walk2(4,ch[421] * 2,ch[422] * 2,ch[423] / 2);
			Wait((ch[423] / 2) - 15);
			Camera(-1,0,0,0);
			ch[420] = 3;
			KaguTest(30064,4);
			Wait(15);
			CharPos(4,-200000,0,0);
			KaguTest(30063,-1);
		}
		else
		{
			//ペケ
			ch[400] = 4;
			Message(4,"まだまだダナー","","","");
			Message(4,"こんなんじゃ、ぼくちんの","退屈はまぎらわせないんダナー","","");
		}

		ch[400] = -1;
		return 0;
	}

	if (ch[2145] >= gonum && go)
	{
		// 初合格
		str = "もぐらオバケ達を" + ch[2145] + "回も叩いたんダナ";
		ch[400] = 4;
		Message(4,"おめでとうなんダナ。合格なんダナ。",str,"","");
		ch[400] = -1;
		return 0;
	}
	if (go && best)
	{
		// 合格ならず。しかし、自己ベスト
		str = "もぐらオバケ達を" + ch[2145] + "回しか叩けてないんダナ";
		ch[400] = 4;
		Message(4,"前回より頑張っていたけど","残念だったんダナ","","");
		Message(4,str,"","","");
		Message(0,"まだまだ修行が必要みたいね","","","");
		ch[400] = -1;
		return 0;
	}
	if (go)
	{
		// 合格ならず。しかも、自己ベストでもない
		str = "もぐらオバケ達を" + ch[2145] + "回しか叩けてないんダナ";
		ch[400] = 4;
		Message(4,"残念なんダナ。",str,"","");
		Message(0,"もっと修行が必要みたいね","","","");
		ch[400] = -1;
		return 0;
	}
	if (best)
	{
		// 既に合格済み。自己ベスト
		if(ch[2145] > 99)
		{
			// 鬼だべ
			Message(0,"やったー。","自己ベスト更新よ","","");
			ch[400] = 4;
			Message(4,"凄いんダナ。","感動したんダナ。","","");
			str = "もぐらオバケ達を" + ch[2145] + "回も叩いて";
			Message(4,str,"ボコボコにするなんて","凄いニンゲンなんダナ","");
			if (!ch[2314])
			{
				Message(4,"ここまでもぐらオバケ達を","ボコボコにしたのは","キミが初めてなんダナ","");
				Message(4,"もぐらオバケ達をボコボコにした証として","この金のメダルをあげるんダナ","","");
				Mes("『金のメダル』を手に入れた。");
				ch[2290] = 2;
				KaguTest(20022,79);
				GetItem(79);
				Wait(90);
				
				if (ch[2145] > 99 && !ch[2642])
				{
//					Message(4,"さらに、１００回以上叩いてるから","今度から商品を割引してあげるんダナ","","");
					ch[2642] = 1;
				}
				
				Message(0,"ありがとう","","","");
				ch[400] = -1;
				ch[2314] = 1;
			}
			else
			{
				Message(4,"ここまでもぐらオバケ達を","ボコボコにできるのは","やっぱりキミだけなんダナ","");
				Message(4,"今回は銀のメダルをあげるんダナ","","","");
				KaguTest(20022,76);
				GetItem(76);
				Wait(90);
				if (ch[2145] > 99 && !ch[2642])
				{
//					Message(4,"さらに、１００回以上叩いてるから","今度から商品を割引してあげるんダナ","","");
					ch[2642] = 1;
				}
				Message(0,"ありがとう","","","");
				ch[400] = -1;
			}
			return 0;
		}
		Message(0,"やったー。","自己ベスト更新よ","","");
		ch[400] = 4;
		str = "もぐらオバケ達を" + ch[2145] + "回も叩いたんダナ";
		Message(4,"凄いんダナ。",str,"","");
		Message(4,"この調子で","ファントム達を倒して欲しいんダナ","","");
		Message(0,"任せておいて","","","");
		ch[400] = -1;

		return 0;
	}

	// 合格済み。自己ベストではない
	if(ch[2145] > 99)
	{
		// 鬼だべ
		ch[400] = 4;
		Message(4,"凄いんダナ。","感動したんダナ","","");
		str = "もぐらオバケ達を" + ch[2145] + "回も叩いて";
		Message(4,str,"ボコボコにするなんて","凄いニンゲンなんダナ","");
		if (!ch[2314])
		{
			Message(4,"ここまでもぐらオバケ達を","ボコボコにしたのは","キミが初めてなんダナ","");
			Message(4,"もぐらオバケ達をボコボコにした証として","この金のメダルをあげるんダナ","","");
			Mes("『金のメダル』を手に入れた。");
			ch[2290] = 2;
			KaguTest(20022,79);
			GetItem(79);
			Wait(90);
			if (ch[2145] > 99 && !ch[2642])
			{
//				Message(4,"さらに、１００回以上叩いてるから","今度から商品を割引してあげるんダナ","","");
				ch[2642] = 1;
			}
			Message(0,"ありがとう","","","");
			ch[400] = -1;
			ch[2314] = 1;
		}
		else
		{
			Message(4,"ここまでもぐらオバケ達を","ボコボコにできるのは","やっぱりキミだけなんダナ","");
			Message(4,"それでもベストじゃないんダナ。","末恐ろしいんダナ","","");
			Message(4,"今回は銅のメダルをあげるんダナ","","","");
			KaguTest(20022,77);
			GetItem(77);
			Wait(90);
			if (ch[2145] > 99 && !ch[2642])
			{
//				Message(4,"さらに、１００回以上叩いてるから","今度から商品を割引してあげるんダナ","","");
				ch[2642] = 1;
			}
			Message(0,"ありがとう","","","");
			ch[400] = -1;
		}
		return 0;
	}

	// 鬼じゃない
	str = "" + ch[2145] + "回叩いたんダナ";
	ch[400] = 4;
	Message(4,"今回はもぐらオバケ達を",str,"","");
	Message(4,"結果はいまいちのようなんダナ","","","");
	Message(0,"次はきっといい結果を出すわ","","","");
	ch[400] = -1;
	return 0;
}
#EndScript

// ドク
#Script:01152
int main()
{
	int mg;
	string str;
	int map;
	int nukeru;
	nukeru = 0;
	mg = 0;

	ch[400] = 14;
	
	KaguTest(20010,0);
	map = ch[420];

	if (map == 607)
	{
		// エレベータ解説
		//プク
//		ch[400] = 17;
		ch[420] = -1;
		KaguTest(12002,14);
		KaguTest(12002,17);
		KaguTest(30038,14);
		KaguTest(30038,17);
		ch[420] = 100;
		KaguTest(30103,14);
		Look(17,0);
		Message(17,"パリン！","","","");
		//パリン
		ch[420] = 89;
		ch[421] = 130;
		ch[422] = 600;
		ch[423] = 18;
		KaguTest(30065,0);
		Look(0,17);
		Message(0,"どう？","","","");
		Message(0,"エレベーターが直らないと","先へは行けないわ","","");
		ch[400] = 14;
		//ドク
		Look(14,0);
		Message(14,"もう、なおったはず","","","");
		Look(0,14);
		Look(17,14);
		Message(14,"故障というよりは","だれかに壊されたのかも？","","");
		//パリン
		Message(0,"そのとおりよ。","壊されるの見てたから","","");
		//ドク
		Message(14,"ま、もう動くから安心かも","","","");
		
		// リフト動かす
		SaveCamera();
		ch[302] = 2;
		
		ch[420] = -11;
		ch[421] = -694;
		KaguTest(30070,0);
		KaguTest(30070,14);
		KaguTest(30070,17);
		
		// エレベーター
		// 上にいる
		Wait(15);
		KaguTest(60003,1);
		Wait(15);
		ch[421] = -323;
		ch[422] = 395;
		ch[423] = 6450;
		KaguTest2(30018,1,"@p_null");
		CrossFade();
		Wait(30);
		Event(154);
		ch[402] = 1;
		Wait(90);
		ch[402] = 0;
		Black(0,100,15);
		Wait(15);
		Event(156);
		KaguTest2(30018,0,"");
		CrossFade();
		Wait(15);
		RestoreCamera();
		Black(0,0,15);
		Wait(15);
		
		//プク
		Look(17,14);
		Look(14,17);
		Look(0,14);
		Message(17,"ありがとう、これで","ニセパリンを追うことができるよ","","");
		//ドク
		Message(14,"なんのなんの","","","");
		Message(14,"それじゃ、私はこれで失礼","","","");
		ch[400] = -1;

		KaguTest(30005,0);
		Camera(14,ch[421],ch[422],ch[423]);
		KaguTest(30062,0);
		ch[420] = 14;
		KaguTest(30063,0);
		ch[400] = 114;
		ch[424] = 45;
		ch[425] = 1450;
		ch[420] = 1;
		ch[426] = 12;
		KaguTest(30060,14);
		Walk2(14,ch[421]*2,ch[422]*2,ch[423]/2);
		Wait((ch[423] / 2) - 15);
		Camera(-1,0,0,0);
		ch[420] = 3;
		KaguTest(30064,14);
		Wait(15);
		CharPos(14,-200000,0,0);
		KaguTest(30063,-1);

		ch[2533] = 1;
		ch[420] = 22;
		KaguTest(12002,17);
		KaguTest(12002,14);

		return 0;
	}
	if (ch[2531] && !ch[2555])
	{
		// ドクイベント続き：ドク、修理に向かえ
		ch[400] = 114;
		//パリン
		Message(0,"この汗臭いパーツいらないからあげるわ","","","");
		ch[400] = 14;
		Wait(10);
		//ドク
		Message(14,"おお、すばらしいかも！","","","");
		Message(14,"このパーツから","修理に必要な部品が取れそう！","","");
		ch[400] = 114;
		ch[420] = 1000;
		ch[421] = -635;
		KaguTest(30070,14);
		Black(0,100,15);
		Wait(15);
		SE(512);
		Wait(30);
		KaguTest(20002,29);
		ch[2532] = 0;
		Scop(0);
		Scop(1);
		Black(0,0,15);
		ch[2555] = 1;
		Wait(15);
		KaguTest(20023,0);
		SE(819);
		Mes("ドリルののろいがとけた。");
		Wait(70);
		Look(0,14);
		//ドク
		Message(14,"よし、これでなおったはず","","","");
		//パリン
		Message(0,"終わったの？","","","");
		ch[400] = 14;
		//ドク
		Message(14,"バッチリかも","","","");
		//パリン
		Message(0,"それじゃ、ピメントマウンテンの","エレベーター直してよ","","");
		//ドク
		Message(14,"いや、なおったからには","実験しないと気がすまないかも","","");
		//パリン
		Message(0,"えー！","","","");
		//ドク
		Message(14,"ちょうどいいから","ついでに実験台になってほしいかも","","");
		//パリン
		Message(0,"何の実験なのよ","","","");
		//ドク
		Message(14,"やってもらえば分かるはず。","どうする？","","");

		nukeru = 1;
	}
	if (ch[2530] && !ch[2531])
	{
		// ドクイベント１：パーツが足りない継続
		//ドク
		Message(14,"ニンゲンにもらった","パーツの換えさえあれば","すぐに修理できるかも…","");
		ch[400] = -1;
		ch[400] = 114;
		ch[420] = 1000;
		ch[421] = -635;
		KaguTest(30070,14);
		return 0;
	}
	if (ch[2521] && !ch[2530])
	{
//		ch[400] = 114;
		ch[400] = 14;


		if (ch[3957])
		{
			// ポポン中
			//ドク
			Message(14,"おや、ニンゲンとは珍しい。","またどこかで次元の穴が","開いたらしい","");
			//ポポン
			Message(0,"ジゲンの穴？","","","");
			//ドク
			Message(14,"空間の歪曲により","生じた亀裂……言うなれば、","この世界の傷口みたいなものかも","");
			//ポポン
			Message(0,"要するにわたしがいつも","通ってる抜け道のことね","","");
			Message(0,"それより、ピメントマウンテンの","エレベーターを直してよ","","");
			//ドク
			Message(14,"今は手が離せないかも","","","");
			//ポポン
			Message(0,"どうしたの？","","","");
			//ドク
			Message(14,"機械の調子が悪いみたい","","","");
			Message(14,"どうやら一部のパーツが","故障しているのかも","","");
			//ポポン
			Message(0,"だったら、直せばいいじゃない","","","");
			//ドク
			Message(14,"こわれたパーツは確か昔、","あるニンゲンにもらったものかも","","");
			Message(14,"同じものを作るとしたら","時間がかかってしまいそう","","");
			Message(14,"おや…","","","");
			//ポポン
			Message(0,"なによ？","","","");
			//ドク
			Message(14,"もしかしたら、そのドリルは","私が改造したものかも","","");
			//ポポン
			Message(0,"えっ、そうなの？","","","");
			//ドク
			Message(14,"改造したときにあまった","パーツをドリルの持ち主から","もらった気がするかも","");
			//ポポン
			Message(0,"なるほど、その時の","パーツが壊れちゃったのね","","");
			//ドク
			Message(14,"もう一度ドリルをバラして、","パーツをもらってもいい？","","");
			//ポポン
			Message(0,"いいわけないでしょ！","","","");
			//ドク
			Message(14,"そうか……","自分で同じパーツを","作るしかないらしい","");
			//ポポン
			Message(0,"どれくらいかかるの？","","","");
			//ドク
			Message(14,"う～ん、基礎研究が必要だから…","","","");
			Message(14,"だいたい１００年ほどかも","","","");
			//ポポン
			Message(0,"……………………","","","");
			Message(0,"…チッ、パーツを","探しに行くなんてダルイですわ","","");
			Message(0,"ちょっとだけ","ズルしてしまいましょう","","");
			//ドク
			Message(14,"何か言ったかな？","","","");
			//ポポン
			Message(0,"な、何でもありませんわ","","","");
			Message(0,"そうですわ、この最新式の","携帯ラジオを差し上げましょう","","");
			//ドク
			Message(14,"おお、すばらしいかも！","","","");
			Message(14,"この機械から","修理に必要な部品が取れそう！","","");
			//ポポン
			Message(0,"ふふ、うまく行きましたわ……","","","");
			
			Black(0,100,15);
			Wait(30);
			// 改造音
			SE(512);
			Wait(30);

			Black(0,0,15);
			Wait(15);

			//ドク
			Message(14,"よし、これでなおったはず","","","");
			//ポポン
			Message(0,"終わったの？","","","");
			//ドク
			Message(14,"バッチリかも","","","");
			//ポポン
			Message(0,"それじゃ、ピメントマウンテンの","エレベーター直してよ","","");
			//ドク
			Message(14,"いや、なおったからには","実験しないと気がすまないかも","","");
			//ポポン
			Message(0,"えー！","","","");
			//ドク
			Message(14,"ちょうどいいから","ついでに実験台になってほしいかも","","");
			//ポポン
			Message(0,"何の実験なのよ","","","");
			//ドク
			Message(14,"やってもらえば分かるはず。","どうする？","","");

			nukeru = 1;
			
			ch[2530] = 1;
			ch[2531] = 1;
			ch[2555] = 1;
		}
		else
		{
			// ドクイベント１：パーツが足りない
			//ドク
			Message(14,"おや、ニンゲンとは珍しい。","またどこかで次元の穴が","開いたらしい","");

			//パリン
			Message(0,"ジゲンの穴？","","","");

			//ドク
			Message(14,"空間の歪曲により","生じた亀裂……言うなれば、","この世界の傷口みたいなものかも","");

			//パリン
			Message(0,"要するにわたしがいつも","通ってる抜け道のことね","","");
			Message(0,"それより、ピメントマウンテンの","エレベーターを直してよ","","");

			//ドク
			Message(14,"今は手が離せないかも","","","");

			//パリン
			Message(0,"どうしたの？","","","");

			//ドク
			Message(14,"この機械の調子が悪いみたい","","","");
			Message(14,"どうやら一部のパーツが","故障しているらしい","","");

			//パリン
			Message(0,"だったら、直せばいいじゃない","","","");

			//ドク
			Message(14,"こわれたパーツは確か昔、","あるニンゲンにもらったものかも","","");
			Message(14,"同じものを作るとしたら","時間がかかってしまいそう","","");
			Message(14,"おや…","","","");

			//パリン
			Message(0,"なによ？","","","");

			//ドク
			Message(14,"もしかしたら、そのドリルは","私が改造したものかも","","");

			//パリン
			Message(0,"えっ、そうなの？","","","");

			//ドク
			Message(14,"改造したときにあまった","パーツをドリルの持ち主から","もらった気がする……","");

			//パリン
			Message(0,"なるほど、その時の","パーツが壊れちゃったのね","","");

			//ドク
			Message(14,"もう一度ドリルをバラして、","パーツをもらってもいい？","","");

			//パリン
			Message(0,"いいわけないでしょ！","","","");

			//ドク
			Message(14,"そうか……","自分で同じパーツを","作ってみるしかないらしい","");

			//パリン
			Message(0,"どれくらいかかるの？","","","");

			//ドク
			Message(14,"う～ん、基礎研究が必要だから…","","","");
			Message(14,"だいたい１００年ほどかも","","","");
			ch[2530] = 1;
			ch[400] = 114;
			ch[420] = 1000;
			ch[421] = -635;
			KaguTest(30070,14);
			return 0;
		}
	}
	if (ch[2555] && !ch[2534])
	{
		if (ch[2555] == 1)
		{
			ch[2555] = 2;
		}
		else
		{
			Message(14,"実験台になってくれたら","エレベーターを修理してもいいかも","","");
		}
		SelStart(50);
		SelText("実験を手伝う",1);
		SelText("実験を手伝わない",2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			Message(14,"それではさっそく","実験フィールドに移動するかも","","");
			mg = 1;
		}
		else
		{
			Message(14,"実験台になってくれるまで","ここで待ってるかも","","");
		}
		nukeru = 1;
	}

	ch[214]++;
	if (!nukeru)
	{
		// えぴろーぐ
		if (ch[1538])
		{
			if (ch[214] < 2)
			{
				//ドク
				Message(14,"頼まれていたトカロンの","分析がだいたい終わったかも","","");
				//パリン
				Message(0,"どうだったの？","","","");
				//ドク
				Message(14,"まず、かけられていた呪いは","誰のしわざかは分からないかも","","");
				Message(14,"いえることはただ１つ。","今回の事件で呪いは","完全に解けたということかも","");
				Message(14,"二度とみんなを","困らせるようなことはないはず","","");
				//パリン
				Message(0,"これにて一件落着ってワケね","","","");
			}
			else
			{
				//ドク
				Message(14,"トカロンにかけられていた呪いは","誰のしわざかは分からないかも","","");
				Message(14,"いえることはただ１つ。","今回の事件で呪いは","完全に解けたということかも","");
				Message(14,"二度とみんなを","困らせるようなことはないはず","","");
			}
			ch[400] = -1;
			return 0;
		}
		
		// つぼ食え
		KaguTest(20010,0);
		if (ch[2533] && !ch[2037] && ch[420] == 22)
		{
			ch[400] = 14;
			Look(14,0);
			//ドク
			Message(14,"おや、ちょうど","いいところに来たのかも","","");

			//パリン
			Message(0,"何かいいことでもあるの？","","","");

			//ドク
			Message(14,"ちょっと珍しい","壺を開発してみたかも","","");

			//パリン
			Message(0,"ツボ？どんな壺なのよ","","","");

			//ドク
			ch[400] = 114;
			Message(14,"ふむ……","","","");
			Message(14,"話すより実際に使って","見せたほうが早いかも","","");
//			Message(14,"ちょうどいい","実験材料がやって来たかも","","");
			ch[420] = 15;
			ch[421] = 30;
			ch[429] = 1;
			KaguTest(30053,14);
			ch[420] = 0;
			ch[421] = -1050;
			KaguTest(30070,14);
			Wait(30);

			Message(14,"ちょうどいい","実験材料がやって来たかも","","");

			CharPos(16,0,-1450,0);
			KaguTest(12000,16);
			Walk2(16,0,7,120);
			KaguTest(20021,16);
			ch[420] = -226;
			ch[421] = 175;
			ch[422] = 310;
			ch[423] = 7;
			ch[424] = -629;
			ch[425] = 70;
			KaguTest(30093,20);
			KaguTest(30019,14);
			CrossFade();
			
			Look(0,16);
			KaguTest(20053,0);
			Wait(ch[420]);
			ch[424] = 150;
			ch[425] = -575;
			ch[426] = 16;
			KaguTest(30061,0);
			KaguTest(30060,14);
			Walk2(14,ch[421],ch[422],ch[423]);
			int time;
			time = ch[423];
			ch[429] = 0;
			KaguTest(30039,0);
			ch[424] = -20;
			ch[425] = -475;
			ch[426] = 14;
			KaguTest(30061,0);
			KaguTest(30060,0);
			Walk(ch[421],ch[422],ch[423]);
			ch[429] = 0;
			KaguTest(30039,0);
			
			if (ch[423] > time)
			{
				Wait(time);
				Look(14,16);
				ch[420] = 8;
				ch[429] = 1;
				KaguTest(30036,16);
				Wait(ch[423] - time);
				Look(0,16);
			}
			else
			{
				Wait(ch[423]);
				Look(0,16);
				ch[420] = 8;
				ch[429] = 1;
				KaguTest(30036,16);
				Wait(time - ch[423]);
				Look(14,16);
			}
			//ドク
			Look(16,0);
			Message(14,"このようにオバケがいる","場所でこの壺を使うと…","","");
			ch[421] = 0;
			KaguTest(30076,1);
			ch[420] = 0;
			KaguTest(30111,16);
			Wait(20);
			ch[420] = 50;
			KaguTest(30103,16);
			Wait(40);
			ch[420] = 2009;
			ch[429] = 1;
			KaguTest(30036,16);
			Look(16,14);
			Look(0,16);
			Wait(40);
			//ドク
			Message(14,"オバケのエネルギーを吸い出して","封じ込めることができるかも","","");
			Look(16,0);
			//パリン
			Message(0,"おお～","","","");
			Look(16,14);
			ch[420] = 8;
			ch[429] = 1;
			KaguTest(30036,16);
			Wait(30);
			//ポコ
			Message(16,"？？？","","","");
			Message(16,"何だか体が","薄くなった気がするぽ……","","");
			Message(16,"気分も悪くなってきたから","今日は帰るぽ","","");
			Walk2(16,0,-7,120);
			KaguTest(20021,16);
			ch[429] = 0;
			KaguTest(30039,0);
			Wait(105);
			ch[420] = 3;
			KaguTest(30064,16);
			Wait(15);
			CharPos(16,-200000,0,0);
			ch[420] = 23;
			KaguTest(12002,16);
			//パリン
			KaguTest(30019,0);
			ch[400] = 14;
			Look(14,0);
			Look(0,14);
			Message(0,"それで、その封じ込めた","エネルギーはどうするの？","","");

			//ドク
			Message(14,"壺を置いて、叩き割ることで","オバケエネルギーを開放できる","","");
			Message(14,"一時的にだが戦闘中にオバケの","力を借りることが可能になるかも","","");

			//パリン
			Message(0,"へー、なるほどね","","","");

			//ドク
			Message(14,"ただし、開発中のため、","エネルギーを吸いだせる","オバケは限られているらしい","");
			Message(14,"テストも兼ねてパリンに","この壺をあげてもいいかも","","");

			//パリン
			Message(0,"やった！","","","");

			ch[420] = 1;
			KaguTest(30111,0);
			GetItem(23);
			KaguTest(20022,23);
			Mes("『青色のツボ』を手に入れた。");
			Wait(60);

			// チュートリアル表示
			KaguTest(10006,0);
			KaguTest(10007,7);
			KaguTest2(10009,0,"tute_13.bmp");
			ch[423] = 180;
			ch[424] = 42;
			ch[425] = 460;
			ch[426] = 438;
			ch[427] = 0;
			ch[428] = 0;
			ch[429] = 320;
			ch[430] = 452;
			ch[431] = 512;
			SE(399);
			KaguTest(10010,10);
			Wait(10);
			Message(0,"","","","");
			ch[420] = 0;
			KaguTest(10011,10);
			Wait(10);

			ch[2037] = 1;
			ch[400] = -1;
			return 0;
		}
		
		// 一般
		if (ch[1571] && !ch[1538])
		{
			if (ch[214] < 2)
			{
				//ドク
				Message(14,"計器の数値を見ると","まるで大きな地震があったみたい","","");
				Message(14,"全然気づかなかったかも","","","");
				//パリン
				Message(0,"徹夜で研究でもして","寝ぼけてたんじゃない？","","");
				//ドク
				Message(14,"いや、寝るときはこのまま","空中で寝るクセがあるから","気づかなかったのかも","");
				//パリン
				Message(0,"…うらやましいわね","","","");
			}
			else
			{
				//ドク
				Message(14,"計測器によれば、","何十年か前にあった地震と","波形がよく似ているかも","");
			}
		}
		if (ch[1513] && !ch[1571])
		{
			//ドク
			Message(14,"そのドリルには火や雷の","効果をアタッチメントできるよう","改造した覚えがあるかも","");
			Message(14,"全部で確か三つの属性が","追加できるようになってたはず","","");
		}
		if (ch[1505] && !ch[1513])
		{
			if (ch[2533])
			{
				//ドク
				Message(14,"これでやっと研究に没頭できるかも","","","");
			}
			else
			{
				ch[400] = 114;
				if (ch[214] < 2)
				{
					//ドク
					Message(14,"この部品が問題だとすると","全てのつじつまがあうけど…","","");
					Message(14,"これは少々困ったことなったかも…","","","");
					//パリン
					Message(0,"何だか集中してるわね","","","");
				}
				else
				{
					//ドク
					Message(14,"この部品が問題だとすると","全てのつじつまがあうけど…","","");
					Message(14,"これは少々困ったことなったかも…","","","");
				}
				return 0;
			}
		}
		if (ch[1542] && !ch[1505])
		{
			//ドク
			ch[400] = 114;
			Message(14,"ここに異常がないとなると","この部品が問題らしい…","","");
			Message(14,"でも原因がここにあるなら","困ったことになったかも…","","");
			return 0;
		}
		if (!ch[1542])
		{
			ch[400] = 114;
			if (ch[214] < 2)
			{
				//ドク
				Message(14,"ふーむ、ここがこうなって","ああなるとすると…","","");
				//パリン
				Message(0,"おーい","","","");
				//ドク
				Message(14,"いやいやいや、この部品は","取り替えたばかりだから…","","");
				//パリン
				Message(0,"もしもーし！","","","");
				//ドク
				Message(14,"となると、やはり","ここの回路があやしいのかも…","","");
				//パリン
				Message(0,"ダメね…","用はないし、あきらめましょ","","");
			}
			else
			{
				//ドク
				Message(14,"ふーむ、ここがこうなって","ああなるとすると…","","");
				Message(14,"いやいやいや、この部品は","取り替えたばかりだから…","","");
			}
			return 0;
		}
	}
	
	if (ch[2533] && map == 22 && !ch[1538])
	{
		if (!ch[2311])
		{
			// なわとびしたことが無い
			Message(14,"ここは私の作った研究所だ","","","");
			Message(14,"今ここでは、平常心について","研究しているのだ","","");
			Message(14,"とくに「焦り」について","研究している","","");
			Message(14,"なぜ焦るとミスが多くなるのか。","非常に興味深い分野だとは","思わないか？","");
			Message(14,"そこで今この研究所では","サンプル採取に協力してくれる","人を募集している","");
			Message(14,"どうだ？","研究に参加してみないか？","","");
			
			SelStart(50);
			SelText("参加する",1);
			SelText("参加しない",2);
			SelEnd();
			
			if (ch[50] == 1)
			{
				// 飛ぶ
				Message(14,"よし、それならば","実験フィールドに移動しよう","","");
				mg = 1;
			}
//			else
//			{
//				Message(14,"研究サンプルの目標に達成したら","ドリルのパーツを売ってあげようと","思っていたのに……","");
//			}
		}
		else
		{
			// なわとびしたことがある
			if (ch[2311] < 21)
			{
				// なわとび不合格
				Message(14,"ところで、よく来てくれた","","","");
				if (ch[2311] == 1)
				{
					str = "前回は一本も避けられなかったようだ。";
					Message(14,"前回の協力時には","１本も避けられなかったようだな","","");
					Message(14,"研究サンプルには","到底使えそうにもない。","今度は頑張ってくれ","");
				}
				else
				{
					str = "過去最高で" + (ch[2311] - 1) + "本避けているかも";
					Message(14,"キミの今までのサンプルによると",str,"","");
					Message(14,"なかなか興味深い数値ではあるが","まだまだ研究に使えそうにはないかも。","今度はもっと頑張って欲しいかも","");
				}
				Message(14,"今回も研究に","協力して欲しいかも","","");

				SelStart(50);
				SelText("協力する",1);
				SelText("協力しない",2);
				SelEnd();
				
				if (ch[50] == 1)
				{
					// 飛ぶ
					Message(14,"よし、それならば","実験フィールドに移動しよう","","");
					mg = 1;
				}
//				else
//				{
//					Message(14,"研究サンプルは３０本以上が目安だ。","３０本以上避けられたら","ドリルのパーツを売ってあげよう","");
//				}
			}
			else
			{
				// なわとび合格済み
				ch[400] = 14;
				Message(14,"ところでよく来てくれた","","","");
				Message(14,"今日も研究に協力して欲しいかも","","","");
				SelStart(50);
				SelText("協力する",2);
				SelText("協力しない",3);
				SelEnd();
				
				if (ch[50] == 2)
				{
					// ミニゲーム
					Message(14,"そうかそうか。","研究に協力してくれるか","","");
					str = "過去最高は" + (ch[2311] - 1) + "本避けたかも";
					Message(14,"今までのキミのサンプルによると",str,"","");
					if (ch[2312])
					{
						Message(14,"自己ベストを更新できるよう","頑張って欲しいかも","","");
					}
					if (!ch[2312] && ch[2311] > 80)
					{
						// ８０避け済み
						Message(14,"もう一度、８０回以上","避けている所を見てみたいかも","","");
					}
					if (!ch[2312] && ch[2311] < 81)
					{
						// まだ
						Message(14,"一度でいいから","幻の８０回避けを","見てみたいかも","");
					}

					// 飛ぶ
					Message(14,"それではさっそく","実験フィールドに移動しよう","","");
					mg = 1;
				}
				else 
				{
//					if (ch[50] != 2 && ch[50] != 1)
					{
						str = "過去最高は" + (ch[2311] - 1) + "本避けているかも";
						Message(14,"今までのキミのサンプルによると",str,"","");
						Message(14,"また今度研究に協力して欲しいかも","","","");
					}
				}

			}

		}
	}
	
	ch[400] = -1;
	
	if (ch[1538])
	{
		return 0;
	}

	if (mg)
	{
		// ミニゲームする
		ch[420] = -450;
		ch[421] = 1985;
		ch[422] = 666;
		ch[423] = 0;
		ch[424] = 535;
		ch[425] = 65;
		KaguTest(30019,1);
		CrossFade();
		Wait(10);
		Event(231);
		SE(476);
		Wait(60);
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 12;
		KaguTest(30060,0);
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		ch[2145] = 0;
		Black(0,100,15);
		Wait(15);
		KaguTest(30019,0);
		ch[2144] = 1;
		ch[2497] = 1;
		LoadMap(22);
		CharPos(0,0,0,-93);
		Camera(14,-550,900,370);
		Look(0,14);
		Look(14,0);
		KaguTest(12000,58);
		KaguTest(12001,58);
		KaguTest(12000,59);
		KaguTest(12001,59);
		CrossFade();
		Wait(15);
		Black(0,0,15);
		
		ch[400] = 14;
		if (ch[2311] < 21)
		{
			// 合格して無いとき
			Message(14,"実験内容の説明をしよう","","","");
			Message(14,"迫り来るレーザーを","ひたすら避け続けることが","実験の内容である","");
			Message(14,"レーザーにふれた時点で","今回の実験を終わりにするかも","","");
			Message(14,"実験数値のカウントは","レーザーが端まできたら１本と数える","","");
			Message(14,"サンプルとしての目標は","２０本以上カウントされることが","望ましい","");
		}
		else
		{
			Message(14,"実験内容の説明をしよう","","","");
			Message(14,"迫り来るレーザーを","ひたすら避け続けることが","本実験の内容である","");
			Message(14,"レーザーにふれた時点で","今回の実験を終わりとするかも","","");
			Message(14,"実験数値のカウントは","レーザーが端まできたら１本と数える","","");
			Message(14,"研究サンプルとして利用できるよう","出来るだけ多く避けてくれ","","");
		}
		Message(14,"では、期待しているかも","","","");
		Wait(15);
		Camera(0,0,-1000,620);
		CrossFade();
		Wait(30);
		ch[3982] = 4;
		ch[400] = -1;
		// テクスチャ読み込んでおく
		KaguTest2(10009,0,"minigm.iti");
		Wait(90);
		BGM(10);
		ch[2061] = 1;
	}
	
	return 0;
}
#EndScript

// なわとび終了
#Script:01153
int main()
{
	int go;
	int best;
	int syokai;
	string str;
	go = 0;
	best = 0;
	syokai = 0;

	// ホイッスル
	SE(548);
	ch[3982] = 0;
	Wait(60);
	Black(0,100,30);
	Wait(30);
	ch[2144] = 0;
	ch[2497] = 0;
	LoadMap(22);
	KaguTest2(10010,0,"minigm");
	CharPos(0,340,-360,0);
	Camera(14,-550,900,370);
	Look(0,14);
	Look(14,0);
	CrossFade();
	Wait(15);
	Camera(-1,0,0,0);
	Black(0,0,30);
	Wait(30);
	
	ch[2061] = 0;

	if (ch[2311] < 21)
	{
		// 過去に合格していない
		go = 1;
	}
	if (ch[2145] > ch[2311] - 1 && ch[2311] > 0)
	{
		// 自己ベスト
		best = 1;
	}
	if (ch[2311] == 0)
	{
		syokai = 1;
	}
	if (ch[2145] > ch[2311] - 1)
	{
		ch[2311] = ch[2145] + 1;
	}
	
	if (!ch[2534] && ch[2145] > 19)
	{
		// 合格
		ch[400] = 14;
		ch[2289] = 1;
		//パリン
		Message(0,"ふー、汗かいちゃったわ","","","");
		//ドク
		Message(14,"ふむ、なかなか","いいサンプルがとれたかも","","");
		Message(14,"これで実験はひとまず","終了してもよさそう","","");
		//パリン
		Message(0,"それじゃ、ピメントマウンテンの","エレベーター直してよ","","");
		//ドク
		Message(14,"エレベーター？","","","");
		Message(14,"わかった、故障したものが","ほうってあるとイライラするかも","","");
		Message(14,"それじゃ、先に行って待ってる","","","");

		KaguTest(30005,0);
		Camera(14,ch[421],ch[422],ch[423]);
		KaguTest(30062,0);
		ch[420] = 14;
		KaguTest(30063,0);
		ch[400] = 114;
		ch[424] = 0;
		ch[425] = -740;
		ch[420] = 1;
		ch[426] = 12;
		KaguTest(30060,14);
		Walk2(14,ch[421]*2,ch[422]*2,ch[423]/2);
		Wait(ch[423]/2);
		KaguTest(30061,0);
		ch[424] = 0;
		ch[425] = -1300;
		ch[426] = 12;
		KaguTest(30060,14);
		Walk2(14,ch[421]*2,ch[422]*2,ch[423]/2);
		Wait((ch[423] / 2) - 15);
		Camera(-1,0,0,0);
		ch[420] = 3;
		KaguTest(30064,14);
		Wait(15);
		CharPos(14,-200000,0,0);
		KaguTest(30063,-1);

		ch[2534] = 1;
		ch[400] = -1;
		return 0;
	}
	if (!ch[2534] && ch[2145] < 20)
	{
		ch[400] = 14;
		//ドク
		Message(14,"失敗するのが早いかも。","必要なデータがとれてないみたい","","");
		Message(14,"もう一度たのみたいかも","","","");
		//パリン
		Message(0,"えー、急いでるのに","","","");
		ch[400] = -1;
		return 0;
	}
	
	if (ch[2145] > 19 && go)
	{
		// 初合格
		str = "" + ch[2145] + "本避けているかも";
		ch[400] = 14;
		Message(14,"おめでとう。サンプル目標到達だ。",str,"","");
		ch[400] = -1;
		return 0;
	}
	if (go && best)
	{
		// 合格ならず。しかし、自己ベスト
		str = "" + ch[2145] + "本しか避けれていないかも";
		ch[400] = 14;
		Message(14,"過去ベスト更新のようだな。","しかし残念だ。",str,"");
		Message(14,"次はサンプル目標に","到達できるよう頑張ってくれ","","");
		ch[400] = -1;
		return 0;
	}
	if (go)
	{
		// 合格ならず。しかも、自己ベストでもない
		if (ch[2145] > 0)
		{
			str = "" + ch[2145] + "本しか避けれていないかも";
		}
		else
		{
			str = "１本も避けれていないかも";
		}
		ch[400] = 14;
		Message(14,"残念かも。",str,"","");
		Message(14,"サンプル目標には","到達できなかったかも","","");
		Message(0,"なかなか難しいわ","","","");
		ch[400] = -1;
		return 0;
	}
	if (best)
	{
		// 既に合格済み。自己ベスト
		if(ch[2145] > 79)
		{
			// 鬼だべ
			Message(0,"やったー。","自己ベスト更新よ","","");
			ch[400] = 14;
			Message(14,"凄い。","天才が現れたかも！","","");
			str = "" + ch[2145] + "本も避けているかも";
			Message(14,str,"","","");
			if (!ch[2312])
			{
				Message(14,"ここまで避けられる人を","他に見たことがないかも","","");
				Message(14,"実験に貢献してくれた証として","この金のメダルをあげよう","","");
				Mes("『金のメダル』を手に入れた。");
				ch[2289] = 2;
				KaguTest(20022,79);
				GetItem(79);
				Wait(90);
				
				if (ch[2145] > 199 && !ch[2641])
				{
//					Message(14,"さらに実験数値が２００を超えたので","今度から商品を割引してあげよう","","");
					ch[2641] = 1;
				}
				Message(0,"ありがとう","","","");
				ch[400] = -1;
				ch[2312] = 1;
			}
			else
			{
				Message(14,"ここまで避けられる人は","やはりキミだけかも","","");
				Message(14,"今回は銀のメダルをあげよう","","","");
				KaguTest(20022,76);
				GetItem(76);
				Wait(90);
				if (ch[2145] > 199 && !ch[2641])
				{
//					Message(14,"さらに実験数値が２００を超えたので","今度から商品を割引してあげよう","","");
					ch[2641] = 1;
				}
				Message(0,"ありがとう","","","");
				ch[400] = -1;
			}
			return 0;
		}
		Message(0,"やったー。","自己ベスト更新よ","","");
		ch[400] = 14;
		str = "" + ch[2145] + "本も避けているかも";
		Message(14,"凄い。",str,"","");
		Message(14,"次は８０本に挑戦して欲しいかも","","","");
		Message(0,"任せておいて","","","");
		ch[400] = -1;

		return 0;
	}

	// 合格済み。自己ベストではない
	if(ch[2145] > 79)
	{
		// 鬼だべ
		ch[400] = 14;
		Message(14,"凄い。","天才が現れたかも！","","");
		str = "" + ch[2145] + "本も避けているかも";
		Message(14,str,"","","");
		if (!ch[2312])
		{
			Message(14,"ここまで避けられる人を","他に見たことがないかも","","");
			Message(14,"実験に貢献してくれた証として","この金のメダルをあげよう","","");
			Mes("『金のメダル』を手に入れた。");
			ch[2289] = 2;
			KaguTest(20022,79);
			GetItem(79);
			Wait(90);
			
			if (ch[2145] > 199 && !ch[2641])
			{
//				Message(14,"さらに実験数値が２００を超えたので","今度から商品を割引してあげよう","","");
				ch[2641] = 1;
			}
			Message(0,"ありがとう","","","");
			ch[400] = -1;
			ch[2312] = 1;
		}
		else
		{
			Message(14,"ここまで避けられる人は","やはりキミだけかも","","");
			Message(0,"でも、自己ベストじゃないわ。","次はがんばらなくちゃ","","");
			Message(14,"今回は銅のメダルをあげよう","","","");
			KaguTest(20022,77);
			GetItem(77);
			Wait(90);
			Message(0,"ありがとう","","","");
			ch[400] = -1;
		}
		return 0;
	}

	// 鬼じゃない
	if (ch[2145] > 0)
	{
		str = "" + ch[2145] + "本避けたかも";
	}
	else
	{
		str = "１本も避けれていないかも";
	}
	ch[400] = 14;
	Message(14,"今回はレーザーを",str,"","");
	Message(0,"結果はいまいちね","","","");
	Message(14,"また今度実験に","協力して欲しいかも","","");
	ch[400] = -1;
	return 0;
}
#EndScript

// 岩壊しオバケ
#Script:01154
int main()
{
	int mg;
	string str;
	int nukeru;
	int nukeru2;
	int map;
	nukeru = 0;
	mg = 0;

	KaguTest(20010,0);
	map = ch[420];
	ch[400] = 4;
	if (ch[2526] && !ch[2527])
	{
		//ペケ
		Message(4,"さっそく、モグレヌたちを雇って","復興を手伝ってもらうんダナー","","");
		Message(4,"さっき呼んだから","もうすぐ来ると思うんダナー","","");
		nukeru = 1;
	}
	if (ch[2524] && !ch[2525])
	{
		// ペケにスポンサーを依頼
		ch[2525] = 1;
		ch[400] = 4;
		
		KaguTest(20008,0);
		ch[2039] = ch[430];
		
		if (ch[2528])
		{
			Message(4,"やあ、何か用？","","","");
		}
		else
		{
			//ペケ
			Message(4,"ぼくちんに何か用？","","","");
		}
		ch[2528] = 1;
		Message(0,"実は…","","","");
		Black(0,100,15);
		Wait(30);
		Black(0,0,15);
		//ペケ
		Message(4,"ぼくちんにホーム復興の","スポンサーになってほしい？","","");
		Message(4,"べつにいいんダナー","","","");
		//パリン
		Message(0,"本当？やけにあっさりね","","","");
		
		if (ch[3957])
		{
			// ポポン中
			//ペケ
			Message(4,"君はかわいいから","断れないんダナー","","");
			Message(4,"でも、その代わり","ぼくちんの退屈しのぎに","付き合ってほしいんダナー","");

			//パリン
			Message(0,"かわいいなんて素直ね。","何をすればいいの？","","");

			//ペケ
			Message(4,"ぼくちんのゲームに","参加してほしいんダナー","","");

			//パリン
			Message(0,"ゲーム？","どうしようかな……","","");
			ch[2554] = 1;
		}
		else
		{
			//ペケ
			Message(4,"ドリルの持ち主に","頼まれたら断れないんダナ","","");
			Message(4,"でも、条件があるんダナー","","","");
			//パリン
			Message(0,"何よ？","","","");
			//ペケ
			Message(4,"最近、なかなか","面白いことがないんダナ","","");
			Message(4,"だから、ぼくちんを","笑わせてみてほしいんダナー","","");
			//パリン
			Message(0,"笑わせるって","どうしたらいいんだろ…","","");
			ch[400] = -1;
			return 0;
		}
	}

	ch[2528] = 1;
	if (ch[2525] && !ch[2554])
	{
		ch[400] = 4;
		KaguTest(20008,0);
		nukeru = 1;

		if (ch[430] == ch[2039])
		{
			// 初めて会ったときと同じ顔
			//ペケ
			Message(4,"早く早く！","","","");
			Message(4,"早くぼくちんを","笑わせてみてほしいんダナー","","");
			ch[400] = -1;
			return 0;
		}
		// お面系でなければすべて素顔扱い
		switch(ch[430])
		{
		case 37:
		case 41:
		case 43:
		case 44:
		case 45:
		case 46:
		case 47:
		case 57:
		case 61:
		case 62:
			ch[430] = 0;
		}

		if ((ch[2039] != 42 && ch[430] == 42) || ((ch[2039] == 42 || ch[2039] == 56) && ch[430] == 0) || (ch[2039] != 56 && ch[430] == 56))
		{
			// 正解。
			ch[2554] = 1;
			if ((ch[2039] == 42 && ch[430] != 56) || (ch[2039] == 56 && ch[430] != 42))
			{
				// 素顔
				//ペケ
				Message(4,"…………………………","","","");
				Message(4,"ぷっ…","","","");

				//パリン
				Message(0,"？？？","","","");

				//ペケ
				Message(4,"くふ、くふふふっ…","そ、そのお面すごく面白いんダナー","","");

				//パリン
				Message(0,"…お面？","","","");
				Message(0,"失礼ね、これは素顔よ！！","","","");

				//ペケ
				Message(4,"あれ、そうなの？","","","");

				//パリン
				Message(0,"いたいけなレディに何てこと言うのよ。","お金持ちの風上にもおけないわ","","");
				Message(0,"でも、笑ったんだから","わたしの勝ちってことね","","");
			}
			else
			{
				// ガスマスク｜おさるの帽子
				//ペケ
				Message(4,"…………………………","","","");
				Message(4,"ぷっ…","","","");
				Message(4,"くふ、くふふふっ…","お、おもしろい顔なんダナー","","");

				//パリン
				Message(0,"やった、笑ったわ！","","","");

				//ペケ
				Message(4,"ハッ…ひさびさに心の","奥底から笑ってしまったんダナー","","");

				//パリン
				Message(0,"わたしの勝ちってことね","","","");
			}
			//ペケ
			Message(4,"ぼくちんの負けってこと？","な、何だかくやしいんダナー","","");

			//パリン
			Message(0,"さあ、約束よ。","スポンサーをお願いするんダナー","","");

			//ペケ
			Message(4,"…イヤ","","","");

			//パリン
			Message(0,"何でよ！","","","");

			//ペケ
			Message(4,"気が変わったんダナー","","","");
			Message(4,"今度は、ぼくちんの","ゲームに付き合ってほしいんダナー","","");

			//パリン
			Message(0,"ゲーム？","","","");

			//ペケ
			Message(4,"ゲームをクリアすれば","スポンサーやってもいいんダナ","","");
			Message(4,"チャレンジしないなら","あきらめてもらうんダナー","","");

			//パリン
			Message(0,"全く、ひねくれ者ね","","","");

			//ペケ
			Message(4,"さて、どうするんダナー？","","","");
		}
		if (!ch[2554])
		{
			if (ch[430] == 40 || ch[430] == 43 || ch[430] == 44 || ch[430] == 46 || ch[430] == 47 || ch[430] == 48 || ch[430] == 56 || ch[430] == 57 || ch[430] == 62 || ch[430] == 21 )
			{
				// 不正解。微妙
				//ペケ
				Message(4,"…………………………","","","");
				Message(4,"ぷっ…","","","");
				//パリン
				Message(0,"今、笑ったでしょ？","","","");
				//ペケ
				Message(4,"わ、笑ってないんダナー","","","");
				ch[400] = -1;
				return 0;
			}
			if (ch[430] != 42)
			{
				// 不正解。だめだめ
				Message(4,"ダメダメなんダナー。","出直してくるんダナー","","");
				ch[400] = -1;
				return 0;
			}
		}
		
	}

	if (ch[2554] && !ch[2526])
	{
		// ミニゲームするか聞く
		if (ch[2554] == 1)
		{
			ch[2554] = 2;
		}
		else
		{
			//ペケ
			Message(4,"ゲームをクリアすれば","スポンサーやってもいいんダナ","","");
			Message(4,"チャレンジしないなら","あきらめてもらうんダナー","","");
		}
		
		SelStart(50);
		SelText("ゲームに挑戦する",1);
		SelText("ゲームに挑戦しない",2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			mg = 1;
		}
		else
		{
			Message(4,"挑戦したくなったら","またくるんダナー","","");
			ch[400] = -1;
			return 0;
		}
		nukeru = 1;
	}

	if (ch[2497])
	{
		return 0;
	}

	ch[400] = 4;
	ch[204]++;
	if (!nukeru)
	{
		if (ch[1538])
		{
			//ペケ
			Message(4,"オバケホームの修復も","ずいぶんと進んだんダナー","","");
			Message(4,"スポンサーの仕事も","もうすぐで終わりで","少しさみしい気もするんダナー","");
			ch[400] = -1;
			return 0;
		}
		if (ch[1571] && !ch[1538])
		{
			//ペケ
			Message(4,"すごい地震だったんダナ","","","");
			Message(4,"屋敷の中のコレクションが","無事かどうか後で見て回るんダナー","","");
		}
		if (ch[1513] && !ch[1571])
		{
			if (ch[204] < 2)
			{
				//ペケ
				Message(4,"昔、ニンゲンの勇者に頼まれて","ドリルの改造費用を貸したんダナー","","");
				//パリン
				Message(0,"勇者はどんな人だったの？","","","");
				//ペケ
				Message(4,"後になって改造費用を請求したら","何のことだか忘れたとか","言ってトボけてたんダナー","");
				//パリン
				Message(0,"うーん、わりとひどい人ね","","","");
			}
			else
			{
				//ペケ
				Message(4,"昔、ニンゲンの勇者に頼まれて","ドリルの改造費用を貸したんダナー","","");
				Message(4,"後になって改造費用を請求したら","何のことだか忘れたとか","言ってトボけてたんダナー","");
			}
		}
		if (ch[1505] && !ch[1513])
		{
			if (!ch[2524])
			{
				//ペケ
				Message(4,"あーあ、とっても退屈なんダナー","","","");
				Message(4,"どこかに面白いことあったら","教えてほしいんダナー","","");
			}
			else
			{
				//ペケ
				Message(4,"スポンサーになったから","山に作ってた別荘は","工事を中止するんダナー","");
				Message(4,"お金持ちでも無駄遣いは","よくないんダナー","","");
			}
		}
		if (!ch[1505])
		{
			//ペケ
			Message(4,"ぼくちんに何か用？","","","");
			Message(4,"ぼくちんはこの屋敷のあるじ、","金持ちオバケのペケなんダナー","","");
			Message(4,"最近、面白いことがなくて","とても退屈なんダナー","","");
		}
	}
	
	if (ch[2527] && map == 23 && !ch[1538])
	{
		// もぐら叩きしたことがある
		if (ch[2313] < 61)
		{
			// なわとび不合格
			if (ch[2313] == 1)
			{
				str = "前回は一度もモグラを叩けなかったみたいなんダナー";
			}
			else
			{
				str = "過去最高は" + (ch[2313] - 1) + "叩きなんダナー";
			}
				
			Message(4,"ところで、もぐら叩きするんダナー？",str,"","");

			SelStart(50);
			SelText("もぐら叩きをする",1);
			SelText("もぐら叩きをしない",2);
			SelEnd();
				
			if (ch[50] == 1)
			{
				// 飛ぶ
				Message(4,"それじゃ、準備するんダナー","","","");
				mg = 1;
			}
			else
			{
				Message(4,str,"","","");
				Message(4,"モグラ叩きしたくなったら","また来るんダナー","","");
			}
		}
		else
		{
			// もぐら叩き合格済み
			ch[400] = 4;
			Message(4,"もぐら叩きするんダナー？",str,"","");

			SelStart(50);
			SelText("もぐら叩きをする",1);
			SelText("もぐら叩きをしない",2);
			SelEnd();
			
			if (ch[50] == 1)
			{
				// ミニゲーム
				str = "過去最高は" + (ch[2313] - 1) + "叩きなんダナ。";
				if (!ch[2314])
				{
					// 過去ベストが１００叩き以上
					if (ch[2313] > 100)
					{
						Message(4,str,"１００叩きをもう一度見てみたいんダナ","","");
					}
					else
					{
						Message(4,str,"今度は１００叩きを目指すんダナ","","");
					}
				}
				else
				{
					Message(4,str,"自己ベスト更新を目指すんダナ","","");
				}
					// 飛ぶ
				mg = 1;
			}
			else 
			{
				if (ch[50] != 2 && ch[50] != 1)
				{
					str = "過去最高は" + (ch[2313] - 1) + "叩きなんダナ";
					Message(4,"もぐら叩きの",str,"","");
					Message(4,"また今度やって欲しいんダナ","","","");
				}
			}

		}
	}
	
	ch[400] = -1;
	
	if (ch[1538])
	{
		return 0;
	}
	
	if (mg)
	{
		// ミニゲームする
		ch[2145] = 0;

		Camera(4,-37,850,370);
		CrossFade();
		Wait(10);

		ch[424] = 100;
		ch[425] = -300;
		ch[426] = 12;
		KaguTest(30060,0);
		ch[400] = 104;
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		KaguTest(30061,0);
		KaguTest(30062,0);
		Look(0,4);
		ch[420] = 4;
		KaguTest(30063,0);
		ch[424] = 0;
		ch[425] = -1075;
		ch[426] = 12;
		KaguTest(30060,4);
		if (ch[423] < 2)
		{
			ch[423] = 2;
		}
		Walk2(4,ch[421]*2,ch[422]*2,ch[423]/2);
		Wait(ch[423]/2);
		KaguTest(30061,4);
		ch[424] = 450;
		ch[425] = -900;
		ch[426] = 12;
		KaguTest(30060,4);
		if (ch[423] < 2)
		{
			ch[423] = 2;
		}
		Walk2(4,ch[421]*2,ch[422]*2,ch[423]/2);
		Wait(ch[423]/2);
		KaguTest(30061,4);
		ch[424] = 675;
		ch[425] = -825;
		ch[426] = 12;
		KaguTest(30060,4);
		Camera(0,-1575,-250,1300);
		if (ch[423] < 2)
		{
			ch[423] = 2;
		}
		Walk2(4,ch[421]*2,ch[422]*2,ch[423]/2);
		Wait(ch[423]/2);
		Look(4,0);
		Wait(10);
		Event(231);
		SE(474);
		SE(475);
		Wait(45);
		
//		Black(0,100,15);
//		Wait(15);
		ch[2144] = 1800;
		ch[2497] = 1;
//		Camera(-1,0,0,0);
//		LoadMap(23);
		Event(232);
		CharPos(4,675,-825,75);
//		CharPos(58,-150,450,0);
//		CharPos(59,150,450,0);
		
		CharPos(0,0,-300,0);
		Camera(4,-825,-50,370);
		CrossFade();
		KaguTest(30063,-1);
		Look(0,4);
		Look(58,0);
		Look(59,0);
		Look(4,0);
		KaguTest(12000,58);
		KaguTest(12000,59);
		KaguTest(12001,58);
		KaguTest(12001,59);
		CrossFade();
		Wait(15);
		Black(0,0,15);
		Wait(15);

		ch[400] = 4;
		int gonum;
		string gotxt;
		if (ch[455] == 1)
		{
			// ビギナー
			gonum = 40;
		}
		if (ch[455] == 0)
		{
			// ノーマル
			gonum = 50;
		}
		if (ch[455] == 2)
		{
			// ハード以上
			gonum = 60;
		}
		gotxt = ""+gonum+"回以上叩けたら";
		
		if (ch[2313] < gonum + 1)
		{
			// 合格してない時
			Message(4,"ルール説明をするんダナ","","","");
			Message(4,"１分間、逃げ回るもぐらオバケ達を","ひたすら叩き続けるんダナ","","");
			Message(4,gotxt,"ゲームクリアなんダナ","","");
		}
		else
		{
			// 合格している時
			Message(4,"１分間、逃げ回るもぐらオバケ達を","ひたすら叩き続けるんダナ","","");
		}
		Message(4,"んでは、もぐら叩きスタートなんダナ","","","");
		Wait(10);
//		Camera(0,0,-900,370);
		Camera(-1,0,0,0);
		CrossFade();
//		KaguTest(12000,58);
//		KaguTest(12000,59);
//		KaguTest(12001,58);
//		KaguTest(12001,59);
		Wait(15);
		ch[3982] = 4;
		ch[400] = -1;
		
		// テクスチャ読み込んでおく
		KaguTest2(10009,0,"minigm.iti");
		
		Wait(90);
		Camera(-1,0,0,0);
		CrossFade();
		BGM(10);
		ch[2061] = 1;
	}
	
	return 0;
}
#EndScript

// 岩壊し終了
#Script:01155
int main()
{
	if (ch[2316])
	{
		ch[2316] = 0;
		PostScr(1156);
		return 0;
	}

	int go;
	int best;
	int syokai;
	string str;
	go = 0;
	best = 0;
	syokai = 0;

	// ホイッスル
	SE(548);
	ch[3982] = 0;
	Wait(60);
	Black(0,100,30);
	Wait(30);
	ch[2144] = 0;
	ch[2497] = 0;
	LoadMap(21);
	KaguTest2(10010,0,"minigm");
	CharPos(0,0,600,-150);
	Camera(2,1050,600,220);
	Look(0,2);
	Look(2,0);
	Look(1,0);
	CrossFade();
	Wait(15);
	Camera(-1,0,0,0);
	Black(0,0,30);
	Wait(30);
	
	ch[2061] = 0;

	if (ch[2143] < 27)
	{
		// 過去に合格していない
		go = 1;
	}
	if (ch[2145] > ch[2143] - 1 && ch[2143] > 0)
	{
		// 自己ベスト
		best = 1;
	}
	if (ch[2145] > ch[2143] - 1)
	{
		ch[2143] = ch[2145] + 1;
	}
	
	if (ch[2145] > 25 && go)
	{
		// 初合格
		str = "" + ch[2145] + "：" + (50 - ch[2145]) + "であんたの勝ちだべ";
		ch[400] = 2;
		ch[2288] = 1;
		Message(2,"おめでとうだべ。",str,"","");
		
		if (!ch[2509])
		{
			//モグレヌ
			Message(2,"なかなか熱い勝負だったべ","","","");
			Message(2,"約束どおり落石をどかす","仕事を引き受けるべ","","");
			//パリン
			Message(0,"でも考えてみたら、わたしに","負けるような腕で大丈夫なの？","","");
			//モグレヌ
			Message(2,"早掘りでは負けたけど","パワーはオイラがナンバーワンだべ","","");
			Message(2,"さっそく出発するから","すぐに洞窟のほうに来るべ","","");
			// 岩を壊しに行く
			KaguTest(30005,0);
			Camera(2,ch[421],ch[422],ch[423]);
			KaguTest(30062,0);
			ch[420] = 2;
			KaguTest(30063,0); // パリンはモグレヌをみつめる
			ch[400] = 102;
			ch[424] = 700;
			ch[425] = 600;
			ch[420] = 1;
			ch[426] = 12;
			KaguTest(30060,2);
			Walk2(2,ch[421]*2,ch[422]*2,ch[423]/2);
			Wait(ch[423]/2);
			KaguTest(30061,0);
			ch[424] = 1750;
			ch[425] = 600;
			ch[420] = 1;
			ch[426] = 12;
			KaguTest(30060,2);
			if (ch[423] - 15 < 1)
			{
				ch[423] = 1;
			}
			Walk2(2,ch[421]*2,ch[422]*2,ch[423] / 2);
			Wait((ch[423] / 2) - 15);
			ch[420] = 3;
			KaguTest(30064,2);
			Wait(25);
			Camera(-1,0,0,0);
			CharPos(2,-200000,0,0);
			KaguTest(30063,-1,);	
			ch[400] = -1;
			ch[2509] = 1;
			return 0;
		}
		ch[400] = -1;
		return 0;
	}
	if (!ch[2509] && go)
	{
		if (ch[2145] == 25)
		{
			// 同点だべ
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だべ";
			//モグレヌ
			Message(2,str,"","","");
			Message(2,"同点ではオイラに","勝ったとは言えないべ","","");
			Message(2,"出直してくるがいいだべ","","","");
		}
		else
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "でオイラの勝ちだべ";
			//モグレヌ
			Message(2,str,"","","");
			Message(2,"こんなんではオイラの","ライバルには程遠いべ","","");
			Message(2,"出直してくるがいいだべ","","","");
		}
		ch[400] = -1;
		return 0;
	}
	
	if (go && best)
	{
		// 合格ならず。しかし、自己ベスト
		if(ch[2145] == 25)
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だべ";
		}
		else
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "でオイラの勝ちだべ";
		}
		ch[400] = 2;
		
		Message(2,"前回より頑張っていたけど","残念だったべな","","");
		Message(2,str,"","","");
		Message(0,"まだまだ修行が必要みたいね","","","");
		ch[400] = -1;
		return 0;
	}
	if (go)
	{
		// 合格ならず。しかも、自己ベストでもない
		if(ch[2145] == 25)
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だべ";
		}
		else
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "でオイラの勝ちだべ";
		}
		ch[400] = 2;
		Message(2,"残念だべ。",str,"","");
		if (syokai)
		{
			Message(2,"初めてだから仕方がないだべ","","","");
		}
		else
		{
			Message(2,"前回よりも悪い結果だべ","","","");
		}
		Message(0,"もっと修行が必要みたいね","","","");
		ch[400] = -1;
		return 0;
	}
	if (best)
	{
		// 既に合格済み。自己ベスト
		if(ch[2145] > 34)
		{
			// 鬼だべ
			Message(0,"やったー。","自己ベスト更新よ","","");
			ch[400] = 2;
			Message(2,"凄いだべ。","あんたは破壊の鬼だべ","","");
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で圧勝なんて";
			Message(2,str,"どう考えてもニンゲンじゃないべ","","");
			ch[400] = -1;
			ch[2146] = 1;
			return 0;
		}
		Message(0,"やったー。","自己ベスト更新よ","","");
		ch[400] = 2;
		str = "" + ch[2145] + "：" + (50 - ch[2145]) + "であんたの勝ちだべ";
		Message(2,"凄いだべ。",str,"","");
		Message(2,"この調子で","ファントム達を倒してくれだべ","","");
		Message(0,"任せておいて","","","");
		ch[400] = -1;

		return 0;
	}

	// 合格済み。自己ベストではない
	if(ch[2145] > 34)
	{
		// 鬼だべ
		ch[400] = 2;
		Message(2,"凄いだべ。","あんたは破壊の鬼だべ","","");
		str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で圧勝なんて";
		Message(2,str,"どう考えてもニンゲンじゃないべ","","");
		ch[2146] = 1;
		return 0;
	}

	// 鬼じゃない
	if (ch[2145] > 24)
	{
		if (ch[2145] == 25)
		{
			str = "今回は" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だべ";
		}
		else
		{
			str = "今回は" + ch[2145] + "：" + (50 - ch[2145]) + "であんたの勝ちだべ";
		}
	}
	else
	{
		str = "今回は" + ch[2145] + "：" + (50 - ch[2145]) + "でオイラの勝ちだべ";
	}
	ch[400] = 2;
	Message(2,str,"","","");
	Message(2,"結果はいまいちのようだべな","","","");
	Message(0,"次はきっといい結果を出すわ","","","");
	ch[400] = -1;
	return 0;
}
#EndScript

// 岩壊し終了
#Script:01156
int main()
{

	int go;
	int best;
	int syokai;
	string str;
	go = 0;
	best = 0;
	syokai = 0;

	// ホイッスル
	SE(548);
	ch[3982] = 0;
	Wait(60);
	Black(0,100,30);
	Wait(30);
	ch[2144] = 0;
	ch[2497] = 0;
	LoadMap(21);
	KaguTest2(10010,0,"minigm");
	CharPos(0,0,600,0);
	Camera(1,1050,600,220);
	Look(0,1);
	Look(2,0);
	Look(1,0);
	CrossFade();
	Wait(15);
	Camera(-1,0,0,0);
	Black(0,0,30);
	Wait(30);
	
	ch[2061] = 0;

	if (ch[2315] < 27)
	{
		// 過去に合格していない
		go = 1;
	}
	if (ch[2145] > ch[2315] - 1 && ch[2315] > 0)
	{
		// 自己ベスト
		best = 1;
	}
	if (ch[2315] == 0)
	{
		syokai = 1;
	}
	if (ch[2145] > ch[2315] - 1)
	{
		ch[2315] = ch[2145] + 1;
	}
	
	if (ch[2145] > 25 && go)
	{
		// 初合格
		str = "" + ch[2145] + "：" + (50 - ch[2145]) + "であんたの勝ちだ";
		ch[400] = 1;
		Look(0,1);
//		Message(2,"おめでとうだべ。合格だべ。",str,"","");
		Message(1,"さすが弟を倒したことはあるな。",str,"","");
		Message(1,"オレに勝った証として","この金のメダルをあげよう","","");
		Mes("『金のメダル』を手に入れた。");
		ch[2288] = 2;
		KaguTest(20022,79);
		GetItem(79);
		Wait(90);
		Message(0,"ありがとう","","","");
		ch[400] = -1;
		return 0;
	}
	if (go && best)
	{
		// 合格ならず。しかし、自己ベスト
		if (ch[2145] == 25)
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だべ";
		}
		else
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で兄さんの勝ちだべ";
		}
		Look(0,1);
		ch[400] = 1;
		Message(1,"前回より頑張っていたけど","残念だったな","","");
		Look(0,2);
		ch[400] = 2;
		Message(2,str,"","","");
		Message(0,"まだまだ修行が必要みたいね","","","");
		ch[400] = -1;
		return 0;
	}
	if (go)
	{
		// 合格ならず。しかも、自己ベストでもない
		if (ch[2145] == 25)
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だ";
		}
		else
		{
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "でオレの勝ちだ";
		}
		ch[400] = 1;
		Message(1,"残念だったな。",str,"","");
		ch[400] = 2;
		Look(0,2);
		Message(2,"やっぱりモグロウ兄さんが","最強だべ","","");
		Message(0,"もっと修行が必要みたいね","","","");
		ch[400] = -1;
		return 0;
	}
	if (best)
	{
		// 既に合格済み。自己ベスト
		if(ch[2145] > 34)
		{
			// 鬼だべ
			Message(0,"やったー。","自己ベスト更新よ","","");
			ch[400] = 1;
			Message(1,"凄いな。","さすが破壊の鬼だ","","");
			Look(0,2);
			str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で兄さんに圧勝なんて";
			Message(2,str,"やっぱり、どう考えてもニンゲンじゃないべ","","");
			Look(0,1);
			ch[400] = 1;
			if (!ch[2640])
			{
				Message(1,"ここまでオレを負かしたのは","あんたが初めてだ","","");
//				Message(1,"今度から商品を割引してあげよう","","","");
				ch[400] = 2;
				Look(0,2);
				Message(2,"今回は銀のメダルをあげるべ","","","");
				KaguTest(20022,76);
				GetItem(76);
				Wait(90);
				Message(0,"ありがとう","","","");
				ch[400] = -1;
				ch[2640] = 1;
			}
			else
			{
				Message(1,"ここまでオレを負かすことができるのは","やっぱりあんただけだな","","");
//				Message(1,"よし、商品をさらに割引してあげよう","","","");
				ch[400] = 2;
				Look(0,2);
				Message(2,"今回は銀のメダルをあげるべ","","","");
				KaguTest(20022,76);
				GetItem(76);
				Wait(90);
				Message(0,"ありがとう","","","");
				ch[400] = -1;
			}
			return 0;
		}
		Message(0,"やったー。","自己ベスト更新よ","","");
		ch[400] = 2;
		str = "" + ch[2145] + "：" + (50 - ch[2145]) + "であんたの勝ちだべ";
		Message(2,"凄いだべ。",str,"","");
		ch[400] = 1;
		Look(0,1);
		Message(2,"今回は銅のメダルをあげよう","","","");
		KaguTest(20022,77);
		GetItem(77);
		Wait(90);
		Message(0,"ありがとう","","","");
		ch[400] = -1;

		return 0;
	}

	// 合格済み。自己ベストではない
	if(ch[2145] > 34)
	{
		// 鬼だべ
		ch[400] = 1;
		Message(1,"凄いな。","さすが破壊の鬼だ","","");
		Look(0,2);
		str = "" + ch[2145] + "：" + (50 - ch[2145]) + "で兄さんに圧勝なんて";
		Message(2,str,"やっぱり、どう考えてもニンゲンじゃないべ","","");
		Look(0,1);
		ch[400] = 1;
		if (!ch[2640])
		{
			Message(1,"ここまでオレを負かしたのは","あんたが初めてだ","","");
//			Message(1,"今度から商品を割引してあげよう","","","");
			ch[400] = 2;
			Look(0,2);
			Message(2,"今回は銀のメダルをあげるべ","","","");
			KaguTest(20022,76);
			GetItem(76);
			Wait(90);
			Message(0,"ありがとう","","","");
			ch[400] = -1;
			ch[2640] = 1;
		}
		else
		{
			Message(1,"ここまでオレを負かすことができるのは","やっぱりあんただけだな","","");
//			Message(1,"よし、商品をさらに割引してあげよう","","","");
			ch[400] = 2;
			Look(0,2);
			Message(2,"今回は銅のメダルをあげるべ","","","");
			KaguTest(20022,77);
			GetItem(77);
			Wait(90);
			Message(0,"ありがとう","","","");
			ch[400] = -1;
		}
		return 0;
	}

	// 鬼じゃない
	if (ch[2145] > 24)
	{
		if (ch[2145] == 25)
		{
			str = "今回は" + ch[2145] + "：" + (50 - ch[2145]) + "で同点だ";
		}
		else
		{
			str = "今回は" + ch[2145] + "：" + (50 - ch[2145]) + "であんたの勝ちだ";
		}
	}
	else
	{
		str = "今回は" + ch[2145] + "：" + (50 - ch[2145]) + "でオイラの勝ちだ";
	}
	ch[400] = 1;
	Message(1,str,"","","");
	ch[400] = 2;
	Look(0,2);
	Message(2,"結果はいまいちのようだべな","","","");
	Message(0,"次はきっといい結果を出すわ","","","");
	ch[400] = -1;
	return 0;
}
#EndScript

// サッカー終了
#Script:01157
int main()
{

	int go;
	int best;
	int syokai;
	string str;
	go = 0;
	best = 0;
	syokai = 0;

	// ホイッスル
	SE(548);
	ch[3982] = 0;
	Wait(60);
	Black(0,100,30);
	Wait(30);
	ch[2144] = 0;
	ch[2497] = 0;
	LoadMap(24);
	KaguTest2(10010,0,"minigm");
	CharPos(0,0,0,0);
	Camera(19,0,-510,370);
	Look(0,19);
	Look(19,0);
	CrossFade();
	Wait(30);
	Camera(-1,0,0,0);
	Black(0,0,30);
	Wait(30);

	ch[2061] = 0;
	
	if (ch[2318] - ch[2321] <= 0)
	{
		// 過去に合格していない
		go = 1;
	}
	if (ch[2145] - ch[2325] > ch[2318] - ch[2321])
	{
		// 自己ベスト
		best = 1;
	}
	if (ch[2324] == 0)
	{
		syokai = 1;
		ch[2324] = 1;
	}
	int chchch;
	chchch = 0;
	if (ch[2145] - ch[2325] > ch[2318] - ch[2321])
	{
		chchch = 1;
	}
	if (ch[2318] == 0 && ch[2321] == 0)
	{
		chchch = 1;
	}
	if (chchch)
	{
		ch[2318] = ch[2145];
		ch[2321] = ch[2325];
	}
	
	if (ch[2145] - ch[2325] > 0 && go)
	{
		// 初合格
		str = "" + ch[2145] + "：" + ch[2325] + "で君たちの勝利だ";
		ch[400] = 19;
		ch[2291] = 1;
		Look(0,19);
		Message(19,"なかなかやるね。",str,"","");
		Message(19,"モトロ・アストラルズに勝った証として","この金のメダルをあげよう","","");
		Mes("『金のメダル』を手に入れた。");
		ch[2291] = 2;
		KaguTest(20022,79);
		GetItem(79);
		Wait(90);
		Message(0,"ありがとう","","","");
		ch[400] = -1;
		return 0;
	}
	if (go && best)
	{
		// 合格ならず。しかし、自己ベスト
		Look(0,19);
		ch[400] = 19;
		if (ch[2145] == ch[2325])
		{
			str = "" + ch[2145] + "：" + ch[2325] + "で同点だ";
			Message(19,"初心者と思い手加減したが","なかなかやるようだな","","");
			Message(19,str,"","","");
			Message(0,"次こそは勝ってやるわ","","","");
		}
		else
		{
			str = "" + ch[2145] + "：" + ch[2325] + "で私たちの勝利だ";
			Message(19,"頑張っていたけれど","残念だったな","","");
			Message(19,str,"","","");
			Message(0,"まだまだ修行が必要みたいね","","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (go)
	{
		// 合格ならず。しかも、自己ベストでもない
		Look(0,19);
		ch[400] = 19;
		if (ch[2145] == ch[2325])
		{
			str = "" + ch[2145] + "：" + ch[2325] + "で同点だ";
			Message(19,"なかなかやるようだな。",str,"","");
			Message(0,"次こそは勝ってやるわ","","","");
		}
		else
		{
			str = "" + ch[2145] + "：" + ch[2325] + "で私たちの勝利だ";
			Message(19,"残念だったな。",str,"","");
			Message(0,"流石に世界を目指す人には","かなわないわね","","");
		}
		ch[400] = -1;
		return 0;
	}
	if (best)
	{
		// 既に合格済み。自己ベスト
		if(ch[2145] - ch[2325] > ch[2325])
		{
			// 鬼だべ
			ch[400] = 19;
			str = "" + ch[2145] + "：" + ch[2325] + "で圧勝するとは……";
			Message(19,"凄いな。","世界を目指すモトロ・アストラルズに",str,"");
			Message(0,"世界を目指しているわりに","弱すぎるんじゃない？","","");
			Message(19,"う……","き、君たちが強すぎるだけだよ","","");
			if (!ch[2326])
			{
				Message(19,"ここまで私のチームを負かしたのは","君たちのチームが初めてだ","","");
//				if (ch[3975] > 50)
//				{
//					Message(19,"よし、全ての店舗で","商品が割引になるように","してあげよう","");
//					ch[3975] -= 10;
//				}
				Message(19,"今回は銀のメダルをあげよう","","","");
				KaguTest(20022,76);
				GetItem(76);
				Wait(90);
				Message(0,"ありがとう","","","");
				ch[400] = -1;
				ch[2326] = 1;
			}
			else
			{
				Message(19,"ここまで私のチームに圧勝できるのは","君たちのチームだけだ","","");
//				if (ch[3975] > 50)
//				{
//					Message(19,"よし、全ての店舗で","商品がさらに割引になるように","してあげよう","");
//					ch[3975] -= 10;
//				}
				Message(19,"今回は銀のメダルをあげよう","","","");
				KaguTest(20022,76);
				GetItem(76);
				Wait(90);
				Message(0,"ありがとう","","","");
				ch[400] = -1;
			}
			return 0;
		}
		Message(0,"やったー。","勝ったわ","","");
		ch[400] = 19;
		str = "" + ch[2145] + "：" + ch[2325] + "で君たちの勝利だ";
		Message(19,"凄いな。",str,"","");
		Message(19,"今回は銅のメダルをあげよう","","","");
		KaguTest(20022,77);
		GetItem(77);
		Wait(90);
		Message(0,"ありがとう","","","");
		ch[400] = -1;

		return 0;
	}

	// 合格済み。自己ベストではない
	if(ch[2145] - ch[2325] > ch[2325])
	{
		// 鬼だべ
		ch[400] = 19;
		str = "" + ch[2145] + "：" + ch[2325] + "で圧勝するとは……";
		Message(19,"凄いな。","世界を目指すモトロ・アストラルズに",str,"");
		Message(0,"世界を目指しているわりに","弱すぎるんじゃない？","","");
		Message(19,"う……","き、君たちが強すぎるだけだよ","","");
		if (!ch[2326])
		{
			Message(19,"ここまで私のチームを負かしたのは","君たちのチームが初めてだ","","");
//			if (ch[3975] > 50)
//			{
//				Message(19,"よし、全ての店舗で","商品が割引になるように","してあげよう","");
//				ch[3975] -= 10;
//			}
			Message(19,"今回は銀のメダルをあげよう","","","");
			KaguTest(20022,76);
			GetItem(76);
			Wait(90);
			Message(0,"ありがとう","","","");
			ch[400] = -1;
			ch[2326] = 1;
		}
		else
		{
			Message(19,"ここまで私のチームに圧勝できるのは","君たちのチームだけだ","","");
			
//			if (ch[3975] > 50)
//			{
//				Message(19,"よし、全ての店舗で","商品がさらに割引になるように","してあげよう","");
//				ch[3975] -= 10;
//			}
			Message(19,"今回は銀のメダルをあげよう","","","");
			KaguTest(20022,76);
			GetItem(76);
			Wait(90);
			Message(0,"ありがとう","","","");
			ch[400] = -1;
		}
		return 0;
	}

	// 鬼じゃない
	str = "今回は" + ch[2145] + "：" + ch[2325] + "で";
	ch[400] = 19;
	if (ch[2145] - ch[2325] > 0)
	{
		Message(19,str,"君たちの勝利だ","","");
		Message(0,"次はもっといい結果を出すわ","","","");
	}
	else
	{
		if (ch[2145] - ch[2325] == 0)
		{
			Message(19,str,"同点のようだ","","");
			Message(0,"次は絶対に勝ってやるわ","","","");
		}
		else
		{
			Message(19,str,"私たちの勝利だ","","");
			Message(19,"結果はいまいちのようである","","","");
			Message(0,"次はきっといい結果を出すわ","","","");
		}
	}
	ch[400] = -1;
	return 0;
}
#EndScript

// 0111:がーどだっしゅちゅー
#Script:01158
int main()
{
	TekiStop(1);

	Message(0,"何か書いてある","","","");

	//説明１
	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_06.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
	if (!ch[2149])
	{
		ch[2149] = 1;
		
		Message(0,"面白そうね。","ちょっとやってみようかな","","");
		ch[420] = 1750;
		ch[421] = 5850;
		ch[423] = 7;
		KaguTest(30065,0);
		KaguTest(30020,0);
		ch[421] += 1000;
		KaguTest(30070,0);
		Wait(10);

		KaguTest(10006,1);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ダッシュボタンで進行方向にガードダッシュ");
		KaguTest2(10008,1,"s030（マウスの場合は左ダブルクリック）");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);
		
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
		
//		KaguTest(10006,1);
//		KaguTest(10007,0);
//		KaguTest2(10008,0,"連続でガードダッシュする事もできます。");
//		KaguTest(10010,10);
//		Message(0,"","","","");
//		KaguTest(10011,10);
		
		KaguTest(30020,0);
		ch[421] -= 1000;
		KaguTest(30070,0);
		Wait(10);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);

		KaguTest(10006,1);
		KaguTest(10007,0);
		KaguTest2(10008,0,"ガードダッシュ中はほとんどの攻撃を");
		KaguTest2(10008,1,"かわす事ができます。");
		KaguTest(10010,10);
		Message(0,"","","","");
		KaguTest(10011,10);
		TekiStop(0);

		KaguTest(30020,0);
		ch[420] += 1000;
		KaguTest(30070,0);
		Wait(10);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
			// 方向変換
		KaguTest(30020,0);
		ch[421] += 1000;
		Wait2(15);
		KaguTest(30070,0);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
			// 方向変換
		KaguTest(30020,0);
		ch[420] -= 1000;
		KaguTest(30070,0);
		Wait2(15);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
			// ガードダッシュ
		KaguTest(20027,43);
		Wait2(15);
		TekiStop(1);
		
		Message(0,"ちょっと難しいけど","攻撃をかわす時に使えそうね","","");
//		SaveCamera();
//		ch[420] = 1850;
//		ch[421] = 5850;
//		ch[422] = 825;
//		ch[423] = 3150;
//		ch[424] = 5850;
//		ch[425] = 150;
//		KaguTest(30019,1);
//		Wait(40);
//		
//		KaguTest(10006,1);
//		KaguTest(10007,0);
//		KaguTest2(10008,0,"ガードダッシュを使って");
//		KaguTest2(10008,1,"レバーのところまで行ってみよう");
//		KaguTest(10010,10);
//		Message(0,"","","","");
//		KaguTest(10011,10);
//
//		KaguTest(30019,0);
//		RestoreCamera();
		CrossFade();
//		Wait(15);

	}
	TekiStop(0);

}
#EndScript

// 111:初めての雑魚
#Script:01159
int main()
{
	// 初めての雑魚倒した
	int x;
	int y;
	int z;
	int ln;
	SaveCamera();
	KaguTest(30005,0);
	x = ch[421];
	y = ch[422];
	z = ch[423];
	if (!ch[301])
	{
		// 次の雑魚だ
		Wait(30);
		ch[301] = 1;

		ch[420] = 100000;
		ch[427] = 7;
		KaguTest(30015,51);
		ch[420] = -173;
		ch[421] = 3781;
		ch[422] = 815;
		ch[423] = -697;
		ch[424] = 5194;
		ch[425] = 215;
		KaguTest(30019,1);
		CrossFade();
		Wait(45);
		ch[420] = 100000;
		KaguTest(30015,52);
		ch[420] = -688;
		ch[421] = 3925;
		ch[422] = 647;
		ch[423] = 496;
		ch[424] = 5348;
		ch[425] = 215;
		KaguTest(30019,1);
		CrossFade();
		Wait(45);
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15)
		return 0;
	}
	if (!ch[302])
	{
		// そのまた次の雑魚だ
		Wait(30);
		ch[302] = 1;

		ch[420] = 100000;
		ch[427] = 7;
		KaguTest(30015,53);
		ch[420] = -150;
		ch[421] = 3533;
		ch[422] = 805;
		ch[423] = -150;
		ch[424] = 4979;
		ch[425] = 220;
		KaguTest(30019,1);
		CrossFade();
		Wait(75);
		
		if (!ch[2153])
		{
			ch[420] = -858;
			ch[421] = 5386;
			ch[422] = 600;
			ch[423] = 666;
			ch[424] = 5830;
			ch[425] = 145;
			KaguTest(30019,1);
			CrossFade();
			ch[420] = ch[423];
			ch[421] = ch[424];
			KaguTest(30070,0);
			Wait(75);
			KaguTest(30019,0);
			RestoreCamera();
			CrossFade();

			// 壁との距離を取る
			ch[420] = 675;
			ch[421] = 5850;
			ch[422] = 150;
			KaguTest(30112,0);
			if (ch[423] > 750)
			{
				Message(0,"あそこの壁。","なんだか壊せそうね","","");
			}
			else
			{
				Message(0,"この壁、なんだか壊せそうね","","","");
			}
			ch[2153] = 1;
		}
		else
		{
			KaguTest(30019,0);
			RestoreCamera();
			CrossFade();
		}
		return 0;
	}
	if (!ch[303])
	{
		// 全部倒した
		ch[303] = 1;
	}
}
#EndScript

// 111:浮かせ攻撃実践
#Script:01160
int main()
{
	// 浮かせ攻撃の雑魚倒した
	// 次の扉開く
	int x;
	int y;
	int z;
	int ln;
	
	Wait(30);
	
	SE(950);
	
	TekiStop(1);
	SaveCamera();
	
	ln = Door2C(2);
	GetCharPos(ln,x,y,z);
	
	Camera(ln,x - 1200,y,z + 400);
	CrossFade();
	Wait(30);
	Event(202);
	Wait(50);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[3601] = 1;
	ch[201] = 1;
	TekiStop(0);
}
#EndScript

// 111:レバー引いたら扉開く
#Script:01161
int main()
{
	// ガードダッシュの先のレバー引いた
	// 次の扉開く
	int x;
	int y;
	int z;
	int ln;
	
	Wait(30);
	
	SE(950);
	
	TekiStop(1);
	SaveCamera();
	
	ln = Door2C(3);
	GetCharPos(ln,x,y,z);
	
	Camera(ln,x,y - 1200,z + 400);
	ch[421] = x;
	ch[422] = y - 1200;
	ch[423] = z + 400;
	KaguTest(30010,0);
	CrossFade();
	Wait(30);
	Event(203);
	Wait(50);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[202] = 1;
	TekiStop(0);
}
#EndScript

// 113:レバー引いたらリフト動く
#Script:01162
int main()
{
	int ln;
	int bt15;
	int x;
	int y;
	int z;
	
	ln = Lift2C(1);
	bt15 = Getbt15(ln);
	
	if (bt15)
	{
		return 0;
	}

	Wait(15);
	SE(950);
	
	SaveCamera();
	Camera(ln,380,725,600);
	CrossFade();
	Wait(30);
	Event(353);
	TekiStop(1);
	Wait(60);

	if (!ch[2304])
	{
//		KaguTest(10006,0);
//		KaguTest(10007,7);
//		KaguTest2(10009,0,"tute_07.bmp");
//		ch[423] = 180;
//		ch[424] = 42;
//		ch[425] = 460;
//		ch[426] = 438;
//		ch[427] = 0;
//		ch[428] = 0;
//		ch[429] = 320;
//		ch[430] = 452;
//		ch[431] = 512;
//		KaguTest(10010,10);
//		Wait(10);
//		Message(0,"","","","");
//		ch[420] = 0;
//		KaguTest(10011,10);
//		Wait(10);
//			
		ch[2304] = 1;
	}

	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	TekiStop(0);

//	ch[3603] = 1;
}
#EndScript

// 0113:まほうちゅー
#Script:01163
int main()
{
	TekiStop(1);

	Message(0,"何か書いてある","","","");

	//説明１
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_06.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);

	TekiStop(0);

	if (!ch[3604])
	{
		SaveCamera();
		ch[420] = 3380;
		ch[421] = -600;
		ch[422] = 370;
		ch[423] = 6100;
		ch[424] = -600;
		ch[425] = 50;
		KaguTest(30019,1);
		Wait(40);
		
		KaguTest2(20000,80,"魔法を使って敵を倒そう");
		
		Wait(120);
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);

	//	ch[2100] = 1;

	}
}
#EndScript

// 0113:レバー引いたら扉開く
#Script:01164
int main()
{
	int ln;
	int x;
	int y;
	int z;
	
	TekiStop(1);
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	SaveCamera();
	ch[420] = 100000;
	ch[427] = 2+4;
	KaguTest(30015,1);
	Walk2(58,0,-8,180);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(59,0,-8,180);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(60,0,-8,180);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(61,0,-8,180);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = 2700;
	ch[421] = 0;
	KaguTest(30070,58);
	KaguTest(30070,59);
	KaguTest(30070,60);
	KaguTest(30070,61);

	Wait(30);
	SE(950);
	Camera(ln,3681,-1435,900);
	CrossFade();
	Wait(30);
	Event(357);
	Wait(90);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[264] = 1;
	TekiStop(0);
}
#EndScript

//111:うかせこうげきちゅー
#Script:01165
int main()
{
	TekiStop(1);
	Message(0,"何か書いてある","","","");

	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_02.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
//	ch[2123] = 1;

	TekiStop(0);
	
	if (!ch[301])
	{
		ch[420] = 100000;
		KaguTest(30016,2);
		KaguTest(30016,3);
		KaguTest(30016,4);
		ch[301] = 1;
	}
}
#EndScript

// 113:りふとちゅー
#Script:01166
int main()
{
	TekiStop(1);
	Message(0,"何か書いてある","","","");

	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_07.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
//	ch[2123] = 1;

	TekiStop(0);
}
#EndScript

// 114 -> 113
#Script:01167
int main()
{
	if (ch[2497])
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		Walk(0,-8,11);
		Wait(11);
		Event(110);
		Walk(0,-5,15);
		Wait(15);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
		MapEvent(1);
	}
	else
	{
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,-8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(0,8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
}
#EndScript

// 114 -> 102
#Script:01168
int main()
{
	if (ch[2497])
	{
		// クリア
//		KaguTest(40002,0);
//		TekiStop(1);
//		MapEvent(0);
//			// 評価表示
//		KaguTest(10500,120);
//
//		if (ch[2276] < 1)
//		{
//			ch[2276]=1;
//		}
//		
//		Wait(90);
//		
//		Message(0,"","","","");
//		
//		// ミニフィールドへ戻る
//		Black(0,100,30);
//		Wait(30);
//		
//		if (!ch[2626])
//		{
////			PlayMovie("poko1.txt",0);
//			ch[2626] = 1;
//		}
//		
//		KaguTest(10011,10);
//		Wait(10);
//		KaguTest(10100,0);
//		KaguTest(99999,0);
//		TekiStop(0);
//		MapEvent(1);
		TekiStop(1);
		
		WaitD(0);
		ch[50] = 0;
		string st1,st2;
		SelStart(50);
		st1 = StageName(ch[1107]-2260) + "を出る";
		st2 = StageName(ch[1107]-2260) + "を出ない";
		SelText(st1,1);
		SelText(st2,2);
		SelEnd();
		
		if (ch[50] == 1)
		{
			MapEvent(0);
			Walk(0,8,30);
			Black(0,100,30);
			Wait(30);
			
			KaguTest(10100,0);
			KaguTest(99999,0);
			TekiStop(0);
			MapEvent(1);
		}
		else
		{
			MapEvent(0);
			KaguTest(30058,0);
			while(ch[420])
			{
				Walk(ch[421],ch[422],ch[423]);
				Wait(ch[423]);
				KaguTest(30058,0);
			}
			Walk(0,-8,20);
			Wait(20);
			MapEvent(1);
			TekiStop(0);
		}
	}
	else
	{
		KaguTest(40002,0);
		
		MapEvent(0);
		Walk(0,8,11);
		Wait(11);
		Event(120);
		Walk(0,5,15);
		Wait(15);
		KaguTest(10600,ch[1107]-2260);
		MMV(StageMMV(ch[420]));
		MapEvent(1);
	}
}
#EndScript

// 113裏：火をつけると扉開く
#Script:01169
int main()
{
	int ln;
	int x;
	int y;
	int z;
	
	Wait(15);

	SE(950);
	Wait(15);
	TekiStop(1);
	ln = Door2C(1);
	GetCharPos(ln,x,y,z);
	SaveCamera();

	Camera(ln,-228,-300,570);
	CrossFade();
	Wait(20);
	
	Event(202);
	Wait(45);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	ch[260] = 1;

	TekiStop(0);
	
	return 0;
}
#EndScript

// 113裏：レバー引くと敵沸く
#Script:01170
int main()
{
	if (ch[200])
	{
		KaguTest(30021,1);
	}
	else
	{
		ch[420] = 100000;
		ch[427] = 0;
		KaguTest(30015,1);
		ch[200] = 1;
	}
}
#EndScript

// 113裏：レバー引くとリフト動く
#Script:01171
int main()
{
	int ln;
	int x;
	int y;
	int z;
	int bt15;
	
	ln = Lift2C(1);
	GetCharPos(ln,x,y,z);
	bt15 = Getbt15(ln);
	
	if (!bt15)
	{
		// 動く
		TekiStop(1);
		Wait(15);
		SaveCamera();
		
		Camera(ln,x - 500,y - 500,1800);
		CrossFade();
		Wait(15);
		Event(206);
		Wait(30);
		Camera(-1,0,0,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		
		TekiStop(0);
	}
}
#EndScript

// 112裏：あたりに触れるとカメラを固定
#Script:01172
int main()
{
	ch[420] = -1650;
	ch[421] = 6525;
	ch[422] = 450;
	KaguTest(30068,0);
	KaguTest(30019,7);
	ch[300] = 1;
}
#EndScript

// 112裏：あたりに触れるとカメラ固定解除
#Script:01173
int main()
{
	KaguTest(30019,0);
	ch[300] = 0;
}
#EndScript

// 112裏：あたりに触れると敵が他マップからやってくる
#Script:01174
int main()
{
	TekiStop(1);

	int c1;
	int c2;
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	ch[420] = 150;
	ch[421] = 77;
	ch[422] = 132;
	ch[423] = 150;
	ch[424] = -682;
	ch[425] = 0;
	KaguTest(30093,12);
	KaguTest(30019,14);
	CrossFade();
	Wait(15);
	
	CharPos(0,150,900,0);
	
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	KaguTest(30025,2);
	c1 = ch[420];
	c2 = c1 + 1;
	Look(0,c1);
	ch[420] = 2;
	KaguTest(12005,c1);
	KaguTest(12005,c2);
	ch[420] = 3;
	KaguTest(30064,c1);
	KaguTest(30064,c2);
	Walk2(c1,0,5,150);
	ch[429] = 1;
	KaguTest(30039,0);
	Walk2(c2,0,5,110);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);

	ch[420] = 150;
	ch[421] = 977;
	ch[422] = 132;
	ch[423] = 150;
	ch[424] = 300;
	ch[425] = 0;
	KaguTest(30093,190);

	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,c2);
	Wait(30);
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(60);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c2);
	Look(c2,0);
	Wait(60);
	ch[420] = 8;
	ch[429] = 1;
	KaguTest(30036,c1); // はてな
	Wait(60);
	ch[420] = 150;
	ch[421] = 1950;
	ch[422] = 370;
	ch[423] = 150;
	ch[424] = 900;
	ch[425] = 70;
	KaguTest(30093,15);
	Look(c1,0);
	Wait(30);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,c1);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(45);
	
	KaguTest(30019,0);
	CrossFade();

	TekiStop(0);

	ch[420] = 3;
	KaguTest(12005,c1);
	KaguTest(12005,c2);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c1);
	KaguTest(30090,c2);
}
#EndScript

// 112裏：レバー引くと扉開く＆敵出てくる
#Script:01175
int main()
{
	int ln;
	int wt1;
	int wt2;
	int wt3;
	
	TekiStop(1);
	
	if (!ch[262])
	{
		ln = Door2C(1);
		SaveCamera();
		Wait(15);
		ch[420] = 30;
		ch[421] = 4450;
		ch[422] = 430;
		ch[423] = 140;
		ch[424] = 2945;
		ch[425] = 0;
		KaguTest(30019,1);
		CrossFade();
		Wait(20);
		Event(306);

		ch[420] = 100000;
		ch[427] = 2;
		KaguTest(30015,1);
		KaguTest(30025,1);
		Wait(5);
		ln = ch[420];

		Wait(40);

		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		TekiStop(0);
		ch[262] = 1;
	}
	ch[305] = 1;
	TekiStop(0);
}
#EndScript

// 111裏：空の宝箱空けたらくもが降りてくる
#Script:01176
int main()
{
	ch[420] = 100000;
	ch[427] = 6;
	KaguTest(30015,3);
}
#EndScript

// 111裏：レバー引いたら扉２開く
#Script:01177
int main()
{
	int ln;
	int x;
	int y;
	int z;

	SE(950);
	Wait(15);
	TekiStop(1);
	SaveCamera();
	ln = Door2C(2);
	GetCharPos(ln,x,y,z);
	Camera(ln,x,y + 1200,z + 400);
	ch[421] = x;
	ch[422] = y + 1200;
	ch[423] = z + 400;
	KaguTest(30010,0);
	CrossFade();
	Wait(20);
	Event(304);

	Wait(45);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);

	TekiStop(0);
	ch[265] = 1;
}
#EndScript

// 111裏：二つレバー引いたら宝箱出現
#Script:01178
int main()
{
	if (ch[301] && ch[302])
	{
		// 二つレバー引いている
		int ln;
		SaveCamera();
		Wait(15);
		TekiStop(1);
		SE(950);
		ch[420] = 150;
		ch[421] = 2400;
		ch[422] = 250;
		ch[423] = 150;
		ch[424] = 1200;
		ch[425] = -150;
		KaguTest(30019,1);
		CrossFade();
		Wait(30);

		if (ch[2801])
		{
			ln = Takara2C(2833);
		}
		else
		{
			ln = Takara2C(2401);
		}
		SE(566);
		CharPos(ln,150,1200,-150);
		KaguTest(30018,ln);
		Wait(60);
		
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait(15);
		
		ch[304] = 1;
		
		TekiStop(0);
	}
}
#EndScript

// 111裏：敵に見つかったら敵発生＆砲台回るようになる
#Script:01179
int main()
{
	int pt;
	
	KaguTest(30025,4);
	Camera(ch[420],526,5470,425);
	CrossFade();
	Wait(45);
	TekiStop(1);
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,15);

	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30015,2);
	ch[420] = 684;
	ch[421] = 6229;
	ch[422] = 684;
	ch[423] = -586;
	ch[424] = 4968;
	ch[425] = 145;
//	ch[420] = 1065;
//	ch[421] = 6295;
//	ch[422] = 865;
	KaguTest(30093,15);
	Camera(-1,0,0,0);
	KaguTest(30019,14);
	Wait(15);
	KaguTest(30025,1);
	ch[421] = ch[420];
	ch[420] = 2;
	KaguTest(12005,ch[421]);
	KaguTest(12004,ch[421]);
	pt = ch[420];
	ch[420] = -1;
	KaguTest(12002,ch[421]);
	ch[420] = 1;
	KaguTest(30097,ch[421]);
	Walk2(ch[421],8,0,75);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = 0;
	KaguTest(30103,ch[421]);
	Wait(30);
	Look(0,ch[421]);
	ch[420] = 2;
	KaguTest(30064,ch[421]);
	Wait(45);
	Look(ch[421],0);
	Wait(15);
	ch[420] = 3;
	KaguTest(12005,ch[421]);
	ch[420] = pt;
	KaguTest(12002,ch[421]);
	ch[420] = 0;
	KaguTest(30097,ch[421]);

	ch[420] = 150;
	ch[421] = 6250;
	ch[422] = 150;
	ch[423] = 150;
	ch[424] = 6250;
	ch[425] = 150;
	KaguTest(30094,20);
	ch[420] = -385;
	ch[421] = 6229;
	ch[422] = 684;
//	ch[420] = -765;
//	ch[421] = 6295;
//	ch[422] = 865;
	ch[423] = 886;
	ch[424] = 4968;
	ch[425] = 145;
	KaguTest(30093,20);
	KaguTest(30019,15);
	CrossFade();
	Wait(30);
	KaguTest(30025,2);
	ch[421] = ch[420];
	ch[420] = 2;
	KaguTest(12005,ch[421]);
	KaguTest(12004,ch[421]);
	pt = ch[420];
	ch[420] = -1;
	KaguTest(12002,ch[421]);
	ch[420] = 1;
	KaguTest(30097,ch[421]);
	Walk2(ch[421],-8,0,75);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = 0;
	KaguTest(30103,ch[421]);
	Wait(30);
	Look(0,ch[421]);
	Wait(10);
	ch[420] = 2;
	KaguTest(30064,ch[421]);
	Wait(35);
	Look(ch[421],0);
	Wait(15);
	ch[420] = 3;
	KaguTest(12005,ch[421]);
	ch[420] = pt;
	KaguTest(12002,ch[421]);
	ch[420] = 0;
	KaguTest(30097,ch[421]);

	KaguTest(30019,0);
	Wait(15);
	CrossFade();
	TekiStop(0);

	ch[420] = 1;
	KaguTest(30096,0);
}
#EndScript

// 102裏：門番に見つかった。１２０フレーム後にイベント来るようにする
#Script:01180
int main()
{
	ch[420] = 120;
	KaguTest(30042,312);
}
#EndScript

// ミニフィールドへ戻る
#Script:01181
int main()
{
	// ミニフィールドへ戻る
	Black(0,100,30);
	Wait(30);
	KaguTest(10100,0);

	TekiStop(0);
//	ch[3982] = 0;
	LoadMapB(999);
	KaguTest(99985,0);
	PostScr(930);
}
#EndScript

// ポコ呼び出す
#Script:01182
int main()
{
	ch[3974] = 16;
	ch[3966] = 600;
}
#EndScript

// イワオ呼び出す
#Script:01183
int main()
{
	ch[3974] = 7;
	ch[3966] = 600;
}
#EndScript

// チャッキー呼び出す
#Script:01184
int main()
{
	ch[3974] = 11;
	ch[3966] = 600;
}
#EndScript

// ピエール呼び出す
#Script:01185
int main()
{
	ch[3974] = 6;
	ch[3966] = 600;
}
#EndScript

// ポコつぼ置く
#Script:01186
int main()
{
	KaguTest(20056,0);
	if (ch[420])
	{
		// 魔法のツボ扱い
		PostScr(1308);
		return 0;
	}

	Wait(30);
	
	ch[421] = 0;
	if (ch[1538])
	{
		// エンディング中はだめ
	}
	if (!ch[3974])
	{
		KaguTest(30076,1);
		if (!ch[420])
		{
			// 置けなかった
	//		GetItem(23);
			KaguTest2(20002,0,"ここでは使えません。");
		}
	}
	else
	{
		// 召喚中
		KaguTest2(20002,0,"今は使えません。");
	}
	Wait(30);
}
#EndScript

// イワオつぼ置く
#Script:01187
int main()
{
	KaguTest(20056,0);
	if (ch[420])
	{
		// 魔法のツボ扱い
		PostScr(1308);
		return 0;
	}

	Wait(30);
	ch[421] = 0;
	if (!ch[3974])
	{
		KaguTest(30076,2);
		if (!ch[420])
		{
			// 置けなかった
	//		GetItem(24);
			KaguTest2(20002,0,"ここでは使えません。");
		}
	}
	else
	{
		// 召喚中
		KaguTest2(20002,0,"今は使えません。");
	}
	Wait(30);
}
#EndScript

// チャッキーつぼ置く
#Script:01188
int main()
{
	KaguTest(20056,0);
	if (ch[420])
	{
		// 魔法のツボ扱い
		PostScr(1308);
		return 0;
	}

	Wait(30);
	ch[421] = 0;
	if (!ch[3974])
	{
		KaguTest(30076,3);
		if (!ch[420])
		{
			// 置けなかった
	//		GetItem(26);
			KaguTest2(20002,0,"ここでは使えません。");
		}
	}
	else
	{
		// 召喚中
		KaguTest2(20002,0,"今は使えません。");
	}
	Wait(30);
}
#EndScript

// ピエールつぼ置く
#Script:01189
int main()
{
	KaguTest(20056,0);
	if (ch[420])
	{
		// 魔法のツボ扱い
		PostScr(1308);
		return 0;
	}

	Wait(30);
	ch[421] = 0;
	if (!ch[3974])
	{
		KaguTest(30076,4);
		if (!ch[420])
		{
			// 置けなかった
	//		GetItem(28);
			KaguTest2(20002,0,"ここでは使えません。");
		}
	}
	else
	{
		// 召喚中
		KaguTest2(20002,0,"今は使えません。");
	}
	Wait(30);
}
#EndScript

// 召還つぼわった
#Script:01190
int main()
{
	ch[3956] = 1;
//	ch[3956] = ch[1791] / 100;
//	if (ch[1791] < 100)
//	{
//		// 失敗
//		ch[449] = 0;
//			// エフェクト＆エモ
//		ch[420] = ch[3968];
//		ch[421] = ch[3969];
//		ch[422] = ch[3970];
//		ch[423] = 1011;
//		ch[424] = 0;
//		ch[425] = 0;
//		ch[426] = 0;
//		ch[427] = 100;
//		ch[428] = 0;
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
//		KaguTest(30045,rand() % 10);
///		ch[420] = 4;	//（仮）エモもやもや
//		KaguTest(30036,0);
//		return 0;
//	}
//	else
	{
		// 成功
//		KaguTest(20058,0);
		// エフェクトもだそう
		ch[420] = ch[3968];
		ch[421] = ch[3969];
		ch[422] = ch[3970];
		ch[423] = 744;
		ch[424] = 0;
		ch[425] = 0;
		ch[426] = 0;
		ch[427] = 100;
		ch[428] = 0;
		KaguTest(30045,0);
		KaguTest(20002,34);
		GetItem(34);
		KaguTest(20002,23);
		KaguTest(20002,24);
		KaguTest(20002,26);
		KaguTest(20002,28);
		KaguTest(20002,55);
	}
	
	if (ch[449] == 1)
	{
		// ポコツボ
		PostScr(1182);
		ch[449] = 0;
		return 0;
	}
	if (ch[449] == 2)
	{
		// イワオツボ
		PostScr(1183);
		ch[449] = 0;
		return 0;
	}
	if (ch[449] == 3)
	{
		// チャッキーツボ
		PostScr(1184);
		ch[449] = 0;
		return 0;
	}
	if (ch[449] == 4)
	{
		// ピエールツボ
		PostScr(1185);
		ch[449] = 0;
		return 0;
	}
	if (ch[449] == 5)
	{
		// ブラックビーンツボ
		PostScr(1202);
		ch[449] = 0;
		return 0;
	}
}
#EndScript

// ドリル引き抜く
#Script:01191
int main()
{
	if (!ch[2300])
	{
		//ドリルまだ
		MapEvent(0);
		Black(0,100,10);
		Wait(10);
		
		ch[2302] = 1;
		Mouse(0);
		PlayMovie("nuketa.txt",0);
		Black(0,100,0);
		Wait(5);
//		Black(0,0,15);
		Walk(0,5,1);
		KaguTest(30057,0);
		Mouse(1);
		ch[2300] = 1;
		ch[1791] = -100;
		KaguTest(20051,0);
		LoadMap(401);
		Black(0,100,0);
		Black(0,0,30);
//		CharPos(0,0,47,38);
//		CharPos(19,-24,236,38);
//		Scop2(19,1,"O_043.it3");
		ch[2302] = 0;
		ch[435] = 0;
		MapEvent(1);
	}
}
#EndScript

// ミニフィールドに戻る（花火挟むため別スクリプトになった）
#Script:01192
int main()
{
	Black(0,100,15);
	Wait(15);
	KaguTest(10100,0);

	KaguTest(99999,0);
	TekiStop(0);
	MapEvent(1);
}
#EndScript

// 113:プク助けたムービー
#Script:01193
int main()
{
//	ch[3982] = 0;
	ch[1107] = 2286;
	ch[1759] = 0;
	Mouse(0);
	KaguTest(20066,0);
	PlayMovie("isk_1_2.txt",0);
//	Mouse(1);
//	BGM(19);
	SetWaku(1);
	ch[1545] = 1;
	ch[3979] = 92;
	KaguTest(10100,0);
	KaguTest(99999,1);
	ch[298] = 1;
	TekiStop(0);
	MapEvent(1);
//	PostScr(1200);
}
#EndScript

// 兄たま発見イベント
#Script:01194
int main()
{
	ch[400] = 17;
	ch[2317] = 1;
	
	// 会話
	//パリン
	Message(0,"みーっけ！　無事だったのね！","","","");
	//プク
	Message(17,"パリン、君も無事でよかった","","","");
	Message(17,"戻ってみたらホームがちょうど","襲われているところだったんだ","","");
	Message(17,"ピノとポコを連れて","逃げてきたけど、はぐれてしまった","","");
	//パリン
	Message(0,"そうだったの","","","");
	//プク
	Message(17,"そうだ、パリン。","２人を探してくれないか？","","");
	Message(17,"道もよく分からないし、","どうも君以外のニンゲンは苦手なんだ","","");

	//⇒まだ誰も見つけていない場合
	
	if (!ch[2328] && !ch[2329])
	{
		// まだ誰もみつけていない
		//パリン
		Message(0,"わかったわ、探してみる","","","");
		//プク
		Message(17,"ありがとう。","僕は先にホームへ戻っているよ","","");
	}
	if (ch[2328] && !ch[2329])
	{
		// ポコだけみつけている
		//パリン
		Message(0,"ポコならさっき見つけたわ","","","");
		Message(0,"残りはピノね","","","");
		//プク
		Message(17,"よろしく頼むよ。","僕は先にホームへ戻っているから","","");
		//パリン
		Message(0,"わかったわ、探してみる","","","");
	}
	if (!ch[2328] && ch[2329])
	{
		// ピノだけみつけている
		//パリン
		Message(0,"ピノならさっき見つけたわ","","","");
		Message(0,"残りはポコね","","","");
		//プク
		Message(17,"よろしく頼むよ。","僕は先にホームへ戻っているから","","");
		//パリン
		Message(0,"わかったわ、探してみる","","","");
	}
	if (ch[2328] && ch[2329])
	{
		// 両方ともみつけている
		//パリン
		Message(0,"２人とももう見つけたわ。","ホームに帰っているはずよ","","");
		//プク
		Message(17,"そうか、じゃあ、","僕もホームに戻るとするよ","","");
		//パリン
		Message(0,"わかったわ","","","");
	}
	
	// パリン避ける
	ch[424] = 4050;
	ch[425] = 1600;
	ch[426] = 7;
	KaguTest(30061,0);
	KaguTest(30060,0);
	Walk(ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]);

	// 兄たま逃亡
	ch[420] = 17;
	KaguTest(30063,0); // パリンは兄たまをみつめる
	ch[400] = 117;
	ch[424] = 3820;
	ch[425] = 1525;
	ch[420] = 1;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,17);
	Walk2(17,ch[421]*2,ch[422]*2,ch[423]/2);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]/2);
	KaguTest(30061,0);
	ch[424] = 2720;
	ch[425] = 1050;
	ch[420] = 1;
	ch[426] = 12;
	KaguTest(30060,17);
	if (ch[423] - 15 < 1)
	{
		ch[423] = 1;
	}
	Walk2(17,ch[421]*2,ch[422]*2,ch[423] / 2);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait((ch[423] / 2) - 15);
	ch[420] = 3;
	KaguTest(30064,17);
	Wait(15);
	CharPos(17,-200000,0,0);
	KaguTest(30063,-1,);	
	ch[400] = -1;
}
#EndScript

// ポコ発見イベント
#Script:01195
int main()
{
	ch[400] = 16;
	ch[2328] = 1;
	
	// 会話
	//パリン
	Message(0,"ポコ、無事だったのね","","","");
	Message(0,"こんなところで何してるの？","","","");
	//ポコ
	Message(16,"ニンゲンに見えないと分かっていても","何となく隠れたくなるぽ","","");
	//パリン
	Message(0,"ダンサーのくせにシャイね","","","");
	//ポコ
	Message(16,"きっとオバケの本能だぽ。","本能には逆らえないぽ","","");
	Message(16,"ところでホームはどうなってるぽ？","","","");
	//パリン
	Message(0,"ファントムに壊されちゃったわ","","","");
	//ポコ
	Message(16,"ガックリだぽ…","","","");
	Message(16,"とりあえず一度ホームに","帰ってみることにするぽ","","");
	
	// パリン避ける
	ch[424] = 1863;
	ch[425] = 1173;
	ch[426] = 7;
	KaguTest(30061,0);
	KaguTest(30060,0);
	Walk(ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]);
	
	// ポコ立ち去る
	ch[400] = 116;
	KaguTest(30005,0);
	KaguTest(30062,0);
	ch[420] = 16;
	KaguTest(30063,0);
	ch[400] = 116;
	ch[424] = 1600;
	ch[425] = 1150;
	ch[420] = 1;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,16);
	Walk2(16,ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]);
	KaguTest(30061,0);
	ch[424] = 735;
	ch[425] = 1150;
	ch[426] = 12;
	KaguTest(30060,16);
	Walk2(16,ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]-15);
	ch[420] = 3;
	KaguTest(30064,16);
	Wait(15);
	CharPos(16,-200000,0,0);
	KaguTest(30063,-1);
	ch[400] = -1;
}
#EndScript

// ピノ発見イベント
#Script:01196
int main()
{
	ch[400] = 18;
	ch[2329] = 1;
	
	// 会話
	//ピノ
	Message(18,"姉たま！","","","");
	//パリン
	Message(0,"ピノ、ここにいたの","","","");
	//ピノ
	Message(18,"姉たま、みんなが…ホームが…","","","");
	Message(18,"せっかく兄たまが戻ってきたのに","ひどいでしゅ…","","");
	//パリン
	Message(0,"大丈夫よ","","","");
	Message(0,"とりあえずファントムたちは","ホームから引き上げたわ","","");
	//ピノ
	Message(18,"…本当でしゅか？","じゃあ一度ホームに行ってみましゅ","","");
	Message(18,"一緒に逃げた兄たまやポコさんが","戻っているかもしれないでしゅ","","");
	
	// パリン避ける
	ch[424] = 50;
	ch[425] = -17;
	ch[426] = 7;
	KaguTest(30061,0);
	KaguTest(30060,0);
	Walk(ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]);

	// ピノ立ち去る
	ch[400] = 118;
	KaguTest(30005,0);
	KaguTest(30062,0);
	ch[420] = 18;
	KaguTest(30063,0);
	ch[400] = 118;
	ch[424] = -125;
	ch[425] = 0;
	ch[420] = 1;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,18);
	Walk2(18,ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]);
	KaguTest(30061,0);
	ch[424] = -500;
	ch[425] = 0;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,18);
	Walk2(18,ch[421],ch[422],ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(ch[423]-15);
	ch[420] = 3;
	KaguTest(30064,18);
	Wait(15);
	CharPos(18,-200000,0,0);
	KaguTest(30063,-1);
	ch[400] = -1;
}
#EndScript

// 208:モグレヌ破壊失敗
#Script:01197
int main()
{
	// ムービー
	Black(0,100,15);
	Wait(15);
	Mouse(0);
	PlayMovie("dkt_1_2.txt",0);
	Black(0,100,0);
	Wait(5);
//	Black(0,0,15);
	Walk(-5,0,1);
	KaguTest(30057,0);
	Mouse(1);
//	BGM(23);
	LoadMap(208);
	Black(0,0,15);
	Wait(15);
	ch[2510] = 1;
}
#EndScript

// 208:モグレヌ・モグロウ破壊
#Script:01198
int main()
{
	// ムービー
	Black(0,100,15);
	Wait(15);
	ch[2513] = 1;
	Mouse(0);
	PlayMovie("dkt_1_3.txt",0);
	Mouse(1);
//	BGM(23);
	LoadMap(208);
	Black(0,0,15);
	Wait(15);
}
#EndScript

// 26:モグロウ向き固定
#Script:01199
int main()
{
	Walk2(1,0,1,1);
	KaguTest(20021,1);
	ch[400] = 101;
}
#EndScript

// 闇の霧発生
#Script:01200
int main()
{
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,3,"poboss");
	KaguTest2(30014,3,"poura1");
	KaguTest2(30014,3,"poura2");
	KaguTest2(30014,3,"yama1");
	KaguTest2(30014,3,"yama2");
	KaguTest2(30014,3,"yamaboss");
	KaguTest2(30014,3,"yamaura1");
	KaguTest2(30014,3,"yamaura2");
	KaguTest2(30014,3,"mori1");
	KaguTest2(30014,3,"mori2");
	KaguTest2(30014,3,"funsui");
	KaguTest2(30014,3,"moriboss");
	KaguTest2(30014,3,"moriura1");
	KaguTest2(30014,3,"moriura2");
	KaguTest2(30014,3,"spin1");
	KaguTest2(30014,3,"spin2");
	KaguTest2(30014,3,"spinboss");
	KaguTest2(30014,3,"spinura1");
	KaguTest2(30014,3,"spinura2");
	KaguTest2(30014,3,"egg1");
	KaguTest2(30014,3,"egg2");
	KaguTest2(30014,3,"eggboss");
	KaguTest2(30014,3,"eggura1");
	KaguTest2(30014,3,"eggura2");
	KaguTest2(30014,3,"great");
	KaguTest2(30014,3,"hakai");
	KaguTest2(30014,3,"ie2");
	KaguTest2(30014,3,"ie3");
	KaguTest2(30014,3,"ie4");
	KaguTest2(30014,3,"ie4_1");
	KaguTest2(30014,3,"ie4_2");
	KaguTest2(30014,3,"ie4_3");

	// 遷移計算呼び出し
	ch[420] = -3300;
	ch[421] = 1750;
	ch[422] = 0;
	ch[423] = 0;
	KaguTest(99988,0);
	ch[420] = -3300;
	ch[421] = -1750;
	ch[423] = 0;
	KaguTest(99988,1);
	ch[420] = 3300;
	ch[421] = 1750;
	ch[423] = 0;
	KaguTest(99988,2);
	ch[420] = 3300;
	ch[421] = -1750;
	ch[423] = 0;
	KaguTest(99988,3);
	KaguTest(99983,4);
//	KaguTest(99987,4);

	// カメラ位置
	KaguTest(99984,0);
	KaguTest(30033,200);
	Wait(30);
	ch[298] = 1;
	Black(0,0,15);
	SE(387);
	Wait(15);
	
	WaitC(165);
	
	ch[2522] = 1;

	Black(0,100,15);
	WaitC(15);
	Black(0,100,0);
	KaguTest(99984,-1);
	KaguTest(30033,100);
	KaguTest(99998,0);
	KaguTest(30033,100);
	LoadMapB(115);
	CharPos(0,0,300,0);
	ch[1107] = 2286;
	KaguTest(40003,111);
//	Mouse(0);
	PlayMovie("isk_1_3.txt",0);
//	Mouse(1);
//	KaguTest(20066,0);

//	Black(0,0,15);
//	Wait(15);
	KaguTest(30087,0);
	CharPos(0,-200000,0,0);

//	Black(0,0,15);

//	PostScr(1209);

	// オバケホーム崩壊ムービー
//	KaguTest(10011,10);
//	Wait(10);
//	KaguTest(20025,0);
	SetWaku(1);
	PostScr(1210);

	return 0;
}
#EndScript

// ブラックビーンつぼ置く
#Script:01201
int main()
{
	KaguTest(20056,0);
	if (ch[420])
	{
		// 魔法のツボ扱い
		PostScr(1308);
		return 0;
	}

	Wait(30);
	KaguTest(20010,0);
	ch[421] = ch[420];
	if (ch[420] != 308 || !ch[2497])
	{
		ch[421] = 0;
		if (!ch[3974])
		{
			KaguTest(30076,5);
		}
		else
		{
			// 召喚中
			KaguTest2(20002,0,"今は使えません。");
		}
	}
	if (!ch[420] || (ch[421] == 308 && ch[2497]) )
	{
		// 置けなかった
//		GetItem(55);
		Mes("ここでは使えません。");
	}
	Wait(30);
}
#EndScript

// ブラックビーン呼び出す
#Script:01202
int main()
{
	ch[3974] = 25;
	ch[3966] = 180;
}
#EndScript

// 202:突起物を壊すとスライムたちが気付いて襲ってくる
#Script:01203
int main()
{
	ch[420] = 800;
	KaguTest(30108,0);
}
#EndScript

// 602裏：レバー引くとリフト動く
#Script:01204
int main()
{
	int bt15;
	int ln;
	
	ln = Lift2C(4);
	
	bt15 = Getbt15(ln);
	
	if (!bt15)
	{
		TekiStop(1);
		
		Wait(5);
		
		Black(0,100,10);
		Wait(10);
		
		SaveCamera();
		ch[420] = -1950;
		ch[421] = 7900;
		ch[422] = 1500;
		ch[423] = -2100;
		ch[424] = 11600;
		ch[425] = 170;
		KaguTest(30019,1);
		
		TekiStop(0);
		CrossFade();
		Wait(15);
		Black(0,0,10);
		Event(502);
		Wait(150);
		KaguTest(30019,0);
		RestoreCamera();
		TekiStop(1);
		CrossFade();
		Wait(15);
		TekiStop(0);
	}

}
#EndScript

//102 -> 116 前半//////////////////////////////////
#Script:01205
int main()
{
	ch[2500] = 0;

	KaguTest(40002,0);

	MapEvent(0);

	Walk(0,-8,11);

	Wait(11);
	Event(110);
}
#EndScript

//102 -> 116 後半
#Script:01206
int main()
{
	MapEvent(1);
	Walk(0,-8,20);
	Wait(20);
	Event(499);
}
#EndScript

//ゴールマップ行き↑方向 前半
#Script:01207
int main()
{
	KaguTest(40002,0);

	MapEvent(0);

	Walk(0,8,11);

	Wait(11);
	if (ch[2497])
	{
		KaguTest(20010,0);
		if (ch[420] == 610)
		{
			ch[1000 + (ch[1096] * 2)] = 0;
			ch[1001 + (ch[1096] * 2)] = 0;
		}
	}
	Event(120);
}
#EndScript

//ゴールマップ行き↑方向 後半
#Script:01208
int main()
{
	MapEvent(1);
	Walk(0,5,20);
	Wait(20);
	Event(499);
}
#EndScript

// 115 -> クリア
#Script:01209
int main()
{
	KaguTest(40002,0);

	// クリア
	int a;
	a = ch[2286];
	
	TekiStop(1);
	MapEvent(0);
		// 評価表示
	KaguTest(10500,120);

	if (ch[2286] < 1)
	{
		ch[2286]=1;
	}
	
	Wait(90);
	
	Message(0,"","","","");

	// ミニフィールドへ戻る
	if (ch[512])
	{
		KaguTest(10011,1);
		Wait(1);
//		KaguTest(20025,0);

		if (!a)
		{
			ch[429] = 1;
			ch[397] = 1;
		}
		
		PostScr(1192);

//		Black(0,100,15);
//		Wait(15);
	}
	else
	{
		// オバケホーム崩壊前
		KaguTest(10011,10);
		Wait(10);
		KaguTest(20025,0);
		PostScr(1210);
	}
}
#EndScript

// 115:プク助けたムービー後ミニフィールド戻る
#Script:01210
int main()
{
	ch[2062] = 1;
	ch[2786] = 0;
	TekiStop(0);
	MapEvent(1);
	// ミニフィールドへ戻る
	KaguTest(10100,0);
//	Black(0,100,10);
//	Wait(10);

	TekiStop(0);
//	ch[3982] = 0;
	LoadMapB(999);
	KaguTest(99985,0);
	PostScr(930);
}
#EndScript

//ゴールマップ行き↓方向 前半
#Script:01211
int main()
{
	KaguTest(40002,0);

	MapEvent(0);

	Walk(0,-8,11);

	Wait(11);
	Event(110);
}
#EndScript

//ゴールマップ行き↓方向 後半
#Script:01212
int main()
{
	MapEvent(1);
	Walk(0,-5,20);
	Wait(20);
	Event(499);
}
#EndScript

//ゴールマップ行き←方向 前半
#Script:01213
int main()
{
	KaguTest(40002,0);

	MapEvent(0);

	Walk(-8,0,11);

	Wait(11);
	Event(110);
}
#EndScript

//ゴールマップ行き←方向 後半
#Script:01214
int main()
{
	MapEvent(1);
	Walk(-5,0,20);
	Wait(20);
	Event(499);
}
#EndScript

//ゴールマップ行き→方向 前半
#Script:01215
int main()
{
	KaguTest(40002,0);

	MapEvent(0);

	Walk(8,0,11);

	Wait(11);
	Event(110);
}
#EndScript

//ゴールマップ行き→方向 後半
#Script:01216
int main()
{
	MapEvent(1);
	Walk(5,0,20);
	Wait(20);
	Event(499);
}
#EndScript

// 105:ボスサップ倒した
#Script:01217
int main()
{
	Wait(60);
	
	// ボスラッシュ中？
	if (ch[2092])
	{
		// モスビー戦へ
		ch[2094] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(505);
		Wait(5);
		Event(600);
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		KaguTest(20020,0);
		CharPos(40,-200000,0,0);
		CharPos(ch[425],0,0,300);
		CharPos(0,0,-1600,0);
		KaguTest(12011,ch[425]);
		ch[420] = 2;
		KaguTest(12012,ch[425]);

		Wait(5);
		Walk(0,1,1);
		KaguTest(30057,0);

		White(0,0,30);
		Wait(30);
		MMV("boss02.mmv");
		TekiStop(0);
		MapEvent(1);

		return 0;
	}

	KaguTest(20041,0);
	ch[421] = 0;
	KaguTest(30034,100);
	BGM(39);
	if (ch[507])
	{
		ch[423] = 0;
		ch[424] = 0;
		ch[425] = -80;
		KaguTest(30084,0);
		CrossFade();
		White(0,0,30);
		Wait(30);
	}
	else
	{
		ch[423] = 0;
		ch[424] = 0;
		ch[425] = 400;
		KaguTest(30081,0);
		KaguTest(30019,9);
		White(0,0,30);
		Wait(30);
		Wait(183);
		KaguTest(30019,0);
		KaguTest(30082,1887);
		CrossFade();
	}
}
#EndScript

// 505:モスビー倒した
#Script:01218
int main()
{
	Wait(60);

	// ボスラッシュ中？
	if (ch[2092])
	{
		// ラッシー戦へ
		ch[2095] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(206);
		Wait(5);
		Event(600);
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		KaguTest(20020,0);
		CharPos(0,0,0,0);
//		CharPos(ch[425],-1000,277,-782);
		CharPos(ch[425]+1,-1000,277,-782);
		KaguTest(30028,ch[425]);
		KaguTest(30028,ch[425]+1);
		Wait(5);
		Walk(-5,0,1);
		KaguTest(30057,0);

		White(0,0,30);
		Wait(30);
		MMV("boss03.mmv");
		TekiStop(0);
		MapEvent(1);

		return 0;
	}


	BGM(39);

	if (ch[1542])
	{
		ch[423] = 0;
		ch[424] = 0;
		ch[425] = -80;
		KaguTest(30084,0);
		CrossFade();
		White(0,0,30);
		Wait(30);
	}
	else
	{
		KaguTest(20041,0);
		ch[421] = 0;
		KaguTest(30034,100);
		ch[423] = 0;
		ch[424] = 0;
		ch[425] = 400;
		KaguTest(30081,0);
		KaguTest(30019,9);
		White(0,0,30);
		Wait(30);
		Wait(183);
		KaguTest(30019,0);
		KaguTest(30082,1887);
		CrossFade();
	}
}
#EndScript

// 206:ラッシー倒した
#Script:01219
int main()
{
	Wait(60);

	// ボスラッシュ中？
	if (ch[2092])
	{
		// クリーム戦へ
		ch[2096] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(606);
		Wait(5);
		Event(160);
		ch[300] = 1;
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		CharPos(0,0,2000,1050);

		KaguTest(20020,0);
//		CharPos(ch[425],0,-300,20);
		CharPos(ch[425],0,2300,1065);
		KaguTest(30028,ch[425]);
		
		Scop2(ch[425],1,"scop.it3");
		ch[300] = 1;

		KaguTest2(30013,50001,"fall_atari_ue");

		Look(ch[425],0);
		Look(0,ch[425]);

		Wait(5);
		Walk(0,1,1);
		KaguTest(30057,0);

		White(0,0,30);
		Wait(30);
		MMV("boss04.mmv");
		TekiStop(0);
		MapEvent(1);
		LiftEnable(0);

		return 0;
	}


	BGM(39);

	if (ch[1505])
	{
		KaguTest(30083,0);
		if (ch[455] != 1)
		{
			CharPos(ch[420],0,ch[422],ch[423]);
		}
		ch[421] = 0;
		KaguTest(30034,100);
		ch[423] = 0;
		ch[424] = 0;
		ch[425] = -120;
		KaguTest(30084,0);
		CrossFade();
		White(0,0,30);
		Wait(30);
	}
	else
	{
		KaguTest(30083,0);
		if (ch[455] != 1)
		{
			CharPos(ch[420],0,ch[422],ch[423]);
		}
		ch[421] = 0;
		KaguTest(30034,100);
		KaguTest(20041,0);
		ch[423] = 0;
		ch[424] = 0;
		ch[425] = 356;
		KaguTest(30081,0);
		KaguTest(30019,9);
		White(0,0,30);
		Wait(30);
		Wait(183);
		KaguTest(30019,0);
		KaguTest(30082,1887);
		CrossFade();
	}
}
#EndScript

// 606:偽パリン倒した
#Script:01220
int main()
{
	Wait(60);

	// ボスラッシュ中？
	if (ch[2092])
	{
		// ロッキー戦へ
		ch[2097] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(306);
		Wait(5);
		KaguTest2(30014,0,"@tokaron");
		KaguTest2(30014,0,"@monyo");
		KaguTest2(30014,0,"@magicbelt1");
		KaguTest2(30014,0,"@magicbelt2");
		Event(160);
		ch[300] = 1;
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		CharPos(0,0,-600,0);

		KaguTest(20020,0);
//		CharPos(ch[425],0,-300,20);
		CharPos(ch[425],0,700,0);
		KaguTest(30028,ch[425]);
		
		ch[300] = 1;

		Look(ch[425],0);
		Look(0,ch[425]);

		Wait(5);
		Walk(0,1,1);
		KaguTest(30057,0);

		White(0,0,30);
		Wait(30);
		MMV("boss05.mmv");
		TekiStop(0);
		MapEvent(1);

		LiftEnable(0);

		return 0;
	}

	BGM(39);

	if (ch[1513])
	{
		ch[423] = 0;
		ch[424] = 2775;
		ch[425] = 980;
		KaguTest(30084,0);
		CrossFade();
		White(0,0,30);
		Wait(30);
	}
	else
	{
		KaguTest(20041,0);
		ch[421] = 0;
		KaguTest(30034,100);
		ch[423] = 0;
		ch[424] = 2775;
		ch[425] = 1460;
		KaguTest(30081,0);
		KaguTest(30019,9);
		White(0,0,30);
		Wait(30);
		Wait(183);
		KaguTest(30019,0);
		KaguTest(30082,1887);
		CrossFade();
	}
}
#EndScript

// 306:ロッキー＆王子倒した
#Script:01221
int main()
{
	Wait(60);

	// ボスラッシュ中？
	if (ch[2092])
	{
		// トカロン第一戦へ
		ch[2099] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(307);
		Wait(5);
		ch[300] = 1;
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		CharPos(18,235,75,6555);
		CharPos(0,2100,0,6535);

		Wait(5);
		Walk(-1,0,1);
		KaguTest(30057,0);

		ch[301] = 1;
		White(0,0,30);
		Wait(30);
		MMV("boss07.mmv");
		TekiStop(0);
		MapEvent(1);

		return 0;
	}

	if (ch[1571])
	{
		ch[423] = 0;
		ch[424] = 750;
		ch[425] = -80;
		KaguTest(30084,0);
		CrossFade();
		White(0,0,30);
		Wait(30);
		BGM(39);
	}
	else
	{
		KaguTest(20041,0);
		ch[421] = 0;
		KaguTest(30034,100);
		ch[423] = 0;
		ch[424] = 750;
		ch[425] = 400;
		KaguTest(30081,0);
		KaguTest(30019,9);
		White(0,0,30);
		Wait(30);
		Wait(183);
		KaguTest(30019,0);
		KaguTest(30082,1887);
		CrossFade();
	}
}
#EndScript

// 607:壊れたレバー
#Script:01222
int main()
{
	Mes("レバーは壊れているようだ。");
}
#EndScript

// 臭いパーツ使った
#Script:01223
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"凄まじい臭気を放っているわ");

	KaguTest(10012,0);
}
#EndScript

// 306:王子戦開始
#Script:01224
int main()
{
	Wait(60);
	CharPos(58,-200000,0,0);
	CharPos(59,-200000,0,0);

	// ボスラッシュ中？
	if (ch[2092])
	{
		// 王子戦へ
		ch[2098] = 1;
		KaguTest(40002,0);
		
		Blur(0,0,0);
		TekiStop(1);
		KaguTest(100000,0);
		LoadMapB(306);
		ch[1096] = ch[1096] - 1;
		Wait(5);
		
		SetSavePos2(6,0,150,0);
		ch[1095] = 6;
		// ムービー救援
		KaguTest2(30014,0,"@tokaron");
		KaguTest2(30014,0,"@monyo");
		KaguTest2(30014,0,"@magicbelt1");
		KaguTest2(30014,0,"@magicbelt2");
		CharPos(12,-200000,0,0);
		CharPos(78,0,675,0);
		CharPos(0,0,-300,0);

		Event(160);
		LiftEnable(0);
		ch[300] = 1;
		ch[301] = 1;

		Wait(5);
		Walk(0,1,1);
		KaguTest(30057,0);

		White(0,0,30);
		Wait(30);
		MMV("boss06.mmv");
		TekiStop(0);
		MapEvent(1);

		return 0;
	}

//	White(0,0,30);
//	Wait(30);
	if (!ch[1571])
	{
		Mouse(0);
		KaguTest(20065,31);
		PlayMovie("kdo_3_3.txt",ch[2539]);
		Mouse(1);
	//	BGM(31);	// 仮
		CharPos(12,-200000,0,0);
		CharPos(78,0,675,0);
		ch[2539] = 1;
		SetSavePos2(306,-3150,-3375,-1125);
	}
	else
	{
		LoadMapB(306);
		KaguTest2(30014,0,"@tokaron");
		KaguTest2(30014,0,"@monyo");
		KaguTest2(30014,0,"@magicbelt1");
		KaguTest2(30014,0,"@magicbelt2");
		SetSavePos2(306,-3150,-3375,-1125);
		CharPos(12,-200000,0,0);
		CharPos(78,0,675,0);
		CharPos(0,0,-300,0);
		BGM(31);
	}

	Event(160);
	LiftEnable(0);
	ch[300] = 1;
	ch[301] = 1;
	Black(0,0,15);
	Wait(15);
//	Mes("王子戦闘予定");
//	Wait(60);
//	White(0,100,15);
//	Wait(15);
//	Event(106);
	MMV("boss06.mmv");
}
#EndScript

// 310:鍵穴１
#Script:01225
int main()
{
	ch[300] = 1;
	ch[304] = 1;
	
	// エフェクト
//	ch[420] = 30;
//	KaguTest(30042,510);
	Event(510);
	SE(389);
	ch[420] = 120;
	KaguTest(30042,520);
	PostScr(1238);
}
#EndScript

// 310:鍵穴２
#Script:01226
int main()
{
	ch[301] = 1;
	ch[304] = 2;

	// エフェクト
//	ch[420] = 30;
//	KaguTest(30042,511);
	Event(511);
	SE(389);
	ch[420] = 120;
	KaguTest(30042,521);
	PostScr(1238);
}
#EndScript

// 310:鍵穴３
#Script:01227
int main()
{
	ch[302] = 1;
	ch[304] = 3;
	
	// エフェクト
//	ch[420] = 30;
//	KaguTest(30042,512);
	Event(512);
	SE(389);
	ch[420] = 120;
	KaguTest(30042,522);
	PostScr(1238);
}
#EndScript

// 310:鍵穴４
#Script:01228
int main()
{
	ch[303] = 1;
	ch[304] = 4;

	// エフェクト
//	ch[420] = 30;
//	KaguTest(30042,513);
	Event(513);
	SE(389);
	ch[420] = 120;
	KaguTest(30042,523);
	PostScr(1238);
}
#EndScript

// 310:トカロン復活
#Script:01229
int main()
{
	Black(0,100,30);
	Wait(30);
	KaguTest2(30016,0,"");
	KaguTest(30019,0);
//	PlayMovie("kdo_3_5.txt",0);
	Mouse(0);
	int movi;
	KaguTest(20066,0);
	movi = PlayMovie("kdo_3_5a.txt",0);
	ch[2540] = 1;
	KaguTest(100000,0);
	if (movi)
	{
		movi = PlayMovie2("kdo_3_5x.txt",0);
		KaguTest(100000,0);
	}
//	if (movi)
//	{
//		movi = PlayMovie2("kdo_3_5b.txt",0);
//		KaguTest(100000,0);
//	}
//	if (movi)
//	{
//		movi = PlayMovie2("kdo_3_5c.txt",0);
//		KaguTest(100000,0);
//	}
	PlayMovie2("kdo_3_5d.txt",0);
	KaguTest(20066,0);
	Black(0,100,0);
	Wait(5);
//	Black(0,0,15);
	Walk(5,0,1);
	KaguTest(30057,0);
	Mouse(1);
//	BGM(29);
	ch[2540] = 1;
	LoadMap(310);
	CharPos(19,1675,-260,38);
	KaguTest2(30014,0,"@crroot");
	Black(0,0,15);
}
#EndScript

// 謎の物体使用
#Script:01230
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"何なのかしら……");
	KaguTest2(10008,1,"街のおとなに聞いてみよっと");
	
	KaguTest(10012,0);
}
#EndScript

// 203:宝箱空けたら敵出てくる
#Script:01231
int main()
{
	KaguTest(40005,2404);
	Wait(45);
	if (ch[420])
	{
		Wait(30);
	}
	
	ch[420] = -681;
	ch[421] = 4089;
	ch[422] = 2420;
	ch[423] = -673;
	ch[424] = 2728;
	ch[425] = 2245;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);

	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,15);
	
	Wait(10);
	KaguTest(30019,0);
	CrossFade();
}
#EndScript

// 012:ピノイベントからＯＰへ
#Script:01232
int main()
{
	ch[442] = 1;
	Message(0,"……………………","","","");
	Message(0,"何だかつまんない。","おとなしかいない街だったなんて…","","");
	
	ch[420] = 679;
	KaguTest(30128,-1);
	Wait(30);
	ch[420] = 679;
	KaguTest(30128,-1);
	
	ch[420] = 2300;
	ch[421] = 1086;
	KaguTest(30070,0);
	Message(0,"何だろ？","","","");
//	ch[420] = 679;
//	KaguTest(30128,-1);

	Black(0,100,30);
	Wait(15);
//	ch[420] = 679;
//	KaguTest(30100,-1);
	Wait(15);

	ch[2552] = 1;
	ch[508] = 0;
	Mouse(0);
//	KaguTest(20065,0);
	KaguTest(20065,-5);
	PlayMovie("open1_2.txt",0);
	Black(0,0,15);
//	Wait(15);

	LoadMapB(998);
	CharPos(0,-200000,0,0);
	SetWaku(1);
	BGM(0);
//	KaguTest(20065,0);
	PlayAVI("op.avi",0);

//	Mouse(1);
	Black(0,100,0);
	ch[508] = 0;
	PostScr(28);
	return 0;
}
#EndScript

// 607:エレベーター下から乗る
#Script:01233
int main()
{
	if (ch[300] == 2)
	{
		return 0;
	}
	
	ch[300] = 1;
	MapEvent(0);

	int x;
	int y;
	int z;
	int count;
	GetCharPos(0,x,y,z);

	count = 0;
	if (x > 100 || x < -100)
	{
		ch[424] = 0;
		ch[425] = -96;
		ch[426] = 36;
		KaguTest(30061,0);
		KaguTest(30060,0);
		while(ch[420])
		{
			Walk(ch[421],ch[422],ch[423]);
			Wait(ch[423]);
			KaguTest(30060,0);
			count++;
			
			if (count > 10)
			{
				// 最終手段・瞬間移動
				CharPos(0,ch[424],ch[425],ch[426]);
			}
		}

	}

	ch[424] = 0;
	ch[425] = -630;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,0);
	count = 0;
	while(ch[420])
	{
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		KaguTest(30060,0);

		count++;
		
		if (count > 10)
		{
			// 最終手段・瞬間移動
			CharPos(0,ch[424],ch[425],ch[426]);
		}
	}

	Event(153);
//	SE(390);
	ch[402] = 1;
	ch[420] = 0;
	ch[421] = -800;
	KaguTest(30070,0);
	KaguTest2(30017,1,"@p_null");
	Wait(240);
	ch[402] = 0;
	Wait(10);
	Event(155);
	KaguTest2(30017,0,"");
	Walk(0,-8,24);
	Wait(24);
	MapEvent(1);
}
#EndScript

// 607:エレベーター上から乗る
#Script:01234
int main()
{
	if (ch[300] == 2)
	{
		return 0;
	}

	ch[300] = 0;
	MapEvent(0);

	int count;

	ch[420] = 0;
	ch[421] = 800;
	KaguTest(30088,60);
	if (ch[422])
	{
		// カメラ強制移動
		Camera(0,0,360,5825);
		CrossFade();
	}

	ch[424] = 0;
	ch[425] = -630;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,0);
	count = 0;
	while(ch[420])
	{
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		KaguTest(30060,0);

		count++;
		
		if (count > 10)
		{
			// 最終手段・瞬間移動
			CharPos(0,ch[424],ch[425],ch[426]);
		}
	}
	Camera(-1,0,0,0);

	Event(154);
//	SE(390);
	ch[402] = 1;
	ch[420] = 0;
	ch[421] = 800;
	KaguTest(30070,0);
	KaguTest2(30017,1,"@p_null");
	Wait(240);
	ch[402] = 0;
	Wait(10);
	Event(156);
	KaguTest2(30017,0,"");
	Walk(0,8,32);
	Wait(32);
	MapEvent(1);
}
#EndScript

// 401:スポンサーイベント終了後山１にいけるようになる
#Script:01235
int main()
{
	// マナエフェクト

	// あたり設定
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30014,2,"yama1");
	
	// 遷移計算呼び出し
	ch[422] = 75;
	ch[420] = -2575;
	ch[421] = -525;
	ch[423] = 90;
	KaguTest(99988,0);
	KaguTest(99987,1);
	
	ch[3203] = 1;

	// カメラ位置
	KaguTest(99996,16);
	KaguTest(30033,70);
	KaguTest(30032,-2500);
	Wait(30);
	Black(0,0,15);
	Wait(150);
	
	ch[2527] = 1;
	// オバケホームに戻る＆会話続き
	Black(0,100,15);
	Wait(15);
	KaguTest(99998,0);
	KaguTest(30033,100);
	KaguTest(30032,0);
	LoadMap(401);
	Wait(15);
	CharPos(0,-50,600,0);
	Wait(5);
	Black(0,100,0);
	Black(0,0,30);
	MapEvent(1);

//	ch[294] = 1;
}
#EndScript

// 308裏：アタリ設定
#Script:01236
int main()
{
	ch[205] = 1;
	KaguTest2(30014,2,"trance2");
	KaguTest2(30014,3,"trance3");
}
#EndScript

// 315裏：落ちあたりに触れたら時間差イベント設定
#Script:01237
int main()
{
	// 骨復活
	ch[420] = 30;
	KaguTest(30042,21);
}
#EndScript

// 310:鍵穴連動関連
#Script:01238
int main()
{
	int kagi = 0;
	int mx;
	int my;

	SaveCamera();
	// カメラ位置
	if (ch[304] == 1)
	{
		// 右上
		ch[420] = 1180;
		ch[421] = 652;
		ch[422] = 350;
		ch[423] = 1870;
		ch[424] = 827;
		ch[425] = 107;
		mx = 1850;
		my = 825;
	}
	if (ch[304] == 2)
	{
		// 右下
		ch[420] = 1250;
		ch[421] = -571;
		ch[422] = 177;
		ch[423] = 1866;
		ch[424] = -812;
		ch[425] = 57;
		mx = 1850;
		my = -825;
	}
	if (ch[304] == 3)
	{
		// 左下
		ch[420] = 675;
		ch[421] = -710;
		ch[422] = 429;
		ch[423] = 205;
		ch[424] = -813;
		ch[425] = -42;
		mx = 250;
		my = -825;
	}
	if (ch[304] == 4)
	{
		// 左上
		ch[420] = 745;
		ch[421] = 640;
		ch[422] = 52;
		ch[423] = 205;
		ch[424] = 845;
		ch[425] = 182;
		mx = 250;
		my = 825;
	}
	// カメラアングル以外共通
//	KaguTest(30093,15);
	KaguTest(30019,1);
	CrossFade();
	Wait2(2);
	ch[420] = mx;
	ch[421] = my;
	KaguTest(30070,0);

	if (ch[300])
	{
		kagi++;
	}
	if (ch[301])
	{
		kagi++;
	}
	if (ch[302])
	{
		kagi++;
	}
	if (ch[303])
	{
		kagi++;
	}
	
	Event(514);
	ch[420] = 90;
	KaguTest(30126,388);

	ch[420] = mx;
	ch[421] = my;
	Wait2(10);
	KaguTest(30070,0);
	Wait2(10);
	KaguTest(30070,0);
	Wait2(10);
	KaguTest(30070,0);
	Wait2(10);
	if (ch[304] == 1)
	{
		// 右上
		ch[420] = 1057;
		ch[421] = 1548;
		ch[422] = 1021;
		ch[423] = 1051;
		ch[424] = 8;
		ch[425] = 107;
	}
	if (ch[304] == 2)
	{
		// 右下
		ch[420] = 1162;
		ch[421] = -1209;
		ch[422] = 457;
		ch[423] = 1051;
		ch[424] = 8;
		ch[425] = 107;
	}
	if (ch[304] == 3)
	{
		// 左下
		ch[420] = 935;
		ch[421] = -1047;
		ch[422] = 1155;
		ch[423] = 1051;
		ch[424] = 8;
		ch[425] = 107;
	}
	if (ch[304] == 4)
	{
		// 左上
		ch[420] = 670;
		ch[421] = 1322;
		ch[422] = 651;
		ch[423] = 1051;
		ch[424] = 8;
		ch[425] = 107;
	}
	KaguTest(30093,48);
	ch[420] = ch[423];
	ch[421] = ch[424];
	ch[422] = ch[425];
	KaguTest(30094,48);
	KaguTest(30019,15);
	Wait2(60);

	if (kagi == 1)
	{
		// 鍵一つ目
		KaguTest(30089,2);
	}
	if (kagi == 2)
	{
		// 鍵二つ目
		KaguTest(30089,4);
	}
	if (kagi == 3)
	{
		// 鍵三つ目
		KaguTest(30089,7);
	}
	if (kagi == 4)
	{
		// 鍵四つ目
		KaguTest(30089,9);
		Event(517);
	}
	Wait2(30);
	if (kagi == 4)
	{
		Event(527);
		Wait2(15);
		Event(504);
//		KaguTest(30019,9);
//		PostScr(1239);
	}
	else
	{
		KaguTest(30019,0);
		RestoreCamera();
		CrossFade();
		Wait2(15);
	}
}
#EndScript

// 310:クリスタル壊れる
#Script:01239
int main()
{
	KaguTest2(30009,4040,"@CristalNull");
	Wait(30);
	KaguTest2(30016,0,"c6c4c6c4c7c3c7c3c6c4c6c4cb6b4b6b4b7b3b7b3b6b4b6b4L");
	KaguTest2(10008,0,"@CristalNull");
	KaguTest2(30019,0,"O_066.it3");
	KaguTest2(30014,0,"@crroot");
	ch[420] = -200000;
	ch[421] = 0;
	ch[422] = 0;
	KaguTest(30082,4025);

	ch[420] = 100;
	KaguTest(30042,504);
}
#EndScript

// ミニフィールド：エッグプラントへの道開けるイベント
#Script:01240
int main()
{
	Mouse(0);
	SetWaku(1);
	KaguTest(99986,0);
	KaguTest2(30014,0,"@ClearORoot");
	KaguTest2(30021,0,"@CDL21");
	KaguTest2(30021,0,"@CDL25");
	KaguTest2(30021,0,"@CDL26");
	KaguTest2(30021,0,"@CDL24");
	KaguTest2(30021,0,"@CDL23");
	KaguTest2(30021,0,"@CDL22");
	KaguTest2(30021,0,"@CDL36");
	KaguTest2(30021,0,"@CDL27");
	KaguTest2(30021,0,"@CDL28");
	KaguTest2(30021,0,"@CDL29");
	KaguTest2(30021,0,"@CDL30");
	KaguTest2(30021,0,"@CDL31");
	SetSavePos();
	CharPos(0,-200000,0,0);
	CharPos(16,171,212,0);
	ch[420] = -1;
	KaguTest(12002,16);
	ch[420] = 7;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,16);
	ch[420] = 585;
	ch[421] = -3000;
	KaguTest(30070,16);
	KaguTest(99980,0);
	Black(0,0,15);
	ch[420] = 60;
	ch[421] = 7;
	KaguTest(20044,1);
	ch[420] = -3127;
	ch[421] = -2790;
	ch[422] = 1510;
	ch[423] = -3405;
	ch[424] = -1415;
	ch[425] = 475;
	ch[429] = 995;
	KaguTest(30019,1);
	Wait(15);

	ch[420] = -2714;
	ch[421] = -2851;
	ch[422] = 1536;
	ch[423] = -2633;
	ch[424] = -1272;
	ch[425] = 798;
	ch[429] = 998;
	KaguTest(30093,60);
	KaguTest(30019,14);
	WaitC(60);
	
	ch[420] = -583;
	ch[421] = -1623;
	ch[422] = 1539;
	ch[423] = -305;
	ch[424] = -540;
	ch[425] = 948;
	ch[429] = 995;
	KaguTest(30093,95);
	WaitC(75);
	KaguTest2(20001,16,"な、なんだぽ？");
	WaitC(20);
	
	ch[420] = 155;
	ch[421] = -332;
	ch[422] = 427;
	ch[423] = 688;
	ch[424] = 579;
	ch[425] = 75;
	ch[429] = 993;
	KaguTest(30093,30);
	WaitC(5);
	ch[429] = 990;
	WaitC(5);
	ch[429] = 970;
	WaitC(5);
	ch[429] = 940;
	ch[420] = 631;
	ch[421] = 719;
	KaguTest(30070,16);
	WaitC(15);
	ch[420] = -1;
	KaguTest(30104,16);
	ch[420] = 631;
	ch[421] = 719;
	ch[422] = 75;
	KaguTest2(30022,0,"BS_005Br.it3");
	
	ch[422] = 0;
	ch[423] = 1994;
	ch[424] = 0;
	ch[425] = 0;
	ch[427] = 200;
	ch[428] = 0;
	KaguTest(30045,0);
	KaguTest(30045,5);
	KaguTest(30045,10);
	ch[420] = 284;	// 爆発ＳＥ
	KaguTest(30100,93);
//	ch[420] = 324;
//	KaguTest(30100,93);
	CharPos(93,-200000,0,0);
	ch[420] = 60;
	ch[421] = 7;
	KaguTest(20044,0);
	WaitC(40);
	
	ch[420] = 2136;
	ch[421] = -2357;
	ch[422] = 2283;
	ch[423] = 659;
	ch[424] = 708;
	ch[425] = 23;
	KaguTest(30093,245);
	ch[420] = 659;
	ch[421] = 708;
	ch[422] = 23;
	KaguTest(30094,245);
	KaguTest(30019,15);
	WaitC(145);
	Black(0,100,60);
	WaitC(60);
	Black(0,100,0);
	
	SetWaku(0);
	//

//	ResetFade();
	KaguTest(20065,7);
	Black(0,100,0);
	KaguTest(99981,0);
	KaguTest(99980,0);
	
	ch[1513] = 1;
	ch[1509] = 1;

//	Mes("モグロウ発見ムービー（仮）");
//	Wait(30);
	
	KaguTest(10100,0);
	ch[420] = 0;
	KaguTest(30104,16);
	ch[298] = 1;
	KaguTest(99999,0);
	
	Mouse(1);
	KaguTest(99990,0);
	Black(0,100,15);
	Wait(15);
	Black(0,100,0);
	ch[298] = 0;
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,1);
	Wait(10);
	Black(0,0,15);

	TekiStop(0);
	MapEvent(1);
	Mouse(1);
}
#EndScript

// 502:あたりに触れると円盤発動
#Script:01241
int main()
{
	int c;
	int pt;
	
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c = ch[420];
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(12004,c);
	KaguTest(12011,c);
	ch[420] = 2;
	KaguTest(12012,c);
	pt = ch[420];
	ch[420] = -1;
	KaguTest(12002,c);
	SaveCamera();
	ch[420] = 650;
	ch[421] = 8079;
	ch[422] = 70;
	ch[423] = 650;
	ch[424] = 9050;
	ch[425] = -150;
	KaguTest(30019,1);
	CrossFade();
	Wait(25);

	Walk2(c,-19,0,33);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	Wait(45);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[420] = pt;
	KaguTest(12002,c);
	KaguTest(30090,c);

	ch[420] = 3;
	KaguTest(12005,c);
//	ch[420] = 0;
//	KaguTest(12012,c);
}
#EndScript

// 502:宝箱開けると敵に見つかる
#Script:01242
int main()
{
	int c;
	int pt;
	
	TekiStop(1);
	Wait(45);
	
	KaguTest(30025,2);
	c = ch[420];
	ch[427] = 7;
	ch[420] = 100000;
	KaguTest(30015,2);
	KaguTest(12004,c);
	pt = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);

	ch[420] = -1350;
	ch[421] = 13283;
	ch[422] = 239;
	ch[423] = -1350;
	ch[424] = 11350;
	ch[425] = 0;
	KaguTest(30093,15);
	KaguTest(30019,14);
	CrossFade();

	ch[424] = -1375;
	ch[425] = 11250;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,c);
	ch[423] = ch[423] * 2;
	Walk2(c,ch[421]/2,ch[422]/2,ch[423]);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(c+1,ch[421]/2,ch[422]/2,ch[423]);
	KaguTest(30039,0);
	Wait(ch[423]);
	Look(c,0);
	Look(c+1,0);
	ch[420] = pt;
	KaguTest(12002,c);
	KaguTest(12002,c+1);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);

	TekiStop(0);
	Wait(30);
	KaguTest(30019,0);

}
#EndScript

// ステージガラクタ発生（出現高さ補正＋４０）（コンティニュー時には出さない）
// ch[420]発生させたい掘削ポイント
// ch[421]ガラクタ数
#Script:01243
int main()
{
	int grnum;
	int i;
	
	// コンティニュー時には出さない
	if(ch[1097])
	{
		return 0;
	}
	
	grnum = ch[421];
	KaguTest(60004,ch[420]);
	ch[422] = ch[422] + 40;
	ch[423] = 0;
	
//	for (i = 0;i < grnum;i++)
//	{
//		KaguTest(40004,0);
//	}
}
#EndScript

// 112:初スライム
#Script:01244
int main()
{
	ch[2120] = 1;
	int x;
	int y;
	int z;
	GetCharPos(58,x,y,z);
	KaguTest(30122,58);
	if (x < -20000 || ch[420])
	{
		// ファントム死んでる
		return 0;
	}
	
	TekiStop(1);
	Look(0,58);
//	Camera(0,-150,50,370);
	Camera(58,-150,1450,370);
	Wait(45);
	Camera(0,-150,50,370);
	Wait(10);
	Message(0,"あいつがファントムね","","","");
//	ch[420] = 15;
//	ch[421] = 60;
//	KaguTest(30053,58);
//	Wait(30);
	Camera(-1,0,0,0);
	TekiStop(0);
}
#EndScript

// 112:初鎧スライム
#Script:01245
int main()
{
	int keihou;
	keihou = 0;
	ch[301] = 1;
	TekiStop(1);
	int ln;
	int i;
	ln = Door2C(2);
	Camera(ln,350,4075,300);
	Walk(0,8,10);
	CrossFade();
	Wait(30);
	
	for (i = 0;i < 4;i++)
	{
		if (keihou < 2)
		{
			SE(519);
			keihou++;
		}
		if (i == 2)
		{
			Look(0,ln);
		}
		ch[420] = 100;
		ch[421] = 50;
		ch[422] = 50;
		KaguTest(30046,15);
		Wait(10);
		if (i == 3)
		{
			ln = Door2C(1);
			Look(0,59);
			Camera(59,-575,3735,305);
			CrossFade();
			Walk2(59,-10,0,60);
			ch[420] = 15;
			ch[429] = 1;
			KaguTest(30036,59);
		}
		Wait(5);
		ch[420] = 100;
		ch[421] = 100;
		ch[422] = 100;
		KaguTest(30046,15);
		Wait(10);
		if (i == 0)
		{
			// エモ出し
			// きょろきょろ
			ch[420] = 15;
			ch[428] = 0;
			ch[429] = 1;
			KaguTest(30036,0);
			KaguTest(30019,12);
		}
		if (i == 1)
		{
			KaguTest(30019,0);
			Event(301);
		}
		Wait(5);
	}
	Event(302);
	Wait(40);
	Look(59,0);
	Look(0,59);
	Wait(10);
	Camera(-1,0,0,0);
	CrossFade();
	Wait(10);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,59);
	
	TekiStop(0);
	

	return 0;
}
#EndScript

// 112:鎧スライム倒したら扉開く
#Script:01246
int main()
{
	ch[302] = 1;
	TekiStop(1);
	Wait(10);
	SE(950);
	SaveCamera();
//	Camera(Door2C(2),350,4075,300);
//	CrossFade();
//	Wait(20);
	Event(303);
//	Wait(45);
	Camera(Door2C(1),-575,3735,285);
	CrossFade();
	Wait(20);
	Event(304);
	Wait(60);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	TekiStop(0);
}
#EndScript

// 103:敵倒してしまった場合
#Script:01247
int main()
{
	ch[300] = 1;
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	KaguTest(30015,3);
}
#EndScript

// 104裏：あたりに触れたら敵現れる
#Script:01248
int main()
{
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	ch[420] = 10;
	KaguTest(30042,101);
}
#EndScript

// 104裏：ドア開ける
#Script:01249
int main()
{
	KaguTest(30091,Door2C(1));
}
#EndScript

// 104裏：火が全部点いていれば扉開ける
#Script:01250
int main()
{
	int ln;
	
	if (!ch[304] && (ch[300] || ch[301]))
	{
		ch[304] = 1;
		ch[420] = 100000;
		ch[427] = 3;
		KaguTest(30015,3);
	}
	if (!ch[305] && (ch[301] || ch[302]))
	{
		ch[305] = 1;
		ch[420] = 100000;
		ch[427] = 3;
		KaguTest(30015,4);
	}
	if (!ch[306] && (ch[302] || ch[303]))
	{
		ch[306] = 1;
		ch[420] = 100000;
		ch[427] = 3;
		KaguTest(30015,5);
	}
	if (!ch[307] && (ch[303] || ch[300]))
	{
		ch[307] = 1;
		ch[420] = 100000;
		ch[427] = 3;
		KaguTest(30015,2);
	}
	
	if (!ch[300] || !ch[301] || !ch[302] || !ch[303])
	{
		return 0;
	}

	SaveCamera();
	
	TekiStop(1);
	ln = Door2C(2);
	Wait(20);
	Camera(ln,-150,-2310,-263);
	CrossFade();
	Wait(30);
	Event(209);
	Wait(45);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
		
	TekiStop(0);
}
#EndScript

// 103裏：あたりに触れたら壁の中からアーマースライム現れる
#Script:01251
int main()
{
	int i;
	
	ch[300] = 1;
	TekiStop(1);
	SaveCamera();
	KaguTest2(30016,0,"b4b6b4b6L");
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	ch[420] = -150;
	ch[421] = -2100;
//	for(i = 170;i > 0;i = i - 6)
//	{
//		KaguTest(20042,i);
//		Wait(1);
//	}
	KaguTest(30072,0);
	Wait(45);
	
	ch[420] = 828;
	ch[421] = -2081;
	ch[422] = 444;
	ch[423] = -240;
	ch[424] = -2082;
	ch[425] = 121;
	KaguTest(30019,1);
	CrossFade();
	KaguTest2(30016,0,"b3b7b3b7L");
	Wait(30);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	CharPos(ch[420],-375,-2100,0);
	Look(ch[420],0);
	Ksk(1);
	KaguTest2(30016,0,"C3C6C1C9C3C9B1B9B3B64545454455444555");
	Walk2(ch[420],5,0,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(60);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	TekiStop(0);
}
#EndScript

// 103裏：壁壊したらアーマースライムが奥に現れる
#Script:01252
int main()
{
	ch[300] = 1;
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
}
#EndScript

// 113裏：あたりに触れたら敵がとげ鉄球転がしてくる
#Script:01253
int main()
{
	int c1;
	
	ch[300] = 1;

	TekiStop(1);
	SaveCamera();
	KaguTest(30025,1);
	c1 = ch[420];

	ch[420] = 2;
	KaguTest(12005,c1);
	
	Look(0,c1);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);

	ch[420] = -1600;
	ch[421] = 1200;
	ch[422] = 740;
	ch[423] = -2756;
	ch[424] = 1200;
	ch[425] = 700;
	KaguTest(30093,30);
	KaguTest(30019,14);
	Wait(30);

	// カメラ設定
	ch[420] = -1600;
	ch[421] = 1200;
	ch[422] = 740;
	ch[423] = -2756;
	ch[424] = 1425;
	ch[425] = 700;
	KaguTest(30093,14);

	// 一つ目とげとげ出すへ
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 1425;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423] + 5);
	Wait(2);
	ch[421] = 11;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(17);
		// カメラ設定
		ch[420] = -1600;
		ch[421] = 1200;
		ch[422] = 740;
		ch[423] = -2756;
		ch[424] = 875;
		ch[425] = 700;
		KaguTest(30093,70);
	// 二つ目へ
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 1315;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423]);
	Wait(2);
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,2);
	ch[420] = 0;
	KaguTest(30095,c1);
	ch[421] = 11;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(12);
	// 三つ目へ
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 1205;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423]);
	Wait(2);
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,3);
	ch[420] = 0;
	KaguTest(30095,c1);
	ch[421] = 11;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(12);
	// 四つ目へ
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 1095;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423]);
	Wait(2);
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,4);
	ch[420] = 0;
	KaguTest(30095,c1);
	ch[421] = 11;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(12);
	// 五つ目へ
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 985;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423]);
	Wait(2);
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,5);
	ch[420] = 0;
	KaguTest(30095,c1);
	ch[421] = 11;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(12);
	// 遠ざかる
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 875;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423]);
	Wait(2);
	ch[420] = 100000;
	ch[427] = 1;
	KaguTest(30015,6);
	ch[420] = 1;
	KaguTest(30095,c1);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,c1);
	Wait(12);
	Look(c1,0);
	Wait(5);
	// ハートマーク
	ch[420] = 13;
	ch[429] = 1;
	KaguTest(30036,c1);
	Wait(45);
	
	// 逃げる
	KaguTest(30061,0);
	ch[424] = -2700;
	ch[425] = 450;
	ch[426] = 12;
	KaguTest(30060,c1);
	Walk2(c1,ch[421],ch[422],ch[423] + 10);
	ch[427] = ch[423];
	// カメラ設定
	ch[420] = -1600;
	ch[421] = 1200;
	ch[422] = 1040;
	ch[423] = -2756;
	ch[424] = 450;
	ch[425] = 700;
	KaguTest(30093,ch[427]);
	Wait(ch[427] + 10);
	Look(c1,0);
	Wait(30);
	
	ch[420] = 400;
	ch[421] = 1200;
	ch[422] = 965;
	ch[423] = -2700;
	ch[424] = 1200;
	ch[425] = 600;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	TekiStop(0);
	Wait(30);
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[420] = 3;
	KaguTest(12005,c1);
	ch[420] = 8;
	ch[421] = 100;
	KaguTest(30092,c1);
}
#EndScript

// 102裏：敵の初期ルーチン（赤色灯火門番）解除
#Script:01254
int main()
{
	KaguTest(30025,6);
	ch[422] = ch[420];
	ch[420] = -1;
	ch[421] = 0;
	KaguTest(30092,ch[422]);
}
#EndScript

// 104:敵運んでくる
#Script:01255
int main()
{
	int tmp1;
	int tmp2;
	// パリン少し前に進みながら敵が運ばれてくる
	KaguTest(30061,0);
	ch[424] = 150;
	ch[425] = -2300;
	ch[426] = 12;
	KaguTest(30060,0);
	Walk(ch[421],ch[422],ch[423]);
	tmp1 = ch[423];
	ch[420] = 150;
	ch[421] = -2700;
	ch[422] = 950;
	ch[423] = 150;
	ch[424] = -1554;
	ch[425] = -430;
	KaguTest(30093,60);
	KaguTest(30019,14);

	tmp2 = 60;	
	if (tmp1 < tmp2)
	{
		Wait(tmp1);
		ch[420] = 150;
		ch[421] = -1000;
		KaguTest(30070,0);
		tmp2 = tmp2 - tmp1;
		tmp1 = 0;
	}
	else
	{
		tmp1 = tmp1 - tmp2;
	}
	Wait(tmp2);
	// こうもり発生
	ch[420] = 100000;
	ch[421] = 7;
	KaguTest(30015,78);
	
	int pt[4];
	int c;
	KaguTest(30025,78);
	c = ch[420];
	int i;
	for (i = 0;i < 4;i++)
	{
		ch[420] = 2;
		KaguTest(12005,c + i);
//		pt[i] = ch[420];
//		KaguTest(12000,c + i);
	}
	
	tmp2 = 150 - tmp1;
	Wait(tmp1);
	ch[420] = 150;
	ch[421] = -1000;
	KaguTest(30070,0);
	// カメラ移動
	ch[420] = 475;
	ch[421] = -3300;
	ch[422] = 375;
	ch[423] = 150;
	ch[424] = -1550;
	ch[425] = -50;
	KaguTest(30093,0);
	ch[420] = 150;
	ch[421] = -1850;
	ch[422] = 20;
	ch[423] = 150;
	ch[424] = -1850;
	ch[425] = 20;
	KaguTest(30094,tmp2-30);
	KaguTest(30019,14);
	KaguTest(30025,78);
	ch[421] = ch[420];
	ch[420] = -1;
	KaguTest(30098,ch[421] + 1);
	KaguTest(30098,ch[421] + 3);
	Wait(tmp2 + 30);
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	KaguTest(30025,78);
	ch[421] = ch[420];
	ch[420] = 0;
	KaguTest(30098,ch[421] + 1);
	KaguTest(30098,ch[421] + 3);

	for (i = 0;i < 4;i++)
	{
		ch[420] = 3;
		KaguTest(12005,c + i);
//		ch[420] = pt[i];
//		KaguTest(12002,c + i);
	}
}
#EndScript

// 012:ピノ助けるまではオバケホームの方には進ませない
#Script:01256
int main()
{
	MapEvent(0);
//	Message(0,"この先は行っちゃだめだって","じーちゃんが言ってたわね","","");

	ch[420] = -100;
	ch[421] = 2700;
	ch[422] = 0;
	ch[423] = 17;
	KaguTest(30065,0);
	MapEvent(1);
}
#EndScript

// 103:掘削したら宝箱落ちてくる
#Script:01257
int main()
{
	ch[420] = Takara2C(2400);
	if (ch[420])
	{
		KaguTest(30004,101);
	}
	ch[420] = Takara2C(2832);
	if (ch[420])
	{
		KaguTest(30004,101);
	}
	ch[380] = 1;
}
#EndScript

// 601:別荘建設予定地立て札
#Script:01258
int main()
{
	Message(0,"何か書いてある","","","");

	KaguTest(10006,1);
	KaguTest(10007,0);
	KaguTest2(10008,0,"ここは別荘の建設予定地なんダナー");
	KaguTest2(10008,1,"不法侵入はお断り願いたいんダナー");
	KaguTest2(10008,3,"s200ペケ");
	KaguTest(10010,10);
	
	Wait(10);
	
	Message(0,"","","","");
	
	KaguTest(10011,10);
	
	Message(0,"この先には行けないみたいね","","","");
}
#EndScript

// 507:ファイア台座教える
#Script:01259
int main()
{
	int x;
	int y;
	int z;
	int ax;
	int ay;
	int az;
	
	KaguTest(30005,0);
	x = ch[421];
	y = ch[422];
	z = ch[423];
	KaguTest(30068,0);
	ax = ch[423];
	ay = ch[424];
	az = ch[425];

	Message(0,"どうやったら開くのかしら？","","","");
	ch[420] = 40;
	ch[421] = 496;
	ch[422] = 236;
	ch[423] = -200;
	ch[424] = 1050;
	ch[425] = 0;
	KaguTest(30093,15);
	ch[420] = -200;
	ch[421] = 1050;
	ch[422] = 0;
	KaguTest(30094,15);
	KaguTest(30019,15);
	CrossFade();
	ch[420] = -200;
	ch[421] = 1050;
	KaguTest(30070,0);
	ch[420] = 0;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,0);
	Wait(5);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,0);
	Wait(45);

	ch[420] = -40;
	ch[421] = 496;
	ch[422] = 236;
	ch[423] = 200;
	ch[424] = 1050;
	ch[425] = 0;
	KaguTest(30093,30);
	ch[420] = 200;
	ch[421] = 1050;
	ch[422] = 0;
	KaguTest(30094,30);
	KaguTest(30019,15);
	ch[420] = 200;
	ch[421] = 1050;
	KaguTest(30070,0);
	ch[420] = 0;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,0);
	Wait(7);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,0);
	Wait(45);
	
	ch[420] = x;
	ch[421] = y;
	ch[422] = z;
	ch[423] = ax;
	ch[424] = ay;
	ch[425] = az;
	KaguTest(30093,15);
	ch[420] = ax;
	ch[421] = ay;
	ch[422] = az;
	KaguTest(30094,15);
	KaguTest(30019,15);
	CrossFade();
	Wait(15);
	KaguTest(30019,0);
	Message(0,"飾台が怪しいわね","","","");
}
#EndScript

// 507:ファイア台座チェック
#Script:01260
int main()
{
	int a;
	int b;
	KaguTest(20031,0);
	KaguTest(20030,ch[421]);
	a = ch[420];
	KaguTest(20031,1);
	KaguTest(20030,ch[421]);
	b = ch[420];
	
	if (a && b)
	{
		// 両方とも火がついている
		Wait(15);
		SE(950);
		Camera(Door2C(1),0,50,565);
		CrossFade();
		Wait(25);
		Event(303);
		Wait(45);
		Camera(-1,0,0,0);
		CrossFade();
		Wait(15);
		ch[300] = 1;
		ch[420] = 0;
		ch[421] = 1225;
		KaguTest(30011,0);
		ch[2076] = 1;
	}
}
#EndScript

// 503:かぼちゃ倒すと次の敵ふってくる
#Script:01261
int main()
{
	SaveCamera();

	ch[201] = 1;
	Wait(15);

	TekiStop(1);

	ch[420] = 2586;
	ch[421] = 8279;
	ch[422] = 350;
	ch[423] = 1835;
	ch[424] = 8973;
	ch[425] = -179;
	KaguTest(30093,15);
	KaguTest(30019,14);
	CrossFade();
	Wait(20);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,7);
	Wait(30);

	ch[420] = 2365;
	ch[421] = 8184;
	ch[422] = 164;
	ch[423] = 2155;
	ch[424] = 9369;
	ch[425] = -179;
	KaguTest(30093,15);
	ch[420] = 2155;
	ch[421] = 9369;
	ch[422] = -179;
	KaguTest(30094,15);
	KaguTest(30019,15);
	CrossFade();
	Wait(20);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,5);
	Wait(30);

	ch[420] = 2702;
	ch[421] = 8194;
	ch[422] = 197;
	ch[423] = 3123;
	ch[424] = 9444;
	ch[425] = -179;
	KaguTest(30093,15);
	ch[420] = 3123;
	ch[421] = 9444;
	ch[422] = -179;
	KaguTest(30094,15);
	KaguTest(30019,15);
	CrossFade();
	Wait(20);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,6);
	Wait(30);

	ch[420] = 1947;
	ch[421] = 7798;
	ch[422] = 386;
	ch[423] = 3039;
	ch[424] = 8711;
	ch[425] = -179;
	KaguTest(30093,15);
	ch[420] = 3039;
	ch[421] = 8711;
	ch[422] = -179;
	KaguTest(30094,15);
	KaguTest(30019,15);
	CrossFade();
	Wait(20);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,8);
	Wait(30);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 504:あたりに触れると角が現れる
#Script:01262
int main()
{
	int c;
	int pt1;
	int pt2;
	int x;
	int y;
	int z;
	
	// 出現
	ch[420] = 100000;
	ch[427] = 6;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c = ch[420];
	// PT取得
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	// ちゃんと同期が取れるようにＮＰＣモードに変更
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	// 重力なし、壁なし
	ch[420] = 0;
	KaguTest(30041,c);
	KaguTest(30041,c+1);
	ch[420] = 1;
	KaguTest(30097,c);
	KaguTest(30097,c+1);
	// カメラを向ける
	ch[420] = -161;
	ch[421] = 2206;
	ch[422] = 109;
	ch[423] = -1094;
	ch[424] = 2742;
	ch[425] = 296;
	KaguTest(30093,30);
	ch[420] = -1094;
	ch[421] = 2742;
	ch[422] = 296;
	KaguTest(30094,30);
	KaguTest(30019,15);
	Wait(45);
	// とび下りてくる
	Walk2(c,60,0,15);
	Wait(3);
	ch[422] = 1;
	ch[421] = 15;
	KaguTest(30037,c);	// ジャンプ
	ch[420] = 1;
	KaguTest(30041,c);
	Wait(7);

	Walk2(c+1,12,0,15);
	Wait(3);
	ch[422] = 1;
	ch[421] = 15;
	KaguTest(30037,c+1);	// ジャンプ
	ch[420] = 1;
	KaguTest(30041,c+1);
		// カメラ
	ch[420] = -66;
	ch[421] = 2151;
	ch[422] = 449;
	ch[423] = -1093;
	ch[424] = 2741;
	ch[425] = 45;
	KaguTest(30093,15);
	KaguTest(30019,14);
	Wait(30);
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	// PT設定
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	// ちゃんと同期が取れるようにＮＰＣモードに変更
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	// 壁抜けオフ
	ch[420] = 0;
	KaguTest(30097,c);
	KaguTest(30097,c+1);
}
#EndScript

// 504:円盤倒したらスライム出てくる
#Script:01263
int main()
{
	int c;
	int x;
	int y;
	int z;
	KaguTest(30025,3);
	c = ch[420];
	GetCharPos(0,x,y,z);
	CharPos(c,-x - 100000,y + 500,z + 150);
	CharPos(c+1,-x - 100000 + 433,y - 250,z + 150);
	CharPos(c+2,-x - 100000 - 433,y - 250,z + 150);
	ch[420] = 100000;
	ch[427] = 0;
	KaguTest(30015,3);
}
#EndScript

// 503裏：あたりに触れると間抜け魚人出てくる
#Script:01264
int main()
{
	int c;
	int pt1;
	int pt2;

	// あたり消す
	ch[420] = 350;
	KaguTest2(30003,2,"Box01");

	TekiStop(1);

	// 敵準備
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c = ch[420];
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	ch[420] = 1;
	KaguTest(30097,c);
	KaguTest(30097,c+1);
	ch[420] = 450;
	ch[421] = 8550;
	KaguTest(30070,c);
	
	// プレイヤー動かす
	ch[424] = 1019;
	ch[425] = 8364;
	ch[426] = 12;
	KaguTest(30061,0);
	KaguTest(30060,0);
	Walk(ch[421],ch[422],30);
	
	// カメラも動く
	ch[420] = 1310;
	ch[421] = 9336;
	ch[422] = 399;
	ch[423] = 1019;
	ch[424] = 8364;
	ch[425] = -4;
	KaguTest(30093,30);
	KaguTest(30019,14);
	
	Wait(30);
	
	// 一匹目飛び掛る
	Walk2(c,21,0,25);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(5);
	ch[420] = 24;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	Wait(3);
	ch[421] = 30;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(45);
	ch[420] = 2010;
	ch[429] = 1;
	KaguTest(30036,c);
	ch[420] = 2009;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(40);
	ch[420] = 4;
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(30);
	Walk2(c,0,5,45);
	ch[429] = 0;
	KaguTest(30039,0);

	ch[420] = 1276;
	ch[421] = 9046;
	ch[422] = 179;
	ch[423] = 994;
	ch[424] = 8362;
	ch[425] = 46;
	KaguTest(30093,45);

	Wait(15);
	
	// 二匹目突撃
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	ch[420] = 450;
	ch[421] = 8550;
	KaguTest(30070,c+1);
	Walk2(c+1,21,0,25);
	ch[429] = 1;
	KaguTest(30039,0);
	Wait(5);
	ch[420] = 24;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c+1);
	Wait(3);
	ch[421] = 30;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(15);
	// ヒット！
	ch[420] = 93;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	Wait(5);
	GetCharPos(c,ch[420],ch[421],ch[422]);
	ch[422] = ch[422] + 100;
	ch[423] = 1637;
	ch[424] = 1;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	Wait(25);
	ch[420] = 2010;
	ch[429] = 1;
	KaguTest(30036,c+1);
	Wait(30);
	// もめる
//	ch[420] = 0;
//	ch[421] = 1;
//	ch[422] = 5;
//	KaguTest(12003,c);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c+1);
	Look(c,c+1);
//	Wait(5);
//	ch[420] = 2;
//	ch[421] = 1;
//	ch[422] = 5;
//	KaguTest(12003,c);
//	Wait(20);
	ch[420] = 9;	// 怒り
	ch[429] = 1;
	KaguTest(30036,c);
	Wait(60);
	
//	if (0)
//	{
//		ch[420] = 11;	// ピンチ
//		KaguTest(30036,c+1);
//		Walk2(c+1,0,-3,60);
//
//		ch[420] = 932;
//		ch[421] = 9144;
//		ch[422] = 398;
//		ch[423] = 991;
//		ch[424] = 8131;
//		ch[425] = -3;
//		KaguTest(30093,60);
//
//		Wait(60);
//		ch[420] = 12;	// ひらめき
//		KaguTest(30036,c+1);
//		Wait(45);
//		ch[420] = 8;	// はてな
//		KaguTest(30036,c);
//		Wait(45);
//		ch[420] = 15;	// ！
//		KaguTest(30036,c+1);
//		ch[420] = 6;
//		ch[421] = 1;
//		ch[422] = 5;
//		KaguTest(12003,c+1);
//		
//		ch[420] = 980;
//		ch[421] = 9433;
//		ch[422] = 383;
//		ch[423] = 988;
//		ch[424] = 8456;
//		ch[425] = -3;
//		KaguTest(30093,20);
//		
//		Wait(45);
//		ch[420] = 15;	// ！
//		KaguTest(30036,c);
//		Wait(20);
//	}
//	else
//	{
//		Wait(30);
//		ch[420] = 12;	// ひらめき
//		KaguTest(30036,c);
//		Wait(60);
//	}

	Look(c,0);
	Look(c+1,0);
	Wait(10);
//	ch[420] = 6;
//	ch[421] = 1;
//	ch[422] = 5;
//	KaguTest(12003,c);

//	ch[420] = 1150;
//	ch[421] = 10007;
//	ch[422] = 449;
//	ch[423] = 1035;
//	ch[424] = 8751;
//	ch[425] = 21;
//	KaguTest(30093,20);

//	Wait(30);
//	ch[420] = 15;	// ！
//	KaguTest(30036,0);
//	Wait(30);
	// 矛先はプレイヤーに
	
	// 後始末
	KaguTest(30019,0);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = 0;
	KaguTest(30097,c);
	KaguTest(30097,c+1);
	TekiStop(0);
}
#EndScript

// 503裏：木１切られた
#Script:01265
int main()
{
	ch[301] = 1;
	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,3);
}
#EndScript

// 503裏：木２切られた
#Script:01266
int main()
{
	ch[302] = 1;
	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,4);
}
#EndScript

// 503裏：木３切られた
#Script:01267
int main()
{
	ch[303] = 1;
	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,5);
}
#EndScript

// 503裏：木４切られた
#Script:01268
int main()
{
	ch[304] = 1;
	ch[420] = 100000;
	ch[427] = 3;
	KaguTest(30015,6);
}
#EndScript

// 205:玉転がさずにわたった
#Script:01269
int main()
{
	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");
	
	KaguTest2(30016,0,"4545L");
	
	Wait(30);
	
	SaveCamera();
	
	ch[420] = 1859;
	ch[421] = 1546;
	ch[422] = 50;
	ch[423] = 1680;
	ch[424] = 3671;
	ch[425] = -304;
	KaguTest(30019,1);
	CrossFade();
	Wait(45);
	
	Ksk(1);	// 揺れはここでリセットされるはず
	KaguTest(60004,1);
	ch[423] = 0;
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	Wait(45);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
}
#EndScript

// 205裏：301:309:305:211:火飾台点ける
#Script:01270
int main()
{
	KaguTest(20010,0);
	if (ch[420] == 305)
	{
		KaguTest(20031,0);
		ch[420] = 0;
		KaguTest(20045,ch[421]);
		KaguTest(20045,ch[421]+1);
		KaguTest(20045,ch[421]+2);
		return 0;
	}
	if (ch[420] == 301)
	{
		KaguTest(20031,0);
		ch[420] = 0;
		KaguTest(20045,ch[421]);
		return 0;
	}
	if (ch[420] == 211)
	{
		KaguTest(20031,0);
		ch[420] = 2;
		KaguTest(20045,ch[421]);
		return 0;
	}
	
	// それ以外
	KaguTest(20031,0);
	ch[420] = 0;
	KaguTest(20045,ch[421]);
}
#EndScript

// 205裏：火飾台消すと敵沸く
#Script:01271
int main()
{
	ch[251] = 1;
	int keihou;
	keihou = 0;
	TekiStop(1);
	Wait(15);
	Camera(0,-1680,-3290,-435);
	CrossFade();
	
	int i;
	
	for(i = 0;i < 4;i++)
	{
		if (keihou < 2)
		{
			keihou++;
			SE(519);
		}
		ch[420] = 100;
		ch[421] = 50;
		ch[422] = 50;
		KaguTest(30046,15);
		Wait(15);
		ch[420] = 100;
		ch[421] = 100;
		ch[422] = 100;
		KaguTest(30046,15);
		Wait(10);
		if (i == 0)
		{
			// エモ出し
			// きょろきょろ
			ch[420] = 15;
			ch[428] = 0;
			ch[429] = 1;
			KaguTest(30036,0);
			KaguTest(30019,12);
		}
		if (i == 1)
		{
			KaguTest(30019,0);
		}
		if (i == 2)
		{
			ch[420] = 100000;
			ch[427] = 1;
			KaguTest(30015,2);
			Look(0,59);
			int c;
			KaguTest(30025,2);
			c = ch[420];
			KaguTest(12011,c);
			KaguTest(12011,c+1);
			ch[420] = 2;
			KaguTest(12012,c);
			KaguTest(12012,c+1);
		}
		Wait(5);
	}
	Camera(-1,0,0,0);
	CrossFade();
	TekiStop(0);
}
#EndScript

// 202裏：宝箱開けると敵が水の中から現れる
#Script:01272
int main()
{
	SaveCamera();
	ch[301] = 1;
	
	Wait(60);
	
	ch[420] = 2273;
	ch[421] = 6925;
	ch[422] = 506;
	ch[423] = 1270;
	ch[424] = 6688;
	ch[425] = -242;
	KaguTest(30019,1);
	CrossFade();
	Wait(10);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	int c;
	c = ch[420];
	ch[420] = 2;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	Wait(5);
	Walk2(c,10,0,20);
	ch[429] = 0;
	KaguTest(30039,0);
	Walk2(c+1,3,-7,20);
	KaguTest(30039,0);
	Walk2(c+2,3,7,20);
	KaguTest(30039,0);
	ch[421] = 60;
	ch[422] = 1;
	KaguTest(30037,c);
	KaguTest(30037,c+1);
	KaguTest(30037,c+2);
	KaguTest(20047,0);
	Look(0,c);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	ch[420] = 1425;
	ch[421] = 6770;
	ch[422] = -35;
	ch[423] = 171;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	ch[421] = 6675;
	KaguTest(30045,0);
	ch[421] = 6862;
	KaguTest(30045,0);
	Wait(20);
	Look(c,0);
	Look(c+1,0);
	Look(c+2,0);
	Wait(20);

	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c);
	KaguTest(30090,c+1);
	KaguTest(30090,c+2);
}
#EndScript

// ダイヤモンド使用
#Script:01273
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"永遠の輝きって言うけれど");
	KaguTest2(10008,1,"本当なのかしら？");
	
	KaguTest(10012,0);
}
#EndScript

// 610:敵変換
#Script:01274
int main()
{
	ch[420] = 42;
	KaguTest(12008,1);
}
#EndScript

// 604:あたりに触れるとスライム振ってくる
#Script:01275
int main()
{
	SaveCamera();
	ch[420] = 2891;
	ch[421] = 4250;
	ch[422] = 110;
	ch[423] = 3246;
	ch[424] = 5721;
	ch[425] = 846;
	KaguTest(30093,30);
	KaguTest(30019,14);
	
	ch[420] = 100000;
	ch[427] = 6;
	KaguTest(30015,1);
	KaguTest(30025,1);
	int c;
	c = ch[420];
	ch[420] = 0;
	KaguTest(30041,c);
	KaguTest(30041,c+1);
	KaguTest(30041,c+2);
	int pt1;
	int pt2;
	int pt3;
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	KaguTest(12000,c+2);
	ch[420] = 1;
	KaguTest(30097,c);
	KaguTest(30097,c+1);
	KaguTest(30097,c+2);
	
	Wait(30);

	Walk2(c,-8,-20,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(2);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c);
	ch[420] = 1;
	KaguTest(30041,c);
	Wait(13);
	Walk2(c+1,-8,-20,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(2);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+1);
	ch[420] = 1;
	KaguTest(30041,c+1);
	Wait(13);
	Walk2(c+2,-8,-20,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(2);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c+2);
	ch[420] = 1;
	KaguTest(30041,c+2);
	Wait(13);
	
	KaguTest(30019,0);
	Look(c,0);
	Look(c+1,0);
	Look(c+2,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = pt3;
	KaguTest(12002,c+2);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	ch[420] = 0;
	KaguTest(30097,c);
	KaguTest(30097,c+1);
	KaguTest(30097,c+2);
}
#EndScript

// 605:レバー引くとリフト動く＆敵がリフトに乗ってやってくる
#Script:01276
int main()
{
	ch[301] = 1;

	// 敵沸く
	int c;
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	c = ch[420];
	int pt1;
	int pt2;
	int pt3;
	int pt4;
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12004,c+3);
	pt4 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	KaguTest(12000,c+2);
	KaguTest(12000,c+3);

	// リフト動く
	Wait(15);
	SE(950);
	
	SaveCamera();

	ch[420] = -804;
	ch[421] = 459;
	ch[422] = 1875;
	ch[423] = 255;
	ch[424] = 27;
	ch[425] = 1420;
	KaguTest(30093,15);
	KaguTest(30019,14);
	CrossFade();
	Wait(15);
	
	ch[420] = 1;
	ch[421] = 0;
	KaguTest(30110,32);
	c = ch[420];
	ch[420] = 0;
	KaguTest2(30023,c,"");
	ch[420] = c;
	ch[421] = 1;
	KaguTest(20062,0);
	ch[421] = 2;
	KaguTest(20044,ch[422]);
	ch[420] = 1;
	KaguTest2(30023,c,"@RopewayRoot1");

	// 敵やってくる
	Wait(45);

//	ch[420] = 1290;
//	ch[421] = 973;
//	ch[422] = 1875;
//	ch[423] = 2991;
//	ch[424] = 279;
//	ch[425] = 1420;
	ch[420] = 1577;
	ch[421] = 697;
	ch[422] = 1823;
	ch[423] = 2704;
	ch[424] = 330;
	ch[425] = 1420;
	KaguTest(30093,20);
	Wait(20);
//	ch[420] = -1264;
//	ch[421] = 360;
//	ch[422] = 1840;
//	ch[423] = 1068;
//	ch[424] = 273;
//	ch[425] = 1420;
	ch[420] = -319;
	ch[421] = 404;
	ch[422] = 1703;
	ch[423] = 897;
	ch[424] = 325;
	ch[425] = 1420;
	KaguTest(30093,170);
	Wait(140);
	KaguTest(30025,1);
	c = ch[420];
	Look(c,0);
	Look(c+1,0);
	Look(c+2,0);
	Look(c+3,0);
	Wait(30);
	Look(c,0);
	Look(c+1,0);
	Look(c+2,0);
	Look(c+3,0);

	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	KaguTest(12005,c+3);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = pt3;
	KaguTest(12002,c+2);
	ch[420] = pt4;
	KaguTest(12002,c+3);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();

	// ついでに魚人設定しておく
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,2);
	ch[420] = 15;
	KaguTest(30042,403);
}
#EndScript

// 605:魚人設定
#Script:01277
int main()
{
	int c;
	KaguTest(30025,2);
	c = ch[420];
	ch[420] = 8;
	KaguTest2(30023,c,"@lift4root");
	KaguTest2(30023,c+1,"@lift3root");
	ch[420] = c;
	ch[421] = 9;
	KaguTest(20044,4100);
	ch[420] = c+1;
	KaguTest(20044,4100);
	ch[420] = c;
	ch[421] = 10;
	KaguTest(20044,1);
	ch[420] = c+1;
	KaguTest(20044,1);
	ch[420] = -1;
	KaguTest(30051,c);
	KaguTest(30051,c+1);
}
#EndScript

// 605:敵に見つかるとすごいの出てくる
#Script:01278
int main()
{
	ch[302] = 1;
	SaveCamera();
	
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,3);
	KaguTest(30025,3);
	int c;
	c = ch[420];
	int pt1;
	int pt2;
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12000,c);

	// 一匹目	
	ch[420] = 5605;
	ch[421] = -1079;
	ch[422] = 3130;
	ch[423] = 4297;
	ch[424] = -560;
	ch[425] = 2495;
	KaguTest(30093,30);
	KaguTest(30019,14);
	
	Walk2(c,12,-17,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);

	ch[420] = 4945;
	ch[421] = 471;
	ch[422] = 3046;
	ch[423] = 5233;
	ch[424] = -454;
	ch[425] = 2720;
	KaguTest(30093,45);
	
	Walk2(c,22,-2,20);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(20);
	Look(0,c);
	Walk2(c,16,15,30);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(15);
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(15);
	Look(c,0);
	Look(0,c);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,4);
	Look(c+1,0);
	KaguTest(12000,c+1);
	Wait(45);
	
	// ２匹目
	ch[420] = 4483;
	ch[421] = -449;
	ch[422] = 2999;
	ch[423] = 4788;
	ch[424] = 702;
	ch[425] = 3070;
	KaguTest(30093,30);
	Wait(45);
	ch[420] = 5528;
	ch[421] = -1100;
	ch[422] = 3281;
	ch[423] = 4748;
	ch[424] = 356;
	ch[425] = 2695;
	KaguTest(30093,45);
	
	Walk2(c+1,3,-20,15);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(2);
	ch[421] = 30;
	ch[422] = 1;
	KaguTest(30037,c+1);
	Wait(30);
	Look(0,c+1);
	Look(c+1,0);
	Wait(45);
	
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = 1;
	ch[421] = 1;
	ch[422] = 1;
	KaguTest(30090,c-1);
	KaguTest(30090,c-2);
	ch[420] = 100;
	ch[421] = 100;
	ch[422] = 100;
	KaguTest(30046,0);
}
#EndScript

// 605:敵倒すと扉開く
#Script:01279
int main()
{
	Wait(15);
	SE(950);
	ch[303] = 1;

	SaveCamera();
	ch[420] = 4830;
	ch[421] = -969;
	ch[422] = 3305;
	ch[423] = 4815;
	ch[424] = 630;
	ch[425] = 2770;
	KaguTest(30019,1);
	CrossFade();
	Wait(30);
	Event(405);
	Wait(45);
	KaguTest(30019,0);
	RestoreCamera();
	CrossFade();
}
#EndScript

// ラッシー会話
#Script:01280
int main()
{
	ch[400] = 58;
	ch[258]++;
	if (ch[1538])
	{
		// エピローグ
		//ラッシー
		if (ch[258] < 2)
		{
			//ラッシー
			Message(58,"異次元からの出口を","アタシたちが知っててよかったわ","","");
			Message(58,"ヘタしたら、何十年も","グレートファングをさまようことに","なったかもしれないのよぉン","");
			Message(58,"感謝してちょうだい","","","");
			Message(58,"…でも、その前にあなたが","トカロンを倒してくれたから","助かったのよねぇン","");
		}
		else
		{
			//ラッシー
			Message(58,"異次元からの出口を","アタシたちが知っててよかったわ","","");
			Message(58,"ヘタしたら、何十年も","グレートファングをさまようことに","なったかもしれないのよぉン","");
		}
		ch[400] = -1;
		return 0;
	}

	if (ch[1571] && !ch[1538])
	{
		//ラッシー
		Message(58,"ラッシーと王子は","お似合いのカップルですってぇン","","");
		Message(58,"いやぁン、モスビーも","なかなか見る目があるわねぇン","","");
	}	
	if (ch[1513] && !ch[1571])
	{
		if (ch[258] < 2)
		{
			//ラッシー
			Message(58,"ラッシーはとても美人でまるで","芸術品のようだと叫んでるわぁン","","");
			Message(58,"いやぁン、モスビーったら、","照れちゃうじゃない。","トーゼンよ、トーゼン！","");

			//パリン
			Message(0,"…………………………","","","");

			//ラッシー
			Message(58,"……何よ？","","","");
		}
		else
		{
			//ラッシー
			Message(58,"ラッシーはとても美人でまるで","芸術品のようだと叫んでるわぁン","","");
		}
	}
	if (!ch[1513])
	{
		Message(58,"アタシにはモスビーの","言葉が分かるのよぉン","","");
		Message(58,"何を言ってるの聞きたかったら","アタシに聞くといいわぁン","","");
	}

	ch[400] = -1;
}
#EndScript

// モスビー会話
#Script:01281
int main()
{
	ch[400] = 59;
	if (ch[1538])
	{
		// エピローグ
		ch[259]++;
		if (ch[259] < 2)
		{
			//モスビー
			Message(59,"ｃ＼ｃ＼６０ｌｕｙｑ＠９，","","","");
			Message(59,"ｆ７ｈ３ｔ＠Ｚｗ","７ｇｉｈｑ＾＠ｉｅｇｑｅｕ","","");

			//パリン
			Message(0,"最後まで何を言ってるのか","分からなかったわね","","");
		}
		else
		{
			//モスビー
			Message(59,"ｃ＼ｃ＼６０ｌｕｙｑ＠９，","","","");
			Message(59,"ｆ７ｈ３ｔ＠Ｚｗ","７ｇｉｈｑ＾＠ｉｅｇｑｅｕ","","");
		}
		ch[400] = -1;
		return 0;
	}
	
	ch[259]++;

	if (ch[1571] && !ch[1538])
	{
		//モスビー
		Message(59,"ｅｚｊｗ＠ｍｂｓ＠ｍｄ＠’","ｅｏ；ｕｅｙｑ＠９，","","");

//		//パリン
//		Message(0,"何だか怒ってるわね","","","");
	}
	if (ch[1513] && !ch[1571])
	{
		//モスビー
		Message(59,"，ｂ＠ｓｆｅ０ｕｅｗ＠９","ａ）４ａｙ３ｙｂ４ｑ＠９，","","");
	}
	if (ch[1505] && !ch[1513])
	{
		//モスビー
		Message(59,"６ｅ６ｅ、ｗｇｓーｕｂｓ","ｅＺｗ．９……","","");
	}
	if (!ch[1505])
	{
		//モスビー
		Message(59,"ｕｉｄｉｇｑｋ？","７．ｑ＠：］ｑ＠ｑ＠９，","","");
		Message(59,"ｄ＠ｙｐｅ、ｂｙｕｍｋｑ＠Ｚｗ","","","");
	}
	ch[400] = -1;
}
#EndScript

// クリーム会話	//クリームは普通のキャラ
#Script:01282
int main()
{
	ch[400] = 60;
	ch[260]++;
	if (ch[1538])
	{
		// エピローグ
		//クリーム
		Look(60,0);
		if (ch[260] < 2)
		{
			Message(60,"プクはわたしが落とした","王子の写真を見て変装したみたい","","");
			Message(60,"でも、本物の王子はゼッタイ","どこかにいるはずだって！","","");
			Message(60,"王国を滅ぼしたトカロンを","やっつけることはできたしぃー","","");
			Message(60,"落ち着いたら、みんなで","迎えに行かなくちゃね","","");
		}
		else
		{
			Message(60,"プクはわたしが落とした","王子の写真を見て変装したみたい","","");
			Message(60,"でも、本物の王子はゼッタイ","どこかにいるはずだって！","","");
		}
		ch[400] = -1;
		return 0;
	}
	
	//クリーム
	Look(60,0);
//	if (ch[2112])
//	{
//		//クリーム
//		if (ch[260] < 2)
//		{
//			Message(60,"………………","","","");
//			Message(60,"王子…一体どうして……","","","");
//			Message(60,"まるで王子じゃないみたいだった……","","","");
//		}
//		else
//		{
//			Message(60,"王子…一体どうして……","","","");
//		}
//	}
	if (ch[1571])
	{
		Message(60,"よし……","","","");
		Message(60,"ワタシ決めたわ……","","","");
	}
	else
	{
		if (ch[260] < 2)
		{
			// 10/20 15:00テキスト
			//パリン
			Message(0,"無事だったのね","","","");
			//クリーム
			Message(60,"………………","","","");
			Message(60,"王子…一体どうして……","","","");
			Message(60,"まるで王子じゃないみたいだった……","","","");
			//パリン
			Message(0,"事情は分からないけど","わたしはこれから王子を追うわ","","");
			Message(0,"知りたいことがあるなら","あんたも来ればいいじゃない","","");
			//クリーム
			Message(60,"…今はそんな気分に","なれないっつーの","","");
			//パリン
			Message(0,"そっか……","","","");
			
			if (!ch[2112])
			{
				//クリーム
				Message(60,"……………………","","","");
				Message(60,"そこの壁……","","","");
				//パリン
				Message(0,"えっ？","","","");

//				// 10/20 17:30テキスト
//				//クリーム
//				Message(60,"………………","","","");
//				Message(60,"王子…一体どうして……","","","");
//				Message(60,"まるで王子じゃないみたいだったわ","","","");
//
//				Message(60,"それはそうと、そこの壁……","","","");

				SaveCamera();
				ch[420] = -366;
				ch[421] = 1293;
				ch[422] = 790;
				ch[423] = 1185;
				ch[424] = 1286;
				ch[425] = 671;
				KaguTest(30093,30);
				KaguTest(30019,14);
				Wait(80);
				KaguTest(30019,0);
				RestoreCamera();
				CrossFade();
				Wait(15);

//				// 10/20 17:30テキスト
//				// クリーム
//				Message(60,"ちょー強い力を感じるわ。","何かあるのかな……","","");

//				10/20 15:00テキスト
				//クリーム
				Message(60,"そこの壁から強い力を感じるわ。","何かあるんじゃないの？","","");
			}
		}
		else
		{
			//クリーム
			Message(60,"王子…一体どうして……","","","");
		}
	}
	ch[400] = -1;
}
#EndScript

// ボブー会話
#Script:01283
int main()
{
	if (ch[1538])
	{
		// エピローグ
		ch[400] = 58;
		//ボブー
		Message(58,"真面目に働くのって","気持ちイイゼ！","","");
		Message(58,"もっともっとオレ様に","力仕事をヨコセ！","","");
		ch[400] = -1;
		return 0;
	}
	ch[400] = 58;
	if (ch[1571] && !ch[1538])
	{
		//ボブー
		Message(58,"ネコのオバケがくれた薬で","ケガがずいぶん治ッタゼ！","","");
		Message(58,"もうほとんど元通りネ！","","","");
	}
	if (ch[1513] && !ch[1571])
	{
		//ボブー
		Message(58,"王子が身につけてる腕輪…","","","");
		Message(58,"あれこそがキングの","正式な継承者の証ナンダゼ！","","");
		Message(58,"…王子はイロイロな武器を","使いこなすエキスパートダ","","");
		Message(58,"オマエに勝てるカナ？","","","");
	}
	if (ch[1505] && !ch[1513])
	{
		//ボブー
		Message(58,"アー、いい風ダナ","","","");
		Message(58,"アイツさえ……","","","");
		Message(58,"アイツさえ来なければ","オレたち、こんな苦労シナクテ","済ンダノニナ……","");
	}
	if (!ch[1505])
	{
		//ボブー
		Message(58,"オマエとの戦いで","チカラを使い果タシチマッタ","","");
		Message(58,"体が治ったらリベンジしてヤルゼ。","クビをウォッシュしてマッテナ","","");
	}
	if (!ch[2150])
	{
		// 雷のパーツヒント
		Message(58,"…トコロで湖の","対岸にも桟橋あるケド","よくサンダー落ちるネ","");
		Message(58,"ヨク分からないけど","あそこに何かあるのカモ","","");
	}
	ch[400] = -1;
}
#EndScript

// ミニトカロン会話
#Script:01284
int main()
{
	ch[400] = 59;
	Message(59,"ギャアギャア","","","");
	ch[400] = -1;
}
#EndScript

// ミニトカロン設定
#Script:01285
int main()
{
	KaguTest(12000,59);
	ch[420] = 22;
	KaguTest(12002,59);

	// ボブー
	ch[420] = 2;
	KaguTest(12005,58);
	ch[420] = 98;
	KaguTest(12002,58);
	ch[420] = 0;
	KaguTest(12009,58);
	ch[420] = 58;
	ch[421] = 15;
	KaguTest(20044,40);
	ch[421] = 2;
	KaguTest(20044,8);
}
#EndScript

// 壁紙使った
#Script:01286
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"家の机にでも貼ってみようかな");
	
	KaguTest(10012,0);
}
#EndScript

// 012:四つんばいあたりを消す
#Script:01287
int main()
{
	ch[420] = 58;
	KaguTest2(30003,0,"@atariyotsu");
}
#EndScript

// 012:街中クエスト中は外に出れない
#Script:01288
int main()
{
	MapEvent(0);
	if (ch[2002])
	{
		// のぞきクエスト中
		//パリン
		Message(0,"シリンダーさんを見つけるのが先決ね","","","");
	}
	if (ch[2010])
	{
		// ビラ貼りクエスト中
		if (ch[2012] && ch[2013] && ch[2014])
		{
			Message(0,"ディスクさんにビラ貼りが","終わったことを言わなくっちゃ","","");
		}
		else
		{
			Message(0,"ディスカウントショップで頼まれた","ビラ貼りが終わってないわ","","");
		}
	}
	if (ch[2018])
	{
		// わらしべクエスト途中（限りなく実行する可能性の高い予定）
		Message(0,"何かやり残していることが","ある気がするわ","","");
	}
	if (ch[2020])
	{
		KaguTest(20001,54);
		if (ch[430])
		{
			Message(0,"見つけたメダルを","じーちゃんに渡さなきゃ","","");
		}
		else
		{
			Message(0,"まだじーちゃんの言ってた","珍しいメダルを見つけてないわ","","");
		}
	}
	
	Walk(0,-8,15);
	Wait(15);
	
	MapEvent(1);
}
#EndScript

// 012:あたりに触れるとシリンダーが奥からやってくる
#Script:01289
int main()
{
	// シリンダー自由に動けるようにする
	ch[420] = 350;
	KaguTest2(30003,2,"Box01");
	
	KaguTest(12000,15);
	CharPos(15,3913,2140,-500);
	
		// シリンダーあらわれる
	Walk2(15,1,-7,60);
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(60);
		// パリンは！
	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
		// シリンダーはなおも歩く	
	Walk2(15,-4,-6,30)
	ch[429] = 0;
	KaguTest(30039,0);
	Wait(30);
	Walk2(15,-7,-3,45);
	ch[429] = 0;
	KaguTest(30039,0);
	
	//パリン
	Message(0,"あ、シリンダーさん！","","","");

	//シリンダー
	ch[400] = 15;
	Look(15,0);
	Message(15,"おや、パリンちゃん","","","");
	Look(15,0);
	Message(15,"カンゲキだなぁ。","もしかして俺の帰りを","待っていてくれたのかい？","");
	Look(15,0);

	//パリン
	Message(0,"そんなワケないでしょ","","","");
	Message(0,"よくも、わたしの","着替えをのぞいたわね…","","");
	Message(0,"訴えてやる！","","","");

	//シリンダー
	Message(15,"着替え？パリンちゃんのかい？","","","");
	Message(15,"そ、それは誤解だよ。","今日は朝早くから鉱山長に","呼び出されて働いてたんだ","");

	//パリン
	Message(0,"それじゃ、これは何なのよ！","家の前に落ちてたわ","","");
	
	//システム
	Mes("シリンダーに帽子を渡した。");
	Wait(60);
	KaguTest(20002,12);

	//シリンダー
	Message(15,"おや、これはプチに取られた","俺のお気に入り帽子じゃないか","","");

	//パリン
	Message(0,"プチって…番犬の？","","","");

	//シリンダー
	Message(15,"はっはっ、今朝追い回されたときに","取られてしまったんだ","","");
	Message(15,"予備の帽子はあるけど","やっぱり、こっちのほうが","しっくり来るなぁ","");

	//パリン
	Message(0,"なんだ、そうだったの","","","");

	//シリンダー
	Message(15,"取り戻してくれてありがとう。","そうだ、お礼にこれをあげるよ","","");

	//システム
	SE(853);
	KaguTest(10006,0);
	KaguTest(10007,1);
	KaguTest2(10008,0,"壁紙④「カートゥンスタイル」を手に入れた。");
	KaguTest2(10008,2,"パリンの家の机で");
	KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
	KaguTest2(10009,0,"kb004s.bmp");
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	KaguTest(10011,10);

	GetItem(2);

	//パリン
	Message(0,"あれ…でも、どうして","プチに追い回されたのよ？","","");

	//シリンダー
	Message(15,"ファンちゃんが最近、","ケーキが消えるって言うから","店を見回っていたんだ","");
	Message(15,"そしたら、プチが","ドロボーだと勘違いしたらしい","","");

	//パリン
	Message(0,"ふーん、ファン姉のことを","のぞいてたんじゃないわよね？","","");

	//シリンダー
	Message(15,"はっはっ、そんなワケないよ。","それじゃ、これで失礼するよ","","");
	
	Walk2(15,-25,-6,60);
	ch[429] = 0;
	KaguTest(30039,0);
	ch[420] = 15;
	KaguTest(30063,0);
	Wait(45);
	KaguTest(30063,-1);
	//パリン
	Message(0,"…普段が普段だから","素直に信用できないのよね","","");
	ch[400] = -1;
	
	ch[420] = 60;
	KaguTest(12002,15);
	ch[3987] = 0;
	ch[3990] = 15;
	ch[3991] = 15;
	ch[3992] = 0;
	
	// クエスト終わり・クエスト終了
	ch[2002] = 0;
	ch[2003] = 0;
	ch[2004] = 1;
	ch[2006] = 0;
	ch[2007] = 0;
	ch[2008] = 0;
	ch[2009] = 0;

	ch[420] = 58;
	KaguTest2(30003,1,"@atariyotsu");
}
#EndScript

// 012:ビラ貼り１
#Script:01290
int main()
{
	ch[2012] = 1;
	
	//パリン
	Message(0,"ここにチラシを貼れそうね。","ぺたっと貼っちゃおっと","","");
	
	ch[420] = 1;
	KaguTest(20006,8);

	Black(0,100,15);
	Wait(15);
	LoadMapB(12);
	Black(0,0,15);
	Wait(15);
	
	if (ch[2012] && ch[2013] && ch[2014])
	{
		Message(0,"これで全部貼り終えたわ。","ディスクさんのところへ","報告しに行かなくちゃ","");
	}
}
#EndScript

// 012:ビラ貼り２
#Script:01291
int main()
{
	ch[2013] = 1;
	
	//パリン
	Message(0,"ここにチラシを貼れそうね。","ぺたっと貼っちゃおっと","","");
	
	ch[420] = 1;
	KaguTest(20006,8);

	Black(0,100,15);
	Wait(15);
	LoadMapB(12);
	Black(0,0,15);
	Wait(15);

	if (ch[2012] && ch[2013] && ch[2014])
	{
		Message(0,"これで全部貼り終えたわ。","ディスクさんのところへ","報告しに行かなくちゃ","");
	}
}
#EndScript

// 012:ビラ貼り３
#Script:01292
int main()
{
	ch[2014] = 1;
	
	//パリン
	Message(0,"ここにチラシを貼れそうね。","ぺたっと貼っちゃおっと","","");
	
	ch[420] = 1;
	KaguTest(20006,8);

	Black(0,100,15);
	Wait(15);
	LoadMapB(12);
	Black(0,0,15);
	Wait(15);

	if (ch[2012] && ch[2013] && ch[2014])
	{
		Message(0,"これで全部貼り終えたわ。","ディスクさんのところへ","報告しに行かなくちゃ","");
	}
}
#EndScript

// ビラ使った
#Script:01293
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"宣伝効果の高そうな所に貼らなくちゃ");
	
	KaguTest(10012,0);
}
#EndScript

// シリンダーの帽子使った
#Script:01294
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"私の着替えをのぞくなんて……");
	KaguTest2(10008,1,"絶対捕まえて、とっちめてやるわ");
	
	KaguTest(10012,0);
}
#EndScript

// 004:バイトクエスト、ミニゲーム
#Script:01295
int main()
{
	// クエスト開始
	ch[2006] = 0;
	ch[2007] = 1;
	ch[2008] = 0;
	ch[2009] = 0;
	
	string text;
	string order;
	string answer;
	
	int kyaku;
	int seikai;
	kyaku = 0;
	seikai = 0;

	KaguTest(12000,3);
	// 客	
	// ・プレーン
	// ・シリンダー
	// ・ポコ
	// ・ディスク
	// ・プチ
	// ・ハイパボリック
	
	// プレーンやってくる
	kyaku++;
	KaguTest(12000,13);
	CharPos(13,0,-450,0);
	Look(0,13);
	Look(3,13);
	Walk2(13,0,7,110);
	ch[420] = 0;
	ch[421] = 0;
	KaguTest(30070,13);
	Wait(110);
	Message(0,"いらっしゃいませー！","","","");
		// 注文処理
	switch( rand() % 3)
	{
	case 0:
		order = "アイス";
		answer = "あいす";
		break;
	case 1:
		order = "クレープ";
		answer = "くれーぷ";
		break;
	case 2:
		order = "コーヒー";
		answer = "こーひー";
		break;
	}
	Message(13,"「"+order+"」を","いただこうかしら……","","");
	text = Type(300);
	
	if (strcmp(text,answer) == 0 || strcmp(text,order) == 0)
	{
		seikai++;
		Message(0,"「"+order+"」、１つ入りま～す！","","","");
		Wait(15);
		SE(950);
		Wait(15);
		ch[420] = 13;
		ch[429] = 1;
		KaguTest(30036,13);
	}
	else
	{
		if (strcmp(text,"未入力") == 0)
		{
			Message(0,"…………………","","","");
			ch[420] = 8;
			ch[429] = 1;
			KaguTest(30036,0);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,13);
			Wait(30);
			ch[420] = 4;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
		}
		else
		{
			Message(0,"「"+text+"」、１つ入りま～す！","","","");
			ch[420] = 4;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,13);
			Wait(30);
			Message(13,"ちょっと！","私が頼んだのは「"+order+"」よ！！","","");
		}
		Message(13,"もういいわ。","パリンちゃんがバイトの時は","遠慮させてもらうわ","");
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,13);
	}
	Walk2(13,0,-7,110);
	ch[420] = 0;
	ch[421] = -450;
	KaguTest(30070,13);
	Message(0,"ありがとうございましたー！","","","");
	KaguTest(20053,0);
	Wait(ch[420]);
	CharPos(13,-200000,0,0);
	ch[420] = 60;
	KaguTest(12002,13);



	// シリンダーやってくる
	kyaku++;
	KaguTest(12000,15);
	CharPos(15,0,-450,0);
	Look(0,15);
	Look(3,15);
	Walk2(15,0,7,110);
	ch[420] = 0;
	ch[421] = 0;
	KaguTest(30070,15);
	Wait(110);
	Message(0,"いらっしゃいませー！","","","");
		// 注文処理
	switch( rand() % 3)
	{
	case 0:
		order = "ケーキ";
		answer = "けーき";
		break;
	case 1:
		order = "クレープ";
		answer = "くれーぷ";
		break;
	case 2:
		order = "ココア";
		answer = "ここあ";
		break;
	}
	Message(15,"「"+order+"」を","１つもらおうかな","","");
	text = Type(300);
	
	if (strcmp(text,answer) == 0)
	{
		seikai++;
		Message(0,"「"+order+"」、入りまーす","","","");
		Wait(15);
		SE(950);
		Wait(15);
		ch[420] = 13;
		ch[429] = 1;
		KaguTest(30036,15);
	}
	else
	{
		if (strcmp(text,"未入力") == 0)
		{
			Message(0,"…………………","","","");
			ch[420] = 8;
			ch[429] = 1;
			KaguTest(30036,0);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,15);
			Wait(30);
			ch[420] = 4;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
		}
		else
		{
			Message(0,"「"+text+"」入りまーす","","","");
			ch[420] = 4;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,15);
			Wait(30);
			Message(15,"ちょっと待った！","俺が頼んだのは「"+order+"」だよ","","");
		}
		Message(15,"まあ、間違い誰にでもあるからね。","でも今日はやめておくことにするよ","","");
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,15);
	}
	Walk2(15,0,-7,110);
	ch[420] = 0;
	ch[421] = -450;
	KaguTest(30070,15);
	Message(0,"ありがとうございましたー！","","","");
	KaguTest(20053,0);
	Wait(ch[420]);
	CharPos(15,-200000,0,0);
	ch[420] = 60;
	KaguTest(12002,15);



	// ポコやってくる
//	kyaku++;
	KaguTest(12000,16);
	CharPos(16,0,-450,0);
	Look(0,16);
	Look(3,16);
	Walk2(16,0,7,110);
	ch[420] = 0;
	ch[421] = 0;
	KaguTest(30070,16);
	Wait(110);
	Message(0,"いらっしゃいませー！","","","");
	ch[420] = 8;
	ch[429] = 1;
	KaguTest(30036,3);
	Wait(30);
		// 注文処理
	switch( rand() % 3)
	{
	case 0:
		order = "ショートケーキ";
		answer = "しょーとけーき";
		break;
	case 1:
		order = "カップラーメン";
		answer = "かっぷらーめん";
		break;
	case 2:
		order = "ガトーショコラ";
		answer = "がとーしょこら";
		break;
	}
	Message(16,"「"+order+"」が","欲しいぽ！","","");
	text = Type(300);
	
	if (strcmp(text,answer) == 0)
	{
		seikai++;
		Message(0,"「"+order+"」、１つ入りまーす","","","");
		Wait(15);
		ch[420] = 8;
		ch[429] = 1;
		KaguTest(30036,3);
		SE(950);
		Wait(30);
		ch[420] = 13;
		ch[429] = 1;
		KaguTest(30036,16);
	}
	else
	{
		if (strcmp(text,"未入力") == 0)
		{
			Message(0,"…………………","","","");
			ch[420] = 8;
			ch[429] = 1;
			KaguTest(30036,0);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,16);
			Wait(30);
//			ch[420] = 4;
//			KaguTest(30036,3);
//			Wait(30);
		}
		else
		{
			Message(0,"「"+text+"」、１つ入りまーす","","","");
			ch[420] = 8;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
//			ch[420] = 4;
//			KaguTest(30036,3);
//			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,16);
			Wait(30);
			Message(16,"ちょっと待つぽ！","僕が頼んだのは「"+order+"」だぽ！","","");
		}
		Message(16,"もういいぽ。","この店は店員の教育がなってないぽ","","");
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,16);
	}
	Walk2(16,0,-7,110);
	ch[420] = 0;
	ch[421] = -450;
	KaguTest(30070,16);
	Message(0,"ありがとうございましたー！","","","");
	ch[420] = 8;
	ch[429] = 1;
	KaguTest(30036,3);

	KaguTest(20053,0);
	Wait(ch[420]);
	CharPos(16,-200000,0,0);
	ch[420] = 23;
	KaguTest(12002,16);



	// ハイパボリックやってくる
	kyaku++;
	KaguTest(12000,20);
	CharPos(20,0,-450,0);
	Look(0,20);
	Look(3,20);
	Walk2(20,0,7,110);
	ch[420] = 0;
	ch[421] = 0;
	KaguTest(30070,20);
	Wait(110);
	Message(0,"いらっしゃいませー！","","","");
		// 注文処理
	switch( rand() % 3)
	{
	case 0:
		order = "ガトーショコラ";
		answer = "がとーしょこら";
		break;
	case 1:
		order = "アップルパイ";
		answer = "あっぷるぱい";
		break;
	case 2:
		order = "スイートポテト";
		answer = "すいーとぽてと";
		break;
	}
	Message(20,"「"+order+"」が","欲しいのじゃ","","");
	text = Type(300);
	
	if (strcmp(text,answer) == 0)
	{
		seikai++;
		Message(0,"「"+order+"」、１つ入りまーす","","","");
		Wait(15);
		SE(950);
		Wait(15);
		ch[420] = 13;
		ch[429] = 1;
		KaguTest(30036,20);
	}
	else
	{
		if (strcmp(text,"未入力") == 0)
		{
			Message(0,"…………………","","","");
			ch[420] = 8;
			ch[429] = 1;
			KaguTest(30036,0);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,20);
			Wait(30);
			ch[420] = 4;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
		}
		else
		{
			Message(0,"「"+text+"」、１つ入りまーす","","","");
			ch[420] = 4;
			ch[429] = 1;
			KaguTest(30036,3);
			Wait(30);
			ch[420] = 9;
			ch[429] = 1;
			KaguTest(30036,20);
			Wait(30);
			Message(20,"待つのじゃ！！","わしが頼んだのは「"+order+"」じゃ","","");
		}
		Message(20,"これがわしの孫とは","なんとも情けないのじゃ","","");
		ch[420] = 9;
		ch[429] = 1;
		KaguTest(30036,20);
	}
	Walk2(20,0,-7,110);
	ch[420] = 0;
	ch[421] = -450;
	KaguTest(30070,20);
	Message(0,"ありがとうございましたー！","","","");
	KaguTest(20053,0);
	Wait(ch[420]);
	CharPos(20,-200000,0,0);
	ch[420] = 60;
	KaguTest(12002,20);


	// 終了
	Black(0,100,15);
	Wait(15);
	ch[2015] = 0;
	
	// ＮＰＣを戻す
	ch[420] = 60;
	KaguTest(12002,13);
	KaguTest(12002,15);
	ch[420] = 23;
	KaguTest(12002,16);
	ch[420] = 22;
	KaguTest(12002,3);
	
	LoadMap(4);
	CharPos(0,0,190,0);
	Look(0,3);
	Black(0,0,15);
	Wait(15);

	if (seikai > kyaku * 0.75)
	{
		// 合格
		//ファン
		Message(3,"は～い、おつかれさま～","","","");

		//パリン
		Message(0,"はぁ、こんなに疲れるなんて…","","","");

		//ファン
		Message(3,"ふふ、働くってなかなか大変でしょ","","","");
		Message(3,"パリンちゃん、頑張ったから","借金は帳消しにしてあげちゃうわ","","");

		//パリン
		Message(0,"うう、ちがうのに…","","","");

		//ファン
		Message(3,"これはわたしからのボーナスよ","","","");

		//システム
		SE(853);
		KaguTest(10006,0);
		KaguTest(10007,1);
		KaguTest2(10008,0,"壁紙⑧「ねむくなるこうぎ」を手に入れた。");
		KaguTest2(10008,2,"パリンの家の机で");
		KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
		KaguTest2(10009,0,"kb008s.bmp");
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		KaguTest(10011,10);

		GetItem(2);

		//ファン
		Message(3,"これからはお店のものを","勝手に食べちゃダメなんだからねー","","");

		//パリン
		Message(0,"…だから、わたしじゃないってばぁ！","","","");

		ch[2016] = 1;
	}
	else
	{
		// 不合格
		//ファン
		Message(3,"パリンちゃん…","","","");

		//パリン
		Message(0,"なに？","","","");

		//ファン
		Message(3,"全然使えないわねー","","","");
		Message(3,"これじゃ借金を帳消しにするのは","ちょっと無理かもー","","");

		//パリン
		Message(0,"うう……","","","");
		
		ch[2017] = 1;
	}
	ch[2007] = 0;
	ch[2015] = 0;
}
#EndScript

// ドラスレ使用
#Script:01296
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"なんだかすごい剣らしいわ");
	
	KaguTest(10012,0);
}
#EndScript

// 錬金術の書使用
#Script:01297
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"なんだか難しくてよくわからないわ");
	
	KaguTest(10012,0);
}
#EndScript

// 少女マンガ使用
#Script:01298
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"よく見たら読んだことある本ね");
	
	KaguTest(10012,0);
}
#EndScript

// ガトーショコラ使用
#Script:01299
int main()
{
//	KaguTest(10006,0);//発言初期化
//	
//	KaguTest2(10008,0,"今は食べたい気分じゃないわ");
//	
//	KaguTest(10012,0);
	// 食べる
	// ＨＰ全快　＆　ドリルレベル１アップ
	Recover(0,100,1.0,0.0,10.0);
	KaguTest(20051,0);
	ch[2018] = 0;
	ch[2007] = 0;
	ch[420] = 58;
	KaguTest2(30003,1,"@atariyotsu");
}
#EndScript

// ランプステーキ使用
#Script:01300
int main()
{
//	KaguTest(10006,0);//発言初期化
//	
//	KaguTest2(10008,0,"冷め切ってて食べる気がしないわ");
//	
//	KaguTest(10012,0);
	// 食べる
	// ＨＰ全快　＆　ドリルパワーマックス
	Recover(0,100,1.0,0.0,10.0);
	KaguTest(20051,0);
	KaguTest(20051,0);
	KaguTest(20051,0);
	KaguTest(20051,0);
	ch[2018] = 0;
	ch[2007] = 0;
	ch[420] = 58;
	KaguTest2(30003,1,"@atariyotsu");
}
#EndScript

// 金貨使用
#Script:01301
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"金のメダルに似てるけど、どう違うのかな？");
	
	KaguTest(10012,0);
}
#EndScript

// 0401:ポコ・アフロモード
#Script:01302
int main()
{
	ch[420] = 0;
	KaguTest(12009,16);
	KaguTest(12006,16);
	ch[420] = 98;
	KaguTest(12002,16);
	ch[420] = 16;
	ch[421] = 0;
	KaguTest(20044,0);
	ch[421] = 2;
	KaguTest(20044,921);
	ch[421] = 4;
	KaguTest(20044,1);
	ch[421] = 15;
	KaguTest(20044,41);
}
#EndScript

// 0401:イワオ・ファラオモード
#Script:01303
int main()
{
	ch[420] = 0;
	KaguTest(12009,7);
	KaguTest(12006,7);
	ch[420] = 98;
	KaguTest(12002,7);
	ch[420] = 7;
	ch[421] = 0;
	KaguTest(20044,0);
	ch[421] = 2;
	KaguTest(20044,922);
	ch[421] = 15;
	KaguTest(20044,41);
	ch[421] = 4;
	KaguTest(20044,0);
}
#EndScript

// 0401:ポコ・アフロモード解除
#Script:01304
int main()
{
	//ポコ
	ch[423] = 14028;
	KaguTest2(30024,16,"@Dummy05");
	GetCharPos(16,ch[420],ch[421],ch[422]);
	ch[423] = 8805;
	ch[424] = 0;
	ch[425] = 0;
	ch[426] = 0;
	ch[427] = 100;
	ch[428] = 0;
	KaguTest(30045,0);
	Wait2(20);

	Message(16,"あちあちっ！","あっちっちっだぽ！","","");
	
	//※アフロが燃え上がってポコの頭からはずれる。
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,16);
	Wait(20);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,16);
	Wait(20);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,16);
	Wait(20);
	ch[421] = 15;
	ch[422] = 1;
	KaguTest(30037,16);
	
	ch[3962] = 0;
	Black(0,100,15);
	Wait(15);
	LoadMap(401);
	ch[400] = 116;
	KaguTest(20039,16);
	Look(0,16);
	Look(16,0);
	ch[400] = 16;
	Black(0,0,15);
	Wait(15);

	//ポコ
	Message(16,"ふう……","ようやく外れたぽ","","");

	//パリン
	Message(0,"よかったわね","","","");

	//ポコ
	Message(16,"かゆさと熱さのあまり、","もう少しで悶絶しそうになったぽ","","");
	Message(16,"あれはきっと呪いのアイテムぽ","","","");

	//パリン
	Message(0,"呪いのアイテム？","","","");

	//ポコ
	Message(16,"呪われたオバケは助けてもらったら","お礼をしないといけない決まりぽ","","");
	Message(16,"だから、これをあげるぽ","","","");

	if (ch[2027])
	{
		// 既に壁紙を手に入れてある
		// ケーキをあげる
		KaguTest(20001,20);
		Mes("『ケーキ』を手に入れた。");
		KaguTest(20022,20);
		GetItem(20);
		Wait(60);
		if (ch[430] == 3)
		{
			// オーバーしている
			Mes("荷物が一杯で持てなかった。");
			Wait(60);
		}
	}
	else
	{
		//システム
		SE(853);
		KaguTest(10006,0);
		KaguTest(10007,1);
		KaguTest2(10008,0,"壁紙⑤「なかよくおひるね」を手に入れた。");
		KaguTest2(10008,2,"パリンの家の机で");
		KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
		KaguTest2(10009,0,"kb005s.bmp");
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		KaguTest(10011,10);

		GetItem(2);
		ch[2027] = 1;
	}
	ch[2026] = 0;

	//ポコ
	Message(16,"きっと他にも","似たようなアイテムがあるはずだぽ","","");
	Message(16,"誰が作ったか知らないけど","迷惑なアイテムだぽ","","");
	ch[400] = -1;
}
#EndScript

// 0401:イワオ・ファラオモード解除
#Script:01305
int main()
{
	//イワオ
	Message(7,"ガガ…ガガガッ…","","","");
	Message(7,"グワーッ！！","","","");

	ch[3964] = 0;
	White(0,100,15);
	Wait(15);
	LoadMap(401);
	Look(0,7);
	Look(7,0);
	ch[400] = 7;
	KaguTest(20039,7);
	White(0,0,15);
	Wait(15);

	//イワオ
	Message(7,"ハッ、ここはどこでがんすか？","","","");

	//パリン
	Message(0,"目が覚めたみたいね","","","");

	//イワオ
	Message(7,"どこか見知らぬ国で","王様になって暗殺される","夢を見たでがんす","");

	//パリン
	Message(0,"ずいぶん、うなされていたわ","","","");

	//イワオ
	Message(7,"うむ、目を覚まさせてくれて","感謝してるでがんす","","");
	Message(7,"これはほんのお礼でがんす","","","");

	if (ch[2033])
	{
		// 既に壁紙を手に入れてある
		// ケーキをあげる
		KaguTest(20001,20);
		Mes("『ケーキ』を手に入れた。");
		KaguTest(20022,20);
		GetItem(20);
		Wait(60);
		if (ch[430] == 3)
		{
			// オーバーしている
			Mes("荷物が一杯で持てなかった。");
			Wait(60);
		}
	}
	else
	{
		//システム
		SE(853);
		KaguTest(10006,0);
		KaguTest(10007,1);
		KaguTest2(10008,0,"壁紙⑥「いろいろそうび」を手に入れた。");
		KaguTest2(10008,2,"パリンの家の机で");
		KaguTest2(10008,3,"壁紙を張り替えることが出来ます。");
		KaguTest2(10009,0,"kb006s.bmp");
		KaguTest(10010,10);
		Wait(10);
		Message(0,"","","","");
		KaguTest(10011,10);

		GetItem(2);
		ch[2033] = 1;
	}
	ch[2032] = 0;
	ch[400] = -1;
}
#EndScript

// 025:フランソワゲット
#Script:01306
int main()
{
	// DAO撤去
	ch[420] = 1769;
	ch[421] = 933;
	KaguTest(30011,0);

	//パリン
	Message(0,"あら、あなた……","どこかで見たハトね","","");

	//フランソワ
	Message(61,"くるっくー","","","");

	//パリン
	Message(0,"おいでおいで","","","");

	//フランソワ
	Message(61,"くるっくー","","","");

	//システム
	CharPos(61,-200000,0,0);
	Mes("『フランソワ』を手に入れた。");
	KaguTest(20022,33);
	GetItem(33);
	Wait(60);
	ch[2034] = 1;
}
#EndScript

// フランソワ使用
#Script:01307
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"早くピエールに渡してあげなくちゃ");

	KaguTest(10012,0);
}
#EndScript

// 魔法のツボ使用
#Script:01308
int main()
{
	// この場所で使えるかチェック
	KaguTest(20056,1);
	if (!ch[420])
	{
		// 使えない
		KaguTest2(20002,0,"ここでは使えません。");
		return 0;
	}

	// 近くにキャラがいないかチェック
	int b;
	int tubo;
	int tubo2;

	tubo = 34;
	tubo2 = 6;
	KaguTest(20001,23);
	if (ch[430])
	{
		b = 16;
		tubo = 23;
		tubo2 = 1;
	}
	KaguTest(20001,24);
	if (ch[430])
	{
		b = 7;
		tubo = 24;
		tubo2 = 2;
	}
	KaguTest(20001,26);
	if (ch[430])
	{
		b = 11;
		tubo = 26;
		tubo2 = 3;
	}
	KaguTest(20001,28);
	if (ch[430])
	{
		b = 6;
		tubo = 28;
		tubo2 = 4;
	}
	KaguTest(20001,55);
	if (ch[430])
	{
		b = 25;
		tubo = 55;
		tubo2 = 5;
	}
	
	KaguTest(20055,b);

	int chara;
	chara = ch[420];
	ch[421] = 1;
	KaguTest(30076,0)
	if (chara == 25 && !ch[2285])
	{
		// 駄目
		chara = 0;
	}
	if (chara && ch[420])
	{
		// 近くにキャラがいた
		KaguTest(20057,0);
		Wait(30);
		ch[421] = 0;
		KaguTest(30076,tubo2);

		// ツボを全てなくす
		KaguTest(20002,23);
		KaguTest(20002,24);
		KaguTest(20002,26);
		KaguTest(20002,28);
		KaguTest(20002,55);
		KaguTest(20002,34);
		
		switch(chara)
		{
		case 16:
			// ポコ吸出し
			//ポコ
			ch[420] = 0;
			KaguTest(30111,16);
			Wait(100);
			ch[420] = 1;
			KaguTest(30111,0);
			GetItem(23);
			KaguTest(20022,23);
			Mes("『青色のツボ』を手に入れた。");
			Wait(60);
			Message(16,"な、何だか急に目まいがしたぽ。","きっと働きすぎたぽ","","");
			break;
		case 11:
			// チャッキー吸出し
			//チャッキー
			ch[420] = 0;
			KaguTest(30111,11);
			Wait(100);
			ch[420] = 1;
			KaguTest(30111,0);
			GetItem(26);
			KaguTest(20022,26);
			Mes("『緑色のツボ』を手に入れた。");
			Wait(60);
			Message(11,"な、何だか魂をぐいっと","抜かれた気がしたよ？","","");
			break;
		case 7:
			// イワオ吸出し
			//イワオ
			ch[420] = 0;
			KaguTest(30111,7);
			Wait(100);
			ch[420] = 1;
			KaguTest(30111,0);
			GetItem(24);
			KaguTest(20022,24);
			Mes("『黄色のツボ』を手に入れた。");
			Wait(60);
			Message(7,"リフレーッシュ、でがんす！","","","");
			break;
		case 6:
			// ピエール吸出し
			//ピエール
			ch[420] = 0;
			KaguTest(30111,6);
			Wait(100);
			ch[420] = 1;
			KaguTest(30111,0);
			GetItem(28);
			KaguTest(20022,28);
			Mes("『紫色のツボ』を手に入れた。");
			Wait(60);
			Message(6,"おや、何だか体が","スッキリした気がします","","");
			Message(6,"マドモアゼルのおかげで","今晩はよく眠れそうですよ","","");
			break;
		case 25:
			// ブラックビーン吸出し
			//ブラックビーン
			ch[420] = 0;
			KaguTest(30111,25);
			Wait(100);
			ch[420] = 1;
			KaguTest(30111,0);
			GetItem(55);
			KaguTest(20022,55);
			Mes("『黒色のツボ』を手に入れた。");
			Wait(60);
			//ブラックビーン
			Message(25,"あれ…？","今、一瞬立ちくらみがしたような","","");
			Message(25,"もっともっと鍛えなくちゃ","","","");
			break;
		default:
			// それ以外
			//パリン
			GetItem(tubo);
			Wait(30);
			Message(0,"壺が反応しないわ。","そういえばオバケによっては","使えないって言ってたわね","");
			KaguTest2(20003,61,"mt_put.it3");
			Wait(30);
			ch[420] = 1;
			KaguTest(30111,0);
			Wait(30);
			break;
		}
	}
	else
	{
		// キャラがいない
		// ここでは使えないメッセージを出す
//		GetItem(tubo);
		KaguTest2(20002,0,"ここでは使えません。");
	}
}
#EndScript

// ポポン
#Script:01309
int main()
{
	ch[400] = 56;
	KaguTest(99993,0);
	if (ch[420] && ch[421] && ch[422] && ch[425])
	{
		// 全制覇済み
		if (!ch[2038])
		{
			// 初会話
			//ポポン
			Message(56,"ふわわ、ねみー……","ダルくてやってられねー","","");
			//パリン
			Message(0,"あれ、あなたは？","","","");
			//ポポン
			Message(56,"びくぅっ！！","","","");
			Message(56,"あ、あら…いつから","そこにいらっしゃったの？","","");
			//パリン
			Message(0,"さっきからよ","","","");
			//ポポン
			Message(56,"そ、そうでしたか…","わたくしの名前はポポン","","");
			Message(56,"本日、この街に","引っ越してまいりましたの","","");
			//パリン
			Message(0,"ええっ！！","また急な展開ね","","");
			//ポポン
			Message(56,"ふふ、プレーンおばさまから","聞きましたわ","","");
			Message(56,"あなたが街でたった１人の子供……","パリンさんですね？","","");
			//パリン
			Message(0,"うん、そうだけど","","","");
			//ポポン
			Message(56,"どうでしょう？","よろしかったら、わたくしの","友達になっていただけませんか？","");
			//パリン
			Message(0,"……………………","","","");

			//ポポン
			Message(56,"どーしたの？","","","");
			Message(56,"…じゃなくて、どうされました？","","","");

			//パリン
			Message(0,"やった！！","念願の人間の友達ができたわ","","");
			Message(0,"ポポンだっけ？","さっそく今から遊ぶわよ！","","");

			//ポポン
			Message(56,"ええ、いいですわよ","","","");

			//パリン
			Message(0,"ポポンは何して","遊ぶのが好きなの？","","");

			//ポポン
			Message(56,"お屋敷にいた頃はよく爺やと","フェンシングなどいたしましたわ","","");

			//パリン
			Message(0,"フェンシング？","わりと体育会系なのね","","");
			Message(0,"じゃあ、わたしと交代で","ファントムと戦ってみない？","","");

			//ポポン
			Message(56,"なかなか面白そうですわね","","","");

			//パリン
			Message(0,"じゃあ、決まりね！","話が早いわ","","");
			Message(0,"それじゃ、さっそく","伝説のドリルを貸してあげる。","武器がないのはかわいそうだから","");

			//ポポン
			Message(56,"ご心配には及びませんわ","","","");

			//パリン
			Message(0,"え？","","","");

			//ポポン抜刀
			KaguTest(12000,56);

			White(0,100,0);
			Scop2(56,1,"spscop.it3");
			White(0,0,15);
			
			ch[420] = 45;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,56);
			Wait(30);

			ch[420] = 46;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,56);

			Wait(50);
			ch[420] = 2;
			ch[421] = 1;
			ch[422] = 10;
			KaguTest(12003,56);
			Wait(5);
			Scop2(56,0,"");

			ch[420] = 87;
			KaguTest(12002,56);

			//ポポン
			Message(56,"私には我が家に伝わる","伝説のドラゴンスレイヤーが","ありますから！","");

			//パリン
			Message(0,"おお～！！","","","");
			Message(0,"それじゃ、『ぐるみん』の","台本だけ渡すわ","","");
			Message(0,"わたしの代わりなんだから","セリフだけはちゃんと覚えてね","","");

			//ポポン
			Message(56,"ええ、まかせてください。","ちょちょいのちょいですわ","","");
			
			ch[2038] = 1;
		}
		if (!ch[1545] && ch[2038])
		{
			//▼兄たま誘拐後&&ドリル入手後 !ch[1545]
			//ポポン
			Message(56,"私に任せてくださいますの？","","","");
		}
		if (!ch[2330] && ch[1545])
		{
			//▼王子と四天王登場後 !ch[2330]
			//ポポン
			Message(56,"えーと、次はオバケどもを","見つけりゃいいんだろ……","","");
			Message(56,"…でなくて、オバケさんたちを","探せばいいのですね、オホホ","","");
		}
		if (!ch[507] && ch[2330])
		{
			//▼襲撃後・３オバケ発見後 !ch[507]
			//ポポン
			Message(56,"あー、ここにずっと","立ってるのもだりー…","","");
			Message(56,"あ、あら、パリンさん！","これから、いよいよ","四天王と死闘ですわね","");
			Message(56,"うふふ、ワクワクしちゃいますわ","","","");
		}
		if (!ch[1542] && ch[507])
		{
			//▼ボブー戦終了後 !ch[1542]
			//ポポン
			Message(56,"私にはパリンさんと同じ服や","装備は合わないみたいですね","","");
			Message(56,"残念ですわ……","","","");
		}
		if (!ch[1505] && ch[1542])
		{
			//▼モスビー戦終了後 !ch[1505]
			//ポポン
			Message(56,"自分でお金を稼ぐというのは","思った以上に大変ですわね","","");
		}
		if (!ch[1513] && ch[1505])
		{
			//▼ラッシー戦終了後(ホーム復興イベント) !ch[1513]
			//ポポン
			Message(56,"私のお屋敷さえ近ければ","お父様にお願いしてスポンサーを","お引き受けできますのに……","");
		}
		if (!ch[1571] && ch[1513])
		{
			//▼クリーム戦終了後 !ch[1571]
			//ポポン
			Message(56,"うるうる……","","","");
			Message(56,"だまされて借金を背負うなんて","見ていて泣けてしまいますわ","","");
			Message(56,"なんて可哀想なのでしょう","","","");
		}
		if (!ch[1538] && ch[1571])
		{
			//▼王子戦終了後 !ch[1538]
			//ポポン
			Message(56,"パリンさん、","いよいよ決戦ですわね","","");
			Message(56,"退屈だったお屋敷の","生活に比べると、今は","とても充実していますわ","");
		}
		
		SelStart(50);
		SelText("ポポンと交代する",1);
		SelText("ポポンと交代しない",2);
		SelEnd();

		if (ch[50] == 1)
		{
			// チェンジ
			if (ch[2007])
			{
				// パリン
				Message(0,"今は交代してる場合じゃないわね","","","");
				ch[400] = -1;
				return 0;
			}
			
			// ドクイベント中？
			if (ch[2530] && !ch[2533])
			{
				// ドクイベント中で交代してはいけない
				//ポポン
				Message(56,"交代ですか？","","","");
				Message(56,"申し訳ないですけど、","今ちょっと気が進みませんの","","");
				ch[400] = -1;
				return 0;
			}

			{
				// わらしべ中は交代できないようにする
				int warasibe;
				warasibe = 0;
				KaguTest(20001,17);
				if (ch[430])
				{
					warasibe = 1;
				}
				KaguTest(20001,18);
				if (ch[430])
				{
					warasibe = 1;
				}
				KaguTest(20001,25);
				if (ch[430])
				{
					warasibe = 1;
				}
				KaguTest(20001,27);
				if (ch[430])
				{
					warasibe = 1;
				}
				KaguTest(20001,30);
				if (ch[430])
				{
					warasibe = 1;
				}
				KaguTest(20001,31);
				if (ch[430])
				{
					warasibe = 1;
				}
				KaguTest(20001,32);
				if (ch[430])
				{
					warasibe = 1;
				}
				if (warasibe)
				{
					// わらしべ中だ
					Message(56,"ちょっと今は遊ぶ気に","なれないんですの……","","");
					Message(56,"また今度誘ってくださいね","","","");
					ch[400] = -1;
					return 0;
				}

				//パリン
				Message(0,"それじゃ、頑張ってね","","","");

				Black(0,100,15);
				Wait(20);
				KaguTest(20070,6);
//				ch[2501] = 6;
				ch[3957] = 1;
				ReloadChar();
				LoadMapB(12);
				Black(0,0,15);
				Wait(15);
			}
		}
		else
		{
			// 非チェンジ
			//パリン
			Message(0,"やっぱり、後にするわ","","","");

			//ポポン
			Message(56,"そうですか、残念ですわ","","","");
		}
	}
	else
	{
		// まだ交代は出来ない
		if (!ch[2038])
		{
			// 初会話
			//ポポン
			Message(56,"ふわわ、ねみー……","ダルくてやってられねー","","");
			//パリン
			Message(0,"あれ、あなたは？","","","");
			//ポポン
			Message(56,"びくぅっ！！","","","");
			Message(56,"あ、あら…いつから","そこにいらっしゃったの？","","");
			//パリン
			Message(0,"さっきからよ","","","");
			//ポポン
			Message(56,"そ、そうでしたか…","わたくしの名前はポポン","","");
			Message(56,"本日、この街に","引っ越してまいりましたの","","");
			//パリン
			Message(0,"ええっ！！","また急な展開ね","","");
			//ポポン
			Message(56,"ふふ、プレーンおばさまから","聞きましたわ","","");
			Message(56,"あなたが街でたった１人の子供……","パリンさんですね？","","");
			//パリン
			Message(0,"うん、そうだけど","","","");
			//ポポン
			Message(56,"どうでしょう？","よろしかったら、わたくしの","友達になっていただけませんか？","");

			//パリン
			Message(0,"……………………","","","");

			//ポポン
			Message(56,"どーしたの？","","","");
			Message(56,"…じゃなくて、どうされました？","","","");

			//パリン
			Message(0,"やった！！","念願の人間の友達ができたわ","","");
			//パリン
			Message(0,"ポポンだっけ？","さっそく今から遊ぶわよ！","","");

			//ポポン
			Message(56,"えっ…い、今からですか？","実はわたくし、さきほど","この街についたばかりですの","");
			Message(56,"もう少し落ち着くまで","待って頂けませんこと？","","");

			//パリン
			Message(0,"そっか、それもそうね。","わかったわ","","");

			//ポポン
			Message(56,"申し訳ありません","","","");
			
			ch[2038] = 1;
			ch[400] = -1;
			return 0;
		}
		if (!ch[1545] && ch[2038])
		{
			//▼兄たま誘拐後&&ドリル入手後 !ch[1545]
			//ポポン
			Message(56,"遺跡へプクさんを助けに","行かなくていいのですか？","","");
		}
		if (!ch[2330] && ch[1545])
		{
			//▼王子と四天王登場後 !ch[2330]
			//ポポン
			Message(56,"その伝説のドリルはすごい","パワーを秘めていますわね","","");
			Message(56,"でも、私の武器も","負けていませんわよ","","");

			//パリン
			Message(0,"へー、何を持ってるの？","見せて見せて","","");

			//ポポン
			Message(56,"ふふ、今はまだ内緒です。","時が来れば見せて差し上げますわ","","");
		}
		if (!ch[507] && ch[2330])
		{
			//▼襲撃後・３オバケ発見後 !ch[507]
			//ポポン
			Message(56,"ところでパリンさん","壁紙ってご存知ですか？","","");
			Message(56,"もし壁紙を集めるのでしたら","みんなとなるべくお話することを","おすすめしますわ","");
			Message(56,"そして、何か頼まれたら","嫌がらずにお受けしてください","","");
		}
		if (!ch[1542] && ch[507])
		{
			//▼ボブー戦終了後 !ch[1542]
			//ポポン
			Message(56,"パリンさんは着替えを","持っていてうらやましいです","","");
			Message(56,"ところで服を増やすには","色々と方法があるようですわ","","");
			Message(56,"一度クリアしたら","次は別の難易度でクリアするのも","１つの方法みたいです","");
		}
		if (!ch[1505] && ch[1542])
		{
			//▼モスビー戦終了後 !ch[1505]
			//ポポン
			Message(56,"さっき、シリンダーさんに","デートに誘われてしまいましたわ","","");
			Message(56,"悪い人ではないのですが、","私はちょっと…","","");
			Message(56,"マジ勘弁してくれってカンジだぜ","","","");

			//パリン
			Message(0,"え？","","","");

			//ポポン
			Message(56,"な、何でもございませんわ。","オホホ","","");
		}
		if (!ch[1513] && ch[1505])
		{
			//▼ラッシー戦終了後(ホーム復興イベント) !ch[1513]
			//ポポン
			Message(56,"白金の珍しい","メダルを全て集めた時……","","");
			Message(56,"何かが起きるらしいですわ","","","");
		}
		if (!ch[1571] && ch[1513])
		{
			//▼クリーム戦終了後 !ch[1571]
			//ポポン
			Message(56,"ホームのオバケ以外にも","壺に封じ込めることが","できる者がいるはずですわ","");
		}
		if (!ch[1538] && ch[1571])
		{
			//▼王子戦終了後 !ch[1538]
			//ポポン
			Message(56,"真に全てが終わった時……","","","");
			Message(56,"その時こそパリンさん。","一緒に遊びましょうね","","");
			Message(56,"お約束した私自慢の","武器もお見せしますわ","","");
		}
	}
	ch[400] = -1;
}
#EndScript

// 012:ＮＰＣパリン
#Script:01310
int main()
{
	KaguTest(12000,59);
	ch[420] = 87;
	KaguTest(12002,59);
	ch[420] = 2;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,59);
}
#EndScript

// 012:ＮＰＣパリン
#Script:01311
int main()
{
	ch[400] = 59;
	KaguTest(99993,0);
	if (!ch[1545])
	{
		//▼兄たま誘拐後&&ドリル入手後 !ch[1545]
		//パリン
		Message(59,"たまにはサボって、","こう立ち尽くしてるのも","悪くないわね","");
	}
	if (!ch[2330] && ch[1545])
	{
		//▼王子と四天王登場後 !ch[2330]
		//パリン
		Message(59,"うう、立ちっぱなしで","足が痛くなってきたわ","","");
		Message(59,"ファン姉やディスクさんも","なかなか大変なのね","","");
	}
	if (!ch[507] && ch[2330])
	{
		//▼襲撃後・３オバケ発見後 !ch[507]
		//パリン
		Message(59,"モトロにペンキ塗って","じーちゃんに会えばって","言ったけど……","");
		Message(59,"姿は見えても話すことは","できないかもしれないわね","","");
	}
	if (!ch[1542] && ch[507])
	{
		//▼ボブー戦終了後 !ch[1542]
		//パリン
		Message(59,"遺跡というと、","うちの両親を思い出すわ","","");
		Message(59,"今頃、何してるのかな","","","");
	}
	if (!ch[1505] && ch[1542])
	{
		//▼モスビー戦終了後 !ch[1505]
		//パリン
		Message(59,"ポポンってプレーンおばさんの","姪なのよね","","");
		Message(59,"やっぱりウワサ好きなの？","","","");
	}
	if (!ch[1513] && ch[1505])
	{
		//▼ラッシー戦終了後(ホーム復興イベント) !ch[1513]
		//パリン
		Message(59,"そろそろ代わる？","","","");
		Message(59,"ピメントマウンテンは","その服じゃ、ツライかもね","","");
	}
	if (!ch[1571] && ch[1513])
	{
		//▼クリーム戦終了後 !ch[1571]
		//パリン
		Message(59,"何だって、ケーキの盗み食いで","借金を背負わなきゃなんないのよ！","","");
		Message(59,"みんな、ひどいよね～","","","");
	}
	if (!ch[1538] && ch[1571])
	{
		//▼王子戦終了後 !ch[1538]
		//パリン
		Message(59,"プクとピノたちの","故郷を奪った犯人って","結局シリンダーさんなのよね","");
		Message(59,"ちゃんと気づいた？","","","");
		Message(59,"でも、シリンダーさんも","悪気があったワケじゃないし、","むずかしい世の中よね","");
	}
	
	SelStart(50);
	SelText("交代する",1);
	SelText("交代しない",2);
	SelEnd();
	
	if (ch[50] == 1)
	{
		// チェンジ
		Black(0,100,15);
		Wait(20);
		KaguTest(20070,0);
//		ch[2501] = 0;
		ch[3957] = 0;
		ReloadChar();
		LoadMapB(12);
		Black(0,0,15);
		Wait(15);
	}
	else
	{
		// 非チェンジ
	}
	ch[400] = -1;
}
#EndScript

// 109裏：門番会話
#Script:01312
int main()
{
	ch[400] = 58;
	ch[258]++;

	KaguTest(12004,58);
	if (ch[420] != 98)
	{
		// ルーチン変更
		KaguTest(12000,58);
		ch[420] = 98;
		KaguTest(12002,58);
		ch[420] = 58;
		ch[421] = 15;
		KaguTest(20044,42);
	}

	{
		ch[302] = 1;
		// マップによって変える
		int map;
		KaguTest(20010,0);
		map = ch[420];
		
		if (map == 109)
		{
			// 遺跡裏１
			if (ch[2041])
			{
				// クリア済み
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
			}
			else
			{
				// 初番人
				if (ch[258] < 2)
				{
					//番人
					Message(58,"先に進まんと欲するならば、","汝の猛き力…見せてみよ！","","");
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"先に進まんと欲するならば、","汝の猛き力…見せてみよ！","","");
					}
					else
					{
						//番人
						Message(58,"先に進まんと欲するならば、","汝の猛き力…見せてみよ！","","");
						Message(58,"……もしかして分からぬのか？","","","");
						Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");
						
						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);
								//番人
								Message(58,"これでは先が思いやられるべ","","","");
								Message(58,"必殺技だべ、必殺技。","何でもいいから見せてみるべ","","");
							}
						}
						else
						{
							//番人
							Message(58,"先に進まんと欲するならば、","汝の猛き力…見せてみよ……","","");
						}
					}
				}
				ch[420] = 58;
				ch[421] = 2;
				KaguTest(20044,1);
			}
		}
		if (map == 114)
		{
			// 遺跡裏２
			string kotae;
			kotae = "ひらけいも";
			switch(ch[2078])
			{
			case 0:
				kotae = "ひらけいも";
				break;
			case 1:
				kotae = "じゃがいも";
				break;
			case 2:
				kotae = "さつまいも";
				break;
			case 3:
				kotae = "とろろいも";
				break;
			case 4:
				kotae = "いしやきいも";
				break;
			}
			
			if (ch[2040])
			{
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
			}
			else
			{
				// 初番人
				if (ch[258] < 2 || ch[300])
				{
					Message(58,"扉を開けんと欲するならば、","我らの合言葉をとなえよ","","");
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"扉を開けんと欲するならば、","我らの合言葉をとなえよ","","");
					}
					else
					{
						//番人
						Message(58,"扉を開けんと欲するならば、","我らの合言葉をとなえよ","","");
						Message(58,"……もしかして分からぬのか？","","","");
						Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");

						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
								ch[400] = -1;
								return 0;
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);
								//番人
								Message(58,"毎度ありだべ","","","");
								Message(58,"きちんとドクロたちの","言葉を聞けば分かるはずだべ","","");
								Message(58,"ちなみに合言葉は変わることが","あるから気をつけるべ","","");
								Message(58,"今の合言葉は","確か《"+kotae+"》のはずだべ","","");
								ch[400] = -1;
								ch[300] = 1;
								return 0;
							}
						}
						else
						{
							//番人
							Message(58,"扉を開けんと欲するならば、","我らの合言葉をとなえよ","","");
						}
					}
				}
				string type;
				type = Type(600);
				if (strcmp(type,kotae) == 0)
				{
					SE(950);
					//番人
					Message(58,"『"+type+"』……","正解だべ！","","");
					Message(58,"さぁ、先に進むが良いべ","","","");

					SaveCamera();
										
					Event(302);
					Wait(30);
					Camera(-1,0,0,0);
					RestoreCamera();
					CrossFade();
					ch[2040] = 1;
					CharPos(59,-200000,0,0);
					CharPos(60,-200000,0,0);
					CharPos(61,-200000,0,0);
					CharPos(62,-200000,0,0);
					CharPos(63,-200000,0,0);
					CharPos(64,-200000,0,0);
				}
				else
				{
					if (strcmp(type,"未入力") == 0)
					{
						//番人
						Message(58,"もう一度出直してくるがよい","","","");
					}
					else
					{
						//番人
						Message(58,"『"+type+"』……","残念だが、不正解だ","","");
						Message(58,"もう一度出直してくるがよい","","","");
					}
				}
			}

		}
		if (map == 506)
		{
			if (ch[2044])
			{
				// クリア済み
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
			}
			else
			{
				if (ch[308])
				{
					// クリアチェック
					if (ch[309])
					{
						// 壊してる
						//番人
						Message(58,"おろか者、燭台を壊してはならぬ……","出直してくるがいい","","");
						ch[400] = -1;
						return 0;
					}
					if (ch[300] && ch[301] && ch[302] && ch[303] && ch[304] && ch[305] && ch[306] && ch[307])
					{
						// クリア
						SE(950);
						//番人
						Message(58,"全ての燭台に明かりが灯ったようだな。","それじゃ、先へ進むがいいべ","","");
						ch[2044] = 1;
						Event(302);
						Wait(30);
						ch[400] = -1;
						return 0;
					}
				}
				if (ch[258] < 2)
				{
					//番人
					Message(58,"先へ進まんと欲するならば、","全ての燭台に明かりを灯すべし","","");
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"先へ進まんと欲するならば、","全ての燭台に明かりを灯すべし","","");
					}
					else
					{
						//番人
						Message(58,"先へ進まんと欲するならば、","全ての燭台に明かりを灯すべし","","");
						Message(58,"……もしかして分からぬのか？","","","");
						Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");
						Message(58,"それとも、￥５０００で","扉を開いてやってもいいが","どうするべ？","");

						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("￥５０００を払う",3);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);
								//番人
								Message(58,"毎度ありだべ","","","");
								Message(58,"ドリルが触れたら燭台を壊してしまうべ。","必殺技で火をつけるんだべ","","");
							}
						}
						if (ch[50] == 3)
						{
							if (GetGP() < 5000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 5000);
								SE(893);
								//番人
								Message(58,"毎度ありだべ","","","");
								ch[2044] = 1;
								Event(302);
								Wait(30);
								//番人
								Message(58,"さぁ、先に進むが良いべ","","","");
							}
						}
						if (ch[50] != 1 && ch[50] != 3)
						{
							//番人
							Message(58,"先へ進まんと欲するならば、","全ての燭台に明かりを灯すべし……","","");
						}
					}
				}
				// 飾台の火を消す
				KaguTest(20060,-1);
				ch[300] = 0;
				ch[301] = 0;
				ch[302] = 0;
				ch[303] = 0;
				ch[304] = 0;
				ch[305] = 0;
				ch[306] = 0;
				ch[307] = 0;
				ch[308] = 1;
			}
		}
		if (map == 507)
		{
			// 遺跡裏１
			if (ch[2042])
			{
				// クリア済み
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
			}
			else
			{
				KaguTest(20059,0);
				if (ch[2043] && (ch[420] == 1 || ch[420] == 11))
				{
					// クリア
					SE(950);
					//番人
					if (ch[420] == 11)
					{
						Message(58,"１１……うーむ。","深読みしすぎだが","まぁいいだろう","");
						Message(58,"よし、この先に進むがいいべ","","","");
					}
					else
					{
						Message(58,"どうやら条件を満たしたようだな。","よし、この先に進むがいいべ","","");
					}
					Event(302);
					ch[2042] = 1;
					ch[400] = -1;
					return 0;
				}
				if (ch[258] < 2)
				{
					//番人
					Message(58,"汝の持つ九十九の価値を","水に遊ぶ白き翼と同じくせん","","");
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"汝の持つ九十九の価値を","水に遊ぶ白き翼と同じくせん","","");
					}
					else
					{
						//番人
						Message(58,"汝の持つ九十九の価値を","水に遊ぶ白き翼と同じくせん","","");
						Message(58,"……もしかして分からぬのか？","","","");
						Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");
						Message(58,"それとも、￥５０００で","扉を開いてやってもいいが","どうするべ？","");

						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("￥５０００を払う",3);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);

								//番人
								Message(58,"これはそれほど","難しくないと思うべ","","");
								Message(58,"クリティカルの数値を","湖のほとりにある白鳥ボートの","番号に合わせればオッケーだべ","");
								Message(58,"敵を攻撃したり、物を壊したりして","クリティカル値を調整するべ","","");
							}
						}
						if (ch[50] == 3)
						{
							if (GetGP() < 5000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 5000);
								SE(893);
								//番人
								Message(58,"毎度ありだべ","","","");
								Event(302);
								ch[2042] = 1;
								Wait(30);
								//番人
								Message(58,"さぁ、先に進むが良いべ","","","");

								ch[400] = -1;
								return 0;
							}
						}
						if (ch[50] != 1 && ch[50] != 3)
						{
							Message(58,"汝の持つ九十九の価値を","水に遊ぶ白き翼と同じくせん…","","");
						}
					}
				}
				ch[2043] = 1;
				// クリアチェック
				if (ch[420] == 1 || ch[420] == 11)
				{
					Message(58,"…………………………","","","");
					Message(58,"どうやら、すでに","条件を満たしているようだな","","");
					Message(58,"先に進むがいいべ","","","");
					Event(302);
					ch[2042] = 1;
				}
			}
		}
		if (map == 210)
		{
			if (ch[2045])
			{
				// クリア済み
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
			}
			else
			{
				if (!ch[2046])
				{
					// 初回
					//番人
					Message(58,"う～ん、次の問題は","どうしたもんだべかな……","","");
					Message(58,"ネタを考えるのも結構大変だべ","","","");
					//パリン
					Message(0,"ぶつぶつ言ってないで","さっさとここの扉を開けてよ","","");
					//番人
					Message(58,"ハッ、いつの間に来ただべか？","","","");
					Message(58,"ゴホン！","簡単に開けるわけにはいかないべ！","","");
					Message(58,"…先へ進まんと欲するならば、","我の心楽しませる者、連れてくるべし","","");
					ch[2046] = 1;
					ch[420] = 58;
					ch[421] = 2;
					KaguTest(20044,2);
					ch[400] = -1;
					return 0;
				}
				if (ch[258] < 2)
				{
					Message(58,"先へ進まんと欲するならば、","我の心楽しませる者、連れてくるべし","","");
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"先へ進まんと欲するならば、","我の心楽しませる者、連れてくるべし","","");
					}
					else
					{
						//番人
						Message(58,"先へ進まんと欲するならば、","我の心楽しませる者、連れてくるべし","","");
						Message(58,"……もしかして分からぬのか？","","","");
						Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");

						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);
								//番人
								Message(58,"毎度ありだべ","","","");
								Message(58,"オバケの力を封じ込める壺が","ドクからもらえるはずだべ","","");
								Message(58,"その壺に面白そうなオバケを","封じ込めて、ここへ連れてくるべ","","");
							}
						}
						else
						{
							//番人
							Message(58,"先へ進まんと欲するならば、","我の心楽しませる者、連れてくるべし……","","");
						}
					}
				}
				ch[2046] = 1;
				ch[420] = 58;
				ch[421] = 2;
				KaguTest(20044,2);
			}
			
		}
		if (map == 211)
		{
			if (ch[2047])
			{
				//番人
				Message(58,"オッケー、さっさと","この先に進んじまってくれ","","");
				Message(58,"さっすがドリルの継承者。","シビれるぜ、ベイビー！","","");
			}
			else
			{
				// クリアチェック
				KaguTest(20008,0);
				if ((ch[2501] == 0 && ch[430] == 41) ||
					(ch[2501] == 1 && ch[430] == 56) ||
					(ch[2501] == 2 && ch[430] == 57) ||
					(ch[2501] == 3 && ch[430] == 61) ||
					(ch[2501] == 4 && ch[430] == 37) ||
					(ch[2501] == 5 && ch[430] == 40) ||
					ch[2501] > 5 )
				{
					ch[2047] = 1;
				}
				
				
				if (ch[2048] && ch[2047])
				{
					SE(950);
					//番人
					Message(58,"ハッハー、その服装、","なかなかキメてるじゃないか！","","");
					Message(58,"確かに確認したぜ。","この先に進んでもオッケーだぜ","","");
					Event(302);
					ch[400] = -1;
					return 0;
				}
				ch[2048] = 1;
				
				if (ch[258] < 2)
				{
					//番人
					Message(58,"先へ進まんと欲するならば、","汝の装い正して我にのぞまん","","");
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
//						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"その出で立ちでは認められん","","","");
						Message(58,"先へ進まんと欲するならば、","汝の装い正して我にのぞまん","","");
					}
					else
					{
						//番人
						Message(58,"その出で立ちでは認められん","","","");
						Message(58,"先へ進まんと欲するならば、","汝の装い正して我にのぞまん","","");
						Message(58,"……もしかして分からないのかい？","","","");
						Message(58,"ベイビー、仕方がないな。","￥１０００でヒントを教えてやるぜ","","");

						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);

								//番人
								Message(58,"汝の装い正して…とは","要するに着てる服をばっちり","キメりゃオッケーってことだぜ","");
								Message(58,"ちなみに服に合わせて","頭もコーディネートしないと","本当のオシャレとは言えないぜ","");
								Message(58,"わかったかい、ベイビー","","","");
							}
						}
						else
						{
							//番人
							Message(58,"先へ進まんと欲するならば、","汝の装い正して我にのぞまん","","");
						}
					}
				}

				// クリアチェック
				if (ch[2047])
				{
					//番人
					Message(58,"ふむ、そのいでたち…","すでに装いを正しているようだな","","");
					Message(58,"ハッハー！","先に進んじまってオッケーだぜ！","","");
					Event(302);
				}
			}
		}
		if (map == 608)
		{
			if (ch[2049])
			{
				//クリア済み
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
			}
			else
			{
				if (ch[258] < 2)
				{
					//番人
					Message(58,"先へ進まんと欲するならば、","己が存在を両足で我が頭上に示せ…","","");
					// 箱を降らせる
					SaveCamera();
					ch[420] = 1103;
					ch[421] = -1360;
					ch[422] = 422;
					ch[423] = 322;
					ch[424] = -682;
					ch[425] = 70;
					KaguTest(30019,1);
					CrossFade();
					Wait(15);
//					ch[420] = 100000;
//					ch[427] = 0;
//					KaguTest(30015,1);
					ch[421] = 0;
					KaguTest(30034,0);
					CharPos(ch[420],225,-450,450);
					Wait(45);
					KaguTest(30019,0);
					RestoreCamera();
					CrossFade();
				}
				else
				{
					if (ch[258] < 3)
					{
						//番人
						Message(58,"どうした？","もう一度言うぞ","","");
						Message(58,"先へ進まんと欲するならば、","己が存在を両足で我が頭上に示せ…","","");
					}
					else
					{
						//番人
						Message(58,"先へ進まんと欲するならば、","己が存在を両足で我が頭上に示せ…","","");
						Message(58,"……もしかして分からぬのか？","","","");
						Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");

						SelStart(50);
						SelText("￥１０００を払う",1);
						SelText("払わない",2);
						SelEnd();
						
						if (ch[50] == 1)
						{
							if (GetGP() < 1000)
							{
								// 足りない
								Mes("Ｃａｓｈが足りません。");
							}
							else
							{
								SetGP(GetGP() - 1000);
								SE(893);
								//番人
								Message(58,"毎度ありだべ。","これはそれほど難しくないべ","","");
								Message(58,"ジャンプして我が頭の","上に立てばいいことだべ","","");
							}
						}
						else
						{
							//番人
							Message(58,"先へ進まんと欲するならば、","己が存在を両足で我が頭上に示せ…","","");
						}
					}
				}
				ch[420] = 58;
				ch[421] = 2;
				KaguTest(20044,3);
			}
		}
		if (map == 607)
		{
			if (ch[2050])
			{
				// クリア済み
				if (ch[2050] == 1)
				{
					// 必殺技で倒した
					// 罵倒
					switch(rand() % 3)
					{
						//番人
					case 0:
						Message(58,"あーあ、力任せに","倒せばいいというワケじゃないべ","","");
						break;
					case 1:
						//番人
						Message(58,"前の持ち主はもっと","華麗に戦えるヤツだったべ","","");
						break;
					case 2:
						//番人
						Message(58,"まだまだだべな","","","");
						Message(58,"華麗に戦えるようになれば","戦いも楽しくなるはずだべ","","");
						break;
					}
					// 敵を出す
					// いなかったら出現
					// 死んでたら復活
					KaguTest(30025,1);
					KaguTest(30122,ch[420]);
					if (ch[420])
					{
						// 復活
						KaguTest(30021,1);
						
						ch[420] = 0;
						ch[421] = 450;
						ch[422] = 150;
						KaguTest(30123,1);
						KaguTest(30025,1);
						ch[421] = ch[420];
						ch[420] = 30;
						KaguTest(30120,ch[421]);
						ch[400] = -1;
						ch[301] = 0;
						return 0;
					}
					// 出現
					int x;
					int y;
					int z;
					KaguTest(30025,1);
					GetCharPos(ch[420],x,y,z);
					if (x > -20000)
					{
						ch[400] = -1;
						return 0;
					}
					ch[420] = 100000;
					ch[427] = 0;
					KaguTest(30015,1);
					ch[420] = 58;
					ch[421] = 2;
					KaguTest(20044,4);
					ch[420] = 0;
					ch[421] = 450;
					ch[422] = 150;
					KaguTest(30123,1);
					KaguTest(30025,1);
					ch[421] = ch[420];
					ch[420] = 30;
					KaguTest(30120,ch[421]);
					ch[301] = 0;
				}
				else
				{
					//番人
					Message(58,"さぁ、先に進むが良いべ","","","");
				}
				ch[400] = -1;
				return 0;
			}
			if (ch[258] < 2)
			{
				//番人
				Message(58,"汝の華麗なる戦いを","我の両まなこに焼き付けん","","");
				// 敵を出す
				SaveCamera();
				ch[420] = -714;
				ch[421] = -337;
				ch[422] = 370;
				ch[423] = 4;
				ch[424] = 426;
				ch[425] = 70;
				KaguTest(30019,1);
				CrossFade();
				Wait(15);
				ch[420] = 100000;
				ch[427] = 0;
				KaguTest(30015,1);
				Wait(45);
				KaguTest(30019,0);
				RestoreCamera();
				CrossFade();
				KaguTest(30025,1);
				ch[421] = ch[420];
				ch[420] = 30;
				KaguTest(30120,ch[421]);
				ch[301] = 0;
			}
			else
			{
				if (ch[258] < 3)
				{
					//番人
					Message(58,"汝の華麗なる戦いを","我の両まなこに焼き付けん","","");
					Message(58,"先へ進みたければ","この謎を解いてもらう他に道はない","","");
				}
				else
				{
					//番人
					Message(58,"汝の華麗なる戦いを","我の両まなこに焼き付けん","","");
					Message(58,"……もしかして分からぬのか？","","","");
					Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");

					SelStart(50);
					SelText("￥１０００を払う",1);
					SelText("払わない",2);
					SelEnd();
					
					if (ch[50] == 1)
					{
						if (GetGP() < 1000)
						{
							// 足りない
							Mes("Ｃａｓｈが足りません。");
						}
						else
						{
							SetGP(GetGP() - 1000);
							SE(893);
							//番人
							Message(58,"毎度だべ","","","");
							Message(58,"華麗なる戦い……","普通に戦うのではなく","かっこいい戦いを見せてほしいべ","");
							Message(58,"ヒントは『技』だべ","","","");
						}
					}
					else
					{
						//番人
						Message(58,"汝の華麗なる戦いを","我の両まなこに焼き付けん","","");
					}
				}
				// ボール死んでたら復活させる
				KaguTest(30025,1);
				KaguTest(30122,ch[420]);
				if (ch[420])
				{
					// 復活
					KaguTest(30021,1);
					ch[420] = 0;
					ch[421] = 450;
					ch[422] = 150;
					KaguTest(30123,1);
					KaguTest(30025,1);
					ch[421] = ch[420];
					ch[420] = 30;
					KaguTest(30120,ch[421]);
					ch[400] = -1;
					ch[301] = 0;
					return 0;
				}
			}
			ch[420] = 58;
			ch[421] = 2;
			KaguTest(20044,4);
		}
		if (map == 310)
		{
			if (ch[2051])
			{
				// クリア済み
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
				ch[400] = -1;
				return 0;
			}
			
			if (ch[258] < 2 || ch[200])
			{
				//番人
				Message(58,"我ら番人の中にはただ１人","相いれない者がまじっている","","");
				Message(58,"その者がいる場所を示すがよい","","","");
			}
			else
			{
				if (ch[258] < 3)
				{
					//番人
					Message(58,"我ら番人の中にはただ１人","相いれない者がまじっている","","");
					Message(58,"先へ進みたければ","その者がいる場所を示すがよい","","");
				}
				else
				{
					//番人
					Message(58,"我ら番人の中にはただ１人","相いれない者がまじっている","","");
					Message(58,"その者がいる場所を示すがよい","","","");
					Message(58,"……もしかして分からぬのか？","","","");
					Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");
					Message(58,"それとも、￥５０００で","扉を開いてやってもいいが","どうするべ？","");

					SelStart(50);
					SelText("￥１０００を払う",1);
					SelText("￥５０００を払う",3);
					SelText("払わない",2);
					SelEnd();
					
					if (ch[50] == 1)
					{
						if (GetGP() < 1000)
						{
							// 足りない
							Mes("Ｃａｓｈが足りません。");
						}
						else
						{
							SetGP(GetGP() - 1000);
							SE(893);

							//番人
							Message(58,"毎度ありだべ","","","");
							Message(58,"番人には１人だけ兄さんが……","いや、口調が違うのがいるはずだべ","","");
							Message(58,"その番人がいる場所を","教えてくれればオッケーだべ","","");
							Message(58,"ヒントはスピナ洞窟だべ","","","");

//							ch[200] = 1;
							ch[400] = -1;
							return 0;
						}
					}
					if (ch[50] == 3)
					{
						if (GetGP() < 5000)
						{
							// 足りない
							Mes("Ｃａｓｈが足りません。");
						}
						else
						{
							SetGP(GetGP() - 5000);
							SE(893);
							//番人
							Message(58,"毎度ありだべ","","","");
							Event(302);
							ch[2051] = 1;
							Wait(30);
							//番人
							Message(58,"さぁ、先に進むが良いべ","","","");

							ch[400] = -1;
							return 0;
						}
					}
					if (ch[50] != 1 && ch[50] != 3)
					{
						//番人
						Message(58,"我ら番人の中にはただ１人","相いれない者がまじっている","","");
						Message(58,"その者がいる場所を示すがよい","","","");
					}
				}
			}
			string type;
			type = Type(600);
			if (strcmp(type,"くらやみくうどう") == 0)
			{
				SE(950);
				//番人
				Message(58,"……その通りだ。","よし、この先に進むがいい","","");
				Event(302);
				ch[2051] = 1;
				ch[400] = -1;
				return 0;
			}
			if (strcmp(type,"未入力") == 0)
			{
				//番人
				Message(58,"……全く分からないとは","話にならんな","","");
				Message(58,"もう一度出直してくるがいい","","","");
				ch[400] = -1;
				return 0;
			}
			Message(58,"……残念だが不正解だ","","","");
			if (ch[2048])
			{
				Message(58,"もう一度他の番人たちに","会ってるみるがいい","","");
				Message(58,"答えはおのずと分かるはずだ","","","");
			}
			else
			{
				//番人
				Message(58,"……ふむ、どうやら","お前はその番人にまだ","会ったことがないようだ","");
				Message(58,"会えば答えはおのずと分かるはずだ","","","");
			}
		}
		if (map == 311)
		{
			if (ch[2052])
			{
				//番人
				Message(58,"さぁ、先に進むが良いべ","","","");
				ch[400] = -1;
				return 0;
			}
			if (ch[258] < 2)
			{
				//番人
				Message(58,"先に進みたければ、","汝がもっとも食すものを我に示せ","","");
			}
			else
			{
				if (ch[258] < 3)
				{
					//番人
					Message(58,"どうした？","もう一度言うぞ","","");
					Message(58,"先に進みたければ、","汝がもっとも食すものを我に示せ","","");
				}
				else
				{
					//番人
					Message(58,"先に進みたければ、","汝がもっとも食すものを我に示せ","","");
					Message(58,"……もしかして分からぬのか？","","","");
					Message(58,"仕方ないべな。","￥１０００でヒントを教えるべ","","");

					SelStart(50);
					SelText("￥１０００を払う",1);
					SelText("払わない",2);
					SelEnd();
					
					if (ch[50] == 1)
					{
						if (GetGP() < 1000)
						{
							// 足りない
							Mes("Ｃａｓｈが足りません。");
						}
						else
						{
							SetGP(GetGP() - 1000);
							SE(893);

							//番人
							Message(58,"毎度だべ","","","");
							Message(58,"一番好きな食べ物を","そこで食べるだけだべ","","");
							Message(58,"言うまでもないけど","イチゴ……のことだべな","","");
						}
					}
					else
					{
						//番人
						Message(58,"先に進みたければ、","汝がもっとも食すものを我に示せ…","","");
					}
				}
			}
			ch[420] = 58;
			ch[421] = 2;
			KaguTest(20044,5);
		}

	}

	ch[400] = -1;
}
#EndScript

// 109裏：門番正解
#Script:01313
int main()
{
	// 正解した
	SaveCamera();

	Camera(58,0,1035,320);
	CrossFade();
	SE(950);
	Message(58,"しかと見せてもらったぞ。","さぁ、この先に進むがいいべ","","");
	Event(302);
	ch[2041] = 1;
	Wait(30);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
}
#EndScript

// 114裏：番人１～６
#Script:01314
int main()
{
	int x;
	x = ch[400];
	
	KaguTest(12004,x);
	if (ch[420] != 98)
	{
		// ルーチン変更
		KaguTest(12000,x);
		ch[420] = 98;
		KaguTest(12002,x);
		ch[420] = x;
		ch[421] = 15;
		KaguTest(20044,42);
	}
	
	if (ch[2040])
	{
		// クリア済み
		Message(58,"さぁ、先に進むが良いべ","","","");
	}
	else
	{
		string kotae;
		if (x == 59)
		{
			// 番人１　　４番目文字
			kotae = "い";
			switch(ch[2078])
			{
			case 0:
				kotae = "い";
				break;
			case 1:
				kotae = "い";
				break;
			case 2:
				kotae = "い";
				break;
			case 3:
				kotae = "い";
				break;
			case 4:
				kotae = "い";
				break;
			}
			Message(59,"合言葉は「"+kotae+"」だ。","続きは正面の私が知っている","","");
		}
		if (x == 60)
		{
			// 番人２　　１番目文字
			kotae = "ひ";
			switch(ch[2078])
			{
			case 0:
				kotae = "ひ";
				break;
			case 1:
				kotae = "じ";
				break;
			case 2:
				kotae = "さ";
				break;
			case 3:
				kotae = "と";
				break;
			case 4:
				kotae = "石";
				break;
			}
			Message(60,"合言葉の最初は「"+kotae+"」だ。","続きは正面の私が知っている","","");
		}
		if (x == 61)
		{
			// 番人３　　３番目文字
			kotae = "け";
			switch(ch[2078])
			{
			case 0:
				kotae = "け";
				break;
			case 1:
				kotae = "が";
				break;
			case 2:
				kotae = "ま";
				break;
			case 3:
				kotae = "ろ";
				break;
			case 4:
				kotae = "き";
				break;
			}
			Message(61,"合言葉は「"+kotae+"」だ。","続きは二つ隣の私が知っている","","");
		}
		if (x == 62)
		{
			// 番人４　　５番目文字
			kotae = "も";
			switch(ch[2078])
			{
			case 0:
				kotae = "も";
				break;
			case 1:
				kotae = "も";
				break;
			case 2:
				kotae = "も";
				break;
			case 3:
				kotae = "も";
				break;
			case 4:
				kotae = "も";
				break;
			}
			Message(62,"合言葉の最後は「"+kotae+"」だ","最初の合言葉は正面の隣の私が知っている","","");
		}
		if (x == 63)
		{
			// 番人５　　２番目文字
			kotae = "ら";
			switch(ch[2078])
			{
			case 0:
				kotae = "ら";
				break;
			case 1:
				kotae = "ゃ";
				break;
			case 2:
				kotae = "つ";
				break;
			case 3:
				kotae = "ろ";
				break;
			case 4:
				kotae = "や";
				break;
			}
			Message(63,"合言葉は「"+kotae+"」だ。","続きは斜め左前の私が知っている","","");
		}
		if (x == 64)
		{
			// 番人１
			Message(64,"合言葉を考えるのも大変だべ","","","");
		}
	}
	
	ch[400] = -1;
}
#EndScript

// 210裏:呼び出されたキャラチェック
#Script:01315
int main()
{
	int pt;
	
	if (ch[301] == 16)
	{
		// ポコが呼び出された
		ch[400] = 58;

		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,58);
		
		KaguTest(12004,16);
		pt = ch[420];
		KaguTest(12000,16);
		ch[420] = 7;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,ch[301]);
//		ch[420] = 3;
//		KaguTest(30064,16);
		Wait(15);
		
		Camera(58,1190,-450,370);
		CrossFade();
		Wait(15);
		
		SE(950);
		//番人
		Message(58,"お前が我の心を楽しませる者か？","","","");
		
		ch[424] = 340;
		ch[425] = 150;
		ch[426] = 12;
		KaguTest(30061,0);
		KaguTest(30060,0);
		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		Look(0,58);
		
		//パリン
		Message(0,"そうよ、わたしのイチオシよ","","","");

		ch[420] = 3;
		KaguTest(30064,16);
		Wait(25);
		ch[420] = 2;
		KaguTest(30064,16);
		CharPos(16,340,275,0);
		Look(16,58);
		Wait(15);
		//ポコ
		Message(16,"どうしたぽ？","僕のダンスを見ていくぽ","","");
		//番人
		Message(58,"ほうほう、確かに","","","");
		//パリン
		Message(0,"でしょ？","さあ、扉を開けてもらうわよ","","");
		//番人
		Message(58,"よかろう、先に進むがいいべ","","","");

		Camera(-1,0,0,0);
		ch[420] = 922;
		ch[421] = -19;
		ch[422] = 370;
		ch[423] = -127;
		ch[424] = 1;
		ch[425] = 70;
		KaguTest(30019,1);
		CrossFade();
		Wait(15);
		Event(302);
		Wait(30);
		KaguTest(30019,0);
		Camera(58,1190,-450,370);
		CrossFade();
		Wait(15);
		//ポコ
		Message(16,"？？？","","","");
		Message(16,"何だかわからないけど","疲れたからもう帰るぽ","","");
		ch[420] = 3;
		KaguTest(30064,16);
		Wait(15);

		CharPos(16,-200000,0,0);
		ch[2045] = 1;
		ch[420] = pt;
		KaguTest(12002,16);
		KaguTest(30019,0);
		Camera(-1,0,0,0);
		
		ch[400] = -1;
	}
	if (ch[301] != 16 && ch[301] != 0)
	{
		// 何かが呼び出された
		ch[400] = 58;

		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,58);
		
		KaguTest(12004,ch[301]);
		pt = ch[420];
		KaguTest(12000,ch[301]);
		ch[420] = 2;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,ch[301]);
		ch[420] = 1;
		KaguTest(30041,ch[301]);

		Wait(15);
		
		Camera(58,1190,-450,370);
		CrossFade();
		Wait(15);
		
		//番人
		Message(58,"お前が我の心を楽しませる者か？","","","");
		
		ch[424] = 340;
		ch[425] = 150;
		ch[426] = 12;
		KaguTest(30061,0);
		KaguTest(30060,0);

		Walk(ch[421],ch[422],ch[423]);
		Wait(ch[423]);
		Look(0,58);
		
		//パリン
		Message(0,"そうよ、わたしのイチオシよ","","","");

		ch[420] = 3;
		KaguTest(30064,ch[301]);
		Wait(25);
		ch[420] = 2;
		KaguTest(30064,ch[301]);
		CharPos(ch[301],340,275,0);
		Look(ch[301],58);
		Wait(15);

		if (ch[301] == 11)
		{
			//チャッキー
			Look(11,0);
			Message(11,"姉たん、僕の新作を聞いてよ","","","");
			Message(11,"番人さん、カンニンしてよ！","","","");

			Fill(2,0.8);
			ch[420] = -10000;
			ch[421] = -10000;
			ch[422] = 10000;
			ch[423] = 10000;
			KaguTest(20054,0);
			SE(473);
			Wait(60);
			Fill(0,0.0);
			ch[420] = -100000;
			ch[421] = -100000;
			ch[422] = -100000;
			ch[423] = -100000;
			KaguTest(20054,0);

			//パリン
			Message(0,"どう？","","","");

			//番人
			Message(58,"…………………………","","","");
			Message(58,"……まあ、いいだろう。","先に進むがいいべ","","");

			Look(11,58);
		}
		if (ch[301] == 7)
		{
			//イワオ
			Message(7,"イワオでがんす……","","","");
			Message(7,"はあ……ワシの悩みは体が","風化してきたことでがんす","","");
			Message(7,"若い頃はもっとつややかで","硬度のある岩肌だったがんす","","");
			Message(7,"ところがここ最近は","雨が降れば体にしみるし","風のせいで肌には細かい風紋が…","");

			//番人
			Message(58,"あー……何だか","暗くなってしまいそうだから","そのあたりでいいべ","");

			//パリン
			Message(0,"確かに今日は一段と","哀愁がただよっていたわね","","");

			//番人
			Message(58,"扉は開けるから","先に進むがいいべ","","");
		}
		if (ch[301] == 6)
		{
			//ピエール
			Message(6,"ボンジュ～ル。","今日はワタクシとフランソワの","出会いについてお話しましょう","");
			Message(6,"あの日は黄金色に染まった","イチョウの葉がロンドを","踊るかのごとく舞い落ちていました","");
			Message(6,"ワタクシが寄宿舎を出ますと","外は世界をあまねく照らさんとする","陽光に満ちて、そこはまるで……","");

			//番人
			Message(58,"あー……長くなりそうだから、","そのあたりでいいべ","","");

			//パリン
			Message(0,"そう？残念だわ","","","");

			//番人
			Message(58,"扉は開けるから","先に進むがいいべ","","");
		}
//		ch[420] = 2009;
//		ch[429] = 1;
//		KaguTest(30036,58);
//		Wait(30);

		Camera(-1,0,0,0);
		ch[420] = 922;
		ch[421] = -19;
		ch[422] = 370;
		ch[423] = -127;
		ch[424] = 1;
		ch[425] = 70;
		KaguTest(30019,1);
		CrossFade();
		Wait(15);
		Event(302);
		Wait(30);
		KaguTest(30019,0);
		Camera(58,1190,-450,370);
		CrossFade();
		Wait(15);

		if (ch[301] == 11)
		{
			//チャッキー
			Message(11,"？？？","","","");
			Message(11,"なんだかよくわからないけど","おやつの時間だから帰るよ","","");
		}
		if (ch[301] == 7)
		{
			//イワオ
			Message(7,"？？？","","","");
			Message(7,"なんだか今日は疲れてるでがんす。","もう帰らせてもらうでがんす","","");
		}
		if (ch[301] == 6)
		{
			//ピエール
			Message(6,"？？？","","","");
			Message(6,"何だかよくわかりませんが","そろそろティータイムなので","帰らせていただきますよ","");
		}

		ch[420] = 3;
		KaguTest(30064,ch[301]);
		Wait(15);
		CharPos(ch[301],-200000,0,0);

		ch[420] = pt;
		KaguTest(12002,ch[301]);
		ch[2045] = 1;
		
		Camera(-1,0,0,0);
		
		ch[400] = -1;
	}

	// ブラックビーンはあり得ない
}
#EndScript

// 210裏：番人設定
#Script:01316
int main()
{
	// ルーチン変更
	KaguTest(12000,58);
	ch[420] = 98;
	KaguTest(12002,58);
	ch[420] = 58;
	ch[421] = 15;
	KaguTest(20044,42);
	ch[420] = 58;
	ch[421] = 2;
	KaguTest(20044,2);
}
#EndScript

// 608裏：門番正解
#Script:01317
int main()
{
	// 正解した
	SaveCamera();

	Camera(58,125,-125,370);
	CrossFade();
	SE(950);
	Message(58,"しかと見せてもらったぞ。","さぁ、この先に進むがいいべ","","");
	Event(302);
	ch[2049] = 1;
	Wait(30);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
}
#EndScript

// 607裏：門番正解
#Script:01318
int main()
{
	// 正解した
	int a;
	if (ch[2050] && ch[302] != 42 && ch[302] != 38)
	{
		// 駄目
		return 0;
	}
	a = 0;
	if (ch[2050])
	{
		// 既に扉あいてる
		a = 1;
	}
	
	SaveCamera();

	WaitD(0);
	Camera(58,0,-205,370);
	CrossFade();
	SE(950);
	if (ch[302] == 42 || ch[302] == 38)
	{
		// 爆死させた
		if (ch[2050])
		{
			//番人
			Message(58,"おお、美しい！","まさに蝶のように舞い、","ハチのように刺す、だべ！","");
		}
		else
		{
			//番人
			Message(58,"おおお！！","","","");
			Message(58,"見事だべ、さすがに","ドリルの持ち主だけあるべ！","","");
			Message(58,"それでは扉を開けるから","気をつけて先に進むべ","","");
		}
		ch[2050] = 2;
	}
	else
	{
		// 必殺技で倒した
		//番人
		Message(58,"…うーむ、まだまだ","戦いの美学がなってないべ","","");
		Message(58,"ドリルの継承者ならもっと","美しく戦ってほしいものだべ","","");
		Message(58,"一応、扉は開けてやるべ","","","");
		ch[2050] = 1;
	}
	if (!a)
	{
		Event(302);
		Wait(30);
	}
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
}
#EndScript

// 311裏：門番正解
#Script:01319
int main()
{
	// 正解した
	SaveCamera();
	
	Camera(58,0,-205,370);
	CrossFade();
	Wait(15);
	SE(950);
	Wait(15);
	Message(58,"しかと見せてもらったぞ。","さぁ、この先に進むがいいべ","","");
	Event(302);
	ch[2052] = 1;
	Wait(30);
	
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
}
#EndScript

// 003:プラチナメダル取った
#Script:01320
int main()
{
	ch[2053] = 1;
	Wait(60);
	Message(0,"これがじーちゃんの言ってた","珍しいメダルね","","");
	Message(0,"じーちゃんに報告しに","行かなくちゃ","","");
}
#EndScript

// 601:扉近くのレバー引くと扉開く
#Script:01321
int main()
{
	TekiStop(1);
	SaveCamera();
	Wait(15);
	Camera(Door2C(5),3375,4835,1550);
	CrossFade();
	Wait(20);
	Event(240);
	Wait(30);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	ch[264] = 1;
	TekiStop(0);
}
#EndScript

// 604裏：立て札
#Script:01322
int main()
{
	KaguTest(30127,0);

	Message(0,"「３つの飾台が怪しい","s090怪盗Ｍ」","","");
	
	if (!ch[321])
	{
		ch[321] = 1;
		// 飾台見る
		PostScr(1037);
	}
}
#EndScript

// 603裏：レバー引いたら扉開く
#Script:01323
int main()
{
	SaveCamera();
	TekiStop(1);
	Wait(15);
	SE(950);
	Black(0,100,15);
	Blur(5,0,15);
	Wait(15);
	Camera(Door2C(1),-800,-3215,250);
	CrossFade();
	
		// 敵準備
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
	KaguTest(30025,1);
	int c;
	c = ch[420];
	int pt1;
	int pt2;
	int pt3;
	KaguTest(12004,c);
	pt1 = ch[420];
	KaguTest(12004,c+1);
	pt2 = ch[420];
	KaguTest(12004,c+2);
	pt3 = ch[420];
	KaguTest(12000,c);
	KaguTest(12000,c+1);
	ch[420] = 2;
	KaguTest(12005,c+2);
	ch[420] = 2;
	KaguTest(30064,c);
	KaguTest(30064,c+1);
	KaguTest(30064,c+2);
	
	TekiStop(0);
	Wait(15);
	Black(0,0,15);
	Wait(30);

	Event(300);
	
	Wait(30);

	// 敵が凍った敵を運んでくる
	Walk2(c,0,8,100);
	ch[429] = 1;
	KaguTest(30039,0);
	Walk2(c+1,0,8,100);
	ch[429] = 1;
	KaguTest(30039,0);
	Walk2(c+2,0,8,100);
	ch[429] = 1;
	KaguTest(30039,0);
	ch[420] = 0;
	ch[421] = 1;
	ch[422] = 5;
	KaguTest(12003,c);
	KaguTest(12003,c+1);
	ch[420] = 2;
	KaguTest(12003,c+2);
	ch[420] = 0;
	KaguTest(30113,c+2);
	Wait(120);
		// 凍った敵を下ろす
	ch[420] = 2011;
	ch[429] = 1;
	KaguTest(30036,c+1);
	ch[420] = 1;
	KaguTest(30041,c+2);
	Wait(15);
	Walk2(c,5,0,15);
	KaguTest(30039,0);
	Walk2(c+1,-5,0,15);
	KaguTest(30039,0);
	Wait(15);
	ch[420] = 2010;
	ch[429] = 1;
	KaguTest(30036,c);
		// パターン戻す
	ch[420] = 1;
	KaguTest(30113,c+2);
	ch[420] = 0;
	KaguTest(30041,c+2);
	ch[420] = 3;
	KaguTest(12005,c);
	KaguTest(12005,c+1);
	KaguTest(12005,c+2);
	ch[420] = pt1;
	KaguTest(12002,c);
	ch[420] = pt2;
	KaguTest(12002,c+1);
	ch[420] = pt3;
	KaguTest(12002,c+2);
	Wait(45);

	Black(0,100,15);
	Wait(15);
	TekiStop(1);
	Camera(-1,0,0,0);
	RestoreCamera();
	CrossFade();
	Wait(15);
	Black(0,0,15);
	Blur(5,120,15);
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 602裏：あたりに触れるとガンマンが出てくる
#Script:01324
int main()
{
	int x;
	int y;
	int z;

	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);

	TekiStop(1);
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);

	ch[420] = -2615;
	ch[421] = 7230;
	ch[422] = 916;
	ch[423] = -1670;
	ch[424] = 7210;
	ch[425] = 296;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);
	
	// 落下中かチェック
	GetCharPos(0,x,y,z);
	if (z < 400)
	{
		// 場所移動
		CharPos(0,-2400,7350,450);
	}
	
	// 敵のそのそ出てくる
	int c;
	int pt;
	KaguTest(30025,1);
	c = ch[420];
	KaguTest(12004,c);
	pt = ch[420];
	KaguTest(12000,c);
	
	Walk2(c,0,4,100);
	ch[429] = 0;
	KaguTest(30039,0);

		// カメラ
	ch[420] = -3303;
	ch[421] = 7568;
	ch[422] = 932;
	ch[423] = -1738;
	ch[424] = 7298;
	ch[425] = 296;
	KaguTest(30093,90);
	KaguTest(30019,14);
	
	ch[420] = c;
	KaguTest(30063,0);

	Wait(100);
	Look(c,0);
	ch[420] = 2009;
	ch[429] = 1;
	KaguTest(30036,c);
	KaguTest(30063,-1);
	Wait(60);
		// 銃構える
	ch[420] = 18;
	ch[421] = 1;
	ch[422] = 15;
	KaguTest(12003,c);
	Wait(30);
		// 銃撃つ（ルーチン作ってから）
	KaguTest(30119,c);
	Wait(60);

	// 後始末
	KaguTest(30019,0);
	CrossFade();
	Wait(15);
	
	TekiStop(0);
	
	ch[420] = pt;
	KaguTest(12002,c);
	ch[420] = 3;
	KaguTest(12005,c);
}
#EndScript

// 601裏：あたりに触れるとトゲボール隊スタンバイ
#Script:01325
int main()
{
	ch[420] = 9999;
	KaguTest2(30003,2,"tekiatari1");
	
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,1);
}
#EndScript

// 601裏：あたりに触れると中ボスがこうもりに乗ってやってくる
#Script:01326
int main()
{
	int c;
	int i;
	int pt[4];

	ch[420] = 9998;
	KaguTest2(30003,2,"tekiatari2");
	
	ch[420] = 100000;
	ch[427] = 7;
	KaguTest(30015,50);
	KaguTest(30015,51);
	KaguTest(30015,52);
	KaguTest(30015,53);
	KaguTest(30025,50);
	c = ch[420];
	for (i = 0;i < 4;i++)
	{
		KaguTest(12004,c + i);
		pt[i] = ch[420];
		KaguTest(12000,c + i);
		ch[420] = 2;
		KaguTest(30041,c + i);
		Look(c+i,0);
		KaguTest(12011,c + i);
		ch[420] = 2;
		KaguTest(12012,c + i);
	}

	Look(0,c);
	
	ch[420] = -3045;
	ch[421] = -806;
	ch[422] = -307;
	ch[423] = -4427;
	ch[424] = -1264;
	ch[425] = 20;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	ch[420] = -3086;
	ch[421] = -995;
	ch[422] = 216;
	ch[423] = -4520;
	ch[424] = -1256;
	ch[425] = -279;
	KaguTest(30093,75);
	KaguTest(30019,14);
	Wait(15);
	
	ch[420] = 2011;
	ch[429] = 0;
	ch[429] = 1;
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	KaguTest(30036,c+3);
	
	Wait(60);

	// 中ボス飛ぶ
	ch[420] = 2011;
	ch[429] = 1;
	KaguTest(30036,c+1);
	KaguTest(30036,c+2);
	KaguTest(30036,c+3);
	Walk2(c,24,0,30);
	Wait(2);
	ch[420] = 1;
	KaguTest(30041,c);
	KaguTest(30041,c+1);
	KaguTest(30041,c+2);
	KaguTest(30041,c+3);
	ch[421] = 20;
	ch[422] = 1;
	KaguTest(30037,c);
	Wait(8);
	ch[420] = 0;
	KaguTest(30041,c+1);
	KaguTest(30041,c+2);
	KaguTest(30041,c+3);
	Wait(20);
	
	// 後始末
	KaguTest(30019,0);
	CrossFade();
	Wait(15);

	for (i = 0;i < 4;i++)
	{
		ch[420] = 3;
		KaguTest(12005,c + i);
		ch[420] = pt[i];
		KaguTest(12002,c + i);
	}
}
#EndScript

// 309:火飾台消したら扉開く
#Script:01327
int main()
{
	ch[300] = 1;
	Wait(15);
	SE(950);
	Camera(Door2C(1),0,2825,350);
	CrossFade();
	Wait(20);
	Event(303);
	Wait(40);
	Camera(-1,0,0,0);
	CrossFade();
	ch[2074] = 1;
}
#EndScript

// 308裏：アタリ設定
#Script:01328
int main()
{
	KaguTest2(30014,3,"trance2");
	KaguTest2(30014,2,"trance3");
}
#EndScript

// ミニゲーム脱出
#Script:01329
int main()
{
	ch[2061] = 0;
	KaguTest(20057,0);
	Black(0,100,30);
	ch[3982] = 0;
	ch[2144] = 0;
	ch[2497] = 0;
	KaguTest(20010,0);
	int map;
	map = ch[420];
	Wait(30);
	LoadMap(map);
	KaguTest(12013,0);

	// マップに応じてデフォ位置、カメラ位置かえる	
	switch(map)
	{
	case 21:
		// 岩壊し
		CharPos(0,750,600,-150);
		Walk(-5,0,2);
		break;
	case 22:
		// レーザー避け
		CharPos(0,0,-900,0);
		Walk(0,5,2);
		break;
	case 23:
		// モグラタタキ
		CharPos(0,0,-1450,150);
		Walk(0,5,2);
		break;
	case 24:
		// サッカー
		CharPos(0,650,0,0);
		Walk(-5,0,2);
		break;
	default:
		// おかしい
		// 座標は０、０、０
		CharPos(0,0,0,0);
		Walk(0,5,2);
		break;
	}
	KaguTest(30057,0);
	Black(0,0,30);
}
#EndScript

// 012:ルックポイント2：ポスト
#Script:01330
int main()
{
	Message(0,"ママが手紙出すって言ってたけど、","あまりアテにならないのよね","","");
}
#EndScript

// 012:ルックポイント3：呪いの人形
#Script:01331
int main()
{
	Message(0,"……………………","","","");
	Message(0,"感じる……","視線を感じるわ","","");
	Message(0,"もしてかして、この人形？","","","");
}
#EndScript

// 012:ルックポイント4：ポスター
#Script:01332
int main()
{
	Message(0,"君も鉱山で働いてみないか？","鉱員募集中　時給￥８００から","","");
}
#EndScript

// 012:ルックポイント5：木箱（自宅前）
#Script:01333
int main()
{
	Message(0,"野菜が入ってるみたい……","","","");
}
#EndScript

// 012:ルックポイント6：STATION＋SHOP立て札
#Script:01334
int main()
{
	Message(0,"左手が駅、右手が商店街……","見たままね","","");
}
#EndScript

// 012:ルックポイント7：FULL＋DAY立て札
#Script:01335
int main()
{
	Message(0,"お店の看板みたいね","","","");
}
#EndScript

// 012:ルックポイント8：コックさん像
#Script:01336
int main()
{
	Message(0,"前に住んでいた街でも","この像があったような……","","");
	Message(0,"世界的に有名なコックなのかな？","","","");
}
#EndScript

// 012:ルックポイント9：トマト？木箱
#Script:01337
int main()
{
	Message(0,"トマトは嫌いなのよ！","","","");
}
#EndScript

// 012:ルックポイント10：ジャガイモ？木箱
#Script:01338
int main()
{
	Message(0,"このジャガイモ、芽が出てる……","気持ち悪いわね","","");
}
#EndScript

// 012:ルックポイント11：ガラクタ？木箱
#Script:01339
int main()
{
	Message(0,"何かの部品かな？","ごちゃごちゃしてて","何だかよくわからないわ","");
}
#EndScript

// 012:ルックポイント12：ポスト（研究室前）
#Script:01340
int main()
{
	Message(0,"人の家のポストを","のぞくのは良くないわよね","","");
}
#EndScript

// 012:ルックポイント13：ゴミ箱
#Script:01341
int main()
{
	Message(0,"何だか蹴飛ばしたくなるゴミ箱ね","","","");
}
#EndScript

// 012:ルックポイント14：奥の扉
#Script:01342
int main()
{
	Message(0,"……………………","","","");
	Message(0,"……壁なんか見ても面白くないわ","","","");
}
#EndScript

// 012:ルックポイント15：おくゴミ袋
#Script:01343
int main()
{
	Message(0,"におうわ……","近寄りたくないわね","","");
}
#EndScript

// 012:ルックポイント16：壷
#Script:01344
int main()
{
	Message(0,"ツボを見ると","割りたくなるのよね……","","");
}
#EndScript

// 012:ルックポイント17：サボテン
#Script:01345
int main()
{
	Message(0,"サボテンちくちく","","","");
}
#EndScript

// 003:大家の部屋ルックポイント1：かまど
#Script:01346
int main()
{
	Message(0,"少しなら料理できるわよ","ベーコンエッグが得意ね","","");
}
#EndScript

// 003:大家の部屋ルックポイント2：暖炉
#Script:01347
int main()
{
	Message(0,"かくれんぼするなら","やっぱりここかしら……","","");
}
#EndScript

// 003:大家の部屋ルックポイント3：壷
#Script:01348
int main()
{
	Message(0,"じーちゃんのヘソクリが","入ってたりして","","");
}
#EndScript

// 003:大家の部屋ルックポイント4：陳列棚
#Script:01349
int main()
{
	Message(0,"じーちゃんって一人暮らしなのに","何でこんなに食器があるんだろ？","","");
	Message(0,"コレクター？","","","");
}
#EndScript

// 003:大家の部屋ルックポイント5：下駄箱
#Script:01350
int main()
{
	Message(0,"この下駄箱、","全然クツが入ってないわ","","");
}
#EndScript

// 003:大家の部屋ルックポイント6：植物
#Script:01351
int main()
{
	Message(0,"ちゃんと日光に当てなきゃ","","","");
}
#EndScript

// 003:大家の部屋ルックポイント7：たんす
#Script:01352
int main()
{
	Message(0,"結構高そうなタンスね……","","","");
	Message(0,"……ばーちゃんのかな？","","","");
}
#EndScript

// 003:大家の部屋ルックポイント8：本棚
#Script:01353
int main()
{
	Message(0,"本がいっぱい！！","じーちゃんって勉強家だったのね","","");
	Message(0,"……と思ったら、","結構マンガがまじってるわ","","");
}
#EndScript

// 004:ファンの店ケーキ屋お菓子屋ルックポイント1：ケーキ棚
#Script:01354
int main()
{
	Message(0,"どれも、おいしそうね","","","");
}
#EndScript

// 004:ファンの店ケーキ屋お菓子屋ルックポイント2：カウンター蓄音機側
#Script:01355
int main()
{
	Message(0,"どこからどうみても","普通の蓄音機ね","","");
}
#EndScript

// 004:ファンの店ケーキ屋お菓子屋ルックポイント3：雑貨棚　左
#Script:01356
int main()
{
//	Message(0,"『究極のキャンディー』？","","","");
	Message(0,"……￥１００００００？","まあ買えない額じゃないわね","","");
}
#EndScript

// 004:ファンの店ケーキ屋お菓子屋ルックポイント4：陳列棚　→
#Script:01357
int main()
{
	Message(0,"見てたら、","おなかが空いてきたわ……","","");
}
#EndScript

// 004:ファンの店ケーキ屋お菓子屋ルックポイント5：樽
#Script:01358
int main()
{
	Message(0,"お酒みたいね。","材料に使うのかな？","","");
}
#EndScript

// 005:ディスクの店家具屋雑貨屋ディスカウントショップルックポイント1：棚左
#Script:01359
int main()
{
	Message(0,"飲み物と食器と……スコップ！？","","","");
	Message(0,"鉱山の街ならではのラインナップね","","","");
}
#EndScript

// 005:ディスクの店家具屋雑貨屋ディスカウントショップルックポイント2：棚中間
#Script:01360
int main()
{
	Message(0,"あ！　これは……","今はやりの変身セット！？","","");
	Message(0,"いつか絶対ゲットしてやるわ","","","");
}
#EndScript

// 005:ディスクの店家具屋雑貨屋ディスカウントショップルックポイント3：棚右
#Script:01361
int main()
{
	Message(0,"この棚はお薬みたい…","健康はなまるのわたしには","あまり縁がないわね","");
}
#EndScript

// 005:ディスクの店家具屋雑貨屋ディスカウントショップルックポイント4：トマト？＆ジャガイモ？
#Script:01362
int main()
{
	Message(0,"やっぱり野菜は安いわね……","","","");
}
#EndScript

// 005:ディスクの店家具屋雑貨屋ディスカウントショップルックポイント5：樽
#Script:01363
int main()
{
	Message(0,"このにおいって……","ひょっとして火薬？","","");
}
#EndScript

// 005:ディスクの店家具屋雑貨屋ディスカウントショップルックポイント6：レジスター
#Script:01364
int main()
{
	Message(0,"ここをこうやって","こうすると……","","");
	ch[400] = 5;
	Message(5,"何してるんだい？","","","");
	Message(0,"な、何もしてないわ。","レジを開けようなんて","考えたこともないわ","");
	ch[400] = -1;
}
#EndScript

// 026:何も無い２噴水広場ルックポイント1：噴水
#Script:01365
int main()
{
	Message(0,"キレイな場所ね……","","","");
}
#EndScript

// 026:何も無い２噴水広場ルックポイント2：岩壁？
#Script:01366
int main()
{
	Message(0,"ここからのぞいたら","別の世界が見えるかしら……","","");
	Message(0,"な～んちゃって！","","","");
}
#EndScript

// 026:何も無い２噴水広場ルックポイント3：岩窓？
#Script:01367
int main()
{
	Message(0,"おかしな壁ね。","遺跡の一部かしら……","","");
	Message(0,"あれ？","小さな文字で何か書いてある……","","");
	Message(0,"「がまがま～がま？」","","","");
	Message(0,"何だかワケがわからないわ","","","");
}
#EndScript

// 305:右側クリスタル壊したらディレイイベント呼び出し
#Script:01368
int main()
{
	ch[420] = 24;
	KaguTest(30042,411);
}
#EndScript

// 027:何も無い３後援ルックポイント2：鉄棒　低
#Script:01369
int main()
{
	Message(0,"低い鉄棒で前回りすると","足を着くタイミングが早くて","ビックリしたことない？","");
}
#EndScript

// 027:何も無い３後援ルックポイント3：鉄棒　中
#Script:01370
int main()
{
	Message(0,"これくらいの高さが丁度いいのかな？","","","");
}
#EndScript

// 027:何も無い３後援ルックポイント4：鉄棒　高
#Script:01371
int main()
{
	Message(0,"これはちょっと高すぎよね。","もっと大きくなってからでなきゃ","","");
}
#EndScript

// 027:何も無い３後援ルックポイント5：ベンチ②
#Script:01372
int main()
{
	Message(0,"ベンチプレスって","ベンチをプレスするのかな？","","");
	Message(0,"それともベンチで","プレスされるのかしら……","","");
}
#EndScript

// 305:右側岩壊れる
#Script:01373
int main()
{
	KaguTest(30121,109);
}
#EndScript

// 027:何も無い３後援ルックポイント7：ジャングルジム入り口
#Script:01374
int main()
{
	Message(0,"この頂上に立った時、","わたしはきっとキングになれるわ","","");
}
#EndScript

// 027:何も無い３後援ルックポイント8：滑り台上
#Script:01375
int main()
{
	Message(0,"なかなか立派な滑り台じゃない","","","");
}
#EndScript

// 027:何も無い３後援ルックポイント9：箱ブランコ
#Script:01376
int main()
{
	Message(0,"こういうブランコでも","結構ゆらせるものなのよ","","");
}
#EndScript

// 22:ドクドック家２ルックポイント1：顔モニター①
#Script:01377
int main()
{
	Message(0,"えっと、「相性占い」？","","","");
	Message(0,"なんだか面白そうね","","","");
	SelStart(50);
	SelText("相性占いをする",1);
	SelText("相性占いをしない",2);
	SelEnd();
	
	if (ch[50] != 1)
	{
		return 0;
	}

	Mes("名前を入力してください。");
	Wait(60);
	string txt;
	txt = Type(600);
	if (strcmp(txt,"未入力") == 0)
	{
		// エラー
		Message(0,"「入力エラーが発生しました」？","","","");
		Message(0,"何か名前を入れないと","駄目みたいね","","");
		return 0;
	}
	Mes("占いたい相手の名前を入力してください。");
	Wait(60);
	string txt2;
	txt2 = Type(600);
	if (strcmp(txt2,"未入力") == 0)
	{
		// エラー
		Message(0,"「入力エラーが発生しました」？","","","");
		Message(0,"何か名前を入れないと","駄目みたいね","","");
		return 0;
	}
	KaguTest2(10007,0,txt);
	KaguTest2(10007,1,txt2);
	KaguTest(13000,0);
	
	int a;
	if (ch[420] < 0)
	{
		ch[420] = -1 * ch[420];
	}
	a = ch[420] % 5;
	
	switch(a)
	{
	case 0://この機械駄目
		Message(0,"『明日は晴れになるでしょう』？","","","");
		Message(0,"……全然相性占いに","なってないじゃない！","","");
		break;
	case 1:// 二人はラブラブ
		Message(0,"『二人の前にはどんな障害も無意味。","二人は永遠にラブラブのまま","生きていけるでしょう』？","");
		Message(0,"……こんな恥ずかしいこと","よく考えられるわね","","");
		break;
	case 2:// 親友
		Message(0,"『二人の友情はもうゴッドクラス！","神の御業の前にはどんな敵も","ひれ伏すしかありません』？","");
		Message(0,"……よくわからないけど","とにかくすごいイイみたいね","","");
		break;
	case 3:// もうだめぽ
		Message(0,"『二人の間に生まれた小さな溝は","やがて大きな谷となり仲を引き裂くことも","あなたから相手の立場を考えてあげて』？","");
		Message(0,"……う～ん？","当然といえば当然よね","","");
		break;
	case 4:// これからこれから
		Message(0,"『二人の未来はきっとこれから！","悲観せずに常に頑張ることが大事です","そうすれば、いつかきっと……』？","");
		Message(0,"……ま、占いってこんなものよね","","","");
		break;
	}
	ch[420] = a;
}
#EndScript

// 22:ドクドック家２ルックポイント2：顔モニター②
#Script:01378
int main()
{
	Message(0,"「今日の運勢」？","","","");
	Message(0,"どうやら占いマシンみたいね","","","");
	
	SelStart(50);
	SelText("占いをする",1);
	SelText("占いをしない",2);
	SelEnd();
	
	if (ch[50] != 1)
	{
		return 0;
	}

	switch(rand() % 10)
	{
	case 0://大吉
	case 2:
	case 6:
	case 8:
		Message(0,"『あなたの運勢は大吉。","今日は大吉な一日を過ごせるでしょう』？","","");
		Message(0,"…やる気あるのかしら？","","","");
		break;
	case 1://大凶
		Message(0,"『あなたの今日の運勢は大凶。","笑って過ごして大凶をふっとばそう』？","","");
		Message(0,"そこはかとなく怒りが","こみ上げてくるのはなぜかしら…","","");
		break;
	case 3:
	case 4:
	case 5://吉
		Message(0,"『あなたの今日の運勢は吉。","可も無く不可も無く","平凡な一日となるでしょう』？","");
		Message(0,"……占いなんて","こんなものかしら","","");
		break;
	case 7:
	case 9:// 末吉
		Message(0,"『あなたの今日の運勢は小吉。","小さな幸せを大きな幸せに変えていけば","どんな運勢も大吉に』？","");
		Message(0,"これはイイことを","言ってる気もするわね……","だまされてるかしら？","");
		break;
	}
}
#EndScript

// 22:ドクドック家２ルックポイント3：顔モニター③
#Script:01379
int main()
{
	Message(0,"『霊子融合君５７６号ＡＸ改』？","","","");
	Message(0,"スゴそうな名前だけど","まだちゃんと動かないみたいね","","");
}
#EndScript

// 22:ドクドック家２ルックポイント4：メインコンピューター顔
#Script:01380
int main()
{
	Message(0,"なんだか不気味な顔ね","","","");
}
#EndScript

// 22:ドクドック家２ルックポイント5：筒①
#Script:01381
int main()
{
	Message(0,"何かの液体が入ってるみたいだけど","何なんだろ？","","");
}
#EndScript

// 22:ドクドック家２ルックポイント6：筒②
#Script:01382
int main()
{
	Message(0,"不気味な光を放っているわ","","","");
}
#EndScript

// 22:ドクドック家２ルックポイント7：筒③
#Script:01383
int main()
{
	Message(0,"この二つだけ他の筒より","大きいみたいね","","");
}
#EndScript

// 22:ドクドック家２ルックポイント8：筒④
#Script:01384
int main()
{
	Message(0,"イワオが入っても","十分そうな大きさね","","");
}
#EndScript

// 22:ドクドック家２ルックポイント9：機械①
#Script:01385
int main()
{
	Message(0,"何かの機械みたいだけど","よくわからないわ","","");
}
#EndScript

// 22:ドクドック家２ルックポイント10：機械②
#Script:01386
int main()
{
	Message(0,"『圧縮レーザー発生装置』？","","","");
	Message(0,"危険な香りがするわ……","","","");
}
#EndScript

// 22:ドクドック家２ルックポイント11：機械③
#Script:01387
int main()
{
	Message(0,"『運勢データベース保管庫』？","","","");
	Message(0,"データベースって何よ？","","","");
}
#EndScript

// 22:ドクドック家２ルックポイント12：機械④
#Script:01388
int main()
{
	Message(0,"メーターが振り切れてるけど","大丈夫なのかな？","","");
}
#EndScript

// 22:ドクドック家２ルックポイント13：機械５
#Script:01389
int main()
{
	Message(0,"これには電源が入ってないみたいね","","","");
}
#EndScript

// 22:ドクドック家２ルックポイント14：機械６
#Script:01390
int main()
{
	Message(0,"『霊子融合ジェネレータ』？","","","");
	Message(0,"むずかしい言葉ね","","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント1：像①
#Script:01391
int main()
{
	Message(0,"どこかの国の兵士の像みたいね","","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント2：像②
#Script:01392
int main()
{
	Message(0,"この像はやっぱり高いのかな？","","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント3：像③
#Script:01393
int main()
{
	Message(0,"どの像も同じに見えるわ","","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント4：像④
#Script:01394
int main()
{
	Message(0,"こんな物を家におく趣味って","よく分からないわね","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント5：絵（ポット）
#Script:01395
int main()
{
	Message(0,"有名な画家が描いたらしいけど","さっぱり理解できないわ","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント6：絵（町並み）
#Script:01396
int main()
{
	Message(0,"何だか吸い込まれそうな絵ね","","","");
}
#EndScript

// 23:ペケマンション家３ルックポイント7：絵（姫様）
#Script:01397
int main()
{
	Message(0,"どこかのお姫様の肖像画みたい","","","");
	Message(0,"なかなか美人ね","","","");
}
#EndScript

// 25:池何も無い１ルックポイント1：家の前
#Script:01398
int main()
{
	Message(0,"何か書いてある……","","","");
	Message(0,"『ここはぼくちんの別荘地なんダナ","s205ペケ』","","");
}
#EndScript

// 25:池何も無い１ルックポイント2：ベンチ
#Script:01399
int main()
{
	Message(0,"ペンキ塗りたてではないみたいね","","","");
}
#EndScript

// 305:上のクリスタル壊したらディレイイベントオン
#Script:01400
int main()
{
	ch[420] = 24;
	KaguTest(30042,412);
}
#EndScript

// 305:左のクリスタル壊したらディレイイベントオン
#Script:01401
int main()
{
	ch[420] = 24;
	KaguTest(30042,413);
}
#EndScript

// 305:上側岩壊れる
#Script:01402
int main()
{
	KaguTest(30121,110);
}
#EndScript

// 305:左側岩壊れる
#Script:01403
int main()
{
	KaguTest(30121,113);
}
#EndScript

// 203:岩カウンターパターンにする
#Script:01404
int main()
{
	int x;
	x = Lift2C(-1);
	
	if (ch[2498] > 990 && !ch[2059])
	{
		ch[2498] = 990;
	}
	
	ch[420] = 97;
	KaguTest(12002,x);
	ch[420] = 99;
	KaguTest(12010,x);
}
#EndScript

// 203:岩カウント終了。宝箱出す
#Script:01405
int main()
{
	SaveCamera();
	ch[2059] = 1;
	TekiStop(1);

	ch[420] = 15;
	ch[429] = 1;
	KaguTest(30036,0);
	Wait(30);
	
	ch[420] = -412;
	ch[421] = 2736;
	ch[422] = 2501;
	ch[423] = -1503;
	ch[424] = 2736;
	ch[425] = 2471;
	KaguTest(30019,1);
	CrossFade();
	int x;
	int y;
	int z;
	GetCharPos(0,x,y,z);
	KaguTest(30005,0);
	if (y < 1650 || ch[422] < 1650)
	{
		Black(0,100,7);
	}
	Wait(20);
	if (y < 1650 || ch[422] < 1650)
	{
		Black(0,0,7);
		Wait(20);
	}
	
	ch[2498] = 1000;
	Wait(10);
	SE(950);
	Wait(40);
	
	ch[420] = -565;
	ch[421] = 2745;
	ch[422] = 3045;
	ch[423] = -806;
	ch[424] = 4299;
	ch[425] = 2421;
	KaguTest(30019,1);
	CrossFade();
	Wait(20);

	int ln;
	ln = Takara2C(2060);
	CharPos(ln,-825,4350,2400);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);
	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);

	TekiStop(0);
}
#EndScript

// 103裏：橋壊すとツボ振ってくる
#Script:01406
int main()
{
	ch[420] = 0;
	KaguTest(30124,3726);
	if (ch[420])
	{
		KaguTest(30004,101);
	}
	ch[420] = 15;
	KaguTest(30042,381);
}
#EndScript

// 103裏：落ちてきたツボを止める
#Script:01407
int main()
{
	ch[420] = 0;
	KaguTest(30124,3726);
	if (ch[420])
	{
		KaguTest(30004,200);
		CharPos(ch[420],-750,450,75);
	}
}
#EndScript

// 共通：箱から手をはなすための空スクリプト
#Script:01408
int main()
{
	Wait(5);
}
#EndScript

// 315裏：骨落下音
#Script:01409
int main()
{
	ch[420] = 763;
	KaguTest(30100,0);
}
#EndScript

// 113:敵装備はがしチュートリアル
#Script:01410
int main()
{
	TekiStop(1);
	Message(0,"何か書いてある","","","");

	// チュートリアル表示
	KaguTest(10006,0);
	KaguTest(10007,7);
	KaguTest2(10009,0,"tute_11.bmp");
	ch[423] = 180;
	ch[424] = 42;
	ch[425] = 460;
	ch[426] = 438;
	ch[427] = 0;
	ch[428] = 0;
	ch[429] = 320;
	ch[430] = 452;
	ch[431] = 512;
	SE(399);
	KaguTest(10010,10);
	Wait(10);
	Message(0,"","","","");
	ch[420] = 0;
	KaguTest(10011,10);
	Wait(10);
	
	TekiStop(0);
}
#EndScript

//113 -> 115 
#Script:01411
int main()
{
	MapEvent(1);
	KaguTest2(20004,0,"@kagudai");
	Walk(0,8,20);
	Wait(20);
	Event(499);
}
#EndScript

// 308:トカロン飛んでる間待つスクリプト
#Script:01412
int main()
{
	KaguTest(30125,0);
}
#EndScript

// 102裏：掘削ポイント１壊す
#Script:01413
int main()
{
	Ksk(1);
}
#EndScript

// 203:掘削ポイント２消したら岩壊れる位置が変わる
#Script:01414
int main()
{
	ch[420] = 5;
	ch[421] = 1;
	ch[422] = 0;
	KaguTest(20069,14000865);
}
#EndScript

// 306:トカロン消す
#Script:01415
int main()
{
	KaguTest2(30014,0,"@tokaron");
	KaguTest2(30014,0,"@monyo");
	KaguTest2(30014,0,"@magicbelt1");
	KaguTest2(30014,0,"@magicbelt2");
}
#EndScript

// 607裏:メダルの宝箱
#Script:01416
int main()
{
	ch[396] = 1;
	
	TekiStop(1);
	
	Wait(15);
	
	SaveCamera();
	ch[420] = 575;
	ch[421] = 609;
	ch[422] = 370;
	ch[423] = 575;
	ch[424] = -438;
	ch[425] = 70;
	KaguTest(30019,1);
	CrossFade();
	Wait(15);

	int ln;
	ln = Takara2C(2611);
	CharPos(ln,575,-450,0000);
	SE(566);
	KaguTest(30018,ln);
	Wait(60);

	KaguTest(30019,0);	
	RestoreCamera();
	CrossFade();
	Wait(15);
	
	TekiStop(0);
}
#EndScript

// 503:掘削したら宝箱落ちてくる
#Script:01417
int main()
{
	ch[420] = Takara2C(3800);
	if (ch[420])
	{
		KaguTest(30004,101);
	}
}
#EndScript

// 006 -> 012
#Script:01418
int main()
{
	ch[3952] = 0;
	MapEvent(0);
	
	Black(0,100,15);
	Wait(15);
	Black(0,100,0);
	Event(110);
	Wait(5);
	Black(0,0,15);
	Walk(0,-8,15);
	Wait(15);
	
	MapEvent(1);
}
#EndScript

// 勲章使った
#Script:01419
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"これを持ってるだけで");
	KaguTest2(10008,1,"偉くなった気がするわ");
	
	KaguTest(10012,0);
}
#EndScript

// 605:605裏：共通、ビギナー時は地面動かさない
#Script:01420
int main()
{
	if (ch[455] == 1)
	{
		Event(326);
	}
}
#EndScript

// 家具説明：ラジカセ
#Script:01421
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ハデな色ね……");
	KaguTest2(10008,1,"だれが見てもポコのラジカセだわ");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：下駄箱
#Script:01422
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"すみにポコって書いてある…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：本棚
#Script:01423
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ダンスの本が入ってるみたい");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：コンポ
#Script:01424
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"やたらとボタンがついてる機械ね");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：蓄音機
#Script:01425
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"音楽好きなオバケといったら…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：テーブル
#Script:01426
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"なかなか良い木材を使ってるわね…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：帽子掛け
#Script:01427
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"帽子をかぶってるオバケといえば…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：鉢植え
#Script:01428
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"そこはかとなく高級な感じがする…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：ソファー
#Script:01429
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"むむ、本皮を使ってるわね…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：高級本棚
#Script:01430
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"高級な家具って重いのよ！");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：傘たて
#Script:01431
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"かわいらしい傘が入ってる…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：洋服箪笥
#Script:01432
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ずいぶん小さいタンスね。");
	KaguTest2(10008,1,"子供用かしら…");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：あひる
#Script:01433
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ぐわぐわっ！");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：車の模型
#Script:01434
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"男の子がよく持ってるわね");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：ぬいぐるみ
#Script:01435
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"…わたしのコレクションに");
	KaguTest2(10008,1,"加えてあげてもいいわよ");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：ちゃぶ台
#Script:01436
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"東洋モノだわ。");
	KaguTest2(10008,1,"引っくり返して使うのよね");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：桐の箪笥
#Script:01437
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"いいニオイがする木ね。");
	KaguTest2(10008,1,"東洋風のデザインだわ");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：石像
#Script:01438
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"誰よ、こんなもの盗まれたのは！");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：秘伝の書
#Script:01439
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"ミミズのような字が書いてあるわ…");
	KaguTest2(10008,1,"");
	
	KaguTest(10012,0);
}
#EndScript

// 家具説明：金魚鉢
#Script:01440
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"涼しげな感じがしていいわね。");
	KaguTest2(10008,1,"これも東洋のものなのかな？");
	
	KaguTest(10012,0);
}
#EndScript

// 開発室のキャラ設定
#Script:01441
int main()
{
	int x;
	int y;
	int z;
	int i;
	
	for (i = 58;i < 66;i++)
	{
		GetCharPos(i,x,y,z);
		if (x > -20000)
		{
			ch[420] = 2;
			KaguTest(12005,i);
			// 全員待機させる
			ch[420] = 2;
			ch[421] = 1;
			ch[422] = 5;
			KaguTest(12003,i);
			ch[420] = -1;
			Look(i,18);
			KaguTest(12002,i);
		}
	}
}
#EndScript

// 開発室用キャラ：ボブー
#Script:01442
int main()
{
	Look(58,0);
	Message(58,"ヘイ、ユーはグレートだゼ！","","","");
	Message(58,"そういえば知ってるかい？","","","");
	Message(0,"なによ？","","","");
	Message(58,"ぐるみんベンチマークは１日で作ったらしいゼ！","","","");
	Message(58,"マスター直前にいきなり言われたらしいゼ！","","","");
	Message(0,"へー","","","");
	Message(58,"ガハハハハ！！","","","");
	Look(58,18);
}
#EndScript

// 開発室用キャラ：モスビー
#Script:01443
int main()
{
	Look(59,0);
	Message(59,"６／ｗ＠ｓ４ｑ＠，","","","");
	Look(59,18);
}
#EndScript

// 開発室用キャラ：ラッシー
#Script:01444
int main()
{
	Look(60,0);
	Message(60,"シビれるわぁぁん","","","");
	Message(60,"そういえば知ってるかしら？","","","");
	Message(0,"なんなの？","","","");
	Message(60,"ぐるみんのメイン開発機のビデオカードが、","Ｍ社のＰ？？？？？？？らしいわぁん","","");
	Message(0,"なにそれ？","","","");
	Message(60,"だからプログラムを相当チューンして、","イー○６や英○６より動作が軽いらしいわぁん","","");
	Message(0,"？","","","");
	Message(60,"でも誰も信じてくれないらしいわぁぁん…","","","");
	Message(0,"残念！！","","","");
	Look(60,18);
}
#EndScript

// 開発室用キャラ：クリーム
#Script:01445
int main()
{
	Look(61,0);
	Message(61,"アンタ、なかなかやるじゃん","","","");
	Message(61,"そういえば知ってる？","","","");
	Message(0,"なに？","","","");
	Message(61,"主役が棒読みなのはワザトなんだってね","","","");
	Message(0,"私の声ね","","","");
	Message(61,"社内声優版のイメージに近づけるためらしいけど、","逆にシロウトっぽくしゃべるのはチョー難しいらしいじゃん","","");
	Message(0,"（ディレクターに平板な感じって注意されるのよね）","","","");
	Look(61,18);
}
#EndScript

// 開発室用キャラ：ロッキー
#Script:01446
int main()
{
	Look(62,0);
	Message(62,"ギィーーガァーー","","","");
	Look(62,18);
}
#EndScript

// 開発室用キャラ：王子
#Script:01447
int main()
{
	Look(63,0);
	Message(63,"……………………","","","");
	Message(0,"なんなのかしら","","","");
	Message(63,"最初１人","","","");
	Message(0,"えっ？","","","");
	Message(63,"半年後２人に","","","");
	Message(0,"？","","","");
	Message(63,"さらに半年後３人に","","","");
	Message(0,"？","","","");
	Message(63,"マスター５ヶ月前５人に…","","","");
	Message(0,"ああ！！","ぐるみんチームね","","");
	Look(63,18);
}
#EndScript

// 開発室用キャラ：トカロン
#Script:01448
int main()
{
	Look(64,0);
	Message(64,"ギャーギャー","","","");
	Look(64,18);
}
#EndScript

// 開発室用キャラ：ブラックビーン
#Script:01449
int main()
{
	Look(65,0);
	ch[265]++;
	if (ch[265] < 2)
	{
		Message(65,"ボスラッシュ制覇おめでとう","","","");
	}
	Message(65,"ボスラッシュ制覇記念に","ゲーム中のムービーを","見せてあげるよ","");
	Message(65,"好きなムービーを選んでね","","","");
	PostScr(699);
	Look(65,18);
}
#EndScript

// 605:赤色灯スライム代わりにイベント呼び出す
#Script:01450
int main()
{
	Event(301);
	KaguTest(30025,6);
	ch[421] = ch[420];
	ch[420] = 1000;
	KaguTest(30108,ch[421]);
}
#EndScript

// 026:噴水ピノヒント
#Script:01451
int main()
{
	if (!ch[2506])
	{
		// 森まだ
		ch[2056] = 1;
		
		ch[400] = 18;
		Look(18,0);
		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,18);
		Walk(1,8,25);
		Wait(30);
		Look(0,18);
		//ピノ
		Message(18,"姉たま！","","","");
		ch[400] = 118;
		Walk2(18,0,-16,30);
		Wait(10);
		Look(0,18);
		Look(18,0);
		Wait(10);
		Look(0,18);
		Look(18,0);
		Wait(10);
		Look(0,18);
		Look(18,0);
		
		ch[400] = 18;
		//パリン
		Message(0,"ピノ、こんなところで","何してるの？","","");
		//ピノ
		Message(18,"えへ、ちょっと探し物でしゅ","","","");
		//パリン
		Message(0,"そうなの？","ここは一体……","","");
		//ピノ
		Message(18,"ここはピノの","お気に入りの場所でしゅ","","");
		//パリン
		Message(0,"へえ、初めて来る場所だけど","落ち着けて、いいところね","","");
		//ピノ
		Message(18,"ここにある石像からは","不思議な力を感じるでしゅよ","","");
		//パリン
		Message(0,"石像？","","","");
		//ピノ
		Message(18,"こっちでしゅ","","","");

		ch[400] = 118;
		Walk2(18,-5,14,15);
		int x;
		int y;
		int z;
		GetCharPos(18,x,y,z);
		ch[420] = x - 5;
		ch[421] = y + 14;
		KaguTest(30070,18);
		ch[420] = 1;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,18);
		
		Black(0,100,15);
		Wait(15);
		Black(0,100,0);
		Wait(5);
		CharPos(0,-832,2160,0);
		CharPos(18,-1000,2009,0);
		Wait(5);
		ch[420] = -1085;
		ch[421] = 2225;
		KaguTest(30070,0);
		KaguTest(30070,18);

		Camera(0,211,2041,370);
		CrossFade();

		Black(0,0,15);
		Wait(15);
		
		ch[400] = 18;
		//ピノ
		Message(18,"兄たまが言うにはこの石像に","何かが封じられているみたいでしゅ","","");
		//パリン
		Message(0,"ふーん……","","","");
		Message(0,"（ドリルで壊しちゃダメかしら…）","","","");
		//ピノ
		Message(18,"それじゃ、ピノは","用事があるから先に行くでしゅ","","");
		//パリン
		Message(0,"うん、気をつけてね","","","");
	
		ch[400] = 118;
		ch[420] = -50;
		ch[421] = -1000;
		KaguTest(30070,18);
		Walk2(18,0,-16,30);
		Wait(15);
		ch[420] = 3;
		KaguTest(30064,18);
		Wait(15);
		CharPos(18,-200000,0,0);
		ch[400] = -1;

		//パリン
		Message(0,"…………………………","","","");
		Camera(-1,0,0,0);
	}
	if (ch[2506])
	{
		// 森済
		ch[2056] = 1;

		ch[400] = 18;
		Look(18,0);
		ch[420] = 15;
		ch[429] = 1;
		KaguTest(30036,18);
		Walk(1,8,25);
		Wait(30);
		Look(0,18);
		//ピノ
		Message(18,"姉たま！","","","");
		ch[400] = 118;
		Walk2(18,0,-16,30);
		Wait(10);
		Look(0,18);
		Look(18,0);
		Wait(10);
		Look(0,18);
		Look(18,0);
		Wait(10);
		Look(0,18);
		Look(18,0);
		
		ch[400] = 18;
		//パリン
		Message(0,"ピノ、まだホームに","帰ってなかったの？","","");
		//ピノ
		Message(18,"迷って疲れちゃったから","少しここで休んでいくでしゅ","","");
		Message(18,"ここはファントムも","いなくて安全でしゅよ","","");
		//パリン
		Message(0,"ふーん、落ち着けて","いいところね","","");
		//ピノ
		Message(18,"ここにある石像からは","不思議な力を感じるでしゅよ","","");
		//パリン
		Message(0,"石像？","","","");
		//ピノ
		Message(18,"こっちでしゅ","","","");
		
		ch[400] = 118;
		Walk2(18,-5,14,15);
		int x;
		int y;
		int z;
		GetCharPos(18,x,y,z);
		ch[420] = x - 5;
		ch[421] = y + 14;
		KaguTest(30070,18);
		ch[420] = 1;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,18);
		
		Black(0,100,15);
		Wait(15);
		Black(0,100,0);
		Wait(5);
		CharPos(0,-832,2160,0);
		CharPos(18,-1000,2009,0);
		Wait(5);
		ch[420] = -1085;
		ch[421] = 2225;
		KaguTest(30070,0);
		KaguTest(30070,18);
		
		Camera(0,211,2041,370);
		CrossFade();
		
		Black(0,0,15);
		Wait(15);

		ch[400] = 18;
		//ピノ
		Message(18,"兄たまが言うにはこの石像に","何かが封じられているみたいでしゅ","","");
		//パリン
		Message(0,"ふーん……","","","");
		Message(0,"（ドリルで壊しちゃダメかしら…）","","","");
		//ピノ
		Message(18,"それじゃ、ピノは今度こそ","ホームに帰るでしゅよ","","");
		//パリン
		Message(0,"うん、気をつけてね","","","");
	
		ch[400] = 118;
		ch[420] = -50;
		ch[421] = -1000;
		KaguTest(30070,18);
		Walk2(18,0,-16,30);
		Wait(15);
		ch[420] = 3;
		KaguTest(30064,18);
		Wait(15);
		CharPos(18,-200000,0,0);
		ch[400] = -1;

		//パリン
		Message(0,"…………………………","","","");
		Camera(-1,0,0,0);
	}

	KaguTest(10600,ch[1107]-2260);
	MMV(StageMMV(ch[420]));
			
	TekiStop(0);
	MapEvent(1);
	
	return 0;
}
#EndScript

// トカロン死に街
#Script:01452
int main()
{
	Wait2(500);
}
#EndScript

// ３０１立て札
#Script:01453
int main()
{
	Message(0,"「リフトで運べるぞ","s080怪盗Ｍ」？","","");
	Message(0,"なんのことかな？","","","");
}
#EndScript

// 113裏：くっさくするとジャンプポイントふっとばす
#Script:01454
int main()
{
	ch[420] = -200;
	ch[421] = 750;
	ch[422] = 385;
	KaguTest(30129,50);
}
#EndScript

// 113裏：くっさくするとジャンプポイントふっとばす
#Script:01455
int main()
{
	ch[420] = -200;
	ch[421] = 300;
	ch[422] = 385;
	KaguTest(30129,50);
}
#EndScript

// 113裏：くっさくするとジャンプポイントふっとばす
#Script:01456
int main()
{
	ch[420] = -200;
	ch[421] = -150;
	ch[422] = 385;
	KaguTest(30129,50);
}
#EndScript

//ほっかーうえいと
#Script:01457
int main()
{
	Wait2(125);
}
#EndScript

// 勲章使った
#Script:01458
int main()
{
	KaguTest(10006,0);//発言初期化
	
	KaguTest2(10008,0,"これを持ってるだけで");
	KaguTest2(10008,1,"危なくなった気がするわ");
	
	KaguTest(10012,0);
}
#EndScript


// デバッグ
#Script:04090	// ガラクタをプレイヤーからとバス
int main()
{
	GetCharPos(0,ch[420],ch[421],ch[422]);
	ch[422] = ch[422] + 50;
	ch[423] = 0;
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
	KaguTest(40004,0);
}
#EndScript

#Script:04091	// 人固める
int main()
{
	ch[420] = 13;
	ch[421] = 2;
	KaguTest(20044,7);
	ch[420] = 15;
	ch[421] = 2;
	KaguTest(20044,7);
	ch[420] = 58;
	ch[421] = 2;
	KaguTest(20044,7);
	ch[420] = 13;
	ch[421] = 3;
	KaguTest(20044,7);
	ch[420] = 15;
	ch[421] = 3;
	KaguTest(20044,7);
	ch[420] = 58;
	ch[421] = 3;
	KaguTest(20044,7);
}
#EndScript

#Script:04092	// 全敵絶対表示
int main()
{
	int i;
	for (i = 58;i < 92;i++)
	{
		ch[420] = -1;
		KaguTest(30051,i);
		KaguTest(12002,i);
		ch[420] = 2;
		ch[421] = 1;
		ch[422] = 5;
		KaguTest(12003,i);
	}
}
#EndScript

#Script:04093
int main()
{
//	Kabe("kb003");
	KaguTest2(30014,0,"@ClearORoot");
}
#EndScript

#Script:04094
int main()
{
	// 家具テストでムービー再生
	KaguTest(70002,0);
	Black(0,0,30);
}
#EndScript

#Script:04095
int main()
{
	// 家具テストでムービー再生
	KaguTest(70001,0);
	Black(0,0,30);
}
#EndScript
// 山下ここまで